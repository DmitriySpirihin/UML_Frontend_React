import{R as o,r as j,t as S,l as A,j as s,C as i,h as k,k as v,n as U,A as r,U as C,o as D,p as M,q as L,u as f}from"./index-BOw8323K.js";import{s as P}from"./TrainingData-BcK2uw3D.js";function $(){const[e,b]=o.useState("dark"),[c,x]=o.useState(0),[l,g]=o.useState("Guest"),[m,p]=o.useState("images/Ui/Guest.jpg"),[d,h]=o.useState(!0);return j.useEffect(()=>{async function u(){try{await k();const a=typeof window<"u"?!window.Telegram?.WebApp:!0;await v({mock:a});const{user:t,languageCode:y,colorScheme:T}=U();t?(r.isFirstStart&&(r.prefs[0]=y==="ru"?0:1,r.prefs[1]=T==="dark"?0:2),C.Init(t.id,t.username,t.photo_url),setTimeout(()=>g(t.username),1e3),setTimeout(()=>p(Array.isArray(t.photo_url)?t.photo_url[0]:t.photo_url),1e3)):(setTimeout(()=>g("guest"),1e3),setTimeout(()=>p("images/Ui/Guest.jpg"),1e3)),await D(),console.log(JSON.stringify(r.notify)),console.log(Telegram.WebApp.version);const w=Telegram.WebApp.platform;console.log(w),M(),L(),P(),setTimeout(()=>h(!1),1e3),setTimeout(()=>f("MainMenu"),2600)}catch(a){console.error("Initialization error:",a),setTimeout(()=>h(!1),1e3),setTimeout(()=>f("MainMenu"),2e3)}}u()},[]),o.useEffect(()=>{const u=S.subscribe(b),a=A.subscribe(t=>x(t==="ru"?0:1));return()=>{u.unsubscribe(),a.unsubscribe()}},[]),s.jsx(s.Fragment,{children:s.jsxs("div",{style:n(e).container,children:[s.jsx("img",{src:e==="dark"?"images/Ui/Main_Dark.png":"images/Ui/Main_Light.png",style:n(e).logo}),d&&s.jsx("div",{className:"spinner",children:s.jsx("style",{children:`.spinner {
                        margin-top: 20%;
                        border: 4px solid ${i.get("subText",e)};
                        border-top: 4px solid ${i.get("habitCardSkipped",e)};
                        border-radius: 50%;
                        width: 10vw;
                        height: 10vw;
                        animation: spinner 1.6s linear infinite;
                    }
                    @keyframes spinner {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }`})}),!d&&m&&s.jsx("img",{src:m,style:n(e).userPhoto}),s.jsx("h2",{style:n(e).mainText,children:l!==""?c===0?`Добро пожаловать в UltyMyLife ${l}`:`Welcome to UltyMyLife ${l}`:c===0?"Загружаю данные...":"Loading data..."})]})})}const n=e=>({container:{backgroundColor:i.get("background",e),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw"},logo:{width:"256px",objectFit:"contain",marginTop:"40%"},mainText:{marginTop:"10%",fontSize:"14px",color:i.get("subText",e)},userPhoto:{border:"4px solid "+i.get("border",e),boxShadow:"0px 0px 10px "+i.get("shadow",e),width:"10vw",height:"10vw",borderRadius:"50%",objectFit:"cover",marginTop:"20%"}});export{$ as default};
