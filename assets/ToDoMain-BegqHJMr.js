import{bj as Ve,A as I,y as _,j as e,d as ie,m as b,a0 as Ke,C as r,c9 as De,ah as Qe,ca as be,cb as xe,cc as We,cd as He,bc as Oe,ce as Ne,a_ as we,ag as je,cf as Xe,a6 as Ue,bJ as ce,a$ as qe,ae as _e,bo as Je,a3 as Fe,cg as Ze,ch as de,ab as et,t as tt,l as it,f as st,a5 as Re,ci as nt,cj as ot,ck as Me,cl as at,cm as lt,cn as Ie,co as rt,K as Be,g as dt,n as ct,cp as pt,bN as xt}from"./index-CpVNdywG.js";import{r as f}from"./recharts-k8ghPecL.js";import{S as Se}from"./ScrollPicker-LoTdY1_c.js";import ut from"./ToDoMetrics-C6zG71t4.js";import{H as gt}from"./HoverInfoButton-BegvxlPW.js";import"./MyAreaChart-2l1NQob6.js";import"./index-BR88Ph8F.js";const v=new Ve(null);async function ft(i,s,t,n,l,x,o,u,w,y,k="",C=!1,S=!1,P=!1){const z=Date.now(),L=new Date,E=()=>(L.setFullYear(d.getFullYear()+1),d.toISOString().split("T")[0]);I.todoList.push({id:z,name:(i??"").trim()||"Untitled",description:(s??"").trim(),difficulty:Number.isFinite(t)?t:0,priority:Number.isFinite(n)?n:0,category:(l??"").trim()||"General",icon:x??"task",isDone:!1,startDate:o&&typeof o=="string"&&!isNaN(Date.parse(o))?o:L.toISOString().split("T")[0],deadLine:u&&typeof u=="string"&&!isNaN(Date.parse(u))?u:E(),goals:Array.isArray(w)?[...w]:[],urgency:Number.isFinite(y)?y:0,result:k,isPinned:C,isHidden:S,isPending:P}),await _(),v&&v.next({type:"UPDATE_LIST"})}async function ht(i,s,t){const n=I.todoList.find(l=>l.id===i);n&&n.goals&&n.goals[s]&&(n.goals[s].aim=t,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function yt(i,s,t){const n=I.todoList.find(l=>l.id===i);n&&n.goals&&n.goals[s]&&(n.goals[s].result=t,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function bt(i,s){const t=I.todoList.find(n=>n.id===i);t&&(t.result=s,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function jt(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isPinned=!s.isPinned,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function mt(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isHidden=!s.isHidden,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function wt(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isPending=!s.isPending,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function Ct(i,s,t,n,l,x,o,u,w,y,k){const C=I.todoList.find(S=>S.id===i);C&&(C.name=s,C.description=t,C.difficulty=n,C.priority=l,C.category=x,C.icon=o,C.color=u,C.startDate=w,C.deadLine=y,C.note=k,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function vt(i){I.todoList=I.todoList.filter(s=>s.id!==i),await _(),v&&v.next({type:"UPDATE_LIST"})}async function St(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isDone=!s.isDone,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function Tt(i,s){const t=I.todoList.find(n=>n.id===i);t&&(t.goals||(t.goals=[]),t.goals.push({text:s,isDone:!1}),await _(),v&&v.next({type:"UPDATE_LIST"}))}async function kt(i,s,t){const n=I.todoList.find(l=>l.id===i);n&&n.goals&&n.goals[s]&&(n.goals[s].text=t,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function Dt(i,s){const t=I.todoList.find(n=>n.id===i);t&&t.goals&&(t.goals.splice(s,1),await _(),v&&v.next({type:"UPDATE_LIST"}))}async function Ft(i,s){const t=I.todoList.find(n=>n.id===i);t&&t.goals&&t.goals[s]&&(t.goals[s].isDone=!t.goals[s].isDone,await _(),v&&v.next({type:"UPDATE_LIST"}))}const ze=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],Le=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],It=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],Rt=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],Bt=({show:i,setShow:s,theme:t,lang:n,fSize:l,task:x})=>{const[o,u]=f.useState(x||{}),[w,y]=f.useState(!1),[k,C]=f.useState(""),[S,P]=f.useState(null),[z,L]=f.useState(!1),[E,O]=f.useState(""),[X,p]=f.useState({}),[A,R]=f.useState({}),[m,q]=f.useState(null),[M,N]=f.useState(""),[G,ne]=f.useState(!1),g=f.useRef(null),T=f.useRef(null),U=f.useRef(null);f.useEffect(()=>{x&&(u(x),O(x.result||"")),q(null),N(""),p({}),R({})},[x]),f.useEffect(()=>{i||(q(null),N(""),p({}),R({}),ne(!1))},[i]),f.useEffect(()=>{z&&g.current&&setTimeout(()=>g.current.focus(),300)},[z]);const K=o.goals?.length||0,J=o.goals?.filter(a=>a.isDone).length||0,oe=K===0?o.isDone?100:0:Math.round(J/K*100),c=pe(t,l,o.color),Z=async()=>{const a=!o.isDone;a&&!o.result&&L(!0),u(h=>({...h,isDone:a})),await St(o.id)},j=async()=>{(E.trim()||o.result)&&(await bt(o.id,E.trim()),u(a=>({...a,result:E.trim()}))),L(!1)},B=a=>{p(h=>({...h,[a]:!h[a]}))},Y=(a,h,F)=>{R($=>({...$,[`${a}-${h}`]:!0})),h==="text"&&N(F),h==="aim"&&N(F),h==="result"&&N(F)},te=async(a,h)=>{if(!o.goals)return;const F=M.trim(),$=o.goals[a],ee=[...o.goals];if(h==="text"){if(!F){window.confirm(n===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿ÑƒÑÑ‚ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ?":"Delete empty item?")&&await re(a);return}ee[a]={...$,text:F},await kt(o.id,a,F)}else h==="aim"?(ee[a]={...$,aim:F},await ht(o.id,a,F)):h==="result"&&(ee[a]={...$,result:F},await yt(o.id,a,F));u(ve=>({...ve,goals:ee})),R(ve=>({...ve,[`${a}-${h}`]:!1})),N("")},le=a=>{N(a)},V=(a,h)=>{R(F=>({...F,[`${a}-${h}`]:!1})),N("")},re=async a=>{const h=o.goals.filter((F,$)=>$!==a);u(F=>({...F,goals:h})),await Dt(o.id,a),q(null),N(""),p(F=>{const $={...F};return delete $[a],$}),R(F=>{const $={...F};return Object.keys($).forEach(ee=>{ee.startsWith(`${a}-`)&&delete $[ee]}),$})},Ce=async()=>{S==="main"?(await vt(o.id),s(!1)):typeof S=="number"&&await re(S),P(null)},D=async()=>{await Ct(o.id,o.name,o.description,o.difficulty,o.priority,o.category,o.icon,o.color,o.startDate,o.deadLine,o.note),y(!1)},Q=async a=>{if(!o.goals)return;const h=[...o.goals],$=!h[a].isDone;h[a]={...h[a],isDone:$},$&&!h[a].result&&p(ee=>({...ee,[a]:!0})),u(ee=>({...ee,goals:h})),await Ft(o.id,a)},se=async()=>{if(!k.trim())return;const a={text:k,aim:"",result:"",isDone:!1};u(h=>({...h,goals:[...h.goals||[],a]})),await Tt(o.id,k),C("")},Ye=(a,h,F)=>{a.key==="Enter"&&te(h,F),a.key==="Escape"&&V(h,F)};return e.jsx(ie,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(!1),style:c.backdrop}),e.jsxs(b.div,{initial:{y:"100%"},animate:{y:"0%"},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:c.modalContainer,children:[e.jsx(ie,{children:S!==null&&e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:c.warningOverlay,children:e.jsxs("div",{style:c.warningBox,children:[e.jsx(Ke,{size:40,color:"#F44336",style:{marginBottom:15}}),e.jsx("h3",{style:{color:r.get("mainText",t),margin:"0 0 10px 0"},children:n===0?"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹?":"Are you sure?"}),e.jsx("p",{style:{color:r.get("subText",t),textAlign:"center",marginBottom:20},children:n===0?"Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ.":"This action cannot be undone."}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%"},children:[e.jsx("button",{onClick:()=>P(null),style:c.cancelBtn,children:n===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("button",{onClick:Ce,style:c.confirmDeleteBtn,children:n===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ":"Delete"})]})]})})}),e.jsx(ie,{children:z&&e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:c.warningOverlay,children:e.jsxs("div",{style:c.resultModalBox,children:[e.jsxs("div",{style:c.resultModalHeader,children:[e.jsx(De,{size:32,color:o.color}),e.jsx("h3",{style:{color:r.get("mainText",t),margin:"10px 0 5px 0"},children:n===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Task Result"}),e.jsx("p",{style:{color:r.get("subText",t),fontSize:"14px",margin:0},children:n===0?"Ð§Ñ‚Ð¾ Ð²Ñ‹ ÑƒÐ·Ð½Ð°Ð»Ð¸ Ð¸Ð»Ð¸ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð»Ð¸?":"What did you learn or achieve?"})]}),e.jsx("textarea",{ref:g,value:E,onChange:a=>O(a.target.value),placeholder:n===0?"ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð´Ð°Ñ‡Ð¸...":"Describe the task completion result...",style:c.resultTextarea,rows:4}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%",marginTop:20},children:[e.jsx("button",{onClick:()=>{L(!1),O("")},style:c.skipBtn,children:n===0?"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ":"Skip"}),e.jsx("button",{onClick:j,style:c.saveResultBtn,children:n===0?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚":"Save Result"})]})]})})}),e.jsx("div",{style:c.dragArea,onClick:()=>s(!1),children:e.jsx("div",{style:c.dragHandle})}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"90vw",marginLeft:"5vw",justifyContent:"flex-end"},children:[!w&&e.jsx("div",{style:c.statusBadge(o.isDone),children:o.isDone?n===0?"Ð’Ð«ÐŸÐžÐ›ÐÐ•ÐÐž":"COMPLETED":n===0?"Ð’ ÐŸÐ ÐžÐ¦Ð•Ð¡Ð¡Ð•":"IN PROGRESS"}),G&&e.jsxs("div",{style:{...c.toolbar,width:"40vw"},children:[e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>P("main"),style:c.iconBtnRed,children:e.jsx(Qe,{size:16})}),e.jsx("div",{style:c.toolbarRight,children:w?e.jsx(b.div,{whileTap:{scale:.9},onClick:D,style:{...c.iconBtn,backgroundColor:"#09b038a2"},children:e.jsx(be,{size:16})}):e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>y(!0),style:c.iconBtn,children:e.jsx(xe,{size:16})})}),e.jsx(b.div,{whileTap:{scale:.9},onClick:Z,style:c.mainCheckbox(o.isDone),children:o.isDone&&e.jsx(We,{size:12,color:"#fff"})})]}),e.jsx("div",{style:c.toolbar,children:e.jsx(He,{onClick:()=>ne(a=>!a)})})]}),e.jsxs("div",{style:{overflowY:"scroll",overflowX:"hidden"},className:"no-scrollbar",children:[e.jsxs("div",{style:c.headerWrapper,children:[e.jsxs("div",{style:c.fixedHeader,children:[e.jsx("div",{style:c.headerLeft,children:e.jsx("div",{style:c.iconBadge,children:o.icon})}),e.jsx("div",{style:c.headerCenter,children:w?e.jsx("input",{type:"text",placeholder:n===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Name",value:o.name,onChange:a=>u({...o,name:a.target.value}),style:c.titleInput}):e.jsx("h2",{style:c.title,children:o.name})})]}),e.jsx("div",{style:c.headerRight,children:e.jsxs("div",{style:c.progressContainer,children:[e.jsxs("span",{style:c.progressText,children:[oe,"%"]}),e.jsx("div",{style:c.progressBarBg,children:e.jsx(b.div,{initial:{width:0},animate:{width:`${oe}%`},style:c.progressBarFill})})]})}),o.isDone&&o.result&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:c.resultDisplayCard,children:[e.jsxs("div",{style:c.resultDisplayHeader,children:[e.jsx(De,{size:18,color:o.color}),e.jsx("span",{style:c.resultDisplayTitle,children:n===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Task Result"}),e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>{O(o.result),L(!0)},style:c.editResultBtn,children:e.jsx(xe,{size:12})})]}),e.jsx("p",{style:c.resultDisplayText,children:o.result})]})]}),e.jsxs("div",{style:c.bodyPadding,children:[e.jsx("div",{style:c.gridTwo,children:w?e.jsxs(e.Fragment,{children:[e.jsx("select",{style:c.selectInput,value:o.priority,onChange:a=>u({...o,priority:parseInt(a.target.value)}),children:ze.map((a,h)=>e.jsx("option",{value:h,children:a[n]},h))}),e.jsx("select",{style:c.selectInput,value:o.difficulty,onChange:a=>u({...o,difficulty:parseInt(a.target.value)}),children:Le.map((a,h)=>e.jsx("option",{value:h,children:a[n]},h))})]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{icon:e.jsx(Oe,{}),label:n===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority",value:ze[o?.priority][n],color:It[o?.priority],theme:t}),e.jsx(Pe,{icon:e.jsx(Ne,{}),label:n===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",value:Le[o?.difficulty][n],color:Rt[o?.difficulty],theme:t})]})}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:w?e.jsx("textarea",{placeholder:n===0?"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ":"Description",value:o.description,onChange:a=>u({...o,description:a.target.value}),style:c.descriptionInput,rows:3}):e.jsx("p",{style:c.description,children:o.description||(n===0?"ÐÐµÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ":"No description")})}),e.jsxs("div",{style:c.dateRow,children:[e.jsx(Ee,{label:n===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start",value:o.startDate,icon:e.jsx(we,{}),isEditing:w,theme:t,onChange:a=>u({...o,startDate:a})}),e.jsx(Ee,{label:n===0?"Ð¡Ñ€Ð¾Ðº":"Deadline",value:o.deadLine,icon:e.jsx(je,{}),isEditing:w,theme:t,onChange:a=>u({...o,deadLine:a})})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsxs("div",{style:c.sectionHeader,children:[e.jsx(Xe,{style:{marginRight:"8px",color:o.color}}),n===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist",e.jsxs("span",{style:c.counterBadge,children:[J,"/",K]})]}),e.jsxs("div",{style:c.goalsContainer,children:[e.jsx(ie,{children:o.goals?.map((a,h)=>e.jsx(b.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},style:{marginBottom:8},children:e.jsx(zt,{goal:a,index:h,idx:h,isExpanded:X[h],onToggleExpand:B,onToggleComplete:Q,onDelete:()=>P(h),task:o,theme:t,lang:n,editingFields:A,onEditingTextChange:le,editingSubGoalText:M,onEditField:Y,onSaveField:te,onCancelEdit:V,onKeyDown:Ye,aimInputRef:h===m&&A[`${h}-aim`]?T:null,subGoalTextInputRef:h===m&&A[`${h}-text`]?U:null})},`goal-${h}`))}),e.jsxs("div",{style:c.addSubRow,children:[e.jsx(Ue,{style:{color:r.get("subText",t),marginRight:10}}),e.jsx("input",{type:"text",placeholder:n===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Add item...",value:k,onChange:a=>C(a.target.value),onKeyDown:a=>a.key==="Enter"&&se(),style:c.addSubInput}),k.length>0&&e.jsx("button",{onClick:se,style:c.addSubBtn,children:"OK"})]})]})]}),e.jsx("div",{style:{marginBottom:"560px"}})]})]})]})]})})},zt=({goal:i,index:s,idx:t,isExpanded:n,onToggleExpand:l,onToggleComplete:x,onDelete:o,task:u,theme:w,lang:y,editingFields:k,editingSubGoalText:C,onEditField:S,onSaveField:P,onCancelEdit:z,onKeyDown:L,aimInputRef:E,subGoalTextInputRef:O,onEditingTextChange:X})=>{const p=pe(w,null,u.color);r.get("simplePanel",w);const A=r.get("border",w);r.get("mainText",w);const R=r.get("subText",w);return e.jsxs("div",{style:{...p.subGoalCard,border:i.isDone?"2px solid #2ed177":`1px solid ${A}30`},children:[e.jsxs("div",{style:p.subGoalMainRow,children:[e.jsx("div",{onClick:()=>x(s),style:p.checkbox(i.isDone),role:"checkbox","aria-checked":i.isDone,children:i.isDone&&e.jsx(We,{size:10,color:"#2ed177"})}),e.jsx("div",{style:p.subGoalContent,children:k[`${s}-text`]?e.jsx("input",{ref:O,type:"text",value:C,onChange:m=>{},onKeyDown:m=>L(m,s,"text"),style:p.inlineEditInput,autoFocus:!0}):e.jsx("div",{onClick:()=>l(s),style:p.subGoalText(i.isDone),children:i.text})}),e.jsx("div",{style:p.subGoalActions,children:k[`${s}-text`]?e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>P(s,"text"),style:p.actionBtn,children:e.jsx(be,{size:12,color:u.color})}),e.jsx("div",{onClick:()=>z(s,"text"),style:{...p.actionBtn,color:R},children:e.jsx(ce,{size:12})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:m=>{m.stopPropagation(),S(s,"text",i.text)},style:p.actionBtn,children:e.jsx(xe,{size:12,color:R})}),e.jsx("div",{onClick:m=>{m.stopPropagation(),o()},style:p.actionBtn,children:e.jsx(ce,{size:12,color:R})}),e.jsx("div",{onClick:m=>{m.stopPropagation(),l(s)},style:p.expandBtn,children:n?e.jsx(qe,{size:12,color:R}):e.jsx(_e,{size:12,color:R})})]})})]}),e.jsx(ie,{children:n&&e.jsxs(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:p.expandedContent,children:[e.jsxs("div",{style:p.expandedField,children:[e.jsxs("div",{style:p.fieldHeader,children:[e.jsx(Je,{size:14,color:u.color}),e.jsx("span",{style:p.fieldTitle,children:y===0?"Ð¦ÐµÐ»ÑŒ Ð¿Ð¾Ð´Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Sub-goal Aim"})]}),k[`${s}-aim`]?e.jsxs("div",{style:p.editFieldRow,children:[e.jsx("input",{ref:E,type:"text",value:C,onChange:m=>X(m.target.value),onKeyDown:m=>L(m,s,"aim"),style:p.fieldEditInput,placeholder:y===0?"Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ñ‡ÑŒ?":"What needs to be achieved?",autoFocus:!0}),e.jsx("div",{onClick:()=>P(s,"aim"),style:p.saveFieldBtn,children:e.jsx(be,{size:12})}),e.jsx("div",{onClick:()=>z(s,"aim"),style:p.cancelFieldBtn,children:e.jsx(ce,{size:12})})]}):e.jsxs("div",{style:p.fieldDisplay,children:[i.aim?e.jsx("p",{style:p.fieldValue,children:i.aim}):e.jsx("p",{style:p.fieldPlaceholder,children:y===0?"Ð¦ÐµÐ»ÑŒ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½Ð°":"No aim specified"}),e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>S(s,"aim",i.aim||""),style:p.editFieldBtn,children:e.jsx(xe,{size:12})})]})]}),i.isDone&&e.jsxs("div",{style:p.expandedField,children:[e.jsxs("div",{style:p.fieldHeader,children:[e.jsx(De,{size:14,color:"#2ed177"}),e.jsx("span",{style:{...p.fieldTitle,color:"#2ed177"},children:y===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚":"Result"})]}),k[`${s}-result`]?e.jsxs("div",{style:p.editFieldRow,children:[e.jsx("textarea",{value:C,onChange:m=>X(m.target.value),onKeyDown:m=>L(m,s,"result"),style:{...p.fieldEditInput,minHeight:"60px"},placeholder:y===0?"Ð§Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚Ð¾?":"What was achieved?",autoFocus:!0}),e.jsx("div",{onClick:()=>P(s,"result"),style:p.saveFieldBtn,children:e.jsx(be,{size:12})}),e.jsx("div",{onClick:()=>z(s,"result"),style:p.cancelFieldBtn,children:e.jsx(ce,{size:12})})]}):e.jsxs("div",{style:p.fieldDisplay,children:[i.result?e.jsx("p",{style:p.fieldValue,children:i.result}):e.jsx("p",{style:p.fieldPlaceholder,children:y===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½":"No result specified"}),e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>S(s,"result",i.result||""),style:p.editFieldBtn,children:e.jsx(xe,{size:12})})]})]})]})})]})},Pe=({icon:i,label:s,value:t,color:n,theme:l})=>e.jsxs("div",{style:{...pe(l).modernBadge,backgroundColor:`${n}15`,border:`1px solid ${n}30`},children:[e.jsxs("div",{style:pe(l).badgeLabel,children:[i," ",e.jsx("span",{style:{marginLeft:6},children:s})]}),e.jsx("div",{style:{...pe(l).badgeValue,color:n},children:t})]}),Ee=({label:i,value:s,icon:t,isEditing:n,theme:l,onChange:x})=>{const o=pe(l);return e.jsxs("div",{style:o.dateItem,children:[e.jsx("div",{style:{color:r.get("subText",l),marginRight:10},children:t}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:o.label,children:i}),n?e.jsx("input",{type:"date",style:o.dateInput,value:s||"",onChange:u=>x(u.target.value)}):e.jsx("span",{style:o.dateValue,children:s||"-"})]})]})},pe=(i,s,t)=>{const n=r.get("background",i),l=r.get("simplePanel",i),x=r.get("mainText",i),o=r.get("subText",i),u=r.get("border",i),w=r.get("done",i);return{backdrop:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",zIndex:1e3},modalContainer:{position:"fixed",bottom:0,left:0,right:0,height:"90dvh",backgroundColor:n,borderTopLeftRadius:"32px",borderTopRightRadius:"32px",zIndex:2e3,display:"flex",flexDirection:"column",boxShadow:"0 -10px 40px rgba(0,0,0,0.5)",overflow:"hidden"},warningOverlay:{position:"absolute",inset:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},warningBox:{backgroundColor:l,borderRadius:24,padding:25,width:"100%",maxWidth:320,display:"flex",flexDirection:"column",alignItems:"center",border:`1px solid ${u}`},cancelBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:u,color:x,fontWeight:"bold"},confirmDeleteBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:"#F44336",color:"#fff",fontWeight:"bold"},resultModalBox:{backgroundColor:l,borderRadius:24,padding:25,width:"100%",maxWidth:400,display:"flex",flexDirection:"column",border:`1px solid ${u}`},resultModalHeader:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:15},resultTextarea:{width:"100%",padding:"12px",borderRadius:12,border:`1px solid ${u}`,backgroundColor:l,color:x,fontSize:"16px",resize:"vertical",fontFamily:"inherit"},skipBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:u,color:x,fontWeight:"bold"},saveResultBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:t,color:"#fff",fontWeight:"bold"},dragArea:{width:"100%",padding:"15px 0",display:"flex",justifyContent:"center"},dragHandle:{width:"40px",height:"5px",backgroundColor:u,borderRadius:"10px"},toolbar:{display:"flex",justifyContent:"space-between",padding:"0 24px 15px 24px",alignItems:"center"},iconBtn:{background:l,border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:x},iconBtnRed:{background:"rgba(244, 67, 54, 0.1)",border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:"#F44336"},saveBtn:{background:w,color:"#fff",border:"none",borderRadius:"12px",padding:"0 20px",fontWeight:"bold",display:"flex",alignItems:"center"},toolbarRight:{display:"flex",gap:8},headerWrapper:{padding:"0 24px 25px 24px",borderBottom:`1px solid ${u}`},fixedHeader:{display:"flex",alignItems:"center",padding:"20px 0",gap:20},headerLeft:{display:"flex",alignItems:"center",gap:12,flexShrink:0},mainCheckbox:y=>({width:32,height:32,borderRadius:8,border:`2px solid ${y?t:u}`,backgroundColor:y?t:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s ease"}),iconBadge:{width:56,height:56,borderRadius:16,fontSize:28,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${t}20`,border:`1px solid ${t}40`,flexShrink:0},headerCenter:{flex:1,display:"flex",flexDirection:"column",gap:8,minWidth:0},headerRight:{display:"flex",width:"100vw",alignItems:"center",flexShrink:0},title:{fontSize:24,fontWeight:900,color:x,margin:0,width:"70%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},titleInput:{width:"100%",border:"none",background:"transparent",fontSize:"24px",fontWeight:"900",color:x,outline:`solid 1px ${u}`,borderRadius:"12px",padding:"8px 12px"},statusBadge:y=>({padding:"8px 16px",borderRadius:12,fontSize:10,fontWeight:900,border:"none",backgroundColor:y?w:l,color:y?"#fff":o,width:"fit-content",marginRight:"auto"}),resultDisplayCard:{backgroundColor:`${t}10`,border:`1px solid ${t}30`,borderRadius:16,padding:"16px",marginTop:"16px"},resultDisplayHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},resultDisplayTitle:{fontSize:"14px",fontWeight:"700",color:t,flex:1},editResultBtn:{width:24,height:24,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:o,":hover":{backgroundColor:`${u}30`}},resultDisplayText:{fontSize:"14px",color:x,lineHeight:1.5,margin:0,whiteSpace:"pre-wrap"},progressContainer:{width:"90vw"},progressText:{fontSize:11,fontWeight:800,color:t,textAlign:"center"},progressBarBg:{width:"100%",height:6,backgroundColor:u,borderRadius:10,marginTop:4,overflow:"hidden"},progressBarFill:{height:"100%",backgroundColor:t,borderRadius:10},bodyPadding:{padding:24},gridTwo:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},modernBadge:{borderRadius:20,padding:15,display:"flex",flexDirection:"column",alignItems:"center"},badgeLabel:{display:"flex",alignItems:"center",fontSize:10,color:o,textTransform:"uppercase",letterSpacing:1},badgeValue:{fontSize:14,fontWeight:800,marginTop:4},dateRow:{display:"flex",gap:12,marginBottom:24},dateItem:{flex:1,display:"flex",alignItems:"center",backgroundColor:l,padding:12,borderRadius:16},dateInput:{background:"transparent",border:"none",color:x,fontSize:16,width:"100%",outline:"none"},label:{fontSize:9,color:o,textTransform:"uppercase"},dateValue:{fontSize:13,fontWeight:700,color:x},sectionHeader:{display:"flex",alignItems:"center",fontSize:17,fontWeight:800,color:x,marginBottom:15},counterBadge:{marginLeft:"auto",fontSize:11,backgroundColor:l,padding:"4px 10px",borderRadius:8,color:o},subGoalCard:{backgroundColor:l,borderRadius:16,overflow:"hidden",transition:"all 0.2s ease"},subGoalMainRow:{display:"flex",alignItems:"center",padding:"12px 14px",gap:10},checkbox:y=>({width:22,height:22,borderRadius:6,border:`2px solid ${y?t:u}`,backgroundColor:y?t:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",transition:"all 0.2s ease"}),subGoalContent:{flex:1,minWidth:0},subGoalText:y=>({fontSize:15,color:x,opacity:y?.6:1,textDecoration:y?"line-through":"none",cursor:"pointer",wordBreak:"break-word",lineHeight:1.4}),subGoalActions:{display:"flex",alignItems:"center",gap:4,flexShrink:0},expandBtn:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,cursor:"pointer",color:o,transition:"all 0.2s ease"},actionBtn:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,cursor:"pointer",color:o,transition:"all 0.2s ease"},expandedContent:{padding:"0 14px 16px 14px",borderTop:`1px solid ${u}30`},expandedField:{marginBottom:16},fieldHeader:{display:"flex",alignItems:"center",gap:6,marginBottom:8},fieldTitle:{fontSize:12,fontWeight:"700",color:o,textTransform:"uppercase"},fieldDisplay:{display:"flex",alignItems:"flex-start",gap:8,padding:"10px 12px",backgroundColor:`${l}80`,borderRadius:12,minHeight:"40px"},fieldValue:{flex:1,fontSize:14,color:x,margin:0,lineHeight:1.4,wordBreak:"break-word"},fieldPlaceholder:{flex:1,fontSize:14,color:o,opacity:.6,fontStyle:"italic",margin:0},editFieldBtn:{width:24,height:24,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:o,flexShrink:0,transition:"all 0.2s ease"},editFieldRow:{display:"flex",alignItems:"flex-start",gap:8},fieldEditInput:{flex:1,background:"transparent",border:`1px solid ${u}`,borderRadius:8,padding:"8px 12px",color:x,fontSize:16,outline:"none",fontFamily:"inherit",resize:"vertical"},saveFieldBtn:{width:28,height:28,borderRadius:8,backgroundColor:t,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},cancelFieldBtn:{width:28,height:28,borderRadius:8,backgroundColor:u,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},inlineEditInput:{flex:1,background:"transparent",border:`1px solid ${u}`,borderRadius:8,padding:"6px 10px",color:x,fontSize:16,outline:"none",fontFamily:"inherit",minWidth:0},addSubRow:{display:"flex",alignItems:"center",padding:"16px 15px",border:`2px dashed ${u}`,borderRadius:16,marginTop:8},addSubInput:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:x,outline:"none",marginLeft:"10px"},addSubBtn:{background:t,color:"#fff",border:"none",borderRadius:8,padding:"6px 12px",fontWeight:"bold",marginLeft:10,flexShrink:0},description:{fontSize:15,lineHeight:1.6,color:x,margin:0,opacity:.9},descriptionInput:{width:"90%",padding:"12px",borderRadius:12,border:`1px solid ${u}`,backgroundColor:l,color:x,fontSize:"16px",fontFamily:"inherit",resize:"vertical"},selectInput:{width:"100%",padding:12,borderRadius:12,border:`1px solid ${u}`,backgroundColor:l,color:x,fontSize:"16px"}}},ue=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],ge=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],fe=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],Te=[{icon:"ðŸ“",label:["ÐžÐ±Ñ‰ÐµÐµ","General"]},{icon:"ðŸ’¼",label:["Ð Ð°Ð±Ð¾Ñ‚Ð°","Work"]},{icon:"ðŸ ",label:["Ð”Ð¾Ð¼","Home"]},{icon:"ðŸ’ª",label:["Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ","Health"]},{icon:"ðŸ›’",label:["ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ¸","Shopping"]},{icon:"ðŸŽ“",label:["Ð£Ñ‡ÐµÐ±Ð°","Study"]},{icon:"âœˆï¸",label:["ÐŸÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ","Trip"]},{icon:"ðŸ’°",label:["Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹","Finance"]},{icon:"ðŸŽ¨",label:["Ð¥Ð¾Ð±Ð±Ð¸","Hobby"]},{icon:"ðŸ’»",label:["ÐšÐ¾Ð´","Coding"]},{icon:"ðŸŽ®",label:["Ð˜Ð³Ñ€Ñ‹","Games"]},{icon:"ðŸŽµ",label:["ÐœÑƒÐ·Ñ‹ÐºÐ°","Music"]},{icon:"ðŸ“š",label:["Ð§Ñ‚ÐµÐ½Ð¸Ðµ","Reading"]},{icon:"ðŸƒ",label:["Ð¡Ð¿Ð¾Ñ€Ñ‚","Sports"]},{icon:"ðŸ½ï¸",label:["Ð•Ð´Ð°","Food"]}],Lt=({theme:i,lang:s,fSize:t})=>{const[n,l]=f.useState(!1),[x,o]=f.useState(""),[u,w]=f.useState(""),[y,k]=f.useState(ue[1][s]),[C,S]=f.useState(ge[2][s]),[P,z]=f.useState(fe[1][s]),[L,E]=f.useState(0),[O,X]=f.useState(new Date().toISOString().split("T")[0]),[p,A]=f.useState(""),[R,m]=f.useState([]),[q,M]=f.useState("");f.useEffect(()=>{const T=Fe.subscribe(U=>l(U==="ToDoNew"));return()=>T.unsubscribe()},[]);const N=async()=>{if(!x.trim()){et(s===0?"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Enter name",2e3,!1);return}const T=ue.findIndex(Z=>Z.includes(y)),U=ge.findIndex(Z=>Z.includes(C)),K=fe.findIndex(Z=>Z.includes(P)),J=Te[L],oe=J.label[1],c=J.icon;await ft(x,u,U,T,oe,c,O,p,R,K),G()},G=()=>{de(null),setTimeout(()=>{o(""),w(""),m([]),M(""),k(ue[1][s]),S(ge[2][s]),z(fe[1][s]),X(new Date().toISOString().split("T")[0]),A(""),E(0)},300)},ne=()=>{q.trim()&&(m([...R,{text:q,isDone:!1}]),M(""))},g=Pt(i);return e.jsx(ie,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:G,style:g.backdrop}),e.jsxs(b.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:250},style:g.container,children:[e.jsx("div",{style:g.handleContainer,children:e.jsx("div",{style:g.handle})}),e.jsxs("div",{style:g.header,children:[e.jsx(b.button,{whileTap:{scale:.9},onClick:G,style:g.textBtn,children:s===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("span",{style:g.headerTitle,children:s===0?"ÐÐ¾Ð²Ð°Ñ Ñ†ÐµÐ»ÑŒ":"New Goal"}),e.jsx(b.button,{whileTap:{scale:.9},onClick:N,style:{...g.textBtn,color:r.get("done",i),fontWeight:"700"},children:s===0?"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ":"Create"})]}),e.jsxs("div",{style:g.scrollContent,className:"no-scrollbar",children:[e.jsx("div",{style:g.section,children:e.jsxs("div",{style:g.mainInputWrapper,children:[e.jsx("div",{style:g.largeIconDisplay,children:Te[L].icon}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:e.jsx("input",{type:"text",placeholder:s===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ†ÐµÐ»Ð¸...":"Goal Title...",value:x,onChange:T=>o(T.target.value),style:g.mainInput})})]})}),e.jsxs("div",{style:g.categorySection,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8,paddingLeft:5},children:[e.jsx(Ze,{size:12,color:r.get("subText",i),style:{marginRight:6}}),e.jsx("label",{style:g.label,children:s===0?"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ":"Category"})]}),e.jsx("div",{style:g.iconScrollContainer,children:Te.map((T,U)=>{const K=U===L;return e.jsxs(b.div,{whileTap:{scale:.9},onClick:()=>E(U),style:{...g.categoryChip,backgroundColor:K?r.get("highlitedPanel",i):"transparent",borderColor:K?"transparent":r.get("border",i)},children:[e.jsx("span",{style:{fontSize:"1.4rem"},children:T.icon}),K&&e.jsx(b.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},style:g.categoryLabel,children:T.label[s]})]},U)})})]}),e.jsx("div",{style:g.card,children:e.jsxs("div",{style:g.pickerRow,children:[e.jsxs("div",{style:g.pickerCol,children:[e.jsx("label",{style:g.label,children:s===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority"}),e.jsx(Se,{items:ue.map(T=>T[s]),value:y,onChange:k,theme:i,width:"100%"})]}),e.jsx("div",{style:g.divider}),e.jsxs("div",{style:g.pickerCol,children:[e.jsx("label",{style:g.label,children:s===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty"}),e.jsx(Se,{items:ge.map(T=>T[s]),value:C,onChange:S,theme:i,width:"100%"})]}),e.jsx("div",{style:g.divider}),e.jsxs("div",{style:g.pickerCol,children:[e.jsx("label",{style:g.label,children:s===0?"Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ":"Urgency"}),e.jsx(Se,{items:fe.map(T=>T[s]),value:P,onChange:z,theme:i,width:"100%"})]})]})}),e.jsxs("div",{style:g.dateSection,children:[e.jsx("div",{style:g.dateCard,children:e.jsxs("div",{style:g.dateRow,children:[e.jsx(we,{style:{marginRight:10,color:r.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:g.label,children:s===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start"}),e.jsx("input",{type:"date",style:g.dateInput,value:O,onChange:T=>X(T.target.value)})]})]})}),e.jsx("div",{style:g.dateCard,children:e.jsxs("div",{style:g.dateRow,children:[e.jsx(je,{style:{marginRight:10,color:r.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:g.label,children:s===0?"Ð¡Ñ€Ð¾Ðº":"Deadline"}),e.jsx("input",{type:"date",style:g.dateInput,value:p,onChange:T=>A(T.target.value)})]})]})})]}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:s===0?"Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ / ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ...":"Notes / Description...",value:u,onChange:T=>w(T.target.value),style:g.mainInput})}),e.jsxs("div",{style:g.subTaskContainer,children:[e.jsx("label",{style:g.sectionTitle,children:s===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist"}),e.jsxs("div",{style:g.addSubRow,children:[e.jsx("div",{style:g.subInputContainer,children:e.jsx("input",{type:"text",placeholder:s===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑˆÐ°Ð³...":"Add a step...",value:q,onChange:T=>M(T.target.value),style:g.subInput})}),e.jsx(b.div,{whileTap:{scale:.9},onClick:ne,style:g.addBtn,children:e.jsx(Ue,{style:{width:"100%",color:"#fff"}})})]}),e.jsx("div",{style:g.subList,children:e.jsx(ie,{children:R.map((T,U)=>e.jsxs(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0,padding:0},style:g.subItem,children:[e.jsx("div",{style:g.subDot}),e.jsx("span",{style:g.subText,children:T.text}),e.jsx("div",{onClick:()=>m(R.filter((K,J)=>J!==U)),children:e.jsx(ce,{style:{width:"100%",color:r.get("subText",i),cursor:"pointer"}})})]},U))})})]}),e.jsx("div",{style:{marginBottom:"100px"}})]})]})]})})},Pt=i=>{const s=r.get("background",i),t=r.get("simplePanel",i),n=r.get("mainText",i),l=r.get("subText",i),x=r.get("border",i);return{backdrop:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",zIndex:998},container:{position:"fixed",bottom:0,left:0,right:0,height:"90vh",backgroundColor:s,borderRadius:"24px 24px 0 0",boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden"},handleContainer:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"12px",paddingBottom:"8px"},handle:{width:"40px",height:"5px",borderRadius:"3px",backgroundColor:r.get("border",i)},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px 15px 20px",borderBottom:`1px solid ${r.get("svgColor",i)}`},textBtn:{background:"none",border:"none",fontSize:"16px",color:l,cursor:"pointer",padding:"10px"},headerTitle:{fontSize:"18px",fontWeight:"700",color:n},scrollContent:{flex:1,overflowY:"auto",padding:"20px"},section:{marginBottom:"20px"},mainInputWrapper:{display:"flex",alignItems:"center",gap:"15px"},largeIconDisplay:{fontSize:"2.5rem",width:"50px",textAlign:"center"},mainInput:{flex:1,border:"none",background:"transparent",fontSize:"16px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",color:n,WebkitUserSelect:"auto",outline:`1px solid ${x}`,borderRadius:"16px",padding:"14px",width:"100%"},categorySection:{marginBottom:"20px"},iconScrollContainer:{display:"flex",gap:"10px",overflowX:"auto",padding:"2px 2px 10px 2px",scrollbarWidth:"none",msOverflowStyle:"none"},categoryChip:{padding:"8px 16px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",border:`1px solid ${x}`,minWidth:"60px",whiteSpace:"nowrap"},categoryLabel:{fontSize:"13px",fontWeight:"600",color:n,marginLeft:"4px"},card:{backgroundColor:t,borderRadius:"20px",padding:"15px",boxShadow:r.get("shadow",i),marginBottom:"20px"},pickerRow:{display:"flex",justifyContent:"space-between",alignItems:"center"},pickerCol:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},divider:{width:"1px",height:"60px",backgroundColor:x,margin:"0 5px"},label:{fontSize:"11px",color:l,fontWeight:"700",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},dateSection:{display:"flex",gap:"12px",marginBottom:"20px"},dateCard:{flex:1,backgroundColor:t,borderRadius:"16px",padding:"12px",border:`1px solid ${x}`,display:"flex",alignItems:"center"},dateRow:{display:"flex",alignItems:"center",width:"100%"},dateInput:{background:"transparent",border:"none",color:n,fontSize:"14px",width:"100%",outline:"none",fontFamily:"inherit",fontWeight:"600"},subTaskContainer:{marginTop:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"700",color:n,marginLeft:"5px",marginBottom:"10px",display:"block"},addSubRow:{display:"flex",alignItems:"center",gap:"10px"},subInputContainer:{flex:1,display:"flex",flexDirection:"column",border:`2px dashed ${x}`,borderRadius:"16px",padding:"12px",marginTop:"10px"},subInput:{border:"none",background:"transparent",fontSize:"16px",color:n,outline:"none",width:"100%",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"},addBtn:{width:"46px",height:"46px",borderRadius:"14px",backgroundColor:r.get("done",i),display:"flex",alignItems:"center",justifyContent:"center",border:"none",marginTop:"10px",cursor:"pointer",boxShadow:`0 4px 12px ${r.get("habitCardDone",i)}`},subList:{marginTop:"15px",display:"flex",flexDirection:"column",gap:"8px"},subItem:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:t,borderRadius:"12px"},subDot:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:l,marginRight:"12px"},subText:{flex:1,fontSize:"15px",color:n}}},W=new Audio("Audio/Click.wav"),Et=new Audio("Audio/IsDone.wav"),At=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],$t=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],Gt=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],Ae=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],$e=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],Ge=["#81C784","#64B5F6","#FFD54F","#FF8A65","#E57373"],Jt=()=>{const[i,s]=f.useState("dark"),[t,n]=f.useState(I.prefs[0]),[l,x]=f.useState(I.prefs[4]),[o,u]=f.useState(Fe.value==="ToDoPage"),[w,y]=f.useState(!1),[k,C]=f.useState(0),[S,P]=f.useState(!1),[z,L]=f.useState(0),[E,O]=f.useState(I.todoList||[]),[X,p]=f.useState(0),[A,R]=f.useState(0),[m,q]=f.useState(1),[M,N]=f.useState(""),[G,ne]=f.useState("none"),g=f.useRef(null);f.useEffect(()=>{const j=tt.subscribe(s),B=it.subscribe(V=>n(V==="ru"?0:1)),Y=st.subscribe(x),te=Fe.subscribe(V=>u(V==="ToDoPage")),le=v.subscribe(V=>{V&&(p(re=>re+1),V.type==="OPEN_STATS"&&(y(!0),de("")),V.type==="OPEN_ADD"&&(y(!1),C(-1),de("ToDoPage")),V.type==="CLOSE_ALL"&&(y(!1),de("")))});return()=>{j.unsubscribe(),B.unsubscribe(),Y.unsubscribe(),le.unsubscribe(),te.unsubscribe()}},[]),f.useEffect(()=>{T()},[A,m,M,X,S]);const T=()=>{let j=I.todoList?[...I.todoList]:[];if(M.trim()){const D=M.toLowerCase();j=j.filter(Q=>Q.name&&Q.name.toLowerCase().includes(D)||Q.category&&Q.category.toLowerCase().includes(D))}switch(A){case 1:j=j.filter(D=>D.isDone);break;case 2:j=j.filter(D=>!D.isDone&&!D.isPending);break;case 3:j=j.filter(D=>D.isPending);break}const B=j.filter(D=>D.isHidden).length;L(B),S||(j=j.filter(D=>!D.isHidden));const Y=j.filter(D=>D.isPinned),te=j.filter(D=>!D.isPinned),le=D=>m===0?D.sort((Q,se)=>(se.difficulty||0)-(Q.difficulty||0)):m===1?D.sort((Q,se)=>(se.priority||0)-(Q.priority||0)):m===2?D.sort((Q,se)=>me(Q.deadLine)-me(se.deadLine)):D,V=le(Y),re=le(te),Ce=[...V,...re];O(Ce)};f.useEffect(()=>{G==="search"&&g.current&&setTimeout(()=>g.current.focus(),300)},[G]);const U=()=>{de("")},K=(j,B)=>{j.stopPropagation(),B.isDone=!B.isDone,B.isDone&&B.isPinned&&(B.isPinned=!1),p(Y=>Y+1),H(B.isDone?Et:W)},J=j=>{H(W),ne(G===j?"none":j)},oe=f.useMemo(()=>{const j={};return E.forEach(B=>{const Y=B.category||(t===0?"Ð”Ñ€ÑƒÐ³Ð¾Ðµ":"Other");j[Y]||(j[Y]=[]),j[Y].push(B)}),j},[E,t]),c=Ot(i),Z=i==="light"||i==="speciallight";return e.jsxs("div",{style:c.container,children:[e.jsx(gt,{tab:"ToDoMain"}),e.jsxs("div",{style:{width:"92%",marginTop:"14vh",display:"flex",flexDirection:"column",gap:"10px",zIndex:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"800",color:r.get("mainText",i),fontFamily:"Segoe UI",letterSpacing:"-0.5px"},children:t===0?"Ð—Ð°Ð´Ð°Ñ‡Ð¸":"Tasks"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(ke,{icon:e.jsx(Re,{size:16}),isActive:G==="search"||M.length>0,onClick:()=>J("search"),theme:i}),e.jsx(ke,{icon:e.jsx(nt,{size:16}),isActive:G==="sort"||m!==1,onClick:()=>J("sort"),theme:i}),e.jsx(ke,{icon:e.jsx(ot,{size:14}),isActive:G==="filter"||A!==0,onClick:()=>J("filter"),theme:i})]})]}),e.jsxs(ie,{mode:"wait",children:[G==="search"&&e.jsx(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden"},children:e.jsxs("div",{style:c.inputContainer,children:[e.jsx(Re,{size:14,color:r.get("subText",i),style:{marginLeft:"16px",opacity:.6}}),e.jsx("input",{type:"text",placeholder:t===0?"ÐÐ°Ð¹Ñ‚Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Search tasks...",value:M,onChange:j=>N(j.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:r.get("mainText",i),marginLeft:"8px",outline:"none"}}),M.length>0&&e.jsx(b.div,{initial:{scale:0},animate:{scale:1},onClick:()=>N(""),style:c.clearBtn,children:e.jsx(ce,{size:10,color:"#fff"})})]})},"search"),G==="sort"&&e.jsxs(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(ae,{label:t===0?"Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Priority",icon:e.jsx(Me,{size:10}),isActive:m===1,onClick:()=>{q(1),H(W)},theme:i}),e.jsx(ae,{label:t===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",icon:e.jsx(at,{size:12}),isActive:m===0,onClick:()=>{q(0),H(W)},theme:i}),e.jsx(ae,{label:t===0?"Ð”ÐµÐ´Ð»Ð°Ð¹Ð½":"Deadline",icon:e.jsx(we,{size:12}),isActive:m===2,onClick:()=>{q(2),H(W)},theme:i})]},"sort"),G==="filter"&&e.jsxs(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx(ae,{label:t===0?"Ð’ÑÐµ":"All",isActive:A===0,onClick:()=>{R(0),H(W)},theme:i}),e.jsx(ae,{label:t===0?"Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ":"Active",isActive:A===2,onClick:()=>{R(2),H(W)},theme:i}),e.jsx(ae,{label:t===0?"ÐžÑ‚Ð»Ð¾Ð¶ÐµÐ½Ð¾":"Pending",isActive:A===3,onClick:()=>{R(3),H(W)},theme:i}),e.jsx(ae,{label:t===0?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"Done",isActive:A===1,onClick:()=>{R(1),H(W)},theme:i})]},"filter")]})]}),e.jsxs("div",{style:c.panel,className:"no-scrollbar",children:[e.jsx(ie,{mode:"popLayout",children:E.length===0?e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},style:c.emptyState,children:[e.jsx(lt,{size:40,style:{marginBottom:10,opacity:.5}}),e.jsx("span",{children:z>0&&!S?t===0?"Ð’ÑÐµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ ÑÐºÑ€Ñ‹Ñ‚Ñ‹":"All tasks hidden":t===0?"Ð—Ð°Ð´Ð°Ñ‡ Ð½ÐµÑ‚":"No tasks found"})]}):Object.keys(oe).map(j=>e.jsx(Wt,{title:j,theme:i,children:oe[j].map((B,Y)=>e.jsx(Ht,{onClick:()=>{const te=I.todoList.indexOf(B);C(te),de("ToDoPage"),H(W)},onCheck:te=>K(te,B),item:B,theme:i,lang:t,fSize:l},B.id||Y+B.name))},j))}),z>0&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{width:"88%",padding:"12px 0",display:"flex",justifyContent:"center",marginTop:"8px"},children:e.jsx("button",{onClick:()=>{P(!S),H(W)},style:{background:Z?"#FFFFFF":r.get("simplePanel",i),border:`1px solid ${Z?"#E0E0E0":r.get("border",i)}`,borderRadius:"16px",padding:"8px 20px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:r.get("mainText",i),fontWeight:"600",fontSize:"14px",boxShadow:Z?"0 2px 6px rgba(0,0,0,0.05)":"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},children:S?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:14}),t===0?"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Hide hidden tasks"]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{size:14}),t===0?`ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ${z} ÑÐºÑ€Ñ‹Ñ‚ÑƒÑŽ(Ñ‹Ðµ) Ð·Ð°Ð´Ð°Ñ‡Ñƒ(Ð¸)`:`Show ${z} hidden task(s)`]})})}),e.jsx("div",{style:{marginBottom:"120px",width:"100%"}})]}),e.jsx(Bt,{show:o,setShow:U,theme:i,lang:t,fSize:l,task:I.todoList[k]||{}}),w&&e.jsx(ut,{theme:i,lang:t,onClose:()=>y(!1)}),e.jsx(Lt,{theme:i,lang:t,fSize:l})]})},ke=({icon:i,isActive:s,onClick:t,theme:n})=>{const l=n==="dark",x=r.get("accent",n),o=s?x:l?"rgba(255,255,255,0.1)":"#FFFFFF",u=s?"#FFFFFF":r.get("mainText",n);return e.jsx(b.div,{whileTap:{scale:.92},onClick:t,style:{width:"40px",height:"40px",borderRadius:"14px",backgroundColor:o,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:s?`0 4px 12px ${x}60`:l?"none":"0 2px 8px rgba(0,0,0,0.05)",color:u,transition:"all 0.3s ease"},children:i})},ae=({label:i,icon:s,isActive:t,onClick:n,theme:l})=>{const x=l==="dark",o=r.get("accent",l);return e.jsxs(b.div,{whileTap:{scale:.95},onClick:n,style:{padding:"8px 16px",borderRadius:"12px",backgroundColor:t?o:x?"rgba(255,255,255,0.08)":"#FFFFFF",color:t?"#FFFFFF":r.get("subText",l),fontSize:"13px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",border:t?"none":`1px solid ${x?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}`,boxShadow:t?`0 4px 12px ${o}40`:"none",transition:"all 0.2s ease"},children:[s,i]})},Wt=({title:i,children:s,theme:t})=>{const[n,l]=f.useState(!0),x=t==="light"||t==="speciallight";return e.jsxs("div",{style:{width:"100%",marginBottom:"6px"},children:[e.jsxs("div",{onClick:()=>{l(!n),H(W)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"8px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"800",fontFamily:"Segoe UI",color:x?"#1D1D1F":r.get("mainText",t),opacity:.8},children:i}),e.jsx(b.div,{animate:{rotate:n?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(_e,{size:12,color:x?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(ie,{initial:!1,children:n&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:s})})]})},Ht=({onClick:i,onCheck:s,item:t,theme:n,lang:l,fSize:x})=>{const[o,u]=f.useState(!1),w=Ut(t.deadLine)&&!t.isDone,y=n==="light"||n==="speciallight",k=t.goals?t.goals.length:0,C=t.goals?t.goals.filter(p=>p.isDone).length:0;let S=t.color||r.get("accent",n);S&&S.length>7&&S.startsWith("#")&&(S=S.substring(0,7));const P=S,z=r.get("simplePanel",n),L=y?"0 4px 12px rgba(0, 0, 0, 0.26)":"0 4px 12px rgba(0,0,0,0.2)",E=t.isPending||t.isHidden||t.isPinned,O=t.isPending?"#FF9E3D":t.isHidden?"#7E7E7E":"#02609e",X=t.isPending?l===0?"ÐžÑ‚Ð»Ð¾Ð¶ÐµÐ½Ð¾":"Pending":t.isHidden?l===0?"Ð¡ÐºÑ€Ñ‹Ñ‚Ð¾":"Hidden":l===0?"Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¾":"Pinned";return e.jsxs(b.div,{layout:!0,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,transition:{duration:.2}},whileTap:{scale:.98},onClick:i,style:{width:"88%",minHeight:"80px",borderRadius:"20px",marginBottom:"8px",padding:"10px 12px",display:"flex",flexDirection:"row",alignItems:"flex-start",position:"relative",overflow:"hidden",cursor:"pointer",border:E?`2px solid ${O}`:"none",backgroundColor:z,backdropFilter:y?"none":"blur(20px)",boxShadow:L,opacity:t.isDone?.6:1},children:[E&&e.jsxs("div",{style:{position:"absolute",top:"-2px",left:"-2px",width:"24px",height:"24px",borderRadius:"0 0 20px 0",backgroundColor:O,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,title:X},children:[t.isPinned&&e.jsx(Be,{size:10,color:"#FFF"}),t.isPending&&e.jsx(je,{size:10,color:"#FFF"}),t.isHidden&&e.jsx(Ie,{size:10,color:"#FFF"})]}),e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:n==="dark"?"#2e2e2e94":"#90cec867",color:P,fontSize:"20px",marginRight:"14px",flexShrink:0,border:`1px solid ${t.isDone?"transparent":`${P}40`}`,marginTop:"6px"},children:t.icon||"ðŸ“"}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"6px",marginRight:"14px"},children:[e.jsxs("div",{style:{fontSize:x===0?"16px":"17px",fontWeight:"700",color:t.isDone?r.get("subText",n):r.get("mainText",n),textDecoration:t.isDone?"line-through":"none",lineHeight:"1.2",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.name,t.isPending&&!t.isDone&&e.jsx("span",{style:{fontSize:"12px",color:"#FF9E3D",marginLeft:"6px",fontWeight:"500",backgroundColor:"rgba(255, 158, 61, 0.1)",padding:"0 4px",borderRadius:"4px"},children:l===0?"ÐžÑ‚Ð»Ð¾Ð¶ÐµÐ½Ð¾":"Pending"})]}),!t.isDone&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",justifyContent:"center"},children:[e.jsx(ye,{icon:e.jsx(Oe,{size:8}),text:At[t.priority]?.[l],color:Ae[t.priority]||Ae[0]}),e.jsx(ye,{icon:e.jsx(Ne,{size:8}),text:$t[t.difficulty]?.[l],color:$e[t.difficulty]||$e[0]}),e.jsx(ye,{icon:e.jsx(Me,{size:8}),text:Gt[t.urgency||0]?.[l],color:Ge[t.urgency||0]||Ge[0]}),t.deadLine&&e.jsx(ye,{icon:w?e.jsx(dt,{size:8}):e.jsx(we,{size:8}),text:_t(t.deadLine,l),color:w?"#FF453A":r.get("subText",n)}),k>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"10px",fontWeight:"700",color:r.get("subText",n)},children:[e.jsx(ct,{size:10,style:{opacity:.7}}),e.jsxs("span",{children:[C,"/",k]})]})]}),o&&e.jsxs(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"90%",marginRight:"25px",marginTop:"8px",paddingTop:"8px",borderTop:`1px dashed ${r.get("border",n)}60`},children:[e.jsxs("button",{onClick:p=>{p.stopPropagation(),jt(t.id),H(W)},style:he(n),children:[e.jsx(Be,{size:14,color:t.isPinned?"#02609e":r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:l===0?"Ð—Ð°ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑŒ":"Pin"})]}),e.jsxs("button",{onClick:p=>{p.stopPropagation(),mt(t.id),H(W)},style:he(n),children:[e.jsx(Ie,{size:14,color:t.isHidden?"#7E7E7E":r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:l===0?"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ":"Hide"})]}),e.jsxs("button",{onClick:p=>{p.stopPropagation(),wt(t.id),H(W)},style:he(n),children:[e.jsx(je,{size:14,color:t.isPending?"#FF9E3D":r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:l===0?"ÐžÑ‚Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ":"Snooze"})]}),e.jsxs("button",{onClick:s,style:he(n),children:[t.isDone?e.jsx(xt,{size:14,color:"#4CAF50"}):e.jsx(pt,{size:14,color:r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:l===0?"ÐžÑ‚Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ":"Check"})]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"8px",paddingTop:"6px"},children:e.jsx(He,{onClick:p=>{p.stopPropagation(),u(A=>!A)},size:16,style:{color:r.get("subText",n),cursor:"pointer"}})}),!t.isDone&&k>0&&e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"3px",backgroundColor:y?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)"},children:e.jsx(b.div,{initial:{width:0},animate:{width:`${C/k*100}%`},style:{height:"100%",backgroundColor:y?"rgba(94, 15, 133, 0.58)":"rgba(53, 111, 199, 0.94)"}})})]})},he=(i,s)=>({background:"none",border:"none",cursor:"pointer",color:r.get("subText",i),display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px",padding:"4px",borderRadius:"6px",transition:"all 0.2s","&:hover":{backgroundColor:i==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.08)"}}),ye=({icon:i,text:s,color:t})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:`${t}15`,border:`1px solid ${t}30`,color:t,fontSize:"9px",fontWeight:"700",whiteSpace:"nowrap"},children:[i,s&&e.jsx("span",{children:s})]}),Ot=(i,s)=>{const t=i==="light"||i==="speciallight",n=t?"#F2F4F6":r.get("background",i);r.get("mainText",i);const l=r.get("subText",i);return{container:{backgroundColor:n,display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflowY:"scroll"},panel:{display:"flex",flexDirection:"column",width:"100%",flex:1,alignItems:"center",justifyContent:"start",overflowY:"scroll",paddingTop:"2px"},emptyState:{marginTop:"50px",display:"flex",flexDirection:"column",alignItems:"center",color:l,fontSize:"16px",fontWeight:"600"},inputContainer:{width:"100%",height:"44px",backgroundColor:t?"#FFFFFF":"rgba(255,255,255,0.08)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"space-around",border:t?"none":`1px solid ${r.get("border",i)}60`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)",position:"relative"},clearBtn:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"rgba(128,128,128,0.4)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",cursor:"pointer"}}};function H(i){I.prefs[2]===0&&i&&(i.paused||(i.pause(),i.currentTime=0),i.volume=.5,i.play().catch(s=>console.log("Audio play failed",s))),I.prefs[3]===0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function Nt(i){if(!i)return null;if(i.includes("-"))return new Date(i);if(i.includes(".")){const s=i.split(".");return new Date(s[2],s[1]-1,s[0])}return new Date(i)}function me(i){const s=Nt(i);if(!s)return 9999;const t=new Date;return t.setHours(0,0,0,0),s.setHours(0,0,0,0),Math.ceil((s-t)/(1e3*60*60*24))}function Ut(i){return me(i)<0}function _t(i,s){if(!i)return"";const t=me(i);return s===0?t===0?"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ":t===1?"Ð—Ð°Ð²Ñ‚Ñ€Ð°":t<0?`${Math.abs(t)} Ð´Ð½. Ð½Ð°Ð·Ð°Ð´`:`${t} Ð´Ð½.`:t===0?"Today":t===1?"Tmrw":t<0?`${Math.abs(t)}d ago`:`${t}d left`}export{Jt as default};
