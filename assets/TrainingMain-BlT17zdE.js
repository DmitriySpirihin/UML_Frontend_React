import{A as a,t as Je,l as _e,f as Qe,aO as qe,j as e,aP as me,B as be,aQ as je,aR as ve,C as l,m as v,d as _,a as w,ah as Xe,M as Q,a2 as q,aS as Ze,ab as M,aT as X}from"./index-DQW2PwSJ.js";import{R as Se,r as c}from"./recharts-k8ghPecL.js";import{a as et,d as tt,b as st}from"./TrainingLogHelper-CXyjOqvN.js";import{a as nt}from"./index-D11PKueW.js";import{I as it,a as ot}from"./index-DqOmFxyv.js";import{S}from"./ScrollPicker-EbSlFcvg.js";import{H as rt}from"./HoverInfoButton-DJOcOe7H.js";import{cardioType$ as Z,trainInfo$ as we}from"./TrainingCardio-D-0epNEZ.js";import"./index-DLFn9ZV3.js";import"./Slider-Bq5Ai__m.js";const m=t=>{const o=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0");return`${o}-${n}-${d}`},lt=t=>(t.getDay()+6)%7,O=new Audio("Audio/Click.wav"),Ce=Array.from({length:24},(t,o)=>o),Te=Array.from({length:12},(t,o)=>o*5),at={enter:t=>({x:t>0?50:-50,opacity:0,scale:.95}),center:{zIndex:1,x:0,opacity:1,scale:1},exit:t=>({zIndex:0,x:t<0?50:-50,opacity:0,scale:.95})},ct={enter:t=>({y:t>0?-20:20,opacity:0}),center:{y:0,opacity:1},exit:t=>({y:t>0?20:-20,opacity:0})},dt={hidden:{y:"100%",opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:25,stiffness:300}},exit:{y:"100%",opacity:0}},kt=()=>{const[t,o]=Se.useState("dark"),[n,d]=c.useState(a.prefs[0]),[p,F]=c.useState(new Date),[g,R]=c.useState(p),V=c.useRef(g),[Ie,De]=c.useState(0),[ee,ke]=c.useState(a.prefs[4]),[Me,P]=c.useState(!1),[ze,G]=c.useState(!1),[Ne,N]=c.useState(!1),[$e,j]=c.useState(!1),[te,We]=c.useState("GYM"),[b,Fe]=c.useState(a.getLastProgramId()),[$,se]=c.useState(a.getLastTrainingDayIndex()||0),[C,ne]=c.useState(16*36e5),[T,ie]=c.useState(17*36e5),[oe,Re]=c.useState({date:"",key:0}),[L,re]=c.useState(0),Pe=new Date().getDate(),Ge=new Date().getMonth();c.useEffect(()=>{const s=Je.subscribe(o),i=_e.subscribe(y=>{d(y==="ru"?0:1)}),r=Qe.subscribe(y=>{ke(y)});return()=>{s.unsubscribe(),i.unsubscribe(),r.unsubscribe()}},[]);const Le=new Date(p.getFullYear(),p.getMonth(),1),Ye=new Date(p.getFullYear(),p.getMonth()+1,0).getDate(),Be=(Le.getDay()+6)%7,Ae=[["–ü–Ω","–í—Ç","–°—Ä","–ß—Ç","–ü—Ç","–°–±","–í—Å"],["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]],Ee=[["–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫","–í—Ç–æ—Ä–Ω–∏–∫","–°—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä–≥","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞","–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"],["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]],le=[["–Ø–Ω–≤–∞—Ä—å","–§–µ–≤—Ä–∞–ª—å","–ú–∞—Ä—Ç","–ê–ø—Ä–µ–ª—å","–ú–∞–π","–ò—é–Ω—å","–ò—é–ª—å","–ê–≤–≥—É—Å—Ç","–°–µ–Ω—Ç—è–±—Ä—å","–û–∫—Ç—è–±—Ä—å","–ù–æ—è–±—Ä—å","–î–µ–∫–∞–±—Ä—å"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Y=[],ae=[];for(let s=0;s<Be;s++)Y.push(null);for(let s=1;s<=Ye;s++)Y.push(s);for(let s=0;s<Y.length;s+=7)ae.push(Y.slice(s,s+7));const Oe=()=>{re(-1),F(new Date(p.getFullYear(),p.getMonth()-1)),K(O)},He=()=>{re(1),F(new Date(p.getFullYear(),p.getMonth()+1)),K(O)};c.useEffect(()=>{V.current=g},[g]),c.useEffect(()=>{se(0)},[b]),c.useEffect(()=>{const s=qe.subscribe(()=>{const i=new Date,r=V.current;if(r>i)return;const y=m(r),x=m(i);j(!0)});return()=>s.unsubscribe()},[]);const I=c.useMemo(()=>{const s=Object.entries(a.programs).filter(([,i])=>i.show!==!1).map(([i,r])=>({value:Number(i),label:Array.isArray(r?.name)?r?.name?.[n]:r?.name||`Program ${i}`}));return s.length>0?s:[{value:0,label:n===0?"–ù–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º":"No Programs"}]},[n]),D=c.useMemo(()=>{const s=a.programs[b];return!s||!s.schedule||s.schedule.length===0?[{value:0,label:n===0?"–î–µ–Ω—å 1":"Day 1"}]:s.schedule.map((i,r)=>({value:r,label:i.name?.[n]||(n===0?`–î–µ–Ω—å ${r+1}`:`Day ${r+1}`)}))},[b,n]),ce=c.useMemo(()=>I.find(s=>s.value===b)?.label||I[0].label,[b,I]),de=c.useMemo(()=>D.find(s=>s.value===$)?.label||D[0].label,[$,D]),pe=s=>{const i=I.find(r=>r.label===s);i&&Fe(i.value)},xe=s=>{const i=D.find(r=>r.label===s);i&&se(i.value)},B=(s,i,r,y)=>{const x=Math.floor(i/6e4);let k=Math.floor(x/60)%24,W=x%60;r==="h"&&(k=y),r==="m"&&(W=y);const u=(k*60+W)*6e4;s(u)},A=c.useMemo(()=>[{value:"GYM",label:n===0?"–°–∏–ª–æ–≤–∞—è":"Strength",icon:e.jsx(me,{size:20}),color:t==="dark"?"#f33b3b":"#861010c6"},{value:"RUNNING",label:n===0?"–ë–µ–≥":"Running",icon:e.jsx(be,{size:20}),color:t==="dark"?"#f3da3b":"#867210c6"},{value:"CYCLING",label:n===0?"–í–µ–ª–æ—Å–∏–ø–µ–¥":"Cycling",icon:e.jsx(je,{size:20}),color:t==="dark"?"#5af33b":"#108614c6"},{value:"SWIMMING",label:n===0?"–ü–ª–∞–≤–∞–Ω–∏–µ":"Swimming",icon:e.jsx(ve,{size:20}),color:t==="dark"?"#3bf3f0":"#10867ec6"}],[n,t]),ge=s=>{const i=A.find(r=>r.value===s)||A[0];return{icon:i.icon,color:i.color}},E=s=>{switch(s){case"RUNNING":return t==="dark"?"#f3da3b":"#867210c6";case"CYCLING":return t==="dark"?"#5af33b":"#108614c6";case"SWIMMING":return t==="dark"?"#3bf3f0":"#10867ec6";default:return t==="dark"?"#f33b3b":"#861010c6"}},Ue=()=>{const i=m(new Date);if(!a.programs[b])return M(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞":"Error! The program not found",2e3,!1),null;if(a.programs[b].schedule.length===0)return M(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—É—Å—Ç–∞—è":"Error! The program is empty",2e3,!1),null;st(new Date,b,$),P(!1),j(!1),setTimeout(()=>{const r=a.trainingLog[i].length-1;X({mode:"new",dayKey:i,dInd:r}),w("TrainingCurrent")},100)},he=(s,i)=>{Re({date:s,key:i})},Ke=()=>{tt(oe.date,oe.key),N(!1),M(n===0?"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞":"Session deleted",2e3,!0)},Ve=(s,i)=>{We(s),j(!1);const r=new Date,y=m(V.current),x=m(r);s==="GYM"?y===x?P(!0):G(!0):(Z.next(s),we.next({mode:"new",dayKey:y,dInd:$}),w("TrainingCardio"))},fe=(s,i,r)=>{K(O),s.type==="GYM"||!s.type?(X({mode:s.completed?"redact":"new",dayKey:i,dInd:r}),w("TrainingCurrent")):(Z.next(s.type),we.next({mode:"edit",dayKey:i,dInd:r}),Z.next(s.type),w("TrainingCardio"))};return e.jsxs("div",{style:f(t).container,children:[e.jsx(rt,{tab:"TrainingMain"}),e.jsxs("div",{style:f(t).panel,children:[e.jsxs("div",{style:f(t).calendarHead,children:[e.jsx(v.div,{whileTap:{scale:.9},onClick:Oe,style:f(t).navBtn,children:e.jsx(it,{size:22,color:l.get("mainText",t)})}),e.jsx("div",{style:f(t).headerWrapper,children:e.jsx(_,{mode:"popLayout",custom:L,children:e.jsxs(v.h1,{variants:ct,custom:L,initial:"enter",animate:"center",exit:"exit",transition:{duration:.25},style:f(t).header,children:[le[n][p.getMonth()]," ",p.getFullYear()]},p.toISOString())})}),e.jsx(v.div,{whileTap:{scale:.9},onClick:He,style:f(t).navBtn,children:e.jsx(ot,{size:22,color:l.get("mainText",t)})})]}),e.jsx("div",{style:{width:"100%",paddingBottom:"20px",overflow:"hidden"},children:e.jsx(_,{mode:"wait",custom:L,children:e.jsx(v.div,{variants:at,custom:L,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",ease:"easeInOut",duration:.25},style:{width:"100%"},children:e.jsxs("table",{style:f(t).table,children:[e.jsx("thead",{children:e.jsx("tr",{children:Ae[n].map((s,i)=>e.jsx("th",{style:{paddingBottom:"10px"},children:e.jsx("p",{style:{textAlign:"center",fontSize:"13px",fontWeight:"600",opacity:.8,color:i>=5?"#ff5e5e":l.get("subText",t)},children:s})},s))})}),e.jsx("tbody",{children:ae.map((s,i)=>e.jsx("tr",{children:s.map((r,y)=>{const x=p.getMonth(),k=p.getFullYear(),W=r===g.getDate()&&x===g.getMonth()&&k===g.getFullYear(),u=m(new Date(k,x,r)),J=u in a.trainingLog?a.trainingLog[u].length:0;J>0&&a.trainingLog[u].forEach(h=>{h.completed,h.type});let ye="transparent",ue=l.get("mainText",t);return W&&(ye=l.get("currentDateBorder",t),ue="#ffffff"),e.jsx("td",{style:{padding:"3px"},children:r?e.jsxs("div",{style:{...f(t).cell,backgroundColor:ye,color:ue,border:Pe===r&&Ge===x?`2px solid ${l.get("currentDateBorder",t)}`:"transparent",boxShadow:W?`0 4px 12px ${l.get("shadow",t)}`:"none"},onClick:()=>{R(new Date(Date.UTC(k,x,r))),De(J),K(O)},children:[r,J>0&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1px",justifyContent:"center"},children:[a.trainingLog[u].filter(h=>h.type==="GYM"||h.type===void 0).length>0&&e.jsx("div",{title:`${n===0?"–°–∏–ª–æ–≤–∞—è":"Strength"}: ${a.trainingLog[u].filter(h=>h.type==="GYM").length}`,children:e.jsx(me,{size:8,color:E("GYM")})}),a.trainingLog[u].filter(h=>h.type==="RUNNING").length>0&&e.jsx("div",{title:`${n===0?"–ë–µ–≥":"Running"}: ${a.trainingLog[u].filter(h=>h.type==="RUNNING").length}`,children:e.jsx(be,{size:8,color:E("RUNNING")})}),a.trainingLog[u].filter(h=>h.type==="CYCLING").length>0&&e.jsx("div",{title:`${n===0?"–í–µ–ª–æ—Å–∏–ø–µ–¥":"Cycling"}: ${a.trainingLog[u].filter(h=>h.type==="CYCLING").length}`,children:e.jsx(je,{size:8,color:E("CYCLING")})}),a.trainingLog[u].filter(h=>h.type==="SWIMMING").length>0&&e.jsx("div",{title:`${n===0?"–ü–ª–∞–≤–∞–Ω–∏–µ":"Swimming"}: ${a.trainingLog[u].filter(h=>h.type==="SWIMMING").length}`,children:e.jsx(ve,{size:8,color:E("SWIMMING")})})]})]}):e.jsx("div",{style:{...f(t).cell,pointerEvents:"none"}})},y)})},i))})]})},p.toISOString())})})]}),e.jsxs("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",backgroundColor:l.get("background",t)},children:[e.jsxs("div",{onClick:()=>w("TrainingList"),style:f(t).journalBtn,role:"button",tabIndex:0,onKeyPress:s=>s.key==="Enter"&&w("TrainingList"),children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"15px"},children:n===0?"–ñ—É—Ä–Ω–∞–ª":"Journal"}),e.jsx(nt,{size:14})]}),e.jsxs("div",{style:{flex:1,overflowY:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"15px 20px 10px 20px"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"18px",color:l.get("mainText",t)},children:[g.getDate()," ",le[n][g.getMonth()],", ",Ee[n][lt(g)]]}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:l.get("subText",t)},children:pt(Ie,n)})]}),e.jsxs("div",{style:f(t).scrollView,children:[a.trainingLog[m(g)]?.map((s,i)=>{const r=s.type==="GYM"||!s.type,y=`${m(g)}-${i}`;return e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},style:f(t).sessionCard,onClick:()=>fe(s,m(new Date(g)),i),role:"button",tabIndex:0,onKeyPress:x=>x.key==="Enter"&&fe(s,m(new Date(g)),i),children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",backgroundColor:"rgba(128,128,128,0.3)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:s.completed?Se.cloneElement(ge(s.type||"GYM").icon,{size:25,color:ge(s.type||"GYM").color}):e.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:"‚è≥"})}),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px",minWidth:0},children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontWeight:"bold",color:l.get("mainText",t),fontSize:ee===0?"15px":"17px",lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.type==="GYM"?Array.isArray(a.programs[s.programId]?.name)?a.programs[s.programId]?.name?.[n]:a.programs[s.programId]?.name:A.find(x=>x.value===s.type)?.label}),e.jsx("div",{style:{fontSize:ee===0?"13px":"15px",color:l.get("mainText",t),lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(n===0?"–î–µ–Ω—å ":"Day ")+(s.dayIndex+1)+": "+(a.programs[s.programId]?.schedule?.[s.dayIndex]?.name?.[n]||(n===0?`–î–µ–Ω—å ${s.dayIndex+1}`:`Day ${s.dayIndex+1}`))}),s.completed&&e.jsxs("div",{style:{fontSize:"12px",color:l.get("subText",t),lineHeight:1.4,display:"flex",flexWrap:"wrap",gap:"4px"},children:[e.jsx("span",{children:`${Math.round(s.duration/6e4)}${n===0?" –º–∏–Ω":" min"}`}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:`${(s.tonnage*.001).toFixed(2)} ${n===0?" —Ç":" t"}`}),xt(s,n)]}),s.RPE&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#FFA500",fontSize:"11px"},children:[e.jsx("span",{children:"üî•"}),e.jsxs("span",{style:{fontWeight:"600"},children:["RPE ",s.RPE,"/10"]})]}),s.note&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"6px",textAlign:"left",marginTop:"5px",paddingTop:"5px",borderTop:`1px solid ${t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.08)"}`,fontSize:"10px",color:l.get("subText",t),fontStyle:"italic",lineHeight:1.4},children:[e.jsx("span",{style:{marginTop:"2px"},children:"üìù"}),e.jsx("span",{children:s.note.length>160?s.note.substring(0,160)+"...":s.note})]})]}):e.jsxs("div",{style:{fontSize:"11px",color:l.get("mainText",t),lineHeight:1.5,width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginBottom:"4px",flexWrap:"wrap"},children:[e.jsx("span",{children:yt(s.distance,s.type,n)}),e.jsx("span",{style:{color:l.get("subText",t)},children:"‚Ä¢"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{color:l.get("subText",t),fontSize:"11px"},children:"‚è±Ô∏è"}),gt(s.duration,n)]})]}),(s.type==="RUNNING"||s.type==="CYCLING")&&s.distance>0&&s.duration>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"4px 8px",width:"fit-content",background:t==="light"?"rgba(76, 201, 240, 0.1)":"rgba(76, 201, 240, 0.15)",borderRadius:"6px",marginBottom:"6px"},children:s.type==="RUNNING"?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:"11px",color:"#4CC9F0"},children:"üèÉ"}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:"600",color:"#4CC9F0"},children:[ht(s.distance,s.duration)," ",n===0?"–º–∏–Ω/–∫–º":"min/km"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:"11px",color:"#4361EE"},children:"üö¥"}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:"600",color:"#4361EE"},children:[ft(s.distance,s.duration)," km/h"]})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap",marginTop:"4px",fontSize:"11px"},children:[s.avgHeartRate>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#FF6B9D"},children:[e.jsx("span",{children:"‚ù§Ô∏è"}),e.jsxs("span",{style:{fontWeight:"600"},children:[s.avgHeartRate," bpm"]})]}),s.avgCadence>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#4CC9F0"},children:[e.jsx("span",{children:s.type==="RUNNING"?"üèÉ‚Äç‚ôÇÔ∏è":s.type==="CYCLING"?"üö¥‚Äç‚ôÇÔ∏è":"üèä‚Äç‚ôÇÔ∏è"}),e.jsxs("span",{style:{fontWeight:"600"},children:[s.avgCadence," ",s.type==="RUNNING"?"spm":s.type==="CYCLING"?"rpm":"spm"]})]}),s.rpe&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#FFA500"},children:[e.jsx("span",{children:"üî•"}),e.jsxs("span",{style:{fontWeight:"600"},children:["RPE ",s.rpe,"/10"]})]})]}),s.notes&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",textAlign:"left",gap:"6px",marginTop:"6px",paddingTop:"6px",borderTop:`1px solid ${t==="light"?"rgba(0,0,0,0.08)":"rgba(255,255,255,0.12)"}`,fontSize:"10px",color:l.get("subText",t),fontStyle:"italic",lineHeight:1.4},children:[e.jsx("span",{style:{marginTop:"2px"},children:"üìù"}),e.jsx("span",{children:s.notes.length>160?s.notes.substring(0,160)+"...":s.notes})]})]})})]}),e.jsx(v.div,{whileTap:{scale:.9},onClick:x=>{x.stopPropagation(),he(m(new Date(g)),i),N(!0)},style:{padding:"8px",cursor:"pointer",opacity:.7,alignSelf:"flex-start",marginTop:"4px",flexShrink:0},role:"button",tabIndex:0,onKeyPress:x=>{(x.key==="Enter"||x.key===" ")&&(x.stopPropagation(),he(m(new Date(g)),i),N(!0))},"aria-label":n===0?"–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É":"Delete workout",children:e.jsx(Xe,{size:16,color:l.get("subText",t)})})]})},y)}),e.jsx("div",{style:{height:"55px",flexShrink:0}})]})]})]}),e.jsxs(_,{children:[Ne&&e.jsxs(H,{theme:t,onClose:()=>N(!1),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:f(t).modalTitle,children:n===0?"–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?":"Delete session?"}),e.jsx("p",{style:{color:l.get("subText",t),fontSize:"14px"},children:n===0?"–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å":"This action cannot be undone"})]}),e.jsxs("div",{style:{display:"flex",width:"100%",gap:"15px"},children:[e.jsx(U,{icon:e.jsx(Q,{size:24}),label:n===0?"–ù–µ—Ç":"No",onClick:()=>N(!1),theme:t}),e.jsx(U,{icon:e.jsx(q,{size:24}),label:n===0?"–î–∞":"Yes",onClick:Ke,theme:t,isPrimary:!0,isDestructive:!0})]})]}),$e&&e.jsxs(H,{theme:t,onClose:()=>j(!1),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"25px"},children:[e.jsx("h3",{style:f(t).modalTitle,children:n===0?"–¢–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏":"Training Type"}),e.jsx("p",{style:{color:l.get("subText",t),fontSize:"14px"},children:n===0?"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è":"Select training type to add"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",width:"100%"},children:A.map(s=>e.jsxs(v.div,{whileTap:{scale:.98},onClick:()=>Ve(s.value),style:{height:"80px",borderRadius:"16px",backgroundColor:t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"8px",color:s.color,cursor:"pointer",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[s.icon,e.jsx("span",{style:{fontSize:"14px"},children:s.label})]},s.value))})]}),Me&&te==="GYM"&&e.jsxs(H,{theme:t,onClose:()=>{P(!1),j(!0)},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("p",{style:f(t).modalTitle,children:n===0?"–ù–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞":"New Session"}),e.jsx("div",{onClick:()=>{P(!1),j(!0)},style:{padding:"5px",cursor:"pointer"},children:e.jsx(Q,{size:24,color:l.get("subText",t)})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–ü—Ä–æ–≥—Ä–∞–º–º–∞":"Program",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(S,{items:I.map(s=>s.label),value:ce,onChange:pe,theme:t,width:"100%"})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–î–µ–Ω—å":"Day",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(S,{items:D.map(s=>s.label),value:de,onChange:xe,theme:t,width:"100%"})})]}),e.jsx("div",{style:{marginTop:"15px"},children:e.jsx(U,{icon:e.jsx(q,{size:24}),label:n===0?"–ù–∞—á–∞—Ç—å":"Start",onClick:Ue,theme:t,isPrimary:!0})})]}),ze&&te==="GYM"&&e.jsxs(H,{theme:t,onClose:()=>{G(!1),j(!0)},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("p",{style:f(t).modalTitle,children:n===0?"–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—à–ª—É—é":"Log Previous"}),e.jsx("div",{onClick:()=>{G(!1),j(!0)},style:{padding:"5px",cursor:"pointer"},children:e.jsx(Q,{size:24,color:l.get("subText",t)})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–ü—Ä–æ–≥—Ä–∞–º–º–∞":"Program",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(S,{items:I.map(s=>s.label),value:ce,onChange:pe,theme:t,width:"100%"})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–î–µ–Ω—å":"Day",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(S,{items:D.map(s=>s.label),value:de,onChange:xe,theme:t,width:"100%"})})]}),e.jsxs("div",{style:{backgroundColor:t==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.03)",borderRadius:"20px",padding:"15px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",opacity:.7},children:[e.jsx(Ze,{}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},children:n===0?"–í—Ä–µ–º—è":"Time"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(z,{label:n===0?"–ù–∞—á–∞–ª–æ":"Start",theme:t}),e.jsxs("div",{style:{display:"flex",gap:"5px",width:"100%",justifyContent:"center"},children:[e.jsx(S,{items:Ce,value:Math.floor(C/36e5),onChange:s=>B(ne,C,"h",s),theme:t,width:"60px"}),e.jsx("span",{style:{paddingTop:"25%",fontWeight:"bold"},children:":"}),e.jsx(S,{items:Te,value:C/6e4%60,onChange:s=>B(ne,C,"m",s),theme:t,width:"60px",suffix:""})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(z,{label:n===0?"–ö–æ–Ω–µ—Ü":"End",theme:t}),e.jsxs("div",{style:{display:"flex",gap:"5px",width:"100%",justifyContent:"center"},children:[e.jsx(S,{items:Ce,value:Math.floor(T/36e5),onChange:s=>B(ie,T,"h",s),theme:t,width:"60px"}),e.jsx("span",{style:{paddingTop:"25%",fontWeight:"bold"},children:":"}),e.jsx(S,{items:Te,value:T/6e4%60,onChange:s=>B(ie,T,"m",s),theme:t,width:"60px",suffix:""})]})]})]})]}),e.jsx(U,{icon:e.jsx(q,{size:24}),label:n===0?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å":"Save",onClick:()=>{if(!a.programs[b]){M(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞":"Error! The program not found",2e3,!1);return}if(a.programs[b].schedule.length===0){M(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—É—Å—Ç–∞—è":"Error! The program is empty",2e3,!1);return}if(T<=C){M(n===0?"–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–∑–∂–µ –Ω–∞—á–∞–ª–∞":"End time must be after start time",2e3,!1);return}et(g,b,$,C,T),G(!1),j(!1);const s=m(g),i=a.trainingLog[s].length-1;X({mode:"redact",dayKey:s,dInd:i}),w("TrainingCurrent")},theme:t,isPrimary:!0})]})]})]})},H=({children:t,theme:o,onClose:n})=>e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:f(o).backdrop,onClick:n,children:e.jsxs(v.div,{variants:dt,initial:"hidden",animate:"visible",exit:"exit",style:f(o).bottomSheet,onClick:d=>d.stopPropagation(),children:[e.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:l.get("subText",o),borderRadius:"2px",margin:"0 auto 20px auto",opacity:.3}}),t]})}),z=({label:t,theme:o})=>e.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:l.get("subText",o),textTransform:"uppercase",marginBottom:"8px",textAlign:"center"},children:t}),U=({icon:t,label:o,onClick:n,theme:d,isPrimary:p,isDestructive:F})=>{let g=d==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",R=l.get("mainText",d);return p&&(g=F?l.get("minValColor",d):l.get("maxValColor",d),R="#fff"),e.jsxs(v.div,{whileTap:{scale:.98},onClick:n,style:{flex:1,height:"56px",borderRadius:"16px",backgroundColor:g,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",color:R,cursor:"pointer",fontWeight:"600",fontSize:"16px",boxShadow:p?"0 4px 12px rgba(0,0,0,0.15)":"none"},children:[t,o&&e.jsx("span",{children:o})]})};function K(t){a.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),a.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}const pt=(t,o)=>t==0?o==0?"–ù–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫":"No trainings":t==1?o==0?"1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞":"1 training":t>1&&t<5?t+(o==0?" —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏":" trainings"):t+(o==0?" —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫":" trainings");function xt(t,o){if(!t?.exercises)return o===0?" ‚Ä¢ 0 —É–ø—Ä.":" ‚Ä¢ 0 ex.";let n=0,d=0;for(const p of Object.values(t.exercises))n++,Array.isArray(p.sets)&&(d+=p.sets.length);return o===0?` ‚Ä¢ ${n} —É–ø—Ä. / ${d} –ø–æ–¥—Ö.`:` ‚Ä¢ ${n} ex. / ${d} sets`}const gt=(t,o)=>{if(!t)return o===0?"0 –º–∏–Ω":"0 min";const n=Math.floor(t/60/6e4),d=Math.floor(t/6e4%60);return n>0?o===0?`${n} —á ${d} –º–∏–Ω`:`${n}h ${d.toString().padStart(2,"0")}m`:o===0?`${d} –º–∏–Ω`:`${d} min`},ht=(t,o)=>{if(!t||t<=0||!o||o<=0)return null;const n=o/6e4/t,d=Math.floor(n),p=Math.round((n-d)*60);return`${d}:${p.toString().padStart(2,"0")}`},ft=(t,o)=>{if(!t||t<=0||!o||o<=0)return null;const n=o/6e4/60;return(t/n).toFixed(1)},yt=(t,o,n)=>t?o==="SWIMMING"?`${(t*1e3).toFixed(0)}${n===0?" –º":" m"}`:`${t.toFixed(1)}${n===0?" –∫–º":" km"}`:n===0?"0 –∫–º":"0 km",f=(t,o)=>({container:{backgroundColor:l.get("background",t),display:"flex",flexDirection:"column",alignItems:"center",height:"90vh",marginTop:"100px",width:"100vw",fontFamily:"Segoe UI, Roboto, sans-serif",overflowY:"scroll",paddingTop:"10px"},panel:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"500px",alignItems:"center",justifyContent:"start",position:"relative",zIndex:1},calendarHead:{padding:"15px 20px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",boxSizing:"border-box",marginTop:"20px"},headerWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",minWidth:"150px"},header:{fontFamily:"Segoe UI",fontSize:"20px",margin:0,fontWeight:"700",color:l.get("mainText",t),textTransform:"capitalize",whiteSpace:"nowrap"},navBtn:{padding:"8px",borderRadius:"12px",cursor:"pointer",backgroundColor:t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},table:{width:"100%",borderCollapse:"collapse",textAlign:"center"},cell:{boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"13vw",height:"13vw",maxHeight:"50px",maxWidth:"50px",borderRadius:"14px",fontSize:"16px",fontWeight:"600",fontFamily:"Segoe UI",transition:"all 0.2s ease-in-out",cursor:"pointer",margin:"auto",position:"relative"},journalBtn:{alignSelf:"center",margin:"10px 0",backgroundColor:t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)",color:l.get("mainText",t),padding:"10px 20px",borderRadius:"20px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},scrollView:{flex:1,width:"100%",padding:"10px 20px 80px 20px"},sessionCard:{backgroundColor:t==="light"?"#fff":"rgba(255,255,255,0.05)",borderRadius:"16px",padding:"5px",marginBottom:"12px",marginRight:"35px",boxShadow:t==="light"?"0 2px 8px rgba(0,0,0,0.05)":"none",border:`1px solid ${t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)"}`},backdrop:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:3e3},bottomSheet:{width:"100%",maxWidth:"500px",backgroundColor:l.get("background",t),borderTopLeftRadius:"28px",borderTopRightRadius:"28px",padding:"20px 25px 40px 25px",boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",position:"relative",zIndex:3001,backdropFilter:"blur(20px)",borderTop:`1px solid ${t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)"}`},modalTitle:{fontSize:"20px",fontWeight:"bold",color:l.get("mainText",t),margin:0}});export{kt as default,xt as getTrainingSummary};
