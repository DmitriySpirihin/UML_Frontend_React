import{A as c,U as h,p as G,u as N,t as O,l as Y,f as Q,v as q,w as J,j as e,b as D,N as K,C as a,m as M,x as X,y as Z,z as _,B as ee,D as te,E as ie,G as se,H as ne,n as oe,i as re}from"./index-Btfw6WMf.js";import{r as o,R as ae}from"./recharts-Bg6K2Pzo.js";import{getCurrentCycleAnalysis as le}from"./TrainingAnaliticsMain-BY7zWPbW.js";import{P as ce,s as de}from"./Premium-CURX2Ars.js";import"./TrainingAnaliticsTabs-X1519ikn.js";import"./index-Bi4ttVXf.js";const ve=()=>{const[t,i]=o.useState(c.prefs[1]===0?"dark":"light"),[n,m]=o.useState(c.prefs[0]),[y,g]=o.useState(0),[b,d]=o.useState(0),[u,p]=o.useState(0),[r,f]=o.useState(!1),[v,w]=o.useState(""),[S,T]=o.useState(""),[F,R]=o.useState(""),[j,P]=o.useState(!1),[z,C]=o.useState(!1),[k,B]=o.useState(h.hasPremium),[E,A]=o.useState(h.isValidation);o.useEffect(()=>{const s=G.subscribe(B),l=N.subscribe(A);return()=>{s.unsubscribe(),l.unsubscribe()}},[]),o.useEffect(()=>{const s=O.subscribe(i),l=Y.subscribe(V=>{m(V==="ru"?0:1)}),L=Q.subscribe(g);return()=>{s.unsubscribe(),l.unsubscribe(),L.unsubscribe()}},[]),o.useEffect(()=>{const s=q.subscribe(w),l=J.subscribe(P);return()=>{s.unsubscribe(),l.unsubscribe()}},[]),o.useEffect(()=>{j&&(C(!1),f(!0))},[j]);const I=s=>{s?p(u+1):d(b+1),b===5&&u===5&&(C(!0),d(0),p(0),h.hasPremium=!0,h.premiumEndDate="2099-01-01",Z(!0))},U=s=>{s.length===16&&X(s)},H=[{id:"RobotMain",icon:e.jsx(_,{}),title:n===0?"ИИ инсайты":"AI insights",subtitle:n===0?"Персональный анализ":"Personal analysis",color:"#00E5FF",needBlur:!0},{id:"HabitsMain",icon:e.jsx(ee,{}),title:n===0?"Привычки":"Habits",subtitle:n===0?"Трекер дисциплины":"Discipline tracker",color:"#FFD700",needBlur:!1},{id:"TrainingMain",icon:e.jsx(te,{}),title:n===0?"Тренировки":"Workout",subtitle:n===0?"Дневник силы":"Gym diary",color:"#FF4D4D",needBlur:!1},{id:"MentalMain",icon:e.jsx(ie,{}),title:n===0?"Мозг":"Brain",subtitle:n===0?"Развитие интеллекта":"Intelligence",color:"#4DA6FF",needBlur:!1},{id:"RecoveryMain",icon:e.jsx(se,{}),title:n===0?"Восстановление":"Recovery",subtitle:n===0?"Медитации и отдых":"Meditation & Rest",color:"#4DFF88",needBlur:!1},{id:"SleepMain",icon:e.jsx(ne,{}),title:n===0?"Сон":"Sleep",subtitle:n===0?"Анализ качества":"Quality analysis",color:"#A64DFF",needBlur:!0},{id:"ToDoMain",icon:e.jsx(oe,{}),title:n===0?"Задачи":"To-Do",subtitle:n===0?"Список дел":"Task list",color:"#FFA64D",needBlur:!1}],W={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.09}}},$={hidden:{opacity:0,y:15,scale:.98},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:25}}};return e.jsxs(e.Fragment,{children:[r&&e.jsxs("div",{style:{position:"absolute",display:"flex",alignItems:"center",flexDirection:"column",top:"10vh",left:"0",width:"100vw",height:"40vh",backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e4},children:[e.jsx("div",{style:{display:"flex",overflowY:"scroll",borderRadius:"12px",width:"85vw",height:"15vh",fontSize:"12px",fontFamily:"Segoe UI",border:"1px solid #333",color:"white",padding:"10px"},children:v}),e.jsx("textarea",{style:{borderRadius:"12px",width:"85vw",height:"10vh",fontSize:"12px",background:"#111",color:"white",marginTop:"10px"},value:F,onChange:s=>R(s.target.value)}),e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"10px"},children:[e.jsx("input",{style:{borderRadius:"12px",width:"50vw",height:"3vh",background:"#222",color:"white"},type:"text",onChange:s=>T(s.target.value)}),e.jsx("button",{onClick:()=>{S==="TrainingMain"?D("TrainingMain"):K.sendMessage(S,F)},children:"Submit"})]}),e.jsx("button",{onClick:()=>f(!1),style:{marginTop:"10px"},children:"Close"})]}),e.jsxs("div",{style:x(t).container,children:[e.jsx("div",{style:{height:"16vh"}}),z&&e.jsx("input",{style:{width:"85vw",height:"2vh",fontSize:"12px",borderRadius:"12px",zIndex:1001,marginBottom:"10px"},type:"password",onChange:s=>U(s.target.value)}),e.jsxs("div",{style:x(t).scrollView,children:[e.jsx("div",{style:{height:"2vh",width:"100%"},onClick:()=>{I(!0)}}),!k&&!E&&e.jsx(ce,{clickHandler:()=>de(),w:"90%",h:"85px",fSize:"15px",br:"24px",langIndex:n,theme:t,textToShow:["Премиум за приглашение","Invite and get premium"],needSparcle:!1}),e.jsx(M.div,{variants:W,initial:"hidden",animate:"show",style:x(t).grid,children:H.map((s,l)=>e.jsx(ue,{item:s,theme:t,variants:$,hasPremium:k,index:l,fSize:y,lang:n},s.id))}),e.jsx("div",{style:{height:"10vh",width:"100%"},onClick:()=>{I(!1)}})]})]})]})};function ue({item:t,theme:i,variants:n,hasPremium:m,index:y,fSize:g,lang:b}){const d=!m&&t.needBlur,u=!1,p=xe(y-1),r=i==="dark",f={position:"relative",width:"100%",height:"80px",display:"flex",alignItems:"center",padding:"0 20px",boxSizing:"border-box",borderRadius:"24px",overflow:"hidden",marginBottom:"12px",backgroundColor:r?a.get("simplePanel",i)+"99":"#FFFFFF",backdropFilter:r?"blur(40px)":"none",border:`1px solid ${r?a.get("border",i)+"30":"#E5E7EB"}`,boxShadow:r?"0 8px 20px 0 rgba(0, 0, 0, 0.4), inset 0 1px 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 10px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02)"},v={width:"48px",height:"48px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",flexShrink:0,backgroundColor:r?a.get("background",i)+"80":a.get("background",i),color:t.color,border:r?"1px solid rgba(255,255,255,0.05)":"1px solid rgba(0,0,0,0.03)"};return e.jsxs(M.div,{variants:n,whileTap:{scale:.97},onClick:()=>{!d&&!u&&(D(t.id),pe(null))},style:f,children:[e.jsx("div",{style:v,children:ae.cloneElement(t.icon,{size:22})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1,overflow:"hidden"},children:[e.jsx("h4",{style:{...x(i,g).title,color:a.get("mainText",i),margin:0,fontWeight:r?"900":"700"},children:t.title}),e.jsx("div",{style:{...x(i,g).subtitle,color:a.get("subText",i),opacity:r?.6:.8},children:t.subtitle})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",marginLeft:"8px"},children:[p!==""&&e.jsx("div",{style:{padding:"4px 10px",backgroundColor:r?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",borderRadius:"12px",fontSize:"13px",fontWeight:"700",color:a.get("mainText",i),marginRight:"8px"},children:p}),e.jsx(re,{size:14,color:a.get("subText",i),style:{opacity:.3}})]}),d&&e.jsx("div",{onClick:w=>w.stopPropagation(),style:{position:"absolute",inset:0,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:r?"rgba(14, 14, 14, 0.52)":"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(5px)",textAlign:"center"},children:e.jsx("div",{style:{color:r?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:b===0?"ТОЛЬКО ДЛЯ ПРЕМИУМ":"PREMIUM USERS ONLY"})}),u]})}const x=(t,i)=>({container:{backgroundColor:a.get("background",t),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflow:"hidden"},scrollView:{width:"100vw",maxHeight:"90vh",overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"},grid:{width:"92%",display:"flex",flexDirection:"column",gap:"4px",marginTop:"15px"},title:{fontFamily:"Segoe UI",fontSize:i===0?"19px":"21px",letterSpacing:"0.2px"},subtitle:{fontFamily:"Segoe UI",fontWeight:"500",fontSize:i===0?"12px":"14px",marginTop:"2px"},text:{fontFamily:"Segoe UI",fontSize:i===0?"10px":"12px",color:a.get("subText",t)},mainText:{fontFamily:"Segoe UI",fontSize:i===0?"14px":"16px",color:a.get("mainText",t)}});function pe(t){c.prefs[2]==0,c.prefs[3]==0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function xe(t){if(t===0)return c.choosenHabits.length>0?c.choosenHabits.length:"";if(t===1){const i=le().currentTonnage;return i>0?(i/1e3).toFixed(1)+(c.prefs[0]===0?"т":"t"):""}return""}export{ve as default};
