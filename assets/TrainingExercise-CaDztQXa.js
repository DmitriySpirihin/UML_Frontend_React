import{r,A as w,t as ee,l as te,J as se,f as ne,j as e,C as a,b9 as P,aD as F,aC as ie,g as le,_ as oe,S as ae,ba as M,bb as $,i as B,k as T,bc as re,Y as ce,bd as de,be as xe}from"./index-BMUoLOux.js";import{b as G,c as H}from"./index-BTh6Xgpz.js";import{b as pe,M as b}from"./MyInput-B_fCQN2R.js";const he=({needToAdd:o,setEx:S})=>{const[t,h]=r.useState("dark"),[l,W]=r.useState(w.prefs[0]),[c,N]=r.useState(w.prefs[1]),[O,v]=r.useState(""),[d,U]=r.useState(-1),[x,I]=r.useState(-1),[R,L]=r.useState(""),[q,k]=r.useState(!1),[D,Y]=r.useState(!1),[_,z]=r.useState(!1),[u,m]=r.useState(""),[g,y]=r.useState(""),[j,f]=r.useState(!0);r.useEffect(()=>{const n=ee.subscribe(h),i=te.subscribe(A=>{W(A==="ru"?0:1)});return()=>{i.unsubscribe(),n.unsubscribe()}},[]),r.useEffect(()=>{const n=se.subscribe(v),i=ne.subscribe(N);return()=>{n.unsubscribe(),i.unsubscribe()}},[]);function J(n){p(null),U(d==n?-1:n),d===-1&&I(-1)}function V(n){p(null),I(x==n?-1:n)}function E(){p(null),v(""),m(""),y(""),f(!0)}function K(){u.length>3?(p(null),re(d,C(u),g.length>3?C(g):l===0?"Своё упражнение":"Custom exercise",j),E()):u.length<3&&ce(l===0?"Введите название упражнения, не менее 3 символов":"Set exercise name , at least 3 characters",2e3,!1)}function Q(){const n=F().find(i=>i.id===x);n&&(m(n.name[l]),y(n.description[l]),setMuscleGroupId(n.mgId),f(n.isBase),z(!0))}function X(){p(null),xe(x,d,C(u),g.length>3?C(g):l===0?"Своё упражнение":"Custom exercise",j),z(!1)}function Z(){p(null),de(x),I(-1),k(!1),E()}return e.jsxs("div",{style:s(t).container,children:[Object.keys(P.muscleIconsSrc[0]).map(n=>e.jsxs("div",{style:s(t).panel,children:[e.jsxs("div",{style:s(t,d==n,!1).groupPanel,onClick:()=>J(i=>i===n?-1:n),children:[d==n?e.jsx(G,{style:s(t).icon}):e.jsx(H,{style:s(t).icon}),P.get(n,l,t)]},n),d==n?e.jsxs("div",{style:s(t).panel,children:[F().filter(i=>i.mgId==n).map(i=>e.jsxs("div",{style:s(t).panel,children:[e.jsxs("div",{style:{...s(t,!1,x==i.id).exercisePanel,width:"100%",flexDirection:"row"},onClick:()=>V(A=>A===i.id?-1:i.id),children:[x==i.id?e.jsx(G,{style:{...s(t).icon,marginLeft:"5%",width:"10px",marginTop:"7px"}}):e.jsx(H,{style:{...s(t).icon,marginLeft:"7%",width:"10px",marginTop:"7px"}}),e.jsx("p",{style:{...s(t,!1,!1,c).text,marginLeft:"6px"},children:i.name[l]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",justifyContent:"center"},children:[e.jsx("p",{style:{...s(t,!1,!1,c).subtext,marginRight:"5px",color:i.isBase?a.get("trainingBaseFont",t):a.get("trainingIsolatedFont",t)},children:i.isBase?l===0?"Базовое":"Base":l===0?"Изолированное":"Isolated"}),o&&e.jsx(ie,{onClick:()=>{S(i.id)},style:{...s(t).icon,fontSize:"20px",marginRight:"35px"}})]})]}),x==i.id?e.jsxs("div",{style:{...s(t).panel,flexDirection:"row",marginLeft:"6%",width:"86%"},children:[e.jsx("p",{style:s(t,!1,!1,c).subtext,children:i.description[l]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",justifyContent:"center"},children:[D&&e.jsx(le,{onClick:()=>{L(i.name[l]),Q()},style:{...s(t).icon,fontSize:"18px"}}),D&&e.jsx(oe,{onClick:()=>{L(i.name[l]),k(!0)},style:{...s(t).icon,fontSize:"18px"}}),e.jsx(pe,{onClick:()=>{Y(!D)},style:{...s(t).icon,fontSize:"18px"}})]})]}):null]},i.id)),e.jsx("div",{style:{...s(t).exercisePanel,width:"98%",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:e.jsx(ae,{onClick:()=>{p(null),v("AddExercisePanel")},style:{...s(t).icon,fontSize:"24px"}})})]}):null]},n)),e.jsx("div",{style:{height:"10vh"},children:e.jsx("p",{style:s(t,!1,!1,c).text,children:"_"})}),O==="AddExercisePanel"&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:s(t).additionalPanel,children:[e.jsx("p",{style:s(t,!1,!1,c).text,children:l===0?"Добавь свое упражнение":"Add your exercise"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:a.get("background",t),height:"70%",width:"100%",alignItems:"center"},children:[e.jsx(b,{maxL:40,w:"80%",h:"20%",theme:t,onChange:n=>m(n),placeHolder:l===0?"Название упражнения":"Exercise name"}),e.jsx(b,{maxL:300,w:"80%",h:"30%",theme:t,onChange:n=>y(n),placeHolder:l===0?"Описание упражнения":"Exercise description"}),e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"70%",justifyContent:"space-around",alignItems:"center",marginTop:"5%"},children:P.get(d,l,t,!1)}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"50%",justifyContent:"space-around",alignItems:"center",marginTop:"5%"},children:[e.jsx("p",{style:s(t,!1,!1,c).text,children:l===0?"Базовое упражнение":"Base exercise"}),j?e.jsx(M,{onClick:()=>f(!1),style:{...s(t).icon,fontSize:"24px"}}):e.jsx($,{onClick:()=>f(!0),style:{...s(t).icon,fontSize:"24px"}})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(B,{onClick:()=>E(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(T,{onClick:()=>K(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),q&&e.jsxs("div",{style:{position:"fixed",top:"50vh",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85vw",height:"40vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${a.get("border",t)}`,backgroundColor:a.get("background",t),zIndex:"7000"},children:[e.jsx("p",{style:{...s(t,!1,!1,c).text,padding:"20px",marginLeft:"10%",marginRight:"5%"},children:l===0?"Вы уверены, что хотите удалить упражнение? "+R:"Are you sure you want to delete the exercise?"+R}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(B,{onClick:()=>k(!1),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(T,{onClick:()=>Z(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]}),_&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{...s(t).additionalPanel,height:"40%"},children:[e.jsx("p",{style:s(t,!1,!1,c).text,children:l===0?"Добавь свое упражнение":"Add your exercise"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:a.get("background",t),height:"70%",width:"100%",alignItems:"center"},children:[e.jsx(b,{maxL:40,w:"80%",h:"20%",value:u,theme:t,onChange:n=>m(n),placeHolder:l===0?"Название упражнения":"Exercise name"}),e.jsx(b,{maxL:300,w:"80%",h:"30%",value:g,theme:t,onChange:n=>y(n),placeHolder:l===0?"Описание упражнения":"Exercise description"}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"50%",justifyContent:"space-around",alignItems:"center",marginTop:"5%"},children:[e.jsx("p",{style:s(t,!1,!1,c).text,children:l===0?"Базовое упражнение":"Base exercise"}),j?e.jsx(M,{onClick:()=>f(!1),style:{...s(t).icon,fontSize:"24px"}}):e.jsx($,{onClick:()=>f(!0),style:{...s(t).icon,fontSize:"24px"}})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(B,{onClick:()=>z(!1),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(T,{onClick:()=>X(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})})]})},s=(o,S,t,h)=>({container:{backgroundColor:a.get("background",o),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI"},groupPanel:{display:"flex",flexDirection:"row",width:"98vW",height:"6vh",backgroundColor:S?a.get("trainingGroupSelected",o):a.get("trainingGroup",o),borderTop:`1px solid ${a.get("border",o)}`,alignItems:"center",justifyContent:"left",alignContent:"space-between"},exercisePanel:{display:"flex",flexDirection:"column",width:"90vW",height:"5vh",backgroundColor:t?a.get("trainingGroupSelected",o):a.get("background",o),alignItems:"center",justifyContent:"left"},panel:{display:"flex",flexDirection:"column",width:"100vW",alignItems:"center"},text:{textAlign:"left",fontSize:h===0?"13px":"15px",color:a.get("mainText",o),marginBottom:"12px"},subtext:{textAlign:"left",fontSize:h===0?"11px":"13px",color:a.get("subText",o),marginBottom:"12px"},icon:{fontSize:"20px",color:a.get("icons",o),marginLeft:"20px"},addContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},additionalPanel:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",borderRadius:"24px",border:`1px solid ${a.get("border",o)}`,backgroundColor:a.get("simplePanel",o),boxShadow:`4px 4px 6px ${a.get("shadow",o)}`,width:"100%",height:"100vw"}});function p(o){w.prefs[2]==0,w.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}const C=o=>o&&o.charAt(0).toUpperCase()+o.slice(1);export{he as default};
