import{r as p,j as t,A as w,t as P,l as z,f as E,C as h}from"./index-pDhTsUxD.js";const B=({theme:o,data:n=[],mark:r="kg",color:x="#4a90e2"})=>{const[i,b]=p.useState(null),k=new Date,d=[];for(let e=59;e>=0;e--){const s=new Date(k);s.setDate(k.getDate()-e),d.push(s.toISOString().split("T")[0])}const C=new Map;let H=0,g=0;n.forEach(e=>{C.set(e.date,e.value),H+=e.value,g++});const v=n.length>0,T=v?Math.min(...n.map(e=>e.value)):0,f=v?Math.max(...n.map(e=>e.value)):1,y=g>0?H/g:0,c=f*1.1,a=e=>c<=0?80:(c-e)/c*80,O=(e,s,l)=>{s!==void 0&&(i&&i.date===e?b(null):b({date:e,value:s,index:l}))};return t.jsxs("div",{style:{width:"100%",height:"30vh",position:"relative",margin:"20px 0",display:"flex",justifyContent:"center"},children:[t.jsxs("div",{style:{width:"90%",height:"100%",position:"relative"},children:[t.jsx("div",{style:{position:"absolute",left:"0",top:"5%",bottom:"15%",width:"1px",backgroundColor:o==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),t.jsx("div",{style:{position:"absolute",left:"0",right:"0",bottom:"15%",height:"1px",backgroundColor:o==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),t.jsx("div",{style:{position:"absolute",left:"0",right:"0",top:"5%",height:"80%",backgroundImage:`
            linear-gradient(
              to bottom,
              transparent 99%,
              ${o==="dark"?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"} 100%
            )
          `,backgroundSize:"1px 10%",pointerEvents:"none"}}),t.jsx("div",{style:{position:"absolute",left:"0",top:"5%",width:"100%",height:"80%",overflow:"hidden"},children:v&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"absolute",left:"0",right:"0",top:`${a(f)}%`,height:"1px",backgroundColor:"#e74c3c",opacity:.7}}),t.jsx("div",{style:{position:"absolute",left:"0",right:"130%",top:`${a(f)}%`,fontSize:"6px",color:"#e74c3c",textAlign:"center"},children:f+r}),g>0&&t.jsx("div",{style:{position:"absolute",left:"0",right:"0",top:`${a(y)}%`,height:"1px",backgroundColor:"#3498db",opacity:.7}}),t.jsx("div",{style:{position:"absolute",left:"0",right:"130%",top:`${a(y)}%`,fontSize:"6px",color:"#3498db",textAlign:"center"},children:y.toFixed()+r}),t.jsx("div",{style:{position:"absolute",left:"0",right:"0",top:`${a(T)}%`,height:"1px",backgroundColor:"#2ecc71",opacity:.7}}),t.jsx("div",{style:{position:"absolute",left:"0",right:"130%",top:`${a(T)}%`,fontSize:"6px",color:"#2ecc71",textAlign:"center"},children:T+r})]})}),t.jsx("div",{style:{width:"100%",height:"80%",display:"flex",alignItems:"flex-end",position:"absolute",top:"5%",left:0,gap:"2px"},children:d.map((e,s)=>{const l=C.get(e),D=l!==void 0,m=i?.date===e?o==="dark"?"#5772caff":"#ff6600":x;return t.jsx("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",cursor:D?"pointer":"default",transition:"transform 0.2s"},onClick:()=>O(e,l,s),children:t.jsx("div",{style:{width:"80%",height:"100%",backgroundColor:D?m:"transparent",borderLeft:"1px solid rgba(76, 69, 69, 0.2)",...D&&{background:`linear-gradient(to top, ${m} ${l/c*100}%, transparent ${l/c*100}%)`}}})},e)})}),t.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",position:"absolute",bottom:"0",left:0,right:0,height:"20px"},children:[t.jsx("div",{style:{fontSize:"10px",color:o==="dark"?"#888":"#777",textAlign:"center",width:"33%"},children:d[0]}),t.jsx("div",{style:{fontSize:"10px",color:o==="dark"?"#888":"#777",textAlign:"center",width:"33%"},children:d[Math.floor(60/2)]}),t.jsx("div",{style:{fontSize:"10px",color:o==="dark"?"#888":"#777",textAlign:"center",width:"33%"},children:d[59]})]})]}),i&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:0},onClick:()=>b(null)}),t.jsxs("div",{style:{position:"absolute",top:"10%",left:`${i.index/59*90+10/2}%`,transform:"translateX(-50%)",backgroundColor:o==="dark"?"rgba(30, 30, 30, 0.95)":"rgba(250, 250, 250, 0.95)",color:o==="dark"?"#fff":"#000",padding:"8px 12px",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1,border:`1px solid ${o==="dark"?"#555":"#ddd"}`},children:[t.jsx("div",{children:i.date}),t.jsxs("div",{style:{color:i.value>0?o==="dark"?"#ff9900":"#ff6600":x,fontSize:"16px"},children:[i.value," ",r]})]})]})]})},L=()=>{const[o,n]=p.useState("dark"),[r,x]=p.useState(w.prefs[0]),[G,A]=p.useState(w.prefs[4]),j=[{date:"2025-11-12",value:240},{date:"2025-11-13",value:60},{date:"2025-11-14",value:180},{date:"2025-11-16",value:220},{date:"2025-11-17",value:220},{date:"2025-11-18",value:20},{date:"2025-11-19",value:260},{date:"2025-11-20",value:250},{date:"2025-11-21",value:250},{date:"2025-11-23",value:250},{date:"2025-11-24",value:250},{date:"2025-11-25",value:250}];return p.useEffect(()=>{const I=P.subscribe(n),S=z.subscribe(u=>{x(u==="ru"?0:1)}),$=E.subscribe(u=>{A(u)});return()=>{I.unsubscribe(),S.unsubscribe(),$.unsubscribe()}},[]),t.jsx("div",{style:_(o).container,children:t.jsx("div",{style:_(o).panel,children:t.jsx(B,{theme:o,data:j,mark:"kg",color:"#ca854cff"})})})},_=o=>({container:{backgroundColor:h.get("background",o),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",top:"15vh",width:"100vw",fontFamily:"Segoe UI"},panel:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyContent:"start",borderBottom:`1px solid ${h.get("border",o)}`},text:{textAlign:"left",fontSize:"10px",color:h.get("mainText",o),marginLeft:"30px",marginBottom:"12px"},subtext:{textAlign:"left",fontSize:"8px",color:h.get("subText",o),marginLeft:"30px",marginBottom:"12px"}});export{L as default};
