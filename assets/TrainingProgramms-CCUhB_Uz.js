import{r,A as P,t as ke,l as De,J as ze,f as Ie,j as e,C as c,aA as Pe,S as ae,g as re,_ as O,aB as Ae,aC as Le,aD as Re,aE as Te,aF as Ee,i as J,k as A,aG as Me,aH as $e,O as Fe,aI as Be,aJ as Ne,aK as Ge,aL as He,aM as Ue,aN as Oe,aO as Je}from"./index-hRo8iFKA.js";import{b,c as v}from"./index-DM69rNCh.js";import{T as le,a as ce,M as W}from"./MyInput-CfM42yBY.js";import We from"./TrainingExercise-CxNr4Q_L.js";const _e=()=>{const[s,L]=r.useState([...P.programs]),g=()=>{L([...P.programs])},[t,de]=r.useState("dark"),[l,xe]=r.useState(P.prefs[0]),[p,fe]=r.useState(P.prefs[1]),[pe,R]=r.useState(!1),[u,K]=r.useState(!1),[d,V]=r.useState(-1),[x,k]=r.useState(-1),[T,E]=r.useState(""),[M,$]=r.useState(""),[Y,_]=r.useState(3),[h,Q]=r.useState(4),[F,B]=r.useState(6),[y,N]=r.useState(0),[X,Z]=r.useState(1),[G,D]=r.useState(l===0?"День 1":"Day 1"),[ue,z]=r.useState(!1),[ge,ee]=r.useState(!1),[ye,H]=r.useState(!1),[me,te]=r.useState(!1),[he,je]=r.useState(""),[ne,ie]=r.useState(0);r.useEffect(()=>{h>F-2&&B(i=>i+1)},[h]),r.useEffect(()=>{const i=ke.subscribe(de),a=De.subscribe(o=>{xe(o==="ru"?0:1)});return()=>{a.unsubscribe(),i.unsubscribe()}},[]),r.useEffect(()=>{const i=ze.subscribe(o=>R(o==="AddProgrammPanel")),a=Ie.subscribe(fe);return()=>{i.unsubscribe(),a.unsubscribe()}},[]),r.useEffect(()=>{if(d===-1)return;const a=s.find(o=>o.id===d).schedule.length;Z(a),D(l===0?`День ${a+1}`:`Day ${a+1}`)},[d,l]);function j(){g(),K(!1),z(!1),H(!1),Fe("")}function Ce(){Ge(q(T),q(M)),E(""),$(""),j()}function Se(){He(d,q(G)),Z(i=>i+1),D(l===0?"День "+(X+2):"Day "+(X+2)),j()}function we(){Ue(d,x,y,Y+"x"+h+"-"+F),te(!1),g()}function U(i){ie(i);let a="";switch(i){case 0:const o=s.find(w=>w.id===d).name,f=Array.isArray(o)?o[l]:o;a=l===0?"Вы уверены, что хотите удалить программу : "+f+" ?":"Are you sure you want to delete the program : "+f+" ?";break;case 1:const C=s.find(w=>w.id===d)?.schedule[x]?.name;a=l===0?"Вы уверены, что хотите удалить тренировочный день : "+C[l]+" ?":"Are you sure you want to delete the training day : "+C[l]+" ?";break;case 2:const S=s.find(w=>w.id===d)?.schedule[x]?.exercises[y]?.exId;Me(d,x,S),g();break}je(a),H(i<2)}function be(){switch(ne){case 0:Je(d),V(-1);break;case 1:Oe(d,x),k(i=>i-1);break}j()}function se(i){const a=s.findIndex(o=>o.id===d);switch(K(!0),ie(i),i){case 0:const o=Array.isArray(s[a].name);E(o?s[a].name[l]:s[a].name),$(o?s[a].description[l]:s[a].description),R(!0);break;case 1:const f=s[a].schedule[x].name,m=Array.isArray(f)?f[l]:f;D(m),z(!0);break}}function oe(){switch(ne){case 0:Ne(d,T,M);break;case 1:Be(d,x,G);break}j()}function I(i,a){if($e(d,i,a,x,y),i===0){let o=x;a===1?o=x-1:a===0&&(o=x+1),o>=0&&k(o)}else{let o=y;a===1?o=y-1:a===0&&(o=y+1),o>=0&&N(o)}g()}function ve(i){N(i),ee(!1),te(!0)}return e.jsxs("div",{style:n(t).container,children:[s.map(i=>e.jsxs("div",{style:n(t).panel,children:[e.jsxs("div",{style:n(t,d===i.id,!1).groupPanel,onClick:()=>{V(a=>a===i.id?-1:i.id),k(-1)},children:[d===i.id?e.jsx(b,{style:n(t).icon}):e.jsx(v,{style:n(t).icon}),e.jsx(Pe,{style:{...n(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"16px"}}),e.jsx("p",{style:n(t,!1,!1,p).text,children:Array.isArray(i.name)?i.name[l]:i.name}),e.jsx("p",{style:{...n(t,!1,!1,p).subtext,marginRight:"5px",marginLeft:"auto"},children:i.creationDate})]}),d===i.id&&e.jsxs("div",{style:{...n(t).panel},children:[e.jsx("div",{style:{...n(t,!1,!1,p).subtext,marginRight:"15px",marginLeft:"15px"},children:x===-1&&(Array.isArray(i.description)?i.description[l]:i.description)}),e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center"},children:x===-1&&e.jsxs("div",{style:{...n(t,!1,!1,p).dayPanel,width:"98%",justifyContent:"space-around",flexDirection:"row"},children:[e.jsx(ae,{onClick:()=>z(!0),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(re,{onClick:()=>se(0),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(O,{onClick:()=>U(0),style:{...n(t).icon,fontSize:"14px"}})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:i.schedule.map((a,o)=>e.jsxs("div",{children:[e.jsxs("div",{style:{...n(t,!1,x===o).dayPanel,width:"98%",flexDirection:"row"},onClick:()=>k(f=>f===o?-1:o),children:[x===o?e.jsx(b,{style:{...n(t).icon,marginLeft:"2%",width:"10px",marginTop:"7px"}}):e.jsx(v,{style:{...n(t).icon,marginLeft:"2%",width:"10px",marginTop:"7px"}}),e.jsx(Ae,{style:{...n(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:n(t,!1,!1,p).text,children:l===0?`${o+1}-день :  ${a.name[0]}`:`${o+1}-day :  ${a.name[1]}`}),x===o&&e.jsxs("div",{onClick:f=>f.stopPropagation(),style:{display:"flex",flexDirection:"row",justifyContent:"center",marginLeft:"auto"},children:[e.jsx(Le,{onClick:()=>ee(!0),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(le,{onClick:()=>I(0,0),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(ce,{onClick:()=>I(0,1),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(re,{onClick:()=>se(1),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(O,{onClick:()=>U(1),style:{...n(t).icon,fontSize:"14px",marginRight:"8px"}})]})]}),x===o&&e.jsx("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:a.exercises.map((f,m)=>{const C=Re().find(S=>S.id===f.exId);return C?e.jsxs("div",{onClick:()=>N(m),style:{display:"flex",flexDirection:"row",width:"95%",marginLeft:"6px",marginRight:"5%",justifyContent:"flex-start",alignItems:"center"},children:[e.jsxs("p",{style:n(t,!1,!1,p).text,children:[m+1,"."]}),e.jsx(Te,{style:{...n(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:n(t,!1,!1,p).text,children:C.name[l]}),e.jsxs("p",{style:{...n(t,!1,!1,p).subtext,marginLeft:"auto"},children:[" ",f.sets]}),y===m&&e.jsxs("div",{onClick:S=>S.stopPropagation(),style:{display:"flex",flexDirection:"row",justifyContent:"center",marginLeft:"auto"},children:[e.jsx(le,{onClick:()=>I(1,0),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(ce,{onClick:()=>I(1,1),style:{...n(t).icon,fontSize:"14px"}}),e.jsx(O,{onClick:()=>U(2),style:{...n(t).icon,fontSize:"14px",marginRight:"8px"}})]})]},m):null})})]},o))}),e.jsx(Ee,{programmId:i.id,theme:t,langIndex:l,programs:s})]})]},i.id)),d===-1&&e.jsx("div",{onClick:()=>R(!0),style:{...n(t).groupPanel,height:"5%",justifyContent:"center"},children:e.jsx(ae,{style:{...n(t).icon,fontSize:"24px"}})}),pe&&e.jsx("div",{style:n(t).addContainer,children:e.jsxs("div",{style:{...n(t).additionalPanel,height:"40%"},children:[e.jsx("p",{style:n(t,!1,!1,p).text,children:l===0?u?"Редактировать программу":"Новая программа":u?"Redact programm":"New programm"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:c.get("background",t),height:"82%",width:"100%",alignItems:"center"},children:[e.jsx(W,{maxL:30,w:"80%",h:"18%",value:u?T:"",theme:t,onChange:i=>E(i),placeHolder:l===0?"Название программы":"Programm name"}),e.jsx(W,{maxL:100,w:"80%",h:"44%",value:u?M:"",theme:t,onChange:i=>$(i),placeHolder:l===0?"Описание программы":"Programm description"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(J,{onClick:()=>j(),style:{...n(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(A,{onClick:()=>{u?oe():Ce()},style:{...n(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),ue&&e.jsx("div",{style:n(t).addContainer,children:e.jsxs("div",{style:{...n(t).additionalPanel,height:"40%"},children:[e.jsx("p",{style:n(t,!1,!1,p).text,children:l===0?u?"Редактировать тренировочный день":"Добавь тренировочный день":u?"Redact training day":"Add training day"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",backgroundColor:c.get("background",t),height:"80%",width:"100%",alignItems:"center"},children:e.jsx(W,{maxL:30,w:"90%",h:"40%",theme:t,value:G,onChange:i=>D(i),placeHolder:l===0?"День":"Day"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(J,{onClick:()=>z(!1),style:{...n(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(A,{onClick:()=>{u?oe():Se()},style:{...n(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),ge&&e.jsx("div",{style:{...n(t).addContainer},children:e.jsx(We,{needToAdd:!0,setEx:ve})}),me&&e.jsx("div",{style:n(t).addContainer,children:e.jsxs("div",{style:{position:"fixed",top:"30vh",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"80vw",height:"80vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${c.get("border",t)}`,backgroundColor:c.get("background",t),zIndex:"7000"},children:[e.jsx("p",{style:{...n(t,!1,!1,p).text,padding:"20px",marginLeft:"10%",marginRight:"5%"},children:l===0?"Установите стратегию выполнения":"Set performing strategy"}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",height:"50%",width:"60%",justifyContent:"space-around"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(b,{onClick:()=>_(i=>i+1),style:{...n(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...n(t).text,fontSize:"24px"},children:Y}),e.jsx(v,{onClick:()=>_(i=>i-1>0?i-1:1),style:{...n(t).icon,marginLeft:"1px",fontSize:"24px"}})]}),e.jsx("p",{style:{...n(t).text,fontSize:"24px",marginTop:"30%"},children:"x"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(b,{onClick:()=>Q(i=>i+1),style:{...n(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...n(t).text,fontSize:"24px"},children:h}),e.jsx(v,{onClick:()=>Q(i=>i-1>0?i-1:1),style:{...n(t).icon,marginLeft:"1px",fontSize:"24px"}})]}),e.jsx("p",{style:{...n(t).text,fontSize:"24px",marginTop:"30%"},children:"-"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(b,{onClick:()=>B(i=>i+1),style:{...n(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...n(t).text,fontSize:"24px"},children:F}),e.jsx(v,{onClick:()=>B(i=>i-1>h+2?i-1:h+2),style:{...n(t).icon,marginLeft:"1px",fontSize:"24px"}})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"center"},children:e.jsx(A,{onClick:()=>we(),style:{...n(t).icon,fontSize:"32px",marginBottom:"8px"}})})]})}),ye&&e.jsx("div",{style:n(t).addContainer,children:e.jsxs("div",{style:{position:"fixed",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85vw",height:"40vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${c.get("border",t)}`,backgroundColor:c.get("background",t),zIndex:"7000"},children:[e.jsx("p",{style:{...n(t,!1,!1,p).text,textAlign:"center",padding:"20px",marginLeft:"10%",marginRight:"5%"},children:he}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(J,{onClick:()=>H(!1),style:{...n(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(A,{onClick:()=>be(),style:{...n(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})})]})},n=(s,L,g,t)=>({container:{backgroundColor:c.get("background",s),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI"},groupPanel:{display:"flex",flexDirection:"row",width:"100%",height:"6vh",backgroundColor:L?c.get("trainingGroupSelected",s):c.get("trainingGroup",s),borderTop:`1px solid ${c.get("border",s)}`,alignItems:"center",justifyContent:"left",alignContent:"center"},dayPanel:{display:"flex",flexDirection:"column",width:"100vW",height:"4vh",backgroundColor:g?c.get("trainingGroupSelected",s):c.get("background",s),borderBottom:`1px solid ${c.get("border",s)}`,alignItems:"center",justifyContent:"left"},panel:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyItems:"center"},text:{textAlign:"left",fontSize:t===0?"13px":"15px",color:c.get("mainText",s),marginBottom:"12px"},subtext:{textAlign:"left",fontSize:t===0?"11px":"13px",color:c.get("subText",s),marginBottom:"12px"},icon:{fontSize:"20px",color:c.get("icons",s),marginLeft:"20px"},addContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"10px"},additionalPanel:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",borderRadius:"24px",border:`1px solid ${c.get("border",s)}`,backgroundColor:c.get("simplePanel",s),boxShadow:`4px 4px 6px ${c.get("shadow",s)}`,width:"100%",height:"100vw"},exercisePanel:{display:"flex",flexDirection:"column",width:"90vW",height:"5vh",backgroundColor:g?c.get("trainingGroupSelected",s):c.get("background",s),alignItems:"center",justifyContent:"left"}}),q=s=>s&&s.charAt(0).toUpperCase()+s.slice(1);export{_e as default};
