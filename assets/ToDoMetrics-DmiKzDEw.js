import{A as b,U as A,t as G,l as V,f as H,p as N,C as r,j as e,m as p}from"./index-BwhhrB4Q.js";import{r as x}from"./recharts-k8ghPecL.js";import{M as O}from"./MyAreaChart-CQkaGee5.js";import{M as q}from"./MyBarChart-D1BT_hDs.js";const Q=()=>{const[a,u]=x.useState("dark"),[s,y]=x.useState(b.prefs[0]),[w,j]=x.useState(b.prefs[4]),[k,I]=x.useState(A.hasPremium);x.useEffect(()=>{const n=G.subscribe(u),c=V.subscribe(S=>y(S==="ru"?0:1)),h=H.subscribe(j),m=N.subscribe(I);return()=>{n.unsubscribe(),c.unsubscribe(),h.unsubscribe(),m.unsubscribe()}},[]);const l=x.useMemo(()=>{const n=b.todoList||[],c=n.filter(i=>i.isDone),h=n.length,m=c.length,S=h>0?Math.round(m/h*100):0,z=Array.from({length:28},(i,o)=>{const g=new Date;g.setDate(g.getDate()-o);const D=g.toISOString().split("T")[0],T=c.filter($=>$.startDate===D).length;return{date:D,count:T}}).reverse(),R=s===0?["Ð’Ñ","ÐŸÐ½","Ð’Ñ‚","Ð¡Ñ€","Ð§Ñ‚","ÐŸÑ‚","Ð¡Ð±"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v=[0,0,0,0,0,0,0];c.forEach(i=>{const o=new Date(i.startDate);isNaN(o)||v[o.getDay()]++});const B=Math.max(...v),L=v.indexOf(B),W=B>0?R[L]:"--";let M=0;const E=new Date;for(let i=0;i<30;i++){const o=new Date;o.setDate(E.getDate()-i);const g=o.toISOString().split("T")[0];if(c.some(T=>T.startDate===g))M++;else if(i>0)break}const P=z.slice(-7).map(i=>({label:i.date.split("-")[2],value:i.count})),f={};n.forEach(i=>{const o=i.category||(s===0?"ÐžÐ±Ñ‰ÐµÐµ":"General");f[o]=(f[o]||0)+1});const F=Object.keys(f).map(i=>({label:i,value:f[i]}));return{total:h,completedCount:m,rate:S,heatmapDays:z,bestDay:W,streak:M,areaData:P,barData:F}},[b.todoList,s]),t=U(a),d={hidden:{opacity:0,y:15},show:{opacity:1,y:0}};return e.jsx("div",{style:t.container,children:e.jsxs(p.div,{style:t.scrollContent,className:"no-scrollbar",initial:"hidden",animate:"show",variants:{show:{transition:{staggerChildren:.05}}},children:[e.jsxs(p.div,{variants:d,style:t.header,children:[e.jsx("h2",{style:t.pageTitle,children:s===0?"Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´":"Dashboard"}),e.jsx("span",{style:t.pageSubtitle,children:s===0?"Ð¢Ð²Ð¾Ð¸ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ":"Your achievements"})]}),e.jsxs(p.div,{variants:d,style:t.insightRow,children:[e.jsxs("div",{style:{...t.insightCard,background:"linear-gradient(135deg, #FF6B6B 0%, #EE5253 100%)"},children:[e.jsx("span",{style:t.insightIcon,children:"ðŸ”¥"}),e.jsxs("div",{style:t.insightText,children:[e.jsx("div",{style:t.insightVal,children:l.streak}),e.jsx("div",{style:t.insightLabel,children:s===0?"Ð”Ð½Ñ Ð¿Ð¾Ð´Ñ€ÑÐ´":"Day Streak"})]})]}),e.jsxs("div",{style:{...t.insightCard,background:"linear-gradient(135deg, #4834d4 0%, #686de0 100%)"},children:[e.jsx("span",{style:t.insightIcon,children:"â­"}),e.jsxs("div",{style:t.insightText,children:[e.jsx("div",{style:t.insightVal,children:l.bestDay}),e.jsx("div",{style:t.insightLabel,children:s===0?"ÐŸÐ¸Ðº Ñ„Ð¾Ñ€Ð¼Ñ‹":"Best Day"})]})]})]}),e.jsxs(p.div,{variants:d,style:t.chartBox,children:[e.jsxs("div",{style:t.chartHeaderRow,children:[e.jsx("h3",{style:t.chartTitle,children:s===0?"ÐšÐ°Ñ€Ñ‚Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸":"Activity Map"}),e.jsx("span",{style:t.chartBadge,children:"Last 28 days"})]}),e.jsx("div",{style:t.heatmapGrid,children:l.heatmapDays.map((n,c)=>e.jsx("div",{style:{...t.heatmapSquare,backgroundColor:r.get("areaChart",a),opacity:n.count===0?.1:Math.min(.2+n.count*.25,1)}},c))}),e.jsxs("div",{style:t.heatmapLegend,children:[e.jsx("span",{children:"Less"}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:[.1,.4,.7,1].map(n=>e.jsx("div",{style:{...t.heatmapSquare,opacity:n,backgroundColor:r.get("areaChart",a)}},n))}),e.jsx("span",{children:"More"})]})]}),e.jsxs("div",{style:t.summaryGrid,children:[e.jsx(C,{label:s===0?"Ð’ÑÐµÐ³Ð¾":"Total",value:l.total,theme:a,variants:d,icon:"ðŸ“‹"}),e.jsx(C,{label:s===0?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"Done",value:l.completedCount,theme:a,color:r.get("done",a),variants:d,icon:"âœ”ï¸"}),e.jsx(C,{label:s===0?"Ð£ÑÐ¿ÐµÑ…":"Rate",value:l.rate+"%",theme:a,color:r.get("areaChart",a),variants:d,isHighlight:!0,icon:"âš¡"})]}),e.jsxs(p.div,{variants:d,style:t.chartBox,children:[e.jsx("h3",{style:t.chartTitle,children:s===0?"ÐÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÐ¼Ð¿":"Weekly Velocity"}),e.jsx(O,{data:l.areaData,color:r.get("areaChart",a),height:150})]}),e.jsxs(p.div,{variants:d,style:t.chartBox,children:[e.jsx("h3",{style:t.chartTitle,children:s===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ñ‹":"Priorities"}),e.jsx(q,{data:l.barData,color:r.get("barsColorTonnage",a),height:150})]})]})})},C=({label:a,value:u,theme:s,color:y,variants:w,icon:j,isHighlight:k})=>e.jsxs(p.div,{variants:w,style:{backgroundColor:r.get("simplePanel",s),borderRadius:"20px",padding:"15px",display:"flex",flexDirection:"column",flex:1,boxShadow:r.get("shadow",s),border:k?`1px solid ${y}44`:"1px solid transparent"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginBottom:"5px"},children:[e.jsx("span",{children:j}),e.jsx("span",{style:{fontSize:"10px",color:r.get("subText",s),fontWeight:"700",textTransform:"uppercase"},children:a})]}),e.jsx("span",{style:{fontSize:"22px",fontWeight:"800",color:y||r.get("mainText",s)},children:u})]}),U=(a,u)=>({container:{backgroundColor:r.get("background",a),height:"100%",width:"100vw",paddingTop:"100px",display:"flex",flexDirection:"column",fontFamily:"SF Pro Display, Segoe UI, sans-serif"},scrollContent:{flex:1,overflowY:"auto",padding:"10px 20px 120px 20px",display:"flex",flexDirection:"column",gap:"18px"},header:{marginBottom:"5px",marginTop:"15px"},pageTitle:{fontSize:"28px",fontWeight:"800",color:r.get("mainText",a),margin:0},pageSubtitle:{fontSize:"14px",color:r.get("subText",a)},insightRow:{display:"flex",gap:"12px"},insightCard:{flex:1,borderRadius:"24px",padding:"15px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",color:"#fff"},insightIcon:{fontSize:"24px"},insightVal:{fontSize:"20px",fontWeight:"800"},insightLabel:{fontSize:"10px",opacity:.8,fontWeight:"600",textTransform:"uppercase"},heatmapGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"6px",margin:"10px 0"},heatmapSquare:{aspectRatio:"1/1",borderRadius:"4px",width:"100%"},heatmapLegend:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"8px",fontSize:"10px",color:r.get("subText",a),marginTop:"8px"},summaryGrid:{display:"flex",gap:"10px"},chartBox:{backgroundColor:r.get("simplePanel",a),borderRadius:"24px",padding:"20px",boxShadow:r.get("shadow",a),border:`1px solid ${a==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)"}`},chartHeaderRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},chartTitle:{fontSize:"13px",fontWeight:"700",color:r.get("subText",a),margin:0,textTransform:"uppercase"},chartBadge:{fontSize:"9px",backgroundColor:"rgba(0,0,0,0.1)",padding:"2px 6px",borderRadius:"5px"}});export{Q as default};
