import{r as i,ad as e,bJ as ke,aq as p,bK as Ie,bL as ae,ax as V,bM as De,bi as ze,bF as X,bx as le,ar as de,bN as Ae,bO as Re,bP as Be,bv as Pe}from"./vendor-Bnxy7kaC.js";import{A as I,t as Ee,l as Fe,D as Me,f as $e,C as o,M as We,L as Ne,O as Le,P as He,Q as Oe,R as Ge,S as Ue,T as qe}from"./index-BHS-6y7f.js";import{M as O}from"./MyInput-BSZ7sO5H.js";import Ve from"./TrainingExercise-BJ3Eylai.js";import{S as G}from"./ScrollPicker-ByrTnpmy.js";import"./ton-sdk-Boo5uyyT.js";const ie=(s,g)=>{const a=[];for(let t=s;t<=g;t++)a.push(t);return a},tt=()=>{const[s,g]=i.useState(I.programs),a=()=>{g({...I.programs})},[t,c]=i.useState("dark"),[r,w]=i.useState(I.prefs[0]),[m,M]=i.useState(I.prefs[1]),[$,f]=i.useState(!1),[j,C]=i.useState(!1),[x,J]=i.useState(-1),[y,D]=i.useState(-1),[W,z]=i.useState(""),[N,A]=i.useState(""),[K,ce]=i.useState(3),[S,Q]=i.useState(8),[v,Y]=i.useState(12),[b,Z]=i.useState(0),[_,ee]=i.useState(0),xe=i.useMemo(()=>ie(1,20),[]),te=i.useMemo(()=>ie(1,100),[]),[Je,se]=i.useState(1),[oe,ne]=i.useState(r===0?"День 1":"Day 1"),[pe,R]=i.useState(!1),[ge,L]=i.useState(!1),[ue,B]=i.useState(!1),[fe,P]=i.useState(!1),[ye,be]=i.useState(""),[he,re]=i.useState(0);i.useEffect(()=>{S>v&&Y(S)},[S]),i.useEffect(()=>{v<S&&Q(v)},[v]),i.useEffect(()=>{const n=Ee.subscribe(c),l=Fe.subscribe(T=>w(T==="ru"?0:1)),u=Me.subscribe(T=>f(T==="AddProgrammPanel")),h=$e.subscribe(M);return()=>{n.unsubscribe(),l.unsubscribe(),u.unsubscribe(),h.unsubscribe()}},[]),i.useEffect(()=>{if(x===-1)return;const n=s[x];if(!n)return;const l=n.schedule.length;se(l),ne(r===0?`День ${l+1}`:`Day ${l+1}`)},[x,r,s]);const E=()=>{a(),C(!1),R(!1),B(!1)},me=()=>{He(k(W),k(N)),z(""),A(""),E(),f(!1)},je=()=>{Le(x,k(W),k(N)),z(""),A(""),E(),f(!1)},Ce=()=>{Oe(x,k(oe)),se(n=>n+1),E()},Se=()=>{let n=r===0?"время":"time";b===0&&(n=K+"x"+S+"-"+v),qe(x,y,_,n),P(!1),a()},H=n=>{re(n);let l="";if(n===0){const u=s[x].name;l=r===0?`Удалить программу "${Array.isArray(u)?u[r]:u}"?`:`Delete program "${Array.isArray(u)?u[r]:u}"?`}else if(n===1){const u=s[x]?.schedule[y]?.name;l=r===0?`Удалить день "${u[r]}"?`:`Delete day "${u[r]}"?`}else{const u=s[x].schedule[y]?.exercises[_]?.exId;Ne(x,y,u),a();return}be(l),B(!0)},ve=()=>{he===0?(Ge(x),J(-1)):(Ue(x,y),D(-1)),E()},we=n=>{C(!0),re(n);{const l=s[x];z(Array.isArray(l.name)?l.name[r]:l.name),A(Array.isArray(l.description)?l.description[r]:l.description),f(!0)}},Te={collapsed:{height:0,opacity:0,overflow:"hidden"},expanded:{height:"auto",opacity:1,transition:{duration:.3,ease:"easeInOut"}}};return e.jsxs("div",{style:d(t).container,children:[e.jsx(ke,{children:e.jsx("div",{style:{width:"100%",maxWidth:"600px",paddingBottom:"80px"},children:Object.entries(s).map(([n,l])=>({id:Number(n),...l})).filter(n=>n.show).sort((n,l)=>n.id-l.id).map(n=>{const l=x===n.id;return e.jsxs(p.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{...d(t).card,backgroundColor:l?o.get("trainingGroupSelected",t):o.get("background",t),border:`1px solid ${l?o.get("currentDateBorder",t):"transparent"}`},children:[e.jsxs(p.div,{onClick:()=>{J(l?-1:n.id),D(-1)},style:d(t).groupHeader,whileTap:{scale:.98},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,gap:"15px"},children:[e.jsx("div",{style:d(t).iconBox,children:e.jsx(Ie,{size:20,color:l?"#fff":o.get("icons",t)})}),e.jsxs("div",{children:[e.jsx("p",{style:d(t,!1,!1,m).text,children:Array.isArray(n.name)?n.name[r]:n.name}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[e.jsxs("span",{style:d(t).badge,children:[n.schedule.length," ",r===0?"дней":"days"]}),!l&&e.jsx("span",{style:{...d(t).badge,opacity:.6},children:n.creationDate})]})]})]}),e.jsx(p.div,{animate:{rotate:l?180:0},children:e.jsx(ae,{style:d(t).icon})})]}),e.jsx(V,{children:l&&e.jsx(p.div,{variants:Te,initial:"collapsed",animate:"expanded",exit:"collapsed",style:{borderTop:`1px solid ${o.get("border",t)}`},children:e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("p",{style:{...d(t,!1,!1,m).subtext,marginBottom:"20px"},children:Array.isArray(n.description)?n.description[r]:n.description}),y===-1&&e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",overflowX:"auto",paddingBottom:"5px"},children:[e.jsx(U,{icon:e.jsx(De,{}),label:r===0?"День":"Day",onClick:()=>R(!0),theme:t}),e.jsx(U,{icon:e.jsx(ze,{}),label:r===0?"Правка":"Edit",onClick:()=>we(0),theme:t}),e.jsx(U,{icon:e.jsx(X,{}),label:r===0?"Удалить":"Del",onClick:()=>H(0),theme:t,isDanger:!0})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:n.schedule.map((u,h)=>e.jsx(Xe,{index:h,day:u,active:y===h,onClick:()=>D(y===h?-1:h),theme:t,fSize:m,langIndex:r,onAddEx:()=>L(!0),onRemove:()=>{D(h),H(1)},onRemoveEx:T=>{ee(T),H(2)}},h))}),e.jsx("div",{style:{marginTop:"25px",justifyItems:"center",padding:"15px",backgroundColor:t==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.05)",borderRadius:"16px"},children:e.jsx(We,{programmId:n.id,theme:t,langIndex:r,programs:s})})]})})})]},n.id)})})}),x===-1&&e.jsx(p.button,{whileTap:{scale:.9},onClick:()=>{C(!1),f(!0)},style:d(t).bigFab,children:e.jsx(le,{size:24,color:"#FFF"})}),e.jsxs(V,{children:[$&&e.jsxs(F,{onClose:()=>f(!1),theme:t,title:r===0?j?"Редактировать":"Новая программа":j?"Edit Program":"New Program",children:[e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsx(O,{maxL:40,w:"100%",h:"auto",value:W,theme:t,onChange:z,placeHolder:r===0?"Название":"Name"}),e.jsx(O,{maxL:200,w:"100%",h:"auto",value:N,theme:t,onChange:A,placeHolder:r===0?"Описание":"Description"})]}),e.jsx(q,{onClose:()=>f(!1),onConfirm:()=>j?je():me(),theme:t})]}),pe&&e.jsxs(F,{onClose:()=>R(!1),theme:t,title:r===0?"Тренировочный день":"Training Day",children:[e.jsx(O,{maxL:40,w:"100%",h:"auto",value:oe,theme:t,onChange:ne,placeHolder:r===0?"Название дня":"Day Name"}),e.jsx(q,{onClose:()=>R(!1),onConfirm:Ce,theme:t})]}),ue&&e.jsxs(F,{onClose:()=>B(!1),theme:t,title:"⚠️",children:[e.jsx("p",{style:{...d(t,!1,!1,m).text,textAlign:"center",marginBottom:"25px"},children:ye}),e.jsxs("div",{style:{display:"flex",gap:"20px",width:"100%",justifyContent:"center"},children:[e.jsx(p.button,{whileTap:{scale:.95},onClick:()=>B(!1),style:d(t).secondaryBtn,children:r===0?"Нет":"Cancel"}),e.jsx(p.button,{whileTap:{scale:.95},onClick:ve,style:d(t).dangerBtn,children:r===0?"Удалить":"Delete"})]})]}),fe&&e.jsxs(F,{onClose:()=>P(!1),theme:t,title:r===0?"Стратегия":"Strategy",children:[e.jsxs("div",{style:d(t).segmentedControl,children:[e.jsx("div",{onClick:()=>Z(0),style:{...d(t).segment,backgroundColor:b===0?o.get("difficulty",t):"transparent",color:b===0?o.get("mainText",t):o.get("subText",t),boxShadow:b===0?"0 2px 5px rgba(0,0,0,0.1)":"none"},children:r===0?"Повторы":"Reps"}),e.jsx("div",{onClick:()=>Z(1),style:{...d(t).segment,backgroundColor:b===1?o.get("difficulty",t):"transparent",color:b===1?o.get("mainText",t):o.get("subText",t),boxShadow:b===1?"0 2px 5px rgba(0,0,0,0.1)":"none"},children:r===0?"Время":"Time"})]}),b===0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"20px 0"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:o.get("subText",t),marginBottom:"5px"},children:"SETS"}),e.jsx(G,{items:xe,value:K,onChange:ce,theme:t,width:"60px"})]}),e.jsx("span",{style:{fontSize:"20px",color:o.get("subText",t),marginTop:"15px"},children:"×"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:o.get("subText",t),marginBottom:"5px"},children:"MIN"}),e.jsx(G,{items:te,value:S,onChange:Q,theme:t,width:"60px"})]}),e.jsx("span",{style:{fontSize:"20px",color:o.get("subText",t),marginTop:"15px"},children:"-"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:o.get("subText",t),marginBottom:"5px"},children:"MAX"}),e.jsx(G,{items:te,value:v,onChange:Y,theme:t,width:"60px"})]})]}),e.jsx(q,{onClose:()=>P(!1),onConfirm:Se,theme:t})]})]}),ge&&e.jsxs("div",{style:d(t).fullOverlay,children:[e.jsx(Ve,{needToAdd:!0,setEx:n=>{ee(n),L(!1),P(!0)}}),e.jsx(p.div,{whileTap:{scale:.9},onClick:()=>L(!1),style:d(t).closeOverlayBtn,children:e.jsx(de,{size:24,color:"#FFF"})})]})]})},Xe=({index:s,day:g,active:a,onClick:t,theme:c,fSize:r,langIndex:w,onAddEx:m,onRemove:M,onRemoveEx:$})=>e.jsxs(p.div,{layout:!0,onClick:t,style:{...d(c).card,backgroundColor:a?c==="light"?"#fff":"rgba(255,255,255,0.05)":"transparent",border:a?`1px solid ${o.get("border",c)}`:"1px solid transparent",marginBottom:"0",boxShadow:a&&c==="light"?"0 4px 12px rgba(0,0,0,0.05)":"none"},children:[e.jsxs("div",{style:{padding:"12px 15px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"12px",color:o.get("subText",c)},children:a?e.jsx(Ae,{}):e.jsx(ae,{})}),e.jsx(Re,{style:{color:o.get("currentDateBorder",c)},size:16}),e.jsx("span",{style:{fontWeight:"600",color:o.get("mainText",c),flex:1,fontSize:"15px"},children:w===0?`${g.name[0]}`:`${g.name[1]}`}),a&&e.jsxs("div",{style:{display:"flex",gap:"10px"},onClick:f=>f.stopPropagation(),children:[e.jsx(p.div,{whileTap:{scale:.9},onClick:m,style:d(c).miniBtn,children:e.jsx(le,{size:12,color:"#fff"})}),e.jsx(p.div,{whileTap:{scale:.9},onClick:M,style:{...d(c).miniBtn,backgroundColor:"rgba(255, 77, 77, 0.2)"},children:e.jsx(X,{size:12,color:"#ff4d4d"})})]})]}),e.jsx(V,{children:a&&e.jsx(p.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 15px 15px",display:"flex",flexDirection:"column",gap:"8px"},children:[g.exercises.map((f,j)=>{const C=I.exercises[f.exId];return C?e.jsxs("div",{style:d(c).exerciseRow,children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px",flex:1},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:o.get("mainText",c)},children:C.name[w]}),e.jsxs("div",{style:{fontSize:"12px",color:o.get("subText",c),display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(Be,{size:10})," ",f.sets]})]})}),e.jsx(p.div,{whileTap:{scale:.9},onClick:x=>{x.stopPropagation(),$(j)},style:{padding:"8px",opacity:.6},children:e.jsx(X,{color:"#ff4d4d",size:14})})]},j):null}),g.exercises.length===0&&e.jsx("div",{style:{textAlign:"center",fontSize:"12px",color:o.get("subText",c),padding:"10px"},children:w===0?"Нет упражнений":"No exercises"})]})})})]}),U=({icon:s,onClick:g,theme:a,label:t,isDanger:c})=>e.jsxs(p.div,{whileTap:{scale:.95},onClick:g,style:{flex:1,padding:"8px 12px",borderRadius:"12px",minWidth:"80px",backgroundColor:c?"rgba(255, 77, 77, 0.1)":a==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.08)",color:c?"#ff4d4d":o.get("subText",a),display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",cursor:"pointer"},children:[s,e.jsx("span",{style:{fontSize:"10px",fontWeight:"700",opacity:.8,textTransform:"uppercase"},children:t})]}),F=({children:s,title:g,theme:a,onClose:t})=>e.jsx("div",{style:d(a).modalBackdrop,onClick:t,children:e.jsxs(p.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.95},style:d(a).modalContainer,onClick:c=>c.stopPropagation(),children:[e.jsx("div",{style:d(a).modalHeader,children:e.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",color:o.get("mainText",a),margin:0},children:g})}),e.jsx("div",{style:{width:"100%",padding:"0 20px",display:"flex",flexDirection:"column",alignItems:"center"},children:s})]})}),q=({onClose:s,onConfirm:g,theme:a})=>e.jsxs("div",{style:d(a).modalActions,children:[e.jsx(p.div,{whileTap:{scale:.9},onClick:s,style:d(a).circleBtn,children:e.jsx(de,{style:{fontSize:"24px",color:o.get("subText",a)}})}),e.jsx(p.div,{whileTap:{scale:.9},onClick:g,style:{...d(a).circleBtn,backgroundColor:o.get("done",a)},children:e.jsx(Pe,{style:{fontSize:"24px",color:"#fff"}})})]}),k=s=>s?s.charAt(0).toUpperCase()+s.slice(1):"",d=(s,g,a,t)=>({container:{backgroundColor:o.get("background",s),display:"flex",flexDirection:"column",overflowY:"auto",alignItems:"center",height:"90vh",paddingTop:"20px",width:"100vw",marginTop:"110px",fontFamily:"Segoe UI, Roboto, sans-serif",boxSizing:"border-box"},card:{width:"94%",margin:"0 auto 12px auto",borderRadius:"16px",overflow:"hidden",boxShadow:s==="light"?"0 2px 8px rgba(0,0,0,0.05)":"none"},groupHeader:{display:"flex",flexDirection:"row",padding:"15px",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},iconBox:{width:"36px",height:"36px",borderRadius:"10px",backgroundColor:o.get("currentDateBorder",s),display:"flex",alignItems:"center",justifyContent:"center"},badge:{fontSize:"10px",fontWeight:"700",padding:"2px 8px",borderRadius:"6px",backgroundColor:s==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",color:o.get("subText",s),textTransform:"uppercase"},text:{fontSize:t===0?"16px":"18px",color:o.get("mainText",s),fontWeight:"600",margin:0},subtext:{fontSize:t===0?"13px":"15px",color:o.get("subText",s),lineHeight:"1.4",margin:0},icon:{fontSize:"20px",color:o.get("icons",s)},exerciseRow:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",borderRadius:"12px",backgroundColor:s==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.05)",border:`1px solid ${o.get("border",s)}`},exerciseIcon:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},bigFab:{position:"fixed",bottom:"110px",right:"30px",width:"56px",height:"56px",borderRadius:"28px",backgroundColor:o.get("difficulty",s),border:"none",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 20px rgba(0,0,0,0.3)",cursor:"pointer",zIndex:100},miniBtn:{width:"24px",height:"24px",borderRadius:"8px",backgroundColor:o.get("currentDateBorder",s),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},circleBtn:{width:"50px",height:"50px",borderRadius:"25px",backgroundColor:o.get("skipped",s),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},secondaryBtn:{padding:"10px 20px",borderRadius:"12px",border:"none",backgroundColor:s==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",color:o.get("mainText",s),fontSize:"16px",cursor:"pointer"},dangerBtn:{padding:"10px 20px",borderRadius:"12px",border:"none",backgroundColor:"#ff4d4d",color:"#fff",fontSize:"16px",cursor:"pointer"},modalBackdrop:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},modalContainer:{width:"99%",maxWidth:"400px",backgroundColor:o.get("background",s),borderRadius:"24px",boxShadow:"0 20px 50px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",border:`1px solid ${o.get("border",s)}`,overflow:"hidden"},modalHeader:{width:"100%",padding:"20px",borderBottom:`1px solid ${o.get("border",s)}`,textAlign:"center",marginBottom:"15px"},modalActions:{marginTop:"20px",padding:"15px 20px",width:"100%",display:"flex",justifyContent:"space-around",alignItems:"center",borderTop:`1px solid ${o.get("border",s)}`,backgroundColor:s==="light"?"rgba(0,0,0,0.02)":"rgba(255,255,255,0.02)"},segmentedControl:{display:"flex",width:"100%",backgroundColor:s==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"4px",margin:"10px 0"},segment:{flex:1,textAlign:"center",padding:"8px",borderRadius:"10px",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},fullOverlay:{position:"fixed",inset:0,backgroundColor:o.get("background",s),zIndex:6e3},closeOverlayBtn:{position:"fixed",top:"20px",right:"20px",zIndex:6001,width:"40px",height:"40px",borderRadius:"20px",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}});export{tt as default};
