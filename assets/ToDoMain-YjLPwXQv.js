import{b$ as Se,A as D,y as _,j as e,d as N,m as b,a0 as we,C as a,af as ve,c0 as De,c1 as Te,b8 as fe,c2 as ye,aV as ee,b_ as he,c3 as Fe,c4 as be,bx as ae,a6 as me,a3 as se,c5 as ke,c6 as Y,ab as Ie,t as Be,l as Re,f as Le,a5 as re,c7 as ze,c8 as Ae,c9 as je,ca as Pe,cb as Ee,ad as $e,g as We,n as Oe}from"./index-HtFgr_YM.js";import{r as u}from"./recharts-C3psbGwv.js";import{S as ie}from"./ScrollPicker-u-HBRRAi.js";import Ne from"./ToDoMetrics-4rhZ3ZDJ.js";import{H as Ue}from"./HoverInfoButton-ipie_Q1E.js";import"./MyAreaChart-6T1nf_Kg.js";import"./index-wAAET0s_.js";const I=new Se(null);async function Ge(i,n,t,o,d,p,s,x,y,v){const S=Date.now(),h=()=>{const w=new Date;return w.setFullYear(w.getFullYear()+1),w.toISOString().split("T")[0]};D.todoList.push({id:S,name:(i??"").trim()||"Untitled",description:(n??"").trim(),difficulty:Number.isFinite(t)?t:0,priority:Number.isFinite(o)?o:0,category:(d??"").trim()||"General",icon:p??"task",isDone:!1,startDate:today&&typeof today=="string"?today:new Date().toISOString().split("T")[0],deadLine:x&&typeof x=="string"&&!isNaN(Date.parse(x))?x:h(),goals:Array.isArray(y)?[...y]:[],urgency:Number.isFinite(v)?v:0}),await _(),I&&I.next({type:"UPDATE_LIST"})}async function _e(i,n,t,o,d,p,s,x,y,v,S){const h=D.todoList.find(w=>w.id===i);h&&(h.name=n,h.description=t,h.difficulty=o,h.priority=d,h.category=p,h.icon=s,h.color=x,h.startDate=y,h.deadLine=v,h.note=S,await _(),I&&I.next({type:"UPDATE_LIST"}))}async function He(i){D.todoList=D.todoList.filter(n=>n.id!==i),await _(),I&&I.next({type:"UPDATE_LIST"})}async function Ye(i){const n=D.todoList.find(t=>t.id===i);n&&(n.isDone=!n.isDone,await _(),I&&I.next({type:"UPDATE_LIST"}))}async function Me(i,n){const t=D.todoList.find(o=>o.id===i);t&&(t.goals||(t.goals=[]),t.goals.push({text:n,isDone:!1}),await _(),I&&I.next({type:"UPDATE_LIST"}))}async function Ve(i,n){const t=D.todoList.find(o=>o.id===i);t&&t.goals&&(t.goals.splice(n,1),await _(),I&&I.next({type:"UPDATE_LIST"}))}async function Qe(i,n){const t=D.todoList.find(o=>o.id===i);t&&t.goals&&t.goals[n]&&(t.goals[n].isDone=!t.goals[n].isDone,await _(),I&&I.next({type:"UPDATE_LIST"}))}const le=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],de=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],Xe=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],qe=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],Ke=({show:i,setShow:n,theme:t,lang:o,fSize:d,task:p})=>{const[s,x]=u.useState(p||{}),[y,v]=u.useState(!1),[S,h]=u.useState(""),[w,R]=u.useState(null);u.useEffect(()=>{p&&x(p)},[p]);const A=s.goals?.length||0,L=s.goals?.filter(r=>r.isDone).length||0,F=A===0?s.isDone?100:0:Math.round(L/A*100),c=Q(t,d,s.color),k=async()=>{if(w==="main")await He(s.id),n(!1);else if(typeof w=="number"){const r=w,m=s.goals.filter((z,M)=>M!==r);x(z=>({...z,goals:m})),await Ve(s.id,r)}R(null)},P=async()=>{await _e(s.id,s.name,s.description,s.difficulty,s.priority,s.category,s.icon,s.color,s.startDate,s.deadLine,s.note),v(!1)},B=async r=>{if(!s.goals)return;const m=[...s.goals];m[r]={...m[r],isDone:!m[r].isDone},x(z=>({...z,goals:m})),await Qe(s.id,r)},W=async()=>{if(!S.trim())return;const r={text:S,isDone:!1};x(m=>({...m,goals:[...m.goals||[],r]})),await Me(s.id,S),h("")};return e.jsx(N,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),style:c.backdrop}),e.jsxs(b.div,{initial:{y:"100%"},animate:{y:"0%"},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:c.modalContainer,children:[e.jsx(N,{children:w!==null&&e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:c.warningOverlay,children:e.jsxs("div",{style:c.warningBox,children:[e.jsx(we,{size:40,color:"#F44336",style:{marginBottom:15}}),e.jsx("h3",{style:{color:a.get("mainText",t),margin:"0 0 10px 0"},children:o===0?"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹?":"Are you sure?"}),e.jsx("p",{style:{color:a.get("subText",t),textAlign:"center",marginBottom:20},children:o===0?"Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ.":"This action cannot be undone."}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%"},children:[e.jsx("button",{onClick:()=>R(null),style:c.cancelBtn,children:o===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("button",{onClick:k,style:c.confirmDeleteBtn,children:o===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ":"Delete"})]})]})})}),e.jsx("div",{style:c.dragArea,onClick:()=>n(!1),children:e.jsx("div",{style:c.dragHandle})}),e.jsxs("div",{style:c.toolbar,children:[e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>R("main"),style:c.iconBtnRed,children:e.jsx(ve,{size:16})}),e.jsx("div",{style:c.toolbarRight,children:y?e.jsxs(b.div,{whileTap:{scale:.9},onClick:P,style:c.saveBtn,children:[e.jsx(De,{style:{marginRight:6}})," ",o===0?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ":"Save"]}):e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>v(!0),style:c.iconBtn,children:e.jsx(Te,{size:16})})})]}),e.jsxs("div",{style:{overflowY:"scroll",overflowX:"hidden"},className:"no-scrollbar",children:[e.jsxs("div",{style:c.headerWrapper,children:[e.jsxs("div",{style:c.headerTopRow,children:[e.jsx("div",{style:c.iconBadge,children:s.icon}),e.jsx(b.button,{whileTap:{scale:.95},onClick:async()=>{x(r=>({...r,isDone:!r.isDone})),await Ye(s.id)},style:c.statusBadge(s.isDone),children:s.isDone?o===0?"Ð’Ð«ÐŸÐžÐ›ÐÐ•ÐÐž":"COMPLETED":o===0?"Ð’ ÐŸÐ ÐžÐ¦Ð•Ð¡Ð¡Ð•":"IN PROGRESS"})]}),y?e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:o===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Name",value:s.name,onChange:r=>x({...s,name:r.target.value}),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:a.get("mainText",t),outline:`solid 1px ${a.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"}})}):e.jsx("h2",{style:c.title,children:s.name}),e.jsxs("div",{style:c.progressContainer,children:[e.jsxs("span",{style:c.progressText,children:[F,"%"]}),e.jsx("div",{style:c.progressBarBg,children:e.jsx(b.div,{initial:{width:0},animate:{width:`${F}%`},style:c.progressBarFill})})]})]}),e.jsxs("div",{style:c.bodyPadding,children:[e.jsx("div",{style:c.gridTwo,children:y?e.jsxs(e.Fragment,{children:[e.jsx("select",{style:c.selectInput,value:s.priority,onChange:r=>x({...s,priority:parseInt(r.target.value)}),children:le.map((r,m)=>e.jsx("option",{value:m,children:r[o]},m))}),e.jsx("select",{style:c.selectInput,value:s.difficulty,onChange:r=>x({...s,difficulty:parseInt(r.target.value)}),children:de.map((r,m)=>e.jsx("option",{value:m,children:r[o]},m))})]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{icon:e.jsx(fe,{}),label:o===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority",value:le[s.priority][o],color:Xe[s.priority],theme:t}),e.jsx(ce,{icon:e.jsx(ye,{}),label:o===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",value:de[s.difficulty][o],color:qe[s.difficulty],theme:t})]})}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:y?e.jsx("input",{type:"text",placeholder:o===0?"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ":"Description",value:s.description,onChange:r=>x({...s,description:r.target.value}),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:a.get("mainText",t),outline:`solid 1px ${a.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"}}):e.jsx("p",{style:c.description,children:s.description||(o===0?"ÐÐµÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ":"No description")})}),e.jsxs("div",{style:c.dateRow,children:[e.jsx(pe,{label:o===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start",value:s.startDate,icon:e.jsx(ee,{}),isEditing:y,theme:t,onChange:r=>x({...s,startDate:r})}),e.jsx(pe,{label:o===0?"Ð¡Ñ€Ð¾Ðº":"Deadline",value:s.deadLine,icon:e.jsx(he,{}),isEditing:y,theme:t,onChange:r=>x({...s,deadLine:r})})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsxs("div",{style:c.sectionHeader,children:[e.jsx(Fe,{style:{marginRight:"8px",color:s.color}}),o===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist",e.jsxs("span",{style:c.counterBadge,children:[L,"/",A]})]}),e.jsxs("div",{style:c.goalsContainer,children:[e.jsx(N,{children:s.goals?.map((r,m)=>e.jsxs(b.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},style:{...c.goalRow,border:r.isDone?"2px solid  #2ed177":"transparent"},children:[e.jsx("div",{onClick:()=>B(m),style:c.checkbox(r.isDone),children:r.isDone&&e.jsx(be,{size:10,color:"#2ed177"})}),e.jsx("div",{style:c.goalText(r.isDone),onClick:()=>B(m),children:r.text}),e.jsx("div",{onClick:()=>R(m),style:c.deleteSubBtn,children:e.jsx(ae,{})})]},m))}),e.jsxs("div",{style:c.addSubRow,children:[e.jsx(me,{style:{color:a.get("subText",t),marginRight:10}}),e.jsx("input",{type:"text",placeholder:o===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Add item...",value:S,onChange:r=>h(r.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:a.get("mainText",t),outline:"none",marginLeft:"10px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"}}),S.length>0&&e.jsx("button",{onClick:W,style:c.addSubBtn,children:"OK"})]})]})]}),e.jsx("div",{style:{marginBottom:"560px"}})]})]})]})]})})},ce=({icon:i,label:n,value:t,color:o,theme:d})=>e.jsxs("div",{style:{...Q(d).modernBadge,backgroundColor:`${o}15`,border:`1px solid ${o}30`},children:[e.jsxs("div",{style:Q(d).badgeLabel,children:[i," ",e.jsx("span",{style:{marginLeft:6},children:n})]}),e.jsx("div",{style:{...Q(d).badgeValue,color:o},children:t})]}),pe=({label:i,value:n,icon:t,isEditing:o,theme:d,onChange:p})=>{const s=Q(d);return e.jsxs("div",{style:s.dateItem,children:[e.jsx("div",{style:{color:a.get("subText",d),marginRight:10},children:t}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:s.label,children:i}),o?e.jsx("input",{type:"date",style:s.dateInput,value:n||"",onChange:x=>p(x.target.value)}):e.jsx("span",{style:s.dateValue,children:n||"-"})]})]})},Q=(i,n,t)=>{const o=a.get("background",i),d=a.get("simplePanel",i),p=a.get("mainText",i),s=a.get("subText",i),x=a.get("border",i);return{backdrop:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",zIndex:1e3},modalContainer:{position:"fixed",bottom:0,left:0,right:0,height:"90dvh",backgroundColor:o,borderTopLeftRadius:"32px",borderTopRightRadius:"32px",zIndex:2e3,display:"flex",flexDirection:"column",boxShadow:"0 -10px 40px rgba(0,0,0,0.5)",overflow:"hidden"},warningOverlay:{position:"absolute",inset:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},warningBox:{backgroundColor:d,borderRadius:24,padding:25,width:"100%",maxWidth:320,display:"flex",flexDirection:"column",alignItems:"center",border:`1px solid ${x}`},cancelBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:x,color:p,fontWeight:"bold"},confirmDeleteBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:"#F44336",color:"#fff",fontWeight:"bold"},dragArea:{width:"100%",padding:"15px 0",display:"flex",justifyContent:"center"},dragHandle:{width:"40px",height:"5px",backgroundColor:x,borderRadius:"10px"},toolbar:{display:"flex",justifyContent:"space-between",padding:"0 24px 15px 24px"},iconBtn:{background:d,border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:p},iconBtnRed:{background:"rgba(244, 67, 54, 0.1)",border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:"#F44336"},saveBtn:{background:a.get("done",i),color:"#fff",border:"none",borderRadius:"12px",padding:"0 20px",fontWeight:"bold",display:"flex",alignItems:"center"},headerWrapper:{padding:"10px 24px 25px 24px",borderBottom:`1px solid ${x}`},headerTopRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},iconBadge:{width:64,height:64,borderRadius:20,fontSize:32,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${t}20`,border:`1px solid ${t}40`},statusBadge:y=>({padding:"10px 16px",borderRadius:14,fontSize:10,fontWeight:900,border:"none",backgroundColor:y?a.get("done",i):d,color:y?"#fff":s}),title:{fontSize:28,fontWeight:900,color:p,margin:0},progressContainer:{marginTop:20},progressText:{fontSize:12,fontWeight:800,color:t},progressBarBg:{width:"100%",height:8,backgroundColor:x,borderRadius:10,marginTop:6,overflow:"hidden"},progressBarFill:{height:"100%",backgroundColor:t},bodyPadding:{padding:24},gridTwo:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},modernBadge:{borderRadius:20,padding:15,display:"flex",flexDirection:"column",alignItems:"center"},badgeLabel:{display:"flex",alignItems:"center",fontSize:10,color:s,textTransform:"uppercase",letterSpacing:1},badgeValue:{fontSize:14,fontWeight:800,marginTop:4},dateRow:{display:"flex",gap:12,marginBottom:24},dateItem:{flex:1,display:"flex",alignItems:"center",backgroundColor:d,padding:12,borderRadius:16},dateInput:{background:"transparent",border:"none",color:p,fontSize:13,width:"100%",outline:"none"},label:{fontSize:9,color:s,textTransform:"uppercase"},dateValue:{fontSize:13,fontWeight:700,color:p},sectionHeader:{display:"flex",alignItems:"center",fontSize:17,fontWeight:800,color:p,marginBottom:15},counterBadge:{marginLeft:"auto",fontSize:11,backgroundColor:d,padding:"4px 10px",borderRadius:8,color:s},goalRow:{display:"flex",alignItems:"center",padding:14,backgroundColor:d,borderRadius:16,marginBottom:8},checkbox:y=>({width:24,height:24,borderRadius:8,border:`2px solid ${y?t:x}`,backgroundColor:y?t:"transparent",display:"flex",alignItems:"center",justifyContent:"center"}),goalText:y=>({flex:1,fontSize:15,color:p,opacity:y?.5:1,textDecoration:y?"line-through":"none",marginLeft:12}),deleteSubBtn:{color:s,padding:5},addSubRow:{display:"flex",alignItems:"center",padding:"16px 15px",border:`2px dashed ${x}`,borderRadius:16},addSubBtn:{background:t,color:"#fff",border:"none",borderRadius:8,padding:"6px 12px",fontWeight:"bold",marginLeft:10},description:{fontSize:16,lineHeight:1.6,color:p,margin:0,opacity:.9},selectInput:{width:"100%",padding:12,borderRadius:12,border:`1px solid ${x}`,backgroundColor:d,color:p}}},X=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],q=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],K=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],ne=[{icon:"ðŸ“",label:["ÐžÐ±Ñ‰ÐµÐµ","General"]},{icon:"ðŸ’¼",label:["Ð Ð°Ð±Ð¾Ñ‚Ð°","Work"]},{icon:"ðŸ ",label:["Ð”Ð¾Ð¼","Home"]},{icon:"ðŸ’ª",label:["Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ","Health"]},{icon:"ðŸ›’",label:["ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ¸","Shopping"]},{icon:"ðŸŽ“",label:["Ð£Ñ‡ÐµÐ±Ð°","Study"]},{icon:"âœˆï¸",label:["ÐŸÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ","Trip"]},{icon:"ðŸ’°",label:["Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹","Finance"]},{icon:"ðŸŽ¨",label:["Ð¥Ð¾Ð±Ð±Ð¸","Hobby"]},{icon:"ðŸ’»",label:["ÐšÐ¾Ð´","Coding"]}],Je=({theme:i,lang:n,fSize:t})=>{const[o,d]=u.useState(!1),[p,s]=u.useState(""),[x,y]=u.useState(""),[v,S]=u.useState(X[1][n]),[h,w]=u.useState(q[2][n]),[R,A]=u.useState(K[1][n]),[L,F]=u.useState(0),[c,k]=u.useState(new Date().toISOString().split("T")[0]),[P,B]=u.useState(""),[W,r]=u.useState([]),[m,z]=u.useState("");u.useEffect(()=>{const j=se.subscribe(T=>d(T==="ToDoNew"));return()=>j.unsubscribe()},[]);const M=async()=>{if(!p.trim()){Ie(n===0?"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Enter name",2e3,!1);return}const j=X.findIndex(G=>G.includes(v)),T=q.findIndex(G=>G.includes(h)),g=K.findIndex(G=>G.includes(R)),f=ne[L],C=f.label[1],U=f.icon;await Ge(p,x,T,j,C,U,c,P,W,g),V()},V=()=>{Y(null),setTimeout(()=>{s(""),y(""),r([]),z(""),S(X[1][n]),w(q[2][n]),A(K[1][n]),k(new Date().toISOString().split("T")[0]),B(""),F(0)},300)},te=()=>{m.trim()&&(r([...W,{text:m,isDone:!1}]),z(""))},l=Ze(i);return e.jsx(N,{children:o&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:V,style:l.backdrop}),e.jsxs(b.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:250},style:l.container,children:[e.jsx("div",{style:l.handleContainer,children:e.jsx("div",{style:l.handle})}),e.jsxs("div",{style:l.header,children:[e.jsx(b.button,{whileTap:{scale:.9},onClick:V,style:l.textBtn,children:n===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("span",{style:l.headerTitle,children:n===0?"ÐÐ¾Ð²Ð°Ñ Ñ†ÐµÐ»ÑŒ":"New Goal"}),e.jsx(b.button,{whileTap:{scale:.9},onClick:M,style:{...l.textBtn,color:a.get("done",i),fontWeight:"700"},children:n===0?"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ":"Create"})]}),e.jsxs("div",{style:l.scrollContent,className:"no-scrollbar",children:[e.jsx("div",{style:l.section,children:e.jsxs("div",{style:l.mainInputWrapper,children:[e.jsx("div",{style:l.largeIconDisplay,children:ne[L].icon}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:e.jsx("input",{type:"text",placeholder:n===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ†ÐµÐ»Ð¸...":"Goal Title...",value:p,onChange:j=>s(j.target.value),style:l.mainInput})})]})}),e.jsxs("div",{style:l.categorySection,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8,paddingLeft:5},children:[e.jsx(ke,{size:12,color:a.get("subText",i),style:{marginRight:6}}),e.jsx("label",{style:l.label,children:n===0?"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ":"Category"})]}),e.jsx("div",{style:l.iconScrollContainer,children:ne.map((j,T)=>{const g=T===L;return e.jsxs(b.div,{whileTap:{scale:.9},onClick:()=>F(T),style:{...l.categoryChip,backgroundColor:g?a.get("highlitedPanel",i):"transparent",borderColor:g?"transparent":a.get("border",i)},children:[e.jsx("span",{style:{fontSize:"1.4rem"},children:j.icon}),g&&e.jsx(b.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},style:l.categoryLabel,children:j.label[n]})]},T)})})]}),e.jsx("div",{style:l.card,children:e.jsxs("div",{style:l.pickerRow,children:[e.jsxs("div",{style:l.pickerCol,children:[e.jsx("label",{style:l.label,children:n===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority"}),e.jsx(ie,{items:X.map(j=>j[n]),value:v,onChange:S,theme:i,width:"100%"})]}),e.jsx("div",{style:l.divider}),e.jsxs("div",{style:l.pickerCol,children:[e.jsx("label",{style:l.label,children:n===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty"}),e.jsx(ie,{items:q.map(j=>j[n]),value:h,onChange:w,theme:i,width:"100%"})]}),e.jsx("div",{style:l.divider}),e.jsxs("div",{style:l.pickerCol,children:[e.jsx("label",{style:l.label,children:n===0?"Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ":"Urgency"}),e.jsx(ie,{items:K.map(j=>j[n]),value:R,onChange:A,theme:i,width:"100%"})]})]})}),e.jsxs("div",{style:l.dateSection,children:[e.jsx("div",{style:l.dateCard,children:e.jsxs("div",{style:l.dateRow,children:[e.jsx(ee,{style:{marginRight:10,color:a.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:l.label,children:n===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start"}),e.jsx("input",{type:"date",style:l.dateInput,value:c,onChange:j=>k(j.target.value)})]})]})}),e.jsx("div",{style:l.dateCard,children:e.jsxs("div",{style:l.dateRow,children:[e.jsx(he,{style:{marginRight:10,color:a.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:l.label,children:n===0?"Ð¡Ñ€Ð¾Ðº":"Deadline"}),e.jsx("input",{type:"date",style:l.dateInput,value:P,onChange:j=>B(j.target.value)})]})]})})]}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:n===0?"Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ / ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ...":"Notes / Description...",value:x,onChange:j=>y(j.target.value),style:l.mainInput})}),e.jsxs("div",{style:l.subTaskContainer,children:[e.jsx("label",{style:l.sectionTitle,children:n===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist"}),e.jsxs("div",{style:l.addSubRow,children:[e.jsx("div",{style:l.subInputContainer,children:e.jsx("input",{type:"text",placeholder:n===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑˆÐ°Ð³...":"Add a step...",value:m,onChange:j=>z(j.target.value),style:l.subInput})}),e.jsx(b.div,{whileTap:{scale:.9},onClick:te,style:l.addBtn,children:e.jsx(me,{style:{width:"100%",color:"#fff"}})})]}),e.jsx("div",{style:l.subList,children:e.jsx(N,{children:W.map((j,T)=>e.jsxs(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0,padding:0},style:l.subItem,children:[e.jsx("div",{style:l.subDot}),e.jsx("span",{style:l.subText,children:j.text}),e.jsx("div",{onClick:()=>r(W.filter((g,f)=>f!==T)),children:e.jsx(ae,{style:{width:"100%",color:a.get("subText",i),cursor:"pointer"}})})]},T))})})]}),e.jsx("div",{style:{marginBottom:"100px"}})]})]})]})})},Ze=i=>{const n=a.get("background",i),t=a.get("simplePanel",i),o=a.get("mainText",i),d=a.get("subText",i),p=a.get("border",i);return{backdrop:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",zIndex:998},container:{position:"fixed",bottom:0,left:0,right:0,height:"90vh",backgroundColor:n,borderRadius:"24px 24px 0 0",boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden"},handleContainer:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"12px",paddingBottom:"8px"},handle:{width:"40px",height:"5px",borderRadius:"3px",backgroundColor:a.get("border",i)},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px 15px 20px",borderBottom:`1px solid ${a.get("svgColor",i)}`},textBtn:{background:"none",border:"none",fontSize:"16px",color:d,cursor:"pointer",padding:"10px"},headerTitle:{fontSize:"18px",fontWeight:"700",color:o},scrollContent:{flex:1,overflowY:"auto",padding:"20px"},section:{marginBottom:"20px"},mainInputWrapper:{display:"flex",alignItems:"center",gap:"15px"},largeIconDisplay:{fontSize:"2.5rem",width:"50px",textAlign:"center"},mainInput:{flex:1,border:"none",background:"transparent",fontSize:"16px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",color:o,WebkitUserSelect:"auto",outline:`1px solid ${p}`,borderRadius:"16px",padding:"14px",width:"100%"},categorySection:{marginBottom:"20px"},iconScrollContainer:{display:"flex",gap:"10px",overflowX:"auto",padding:"2px 2px 10px 2px",scrollbarWidth:"none",msOverflowStyle:"none"},categoryChip:{padding:"8px 16px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",border:`1px solid ${p}`,minWidth:"60px",whiteSpace:"nowrap"},categoryLabel:{fontSize:"13px",fontWeight:"600",color:o,marginLeft:"4px"},card:{backgroundColor:t,borderRadius:"20px",padding:"15px",boxShadow:a.get("shadow",i),marginBottom:"20px"},pickerRow:{display:"flex",justifyContent:"space-between",alignItems:"center"},pickerCol:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},divider:{width:"1px",height:"60px",backgroundColor:p,margin:"0 5px"},label:{fontSize:"11px",color:d,fontWeight:"700",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},dateSection:{display:"flex",gap:"12px",marginBottom:"20px"},dateCard:{flex:1,backgroundColor:t,borderRadius:"16px",padding:"12px",border:`1px solid ${p}`,display:"flex",alignItems:"center"},dateRow:{display:"flex",alignItems:"center",width:"100%"},dateInput:{background:"transparent",border:"none",color:o,fontSize:"14px",width:"100%",outline:"none",fontFamily:"inherit",fontWeight:"600"},subTaskContainer:{marginTop:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"700",color:o,marginLeft:"5px",marginBottom:"10px",display:"block"},addSubRow:{display:"flex",alignItems:"center",gap:"10px"},subInputContainer:{flex:1,display:"flex",flexDirection:"column",border:`2px dashed ${p}`,borderRadius:"16px",padding:"12px",marginTop:"10px"},subInput:{border:"none",background:"transparent",fontSize:"16px",color:o,outline:"none",width:"100%",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"},addBtn:{width:"46px",height:"46px",borderRadius:"14px",backgroundColor:a.get("done",i),display:"flex",alignItems:"center",justifyContent:"center",border:"none",marginTop:"10px",cursor:"pointer",boxShadow:`0 4px 12px ${a.get("habitCardDone",i)}`},subList:{marginTop:"15px",display:"flex",flexDirection:"column",gap:"8px"},subItem:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:t,borderRadius:"12px"},subDot:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:d,marginRight:"12px"},subText:{flex:1,fontSize:"15px",color:o}}},E=new Audio("Audio/Click.wav"),et=new Audio("Audio/IsDone.wav"),tt=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],it=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],nt=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],xe=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],ge=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],ue=["#81C784","#64B5F6","#FFD54F","#FF8A65","#E57373"],ht=()=>{const[i,n]=u.useState("dark"),[t,o]=u.useState(D.prefs[0]),[d,p]=u.useState(D.prefs[4]),[s,x]=u.useState(se.value==="ToDoPage"),[y,v]=u.useState(!1),[S,h]=u.useState(0),[w,R]=u.useState(D.todoList||[]),[A,L]=u.useState(0),[F,c]=u.useState(0),[k,P]=u.useState(1),[B,W]=u.useState(""),[r,m]=u.useState("none"),z=u.useRef(null);u.useEffect(()=>{const g=Be.subscribe(n),f=Re.subscribe(O=>o(O==="ru"?0:1)),C=Le.subscribe(p),U=se.subscribe(O=>x(O==="ToDoPage")),G=I.subscribe(O=>{O&&(L(Ce=>Ce+1),O.type==="OPEN_STATS"&&(v(!0),Y("")),O.type==="OPEN_ADD"&&(v(!1),h(-1),Y("ToDoPage")),O.type==="CLOSE_ALL"&&(v(!1),Y("")))});return()=>{g.unsubscribe(),f.unsubscribe(),C.unsubscribe(),G.unsubscribe(),U.unsubscribe()}},[]),u.useEffect(()=>{M()},[F,k,B,A]),u.useEffect(()=>{r==="search"&&z.current&&setTimeout(()=>z.current.focus(),300)},[r]);function M(){let g=D.todoList?[...D.todoList]:[];if(B.trim()){const f=B.toLowerCase();g=g.filter(C=>C.name&&C.name.toLowerCase().includes(f)||C.category&&C.category.toLowerCase().includes(f))}F===1&&(g=g.filter(f=>f.isDone)),F===2&&(g=g.filter(f=>!f.isDone)),k===0?g.sort((f,C)=>(C.difficulty||0)-(f.difficulty||0)):k===1?g.sort((f,C)=>(C.priority||0)-(f.priority||0)):k===2&&g.sort((f,C)=>Z(f.deadLine)-Z(C.deadLine)),R(g)}const V=()=>{Y("")},te=(g,f)=>{g.stopPropagation(),f.isDone=!f.isDone,L(C=>C+1),$(f.isDone?et:E)},l=g=>{$(E),m(r===g?"none":g)},j=u.useMemo(()=>{const g={};return w.forEach(f=>{const C=f.category||(t===0?"Ð”Ñ€ÑƒÐ³Ð¾Ðµ":"Other");g[C]||(g[C]=[]),g[C].push(f)}),g},[w,t]),T=at(i);return e.jsxs("div",{style:T.container,children:[e.jsx(Ue,{tab:"ToDoMain"}),e.jsxs("div",{style:{width:"92%",marginTop:"14vh",display:"flex",flexDirection:"column",gap:"10px",zIndex:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"800",color:a.get("mainText",i),fontFamily:"Segoe UI",letterSpacing:"-0.5px"},children:t===0?"Ð—Ð°Ð´Ð°Ñ‡Ð¸":"Tasks"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(oe,{icon:e.jsx(re,{size:16}),isActive:r==="search"||B.length>0,onClick:()=>l("search"),theme:i}),e.jsx(oe,{icon:e.jsx(ze,{size:16}),isActive:r==="sort"||k!==1,onClick:()=>l("sort"),theme:i}),e.jsx(oe,{icon:e.jsx(Ae,{size:14}),isActive:r==="filter"||F!==0,onClick:()=>l("filter"),theme:i})]})]}),e.jsxs(N,{mode:"wait",children:[r==="search"&&e.jsx(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden"},children:e.jsxs("div",{style:T.inputContainer,children:[e.jsx(re,{size:14,color:a.get("subText",i),style:{marginLeft:"16px",opacity:.6}}),e.jsx("input",{type:"text",placeholder:t===0?"ÐÐ°Ð¹Ñ‚Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Search tasks...",value:B,onChange:g=>W(g.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",i),marginLeft:"8px",outline:"none"}}),B.length>0&&e.jsx(b.div,{initial:{scale:0},animate:{scale:1},onClick:()=>W(""),style:T.clearBtn,children:e.jsx(ae,{size:10,color:"#fff"})})]})},"search"),r==="sort"&&e.jsxs(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(H,{label:t===0?"Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Priority",icon:e.jsx(je,{size:10}),isActive:k===1,onClick:()=>{P(1),$(E)},theme:i}),e.jsx(H,{label:t===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",icon:e.jsx(Pe,{size:12}),isActive:k===0,onClick:()=>{P(0),$(E)},theme:i}),e.jsx(H,{label:t===0?"Ð”ÐµÐ´Ð»Ð°Ð¹Ð½":"Deadline",icon:e.jsx(ee,{size:12}),isActive:k===2,onClick:()=>{P(2),$(E)},theme:i})]},"sort"),r==="filter"&&e.jsxs(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(H,{label:t===0?"Ð’ÑÐµ":"All",isActive:F===0,onClick:()=>{c(0),$(E)},theme:i}),e.jsx(H,{label:t===0?"Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ":"Active",isActive:F===2,onClick:()=>{c(2),$(E)},theme:i}),e.jsx(H,{label:t===0?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"Done",isActive:F===1,onClick:()=>{c(1),$(E)},theme:i})]},"filter")]})]}),e.jsxs("div",{style:T.panel,className:"no-scrollbar",children:[e.jsx(N,{mode:"popLayout",children:w.length===0?e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},style:T.emptyState,children:[e.jsx(Ee,{size:40,style:{marginBottom:10,opacity:.5}}),e.jsx("span",{children:t===0?"Ð—Ð°Ð´Ð°Ñ‡ Ð½ÐµÑ‚":"No tasks found"})]}):Object.keys(j).map(g=>e.jsx(ot,{title:g,theme:i,children:j[g].map((f,C)=>e.jsx(st,{onClick:()=>{const U=D.todoList.indexOf(f);h(U),Y("ToDoPage"),$(E)},onCheck:U=>te(U,f),item:f,theme:i,lang:t,fSize:d},f.id||C+f.name))},g))}),e.jsx("div",{style:{marginBottom:"120px",width:"100%"}})]}),e.jsx(Ke,{show:s,setShow:V,theme:i,lang:t,fSize:d,task:D.todoList[S]||{}}),y&&e.jsx(Ne,{theme:i,lang:t,onClose:()=>v(!1)}),e.jsx(Je,{theme:i,lang:t,fSize:d})]})},oe=({icon:i,isActive:n,onClick:t,theme:o})=>{const d=o==="dark",p=a.get("accent",o),s=n?p:d?"rgba(255,255,255,0.1)":"#FFFFFF",x=n?"#FFFFFF":a.get("mainText",o);return e.jsx(b.div,{whileTap:{scale:.92},onClick:t,style:{width:"40px",height:"40px",borderRadius:"14px",backgroundColor:s,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:n?`0 4px 12px ${p}60`:d?"none":"0 2px 8px rgba(0,0,0,0.05)",color:x,transition:"all 0.3s ease"},children:i})},H=({label:i,icon:n,isActive:t,onClick:o,theme:d})=>{const p=d==="dark",s=a.get("accent",d);return e.jsxs(b.div,{whileTap:{scale:.95},onClick:o,style:{padding:"8px 16px",borderRadius:"12px",backgroundColor:t?s:p?"rgba(255,255,255,0.08)":"#FFFFFF",color:t?"#FFFFFF":a.get("subText",d),fontSize:"13px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",border:t?"none":`1px solid ${p?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}`,boxShadow:t?`0 4px 12px ${s}40`:"none",transition:"all 0.2s ease"},children:[n,i]})},ot=({title:i,children:n,theme:t})=>{const[o,d]=u.useState(!0),p=t==="light"||t==="speciallight";return e.jsxs("div",{style:{width:"100%",marginBottom:"6px"},children:[e.jsxs("div",{onClick:()=>{d(!o),$(E)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"8px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"800",fontFamily:"Segoe UI",color:p?"#1D1D1F":a.get("mainText",t),opacity:.8},children:i}),e.jsx(b.div,{animate:{rotate:o?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx($e,{size:12,color:p?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(N,{initial:!1,children:o&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:n})})]})},st=({onClick:i,onCheck:n,item:t,theme:o,lang:d,fSize:p})=>{const s=lt(t.deadLine)&&!t.isDone,x=o==="light"||o==="speciallight",y=t.goals?t.goals.length:0,v=t.goals?t.goals.filter(B=>B.isDone).length:0;let S=t.color||a.get("accent",o);S&&S.length>7&&S.startsWith("#")&&(S=S.substring(0,7));const h=S;let w=x?"#FFFFFF":a.get("simplePanel",o)+"CC",R=x?"transparent":`1px solid ${a.get("border",o)}80`,A=x?"0 4px 12px rgba(0,0,0,0.05)":"0 4px 12px rgba(0,0,0,0.2)";const L=t.isDone?`${h}15`:`${h}25`,F=t.isDone?"transparent":`${h}40`,c=xe[t.priority]||xe[0],k=ge[t.difficulty]||ge[0],P=ue[t.urgency||0]||ue[0];return e.jsxs(b.div,{layout:!0,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,transition:{duration:.2}},whileTap:{scale:.98},onClick:i,style:{width:"88%",minHeight:"80px",borderRadius:"20px",marginBottom:"8px",padding:"10px 12px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",overflow:"hidden",cursor:"pointer",backgroundColor:w,backdropFilter:x?"none":"blur(20px)",border:R,boxShadow:A,opacity:t.isDone?.6:1},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:L,color:h,fontSize:"20px",marginRight:"14px",flexShrink:0,border:`1px solid ${F}`},children:t.icon||"ðŸ“"}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",justifyContent:"center",alignItems:"center",gap:"6px",marginRight:"14px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginBottom:"2px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.5px",color:a.get("subText",o),opacity:.7},children:t.category||(d===0?"ÐžÐ±Ñ‰ÐµÐµ":"General")}),(s||t.priority>=3)&&!t.isDone&&e.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",backgroundColor:"#FF453A"}})]}),e.jsx("div",{style:{fontSize:p===0?"16px":"17px",fontWeight:"700",color:t.isDone?a.get("subText",o):a.get("mainText",o),textDecoration:t.isDone?"line-through":"none",lineHeight:"1.2",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},children:t.name})]}),!t.isDone&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",alignItems:"center",justifyContent:"center"},children:[e.jsx(J,{icon:e.jsx(fe,{size:8}),text:tt[t.priority]?.[d],color:c}),e.jsx(J,{icon:e.jsx(ye,{size:8}),text:it[t.difficulty]?.[d],color:k}),e.jsx(J,{icon:e.jsx(je,{size:8}),text:nt[t.urgency||0]?.[d],color:P}),t.deadLine&&e.jsx(J,{icon:s?e.jsx(We,{size:8}):e.jsx(ee,{size:8}),text:dt(t.deadLine,d),color:s?"#FF453A":a.get("subText",o)}),y>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"10px",fontWeight:"700",color:a.get("subText",o),marginLeft:"4px"},children:[e.jsx(Oe,{size:10,style:{opacity:.7}}),e.jsxs("span",{children:[v,"/",y]})]})]})]}),e.jsx("div",{onClick:n,style:{width:"26px",height:"26px",borderRadius:"9px",border:t.isDone?"none":`2px solid ${a.get("border",o)}`,backgroundColor:t.isDone?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},children:t.isDone&&e.jsx(be,{size:12,color:"#FFF"})}),!t.isDone&&y>0&&e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"3px",backgroundColor:x?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)"},children:e.jsx(b.div,{initial:{width:0},animate:{width:`${v/y*100}%`},style:{height:"100%",backgroundColor:h}})})]})},J=({icon:i,text:n,color:t})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:`${t}15`,border:`1px solid ${t}30`,color:t,fontSize:"9px",fontWeight:"700",whiteSpace:"nowrap"},children:[i,n&&e.jsx("span",{children:n})]}),at=(i,n)=>{const t=i==="light"||i==="speciallight",o=t?"#F2F4F6":a.get("background",i);a.get("mainText",i);const d=a.get("subText",i);return{container:{backgroundColor:o,display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflowY:"scroll"},panel:{display:"flex",flexDirection:"column",width:"100%",flex:1,alignItems:"center",justifyContent:"start",overflowY:"scroll",paddingTop:"2px"},emptyState:{marginTop:"50px",display:"flex",flexDirection:"column",alignItems:"center",color:d,fontSize:"16px",fontWeight:"600"},inputContainer:{width:"100%",height:"44px",backgroundColor:t?"#FFFFFF":"rgba(255,255,255,0.08)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"space-around",border:t?"none":`1px solid ${a.get("border",i)}60`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)",position:"relative"},input:{flex:1,height:"100%",border:"none",outline:"none",backgroundColor:"transparent",padding:"0 12px",fontSize:"15px",fontWeight:"600",fontFamily:"Segoe UI",color:a.get("mainText",i)},clearBtn:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"rgba(128,128,128,0.4)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",cursor:"pointer"}}};function $(i){D.prefs[2]===0&&i&&(i.paused||(i.pause(),i.currentTime=0),i.volume=.5,i.play().catch(n=>console.log("Audio play failed",n))),D.prefs[3]===0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function rt(i){if(!i)return null;if(i.includes("-"))return new Date(i);if(i.includes(".")){const n=i.split(".");return new Date(n[2],n[1]-1,n[0])}return new Date(i)}function Z(i){const n=rt(i);if(!n)return 9999;const t=new Date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),Math.ceil((n-t)/(1e3*60*60*24))}function lt(i){return Z(i)<0}function dt(i,n){if(!i)return"";const t=Z(i);return n===0?t===0?"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ":t===1?"Ð—Ð°Ð²Ñ‚Ñ€Ð°":t<0?`${Math.abs(t)} Ð´Ð½. Ð½Ð°Ð·Ð°Ð´`:`${t} Ð´Ð½.`:t===0?"Today":t===1?"Tmrw":t<0?`${Math.abs(t)}d ago`:`${t}d left`}export{ht as default};
