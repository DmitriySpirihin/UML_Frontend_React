import{b8 as p,r as l,bf as A,bg as M,j as f,C as m,A as P,bh as j,bi as E}from"./index-BMUoLOux.js";function B(s){return p({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 10a1 1 0 0 1 1 1v7.584l1.293 -1.291a1 1 0 0 1 1.32 -.083l.094 .083a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1 -.112 .097l-.11 .071l-.114 .054l-.105 .035l-.149 .03l-.117 .006l-.075 -.003l-.126 -.017l-.111 -.03l-.111 -.044l-.098 -.052l-.096 -.067l-.09 -.08l-3 -3a1 1 0 0 1 1.414 -1.414l1.293 1.293v-7.586a1 1 0 0 1 1 -1m0 -8a3 3 0 1 1 -3 3l.005 -.176a3 3 0 0 1 2.995 -2.824"},child:[]}]})(s)}function T(s){return p({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11.852 2.011l.058 -.007l.09 -.004l.075 .003l.126 .017l.111 .03l.111 .044l.098 .052l.104 .074l.082 .073l3 3a1 1 0 1 1 -1.414 1.414l-1.293 -1.292v7.585a1 1 0 0 1 -2 0v-7.585l-1.293 1.292a1 1 0 0 1 -1.32 .083l-.094 -.083a1 1 0 0 1 0 -1.414l3 -3q .053 -.054 .112 -.097l.11 -.071l.114 -.054l.105 -.035z"},child:[]},{tag:"path",attr:{d:"M12 16a3 3 0 1 1 0 6a3 3 0 0 1 0 -6"},child:[]}]})(s)}function z(s){return p({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(s)}function F(s){return p({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747"},child:[]},{tag:"path",attr:{d:"M20 4v5h-5"},child:[]}]})(s)}const O=({keyType:s=0,maxL:w=500,placeHolder:k,theme:a,h:x="90%",w:y="vh",value:d="",onChange:b=null,clear:g=!1})=>{const[e,n]=l.useState({myString:"",cursorPos:0}),[o,h]=l.useState(!1),[u,c]=l.useState(!0);return l.useEffect(()=>{n({myString:d,cursorPos:d.length})},[d]),l.useEffect(()=>{const i=A.subscribe(t=>{o&&(t==="bs"?n(r=>{const S=Array.from(r.myString);return r.cursorPos===0?r:{myString:[...S.slice(0,r.cursorPos-1),...S.slice(r.cursorPos)].join(""),cursorPos:r.cursorPos-1}}):t==="bsall"?n({myString:"",cursorPos:0}):t.length===1&&n(r=>({myString:r.myString.slice(0,r.cursorPos)+t+r.myString.slice(r.cursorPos),cursorPos:r.cursorPos+1})))});return()=>i.unsubscribe()},[o]),l.useEffect(()=>{if(!o){c(!1);return}c(!0);const i=setInterval(()=>{c(t=>!t)},500);return()=>clearInterval(i)},[o]),l.useEffect(()=>{const i=M.subscribe(t=>{t.value===!1&&(h(!1),g&&n({myString:"",cursorPos:0}))});return()=>i.unsubscribe()},[]),l.useEffect(()=>{b&&o&&b(e.myString)},[e]),f.jsx("div",{style:{width:y,height:x,borderBottom:`1px solid ${m.get("border",a)}`,display:"flex",alignItems:"flex-end",justifyContent:"flex-start"},onClick:i=>{j(""),h(!0),E({type:s,value:!0}),n(t=>({myString:t.myString,cursorPos:I(i,t.myString)}))},children:f.jsx("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflow:"hidden",fontSize:P.prefs[4]===0?"13px":"15px",display:"block",paddingLeft:"8px",textAlign:"left",paddingBottom:"2px",lineHeight:"18px",fontFamily:"Segoe UI",color:e.myString.length===0?m.get("icons",a):m.get("mainText",a)},children:e.myString.length>0||o?f.jsxs(f.Fragment,{children:[e.myString.slice(0,e.cursorPos),f.jsx("span",{style:{display:"inline-block",width:"2px",color:u&&o?m.get("iconsHighlited",a):"transparent",fontSize:"15px",marginLeft:"2px",verticalAlign:"middle"},children:"|"}),e.myString.slice(e.cursorPos)]}):k})})},I=(s,w)=>{const a=P.prefs[4]===0?13:15,x=18,y=s.nativeEvent.offsetX-8,d=s.nativeEvent.offsetY,g=document.createElement("canvas").getContext("2d");g.font=`${a}px 'Segoe UI', 'Apple Color Emoji', 'Noto Color Emoji', 'Arial'`;const e=w.split(`
`),n=Math.floor(d/x),o=Math.min(n,e.length-1),h=e[o],u=Array.from(h);let c=0;for(let t=0;t<u.length;t++){const r=g.measureText(u[t]).width;if(c+=r,y<c)return e.slice(0,o).reduce((C,v)=>C+Array.from(v).length+1,0)+t}return e.slice(0,o).reduce((t,r)=>t+Array.from(r).length+1,0)+u.length};export{O as M,B as T,T as a,z as b,F as c};
