import{C as s,j as e,aU as Je,M as Z,aV as Qe,W as V,A as I,aW as At,aX as Fe,_ as Le,aY as He,t as ue,l as $t,f as Et,aZ as Ft,a_ as Lt,o as Ht,a7 as Ke,a$ as Kt,b0 as Ot,b1 as Nt,b as Ut,U as Oe,aT as Yt}from"./index-5kdubRxw.js";import{r as l,R as _t}from"./recharts-Bg6K2Pzo.js";import{g as Vt,f as et,c as Gt,e as Xt,h as Ne,i as Ue,r as Zt,j as qt,k as Jt,l as Qt}from"./TrainingLogHelper-CvrJRQkx.js";import{b as en,c as tn,d as Ye,e as nn,f as _e,g as sn,h as on,i as rn}from"./index-Ch8JVuvc.js";import{a as ln}from"./index-CjNHUf7p.js";import{S as tt}from"./Slider-Db7j3urT.js";import an from"./TrainingExercise-Uk3wN3EJ.js";import{c as ye,b as me}from"./index-Glx58w1y.js";import{a as dn,T as cn}from"./TimerOffTwoTone-9ipzCYf2.js";import"./MyInput-2bhFi3AV.js";const xn=({theme:t,langIndex:d,setTime:i,setShowPanel:p})=>{const[r,u]=l.useState(0),[a,S]=l.useState(6e4),[x,m]=l.useState(0),[c,f]=l.useState(!1),[g,b]=l.useState(!1),w=185,M=15,v=w-M*2,A=v*2*Math.PI;l.useEffect(()=>{m(Math.min(r/a,1))},[r,a]),l.useEffect(()=>{if(!c)return;const E=setInterval(()=>{u(k=>k+100)},100);return()=>clearInterval(E)},[c]);const G=()=>{u(0),f(!1)},N=()=>{f(!1),i(r),p(!1)},$=()=>{f(!1),p(!1)},h=hn(t),j=fn(t,x);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:h.backdrop,onClick:$}),e.jsxs("div",{style:h.drawer,children:[e.jsxs("div",{style:h.header,children:[e.jsx("div",{style:h.headerBtn,onClick:g?()=>b(!1):$,children:g?e.jsx(Je,{}):e.jsx(Z,{})}),e.jsx("div",{style:h.handleBar}),e.jsx("div",{style:h.headerBtn,onClick:()=>b(!g),children:e.jsx(Qe,{style:{opacity:g?1:.6}})})]}),e.jsx("div",{style:h.contentContainer,children:g?e.jsxs("div",{style:h.settingsPanel,children:[e.jsx("div",{style:h.sectionTitle,children:d===0?"Настройки таймера":"Timer Settings"}),e.jsxs("div",{style:h.settingBox,children:[e.jsxs("div",{style:h.label,children:[e.jsx("span",{style:{opacity:.7,fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:d===0?"Цель":"Target Time"}),e.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",color:s.get("mainText",t),marginTop:"5px"},children:[Math.floor(a/6e4),":",Math.floor(a%6e4/1e3).toString().padStart(2,"0")]})]}),e.jsx(tt,{style:h.slider,min:30,max:3600,step:30,value:a/1e3,valueLabelDisplay:"off",onChange:(E,k)=>{S(k*1e3)}})]})]}):e.jsxs("div",{style:h.mainPanel,children:[e.jsxs("div",{style:h.circleContainer,children:[e.jsxs("svg",{height:w*2,width:w*2,style:{overflow:"visible"},children:[e.jsx("circle",{stroke:s.get("progressBar",t),strokeOpacity:"0.1",fill:"transparent",strokeWidth:M,strokeLinecap:"round",r:v,cx:w,cy:w}),e.jsx("circle",{stroke:j,fill:"transparent",strokeWidth:M,strokeLinecap:"round",strokeDasharray:A+" "+A,style:{strokeDashoffset:A-x*A,transition:"stroke-dashoffset 0.1s linear, stroke 0.5s ease",filter:`drop-shadow(0 0 15px ${j}) drop-shadow(0 0 5px ${j})`},r:v,cx:w,cy:w,transform:`rotate(-90 ${w} ${w})`})]}),e.jsxs("div",{style:h.centerTextContainer,children:[r>0&&e.jsx("div",{style:{...h.smallTimerText,color:j},children:gn(r,a)}),e.jsx("div",{style:{...h.bigTimerText,color:s.get("mainText",t),textShadow:`0 0 25px ${j}66`},children:pn(r)})]})]}),e.jsxs("div",{style:h.controlsContainer,children:[e.jsx("button",{onClick:G,style:{...h.iconButton,...h.secondaryBtn},children:e.jsx(ln,{style:{fontSize:"24px"}})}),e.jsx("button",{onClick:()=>f(!c),style:{...h.iconButton,...h.primaryBtn,backgroundColor:c?s.get("skipped",t):s.get("done",t),boxShadow:`0 0 20px ${c?s.get("skipped",t):s.get("done",t)}66`},children:c?e.jsx(en,{style:{fontSize:"28px",color:"#fff"}}):e.jsx(tn,{style:{fontSize:"28px",color:"#fff",marginLeft:"4px"}})}),e.jsx("button",{onClick:N,style:{...h.iconButton,...h.secondaryBtn},children:e.jsx(V,{style:{fontSize:"28px",color:s.get("done",t)}})})]})]})})]})]})};function pn(t){t<0&&(t=0);const d=Math.floor(t/1e3),i=Math.floor(d/60),p=d%60;return`${i}:${p.toString().padStart(2,"0")}`}function gn(t,d){if(t<0&&(t=0),d<=0)return"";const i=d-t,p=Math.floor(Math.abs(i)/1e3),r=Math.floor(p/60),u=p%60,a=`${r}:${u.toString().padStart(2,"0")}`;return i>=0?`-${a}`:`+${a}`}const fn=(t,d)=>d<.5?s.get("skipped",t):d<.99?s.get("difficulty",t):s.get("done",t),hn=t=>({backdrop:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(3px)",zIndex:998},drawer:{position:"fixed",bottom:0,left:0,width:"100%",height:"85vh",backgroundColor:s.get("bottomPanel",t),borderTopLeftRadius:"30px",borderTopRightRadius:"30px",boxShadow:"0 -10px 40px rgba(0,0,0,0.5)",zIndex:999,display:"flex",flexDirection:"column",alignItems:"center"},header:{width:"100%",height:"60px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px",boxSizing:"border-box"},handleBar:{width:"50px",height:"5px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"3px"},headerBtn:{fontSize:"24px",color:s.get("icons",t),cursor:"pointer",padding:"10px"},contentContainer:{width:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"30px",overflowY:"auto"},mainPanel:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"40px"},circleContainer:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"-20px"},centerTextContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},smallTimerText:{fontSize:"18px",fontWeight:"600",marginBottom:"5px",opacity:.9},bigTimerText:{fontSize:"56px",fontWeight:"bold",fontFamily:"monospace",letterSpacing:"-2px"},controlsContainer:{display:"flex",alignItems:"center",gap:"30px"},iconButton:{borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.1s ease"},primaryBtn:{width:"90px",height:"90px"},secondaryBtn:{width:"60px",height:"60px",backgroundColor:"rgba(255,255,255,0.05)",color:s.get("icons",t),border:"1px solid rgba(255,255,255,0.05)"},settingsPanel:{width:"90%",display:"flex",flexDirection:"column",gap:"20px",paddingTop:"20px"},sectionTitle:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"2px",color:s.get("icons",t),textAlign:"center",opacity:.6},settingBox:{backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"20px",padding:"25px",display:"flex",flexDirection:"column",alignItems:"center",gap:"15px"},label:{display:"flex",flexDirection:"column",alignItems:"center"},slider:{width:"100%",height:8,color:s.get("difficulty",t)}}),q=[50,25,20,15,10,5,2.5,1.25],un=({theme:t,langIndex:d,fSize:i,setShowCalculator:p})=>{const[r,u]=l.useState(I.ownPlates),[a,S]=l.useState(I.platesAmount),[x,m]=l.useState(I.barWeight),[c,f]=l.useState(40),[g,b]=l.useState([]),[w,M]=l.useState(""),[v,A]=l.useState(!1),[G,N]=l.useState(!1),$=l.useMemo(()=>{const E=r.reduce((k,F,L)=>k+(F?a[L]*q[L]:0),0);return x+E},[x,r,a]);l.useEffect(()=>{c>$&&f($)},[$,c]),l.useEffect(()=>{const E=(c-x)/2;if(E<0){b([]),M(d===0?"Вес меньше грифа":"Weight < Bar"),N(!0);return}let k=E;const F=[],L=q.map((T,C)=>r[C]?a[C]/2:0);for(let T=0;T<q.length;T++){const C=q[T];for(;k>=C-.001&&L[T]>0;)F.push(C),k-=C,L[T]--}if(b(F),k>.01){const T=k.toFixed(2);M(d===0?`Не хватает: ${T} кг / сторона`:`Missing: ${T} kg / side`),N(!0)}else if(N(!1),F.length===0)M(d===0?"Пустой гриф":"Empty Bar");else{const T={};F.forEach(W=>{T[W]=(T[W]||0)+1});const C=Object.entries(T).sort((W,z)=>parseFloat(z[0])-parseFloat(W[0])).map(([W,z])=>z>1?`${z}x${W}`:`${W}`).join(" + ");M(`${C} / side`)}},[c,x,r,a,d]);const h=async()=>{I.ownPlates=r,I.platesAmount=a,I.barWeight=x,await At(),p(!1)},j=Sn(t,i,G);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:j.backdrop,onClick:h}),e.jsxs("div",{style:j.drawer,children:[e.jsxs("div",{style:j.header,children:[e.jsx("div",{style:j.headerBtn,onClick:v?()=>A(!1):h,children:v?e.jsx(Je,{}):e.jsx(Z,{})}),e.jsx("div",{style:j.handleBar}),e.jsx("div",{style:j.headerBtn,onClick:()=>A(!v),children:e.jsx(Qe,{style:{opacity:v?1:.6}})})]}),e.jsx("div",{style:j.contentContainer,children:v?e.jsx(bn,{theme:t,langIndex:d,barWeight:x,setBarWeight:m,ownPlates:r,setOwnPlates:u,platesAmount:a,setPlatesAmount:S,styles:j}):e.jsxs("div",{style:j.mainPanel,children:[e.jsxs("div",{style:j.visualizerSection,children:[e.jsx(mn,{plates:g,barWeight:x,theme:t,styles:j}),e.jsx("div",{style:j.resultBadge,children:w})]}),e.jsxs("div",{style:j.pickerSection,children:[e.jsx(yn,{theme:t,value:c,min:x,max:$,step:2.5,onChange:f,styles:j}),e.jsxs("div",{style:j.maxWeightLabel,children:["MAX: ",$," kg"]})]}),e.jsx("div",{style:j.footerAction,children:e.jsx("button",{style:j.doneBtn,onClick:h,children:e.jsx(V,{size:28})})})]})})]})]})},yn=({theme:t,value:d,min:i,max:p,step:r,onChange:u,styles:a})=>{const S=l.useRef(null),x=50,m=l.useMemo(()=>{const f=[];for(let g=i;g<=p+.01;g+=r)f.push(Math.round(g*100)/100);return f},[i,p,r]),c=f=>{const g=f.target.scrollTop,b=Math.round(g/x);m[b]!==void 0&&m[b]!==d&&u(m[b])};return l.useEffect(()=>{if(S.current){const f=m.indexOf(d);if(f!==-1){const g=S.current.scrollTop,b=f*x;Math.abs(g-b)>x&&S.current.scrollTo({top:b,behavior:"smooth"})}}},[d,m]),e.jsxs("div",{style:a.drumContainer,children:[e.jsx("div",{style:a.drumHighlight}),e.jsxs("div",{ref:S,style:a.drumScrollArea,onScroll:c,children:[e.jsx("div",{style:{height:`${x*2}px`}}),m.map(f=>{const g=f===d;return e.jsxs("div",{style:{...a.drumItem,height:`${x}px`,color:g?s.get("mainText",t):s.get("icons",t),opacity:g?1:.3,transform:g?"scale(1.1)":"scale(0.9)",fontWeight:g?"bold":"normal"},children:[f," ",e.jsx("span",{style:{fontSize:"12px",marginLeft:"2px"},children:"kg"})]},f)}),e.jsx("div",{style:{height:`${x*2}px`}})]})]})},mn=({plates:t,barWeight:d,theme:i,styles:p})=>e.jsxs("div",{style:p.barContainer,children:[e.jsx("div",{style:p.barShaft,children:e.jsx("div",{style:p.barWeightText,children:d})}),e.jsxs("div",{style:p.barSleeveContainer,children:[e.jsx("div",{style:p.barSleeveBase}),t.map((r,u)=>e.jsx("div",{style:jn(r,u),children:e.jsx("span",{style:p.plateText,children:r})},u)),e.jsx("div",{style:p.barClip})]})]}),bn=({theme:t,langIndex:d,barWeight:i,setBarWeight:p,ownPlates:r,setOwnPlates:u,platesAmount:a,setPlatesAmount:S,styles:x})=>e.jsxs("div",{style:x.settingsPanel,children:[e.jsx("div",{style:x.settingHeader,children:d===0?"Гриф":"Bar Weight"}),e.jsxs("div",{style:x.stepperRow,children:[e.jsx("div",{style:x.stepperBtn,onClick:()=>p(Math.max(0,i-2.5)),children:e.jsx(Fe,{})}),e.jsxs("span",{style:x.stepperValue,children:[i," ",e.jsx("small",{children:"kg"})]}),e.jsx("div",{style:x.stepperBtn,onClick:()=>p(i+2.5),children:e.jsx(Le,{})})]}),e.jsx("div",{style:x.settingDivider}),e.jsx("div",{style:x.settingHeader,children:d===0?"Ваши блины":"Available Plates"}),e.jsx("div",{style:x.platesGrid,children:a.map((m,c)=>e.jsxs("div",{style:x.plateConfigItem,children:[e.jsx("div",{onClick:()=>u(f=>{const g=[...f];return g[c]=!g[c],g}),style:{...x.plateConfigCircle,backgroundColor:r[c]?nt(q[c]):"transparent",border:r[c]?"none":`2px solid ${s.get("icons",t)}`,opacity:r[c]?1:.4},children:q[c]}),r[c]&&e.jsxs("div",{style:x.plateCountControls,children:[e.jsx(Fe,{size:10,onClick:()=>S(f=>{const g=[...f];return g[c]=Math.max(2,g[c]-2),g})}),e.jsx("span",{children:m}),e.jsx(Le,{size:10,onClick:()=>S(f=>{const g=[...f];return g[c]=Math.min(30,g[c]+2),g})})]})]},c))})]}),nt=t=>{switch(parseFloat(t)){case 50:return"#1ea035";case 25:return"#a42b2b";case 20:return"#173894";case 15:return"#f6b93b";case 10:return"#14aa87";case 5:return"#2496c4";case 2.5:return"#8f24c4";case 1.25:return"#c83131";default:return"#555"}},jn=(t,d,i)=>{const p=nt(t),r={50:120,25:120,20:110,15:100,10:85,5:70,2.5:60,1.25:50},u={50:35,25:35,20:30,15:28,10:25,5:20,2.5:18,1.25:15};return{height:`${r[t]}px`,width:`${u[t]}px`,backgroundColor:p,borderRadius:"4px",marginRight:"2px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 0 8px rgba(0,0,0,0.3), 2px 2px 5px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",zIndex:10+d,position:"relative"}},Sn=(t,d,i)=>({backdrop:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(3px)",zIndex:998},drawer:{position:"fixed",bottom:0,left:0,width:"100%",maxHeight:"90vh",backgroundColor:s.get("bottomPanel",t),borderTopLeftRadius:"25px",borderTopRightRadius:"25px",boxShadow:"0 -10px 40px rgba(0,0,0,0.4)",zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden"},header:{height:"60px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px",borderBottom:"1px solid rgba(255,255,255,0.05)"},headerBtn:{padding:"10px",fontSize:"24px",color:s.get("icons",t),cursor:"pointer"},handleBar:{width:"40px",height:"4px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"2px"},contentContainer:{width:"100%",paddingBottom:"30px",flex:1,overflowY:"auto"},mainPanel:{display:"flex",flexDirection:"column",height:"100%",gap:"10px"},visualizerSection:{flex:1,minHeight:"180px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},barContainer:{display:"flex",alignItems:"center",padding:"0 20px"},barShaft:{width:"60px",height:"25px",backgroundColor:"#555",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},barWeightText:{color:"#fff",fontSize:"10px",opacity:.8},barSleeveContainer:{display:"flex",alignItems:"center"},barSleeveBase:{width:"15px",height:"35px",backgroundColor:"#777",borderRadius:"2px",marginRight:"1px"},barClip:{width:"20px",height:"25px",backgroundColor:"#444",marginLeft:"5px",borderRadius:"2px"},plateText:{fontSize:"9px",fontWeight:"bold",color:"rgba(255,255,255,0.9)",transform:"rotate(-90deg)",whiteSpace:"nowrap"},resultBadge:{marginTop:"15px",padding:"8px 16px",borderRadius:"20px",backgroundColor:i?"rgba(231, 76, 60, 0.2)":"rgba(255,255,255,0.08)",border:i?"1px solid #e74c3c":"none",color:i?"#e74c3c":s.get("mainText",t),fontSize:"14px",fontWeight:"600",transition:"all 0.3s ease"},pickerSection:{height:"250px",position:"relative",width:"100%",borderTop:"1px solid rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.05)",backgroundColor:"rgba(0,0,0,0.1)"},drumContainer:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},drumHighlight:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"50px",borderRadius:"12px",backgroundColor:"rgba(255,255,255,0.05)",borderTop:`1px solid ${s.get("done",t)}`,borderBottom:`1px solid ${s.get("done",t)}`,pointerEvents:"none",zIndex:10},drumScrollArea:{width:"100%",height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",scrollbarWidth:"none",msOverflowStyle:"none","::-webkit-scrollbar":{display:"none"}},drumItem:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",transition:"all 0.2s ease",scrollSnapAlign:"center",cursor:"pointer"},maxWeightLabel:{position:"absolute",bottom:"10px",right:"20px",fontSize:"10px",color:s.get("icons",t),opacity:.5,fontWeight:"bold",letterSpacing:"1px"},footerAction:{display:"flex",justifyContent:"center",padding:"10px"},doneBtn:{width:"60px",height:"60px",borderRadius:"50%",border:"none",backgroundColor:s.get("done",t),color:"#fff",boxShadow:"0 4px 15px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},settingsPanel:{padding:"20px"},settingHeader:{fontSize:"12px",textTransform:"uppercase",color:s.get("icons",t),marginBottom:"10px",letterSpacing:"1px"},stepperRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px",backgroundColor:"rgba(255,255,255,0.03)",padding:"15px",borderRadius:"16px"},stepperBtn:{width:"40px",height:"40px",borderRadius:"50%",border:"none",backgroundColor:"rgba(255,255,255,0.1)",color:s.get("mainText",t),cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},stepperValue:{fontSize:"20px",fontWeight:"bold",color:s.get("mainText",t),minWidth:"80px",textAlign:"center"},settingDivider:{height:"1px",backgroundColor:"rgba(255,255,255,0.05)",margin:"20px 0"},platesGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px"},plateConfigItem:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},plateConfigCircle:{width:"45px",height:"45px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"12px",color:"#fff",cursor:"pointer",transition:"transform 0.1s"},plateCountControls:{display:"flex",alignItems:"center",gap:"8px",color:s.get("mainText",t),fontSize:"12px",backgroundColor:"rgba(255,255,255,0.05)",padding:"2px 6px",borderRadius:"10px"}}),_=40,O=({items:t,value:d,onChange:i,theme:p,suffix:r="",width:u="60px"})=>{const a=l.useRef(null),[S,x]=l.useState(!1);l.useEffect(()=>{if(a.current){const c=t.findIndex(f=>f===d);c!==-1&&(a.current.scrollTop=c*_)}},[]);const m=c=>{if(S)return;const f=c.target.scrollTop,g=Math.round(f/_),b=Math.max(0,Math.min(g,t.length-1));t[b]!==d&&i(t[b])};return e.jsxs("div",{style:{position:"relative",height:_*3,width:u,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:_,left:0,right:0,height:_,borderRadius:"8px",backgroundColor:s.get("iconsHighlited",p),opacity:.15,pointerEvents:"none",zIndex:0}}),e.jsx("div",{ref:a,onScroll:m,style:{height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",scrollbarWidth:"none",msOverflowStyle:"none",paddingTop:_,paddingBottom:_,scrollBehavior:"smooth"},className:"no-scrollbar",children:t.map((c,f)=>e.jsxs("div",{style:{height:_,display:"flex",alignItems:"center",justifyContent:"center",scrollSnapAlign:"start",fontSize:c===d?"20px":"16px",fontWeight:c===d?"bold":"normal",color:c===d?s.get("mainText",p):s.get("subText",p),opacity:c===d?1:.5,transition:"all 0.2s ease"},children:[f>0?c:"",f>0?r:""]},f))})]})},vn=new Audio("Audio/Timer.wav"),Ve=Array.from({length:102},(t,d)=>d),Ge=Array.from({length:500},(t,d)=>d-1),Xe=[0,0,.25,.5,.75,1,1],Ze=Array.from({length:60},(t,d)=>d-1),qe=Array.from({length:12},(t,d)=>(d-1)*5),$n=()=>{const[t,d]=_t.useState("dark"),[i,p]=l.useState(I.prefs[0]),[r,u]=l.useState(I.prefs[4]),[a,S]=l.useState(He),[x,m]=l.useState({}),[c,f]=l.useState(!1),[g,b]=l.useState(null),[w,M]=l.useState(null),[v,A]=l.useState(!1),[G,N]=l.useState(0),[$,h]=l.useState(0),[j,E]=l.useState(3),[k,F]=l.useState("3"),[L,T]=l.useState(10),[C,W]=l.useState(0),[z,X]=l.useState(0),[U,J]=l.useState(!0),[Se,st]=l.useState([]),[it,ae]=l.useState(!1),[ot,Q]=l.useState(!1),[rt,lt]=l.useState(!1),[at,de]=l.useState(!1),[dt,ve]=l.useState(!1),[ct,ce]=l.useState(!1),[xt,Ce]=l.useState(!1),[pt,xe]=l.useState(!1),[gt,we]=l.useState(!1),[ft,ht]=l.useState(null),[ut,ke]=l.useState(!1),[yt,te]=l.useState(!1),[mt,Te]=l.useState(!1),[Ie,bt]=l.useState(0),[ze,Be]=l.useState(3),[ne,Re]=l.useState(4),[We,De]=l.useState(6),[se,Me]=l.useState(0),[pe,Pe]=l.useState(!1),[ie,oe]=l.useState(!1),[Y,jt]=l.useState(12e4),[ge,fe]=l.useState(0),[Ae,St]=l.useState(Date.now()),[vt,he]=l.useState(0),[Ct,$e]=l.useState(0);l.useEffect(()=>{const o=ue.subscribe(d),y=$t.subscribe(D=>{p(D==="ru"?0:1)}),R=Et.subscribe(D=>{u(D)}),P=He.subscribe(D=>{const H=I.trainingLog?.[D.dayKey]?.[D.dInd]||null;b(I.programs[H.programId]||null),M(H.dayIndex),N(H.tonnage),m(H),S(D),A(H.completed),St(H.startTime),$e(Date.now()-H.startTime)});return()=>{o.unsubscribe(),y.unsubscribe(),R.unsubscribe(),P.unsubscribe()}},[]),l.useEffect(()=>{if(v)return;const o=setInterval(()=>{$e(Date.now()-Ae)},500);return()=>clearInterval(o)},[Ae]),l.useEffect(()=>{if(!ie||v)return;const o=Date.now()-ge,y=setInterval(()=>{const R=Date.now()-o,P=Math.min(R,Y);fe(P),he(P/Y*100),P>=Y&&(oe(!1),vn.play(),fe(0),he(0))},50);return()=>clearInterval(y)},[ie,v,Y,ge]);function wt(o){Oe.hasPremium?f(o):we(!0)}const kt=(o,y)=>{F(o,y),E(y),ce(!0)},Tt=()=>{Xt(a.dayKey,a.dInd,k,L,C,z,U),ce(!1),N(Ne(a.dayKey,a.dInd)),h(Ue(a.dayKey,a.dInd)),oe(pe)},It=(o,y)=>{F(o,y),E(y);const R=I.trainingLog[a.dayKey][a.dInd].exercises[o].sets[y];T(R.reps),W(R.weight),X(R.time),J(R.type===0),de(!0)},zt=()=>{Zt(a.dayKey,a.dInd,k,j,L,C,z,U),de(!1),N(Ne(a.dayKey,a.dInd)),h(Ue(a.dayKey,a.dInd))},Bt=o=>{Gt(a.dayKey,a.dInd,o)},Rt=()=>{const o=qt(a.dayKey,a.dInd);ae(!1),A(!0),st(o),lt(!0)},Wt=o=>{bt(o),te(!0),ve(!1)},Dt=o=>{ht(o),Q(!0)},Mt=()=>{Jt(a.dayKey,a.dInd,ft),Q(!1)};function Ee(o){if(Qt(a.dayKey,a.dInd,Ie),Q(!1),te(!1),!o)return null;let y=i===0?"время":"time";se===0&&(y=ze+"x"+ne+"-"+We),Yt(x.programId,a.dInd,Ie,y),Te(!1),Q(!1),te(!1)}return e.jsxs("div",{style:n(t).container,children:[e.jsxs("div",{style:n(t).panel,children:[e.jsxs("div",{style:n(t).headerCard,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{...n(t,r).text,fontWeight:"bold",fontSize:"18px",marginBottom:0},children:Array.isArray(g?.name)?g?.name[i]:g?.name}),e.jsx("div",{style:{...n(t,r).subtext,opacity:.7,marginTop:"4px"},children:(a.mode==="new"?"⏳ ":"✅ ")+g?.schedule[w].name[i]})]}),e.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.2)",padding:"5px 12px",borderRadius:"20px"},children:e.jsx("div",{style:{...n(t,r).subtext,fontSize:"16px",fontWeight:"600",color:s.get("mainText",t)},children:ee(v?x.duration:Ct)})})]}),e.jsx("div",{style:{width:"100%",height:"6px",position:"relative",borderRadius:"3px",overflow:"hidden",backgroundColor:"rgba(255,255,255,0.1)",marginBottom:"12px"},children:e.jsx("div",{style:{width:`${vt}%`,height:"100%",backgroundColor:s.get("skipped",t),transition:"width 0.5s linear"}})}),e.jsxs("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Ft,{style:{color:s.get("icons",t)}}),e.jsx("div",{style:{...n(t,r).subtext,fontWeight:"bold",fontSize:"14px"},children:(G*.001).toFixed(2)+(i===0?" т":" t")})]}),!v&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx(wn,{time:ge,maxTime:Y,theme:t}),e.jsx("div",{style:n(t).toolIconWrapper,onClick:()=>{ie?(oe(!1),fe(0),he(0)):oe(!0)},children:ie?e.jsx(dn,{style:n(t).headerIcon}):e.jsx(cn,{style:n(t).headerIcon})}),e.jsx("div",{style:n(t).toolIconWrapper,onClick:()=>{xe(!0)},children:e.jsx(Ye,{style:n(t).headerIcon})}),e.jsx("div",{style:n(t).toolIconWrapper,onClick:()=>{ke(!0)},children:e.jsx(nn,{style:n(t).headerIcon})}),e.jsx("div",{style:{...n(t).toolIconWrapper,backgroundColor:s.get("done",t)},onClick:()=>{ae(!0)},children:e.jsx(Lt,{style:{fontSize:"18px",color:"#fff"}})})]})]})]}),e.jsx("div",{style:n(t).scrollView,children:x?.exercises&&x.exerciseOrder?.length>0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"97%",gap:"12px",paddingBottom:"20px"},children:[x.exerciseOrder.map(o=>{const y=x.exercises[o],R=I.exercises[o];if(!R||!y)return null;const P=R.name[i];let D="";const H=I.programs[x.programId];if(H&&x.dayIndex!=null){const B=H.schedule[x.dayIndex];if(B){const K=B.exercises.find(Pt=>Pt.exId===o);K&&(D=K.sets)}}return e.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:s.get("bottomPanel",t),borderRadius:"16px",padding:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:k===o?`1px solid ${s.get("iconsHighlited",t)}`:"none"},children:[e.jsxs("div",{onClick:()=>{F(B=>B===o?-1:o)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px",borderBottom:`1px solid ${s.get("border",t)}`,paddingBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{...n(t,r).text,fontWeight:"bold",fontSize:"16px",marginBottom:0,color:k===o?s.get("iconsHighlited",t):s.get("mainText",t)},children:P}),e.jsx("span",{style:{fontSize:"12px"},children:y.completed?"✅":""})]}),e.jsx("div",{style:{...n(t,r).subtext,backgroundColor:"rgba(0,0,0,0.1)",padding:"2px 8px",borderRadius:"8px"},children:D})]}),k===o&&e.jsxs("div",{style:{display:"flex",marginBottom:"6px",paddingLeft:"4px",opacity:.6},children:[e.jsx("div",{style:{...n(t,r).subtext,width:"10%"},children:"#"}),e.jsx("div",{style:{...n(t,r).subtext,width:"25%"},children:i===0?"Повт":"Reps"}),e.jsx("div",{style:{...n(t,r).subtext,width:"25%"},children:i===0?"Вес":"Kg"}),e.jsx("div",{style:{...n(t,r).subtext,width:"25%"},children:i===0?"Время":"Time"})]}),k===o&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[y.sets.map((B,K)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",backgroundColor:K%2===0?"rgba(255,255,255,0.03)":"transparent",borderRadius:"8px"},children:[e.jsx("div",{style:{...re(t,B.type),width:"10%",border:"none"},children:K+1}),e.jsxs("div",{style:{...re(t,B.type),border:"none"},children:[B.reps,c&&e.jsx(be,{exId:o,setIndex:K,beforeDate:new Date(a.dayKey),value:B.reps,isReps:!0,theme:t})]}),e.jsxs("div",{style:{...re(t,B.type),border:"none"},children:[B.weight,c&&e.jsx(be,{exId:o,setIndex:K,beforeDate:new Date(a.dayKey),value:B.weight,isReps:!1,theme:t})]}),e.jsxs("div",{style:{...re(t,B.type),border:"none"},children:[ee(B.time),c&&e.jsx(be,{exId:o,setIndex:K,beforeDate:new Date(a.dayKey),value:B.time,isReps:!1,theme:t,isTime:!0})]}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsx("div",{onClick:()=>{It(o,K)},style:{padding:"6px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.05)"},children:e.jsx(Ht,{style:{fontSize:"12px",color:s.get("icons",t)}})})})]},K)),c&&e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",borderTop:`1px dashed ${s.get("border",t)}`,opacity:.7},children:[e.jsx("div",{style:{...le(t),width:"10%",border:"none"},children:y.sets.length+1}),e.jsx("div",{style:{...le(t),border:"none"},children:je(o,y.sets.length,new Date(a.dayKey),!0)}),e.jsx("div",{style:{...le(t),border:"none"},children:je(o,y.sets.length,new Date(a.dayKey),!1)}),e.jsx("div",{style:{...le(t),border:"none"},children:je(o,y.sets.length,new Date(a.dayKey),!1,!0)})]}),e.jsxs("div",{style:{display:"flex",marginTop:"12px",paddingTop:"8px",borderTop:`1px solid ${s.get("border",t)}`,justifyContent:"space-around"},children:[e.jsx("button",{style:n(t).actionBtnSmall,onClick:()=>{Dt(o)},children:e.jsx(Ke,{style:{fontSize:"14px",color:s.get("skipped",t)}})}),e.jsxs("button",{style:{...n(t).actionBtnSmall,width:"40%",backgroundColor:s.get("iconsHighlited",t)},onClick:()=>{kt(o,y.sets.length)},children:[e.jsx(_e,{style:{fontSize:"16px",color:s.get("background",t)}})," ",e.jsx("span",{style:{marginLeft:"5px",color:s.get("background",t),fontWeight:"bold"},children:i===0?"Сет":"Set"})]}),!v&&!y.completed&&e.jsx("button",{style:n(t).actionBtnSmall,onClick:()=>{Bt(o)},children:e.jsx(Kt,{style:{fontSize:"14px",color:s.get("done",t)}})})]})]})]},o)}),e.jsx("div",{style:{width:"100vw",height:"20vh"}})]})})]}),e.jsxs("div",{style:n(t).floatingMenu,children:[e.jsx("div",{onClick:()=>{Ce(!0)},style:n(t).menuIconBtn,children:e.jsx(Ot,{style:{fontSize:"20px",color:s.get("icons",t)}})}),e.jsxs("div",{onClick:()=>{ve(!0)},style:n(t).menuPillBtn,children:[e.jsx(_e,{style:{fontSize:"14px",marginRight:"6px"}}),i===0?"Упражнение":"Exercise"]}),e.jsxs("div",{onClick:()=>{wt(o=>!o)},style:{...n(t).menuPillBtn,backgroundColor:c?s.get("barsColorMeasures",t):t==="dark"?"rgba(28, 28, 28, 0.85)":"rgba(235, 235, 235, 0.46)",color:c?s.get("background",t):s.get("subText",t),border:c?"none":`1px solid ${s.get("border",t)}`},children:[e.jsx(Nt,{style:{fontSize:"16px",marginRight:"6px"}}),i===0?"История":"History"]})]}),xt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto",padding:"25px"},children:[e.jsx("div",{style:{...n(t,r).subtext,textAlign:"left",whiteSpace:"pre-line",fontSize:"14px",lineHeight:"1.5"},children:kn(i)}),e.jsx("button",{onClick:()=>Ce(!1),style:n(t).primaryBtn,children:i===0?"Закрыть":"Close"})]})}),ct&&e.jsx("div",{style:{...n(t).confirmContainer},children:e.jsxs("div",{style:{...n(t).bottomSheet,height:"75vh",borderTop:`3px solid ${U?s.get("difficulty2",t):s.get("difficulty5",t)}`},children:[e.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"2px",alignSelf:"center",marginBottom:"15px"}}),e.jsxs("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",fontWeight:"bold",margin:0},children:i===0?"Добавить сет":"Add Set"}),e.jsxs("div",{style:{display:"flex",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"20px",padding:"4px"},children:[e.jsx("div",{onClick:()=>J(!0),style:{...n(t).segmentBtn,color:U?s.get("difficulty2",t):s.get("subText",t)},children:i===0?"Разминка":"Warmup"}),e.jsx("div",{onClick:()=>J(!1),style:{...n(t).segmentBtn,color:U?s.get("subText",t):s.get("difficulty5",t)},children:i===0?"Рабочий":"Work"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px",width:"100%"},children:[e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,r).subtext,marginBottom:"10px",textAlign:"center"},children:i===0?"Повторы":"Reps"}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(O,{items:Ve,value:L,onChange:T,theme:t,width:"60px"})})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,r).subtext,marginBottom:"10px",textAlign:"center"},children:i===0?"Вес (кг)":"Weight (kg)"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[e.jsx(O,{items:Ge,value:Math.floor(C),onChange:o=>W(o+C%1),theme:t,width:"50px"}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:s.get("subText",t)},children:"."}),e.jsx(O,{items:Xe,value:C%1,onChange:o=>W(Math.floor(C)+o),theme:t,width:"40px",suffix:""})]})]})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",marginTop:"10px",padding:"15px 10px"},children:[e.jsxs("div",{style:{marginBottom:"10px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",width:"90%"},children:[e.jsx(Ye,{style:{color:s.get("difficulty",t),fontSize:"35px",marginRight:"auto"},onClick:()=>xe(!0)}),e.jsxs("div",{style:{...n(t,r).mainText},children:[" ",i===0?"Время выполнения":"Exercise time"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(O,{items:Ze,value:Math.floor(z/6e4),onChange:o=>X(o*6e4+z%6e4),theme:t,width:"50px",suffix:"m"})}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:s.get("subText",t)},children:":"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(O,{items:qe,value:Math.floor(z%6e4/1e3),onChange:o=>X(Math.floor(z/6e4)*6e4+o*1e3),theme:t,width:"50px",suffix:"s"})})]})]}),!v&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"15px auto",padding:"0 10px"},children:[e.jsx("div",{style:{...n(t,r).text,fontSize:"16px"},children:i===0?"Запустить таймер?":"Start timer?"}),pe?e.jsx(sn,{style:{fontSize:"28px",color:s.get("done",t),cursor:"pointer"},onClick:()=>{Pe(!1)}}):e.jsx(on,{style:{fontSize:"28px",color:s.get("icons",t),cursor:"pointer"},onClick:()=>{Pe(!0)}})]}),!v&&pe&&e.jsxs("div",{style:n.topSection,children:[e.jsxs("div",{style:n.label,children:[e.jsx("span",{style:{opacity:.7,fontSize:"14px",textTransform:"uppercase",letterSpacing:"1px"},children:i===0?"отдых: ":"rest: "}),e.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",marginTop:"4px"},children:[Math.floor(Y/6e4),":",Math.floor(Y%6e4/1e3).toString().padStart(2,"0")]})]}),e.jsx(tt,{style:n(t).slider,min:10,max:600,step:10,value:Y/1e3,valueLabelDisplay:"off",onChange:(o,y)=>{jt(y*1e3)}})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"auto",marginBottom:"10px"},children:[e.jsx("button",{onClick:()=>ce(!1),style:{...n(t).secondaryBtn,flex:1},children:e.jsx(Z,{style:{fontSize:"24px"}})}),e.jsx("button",{onClick:()=>{Tt()},style:{...n(t).primaryBtn,flex:3},children:e.jsx(V,{style:{fontSize:"24px"}})})]})]})}),at&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).bottomSheet,borderTop:`3px solid ${U?s.get("difficulty2",t):s.get("difficulty5",t)}`},children:[e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",fontWeight:"bold",marginBottom:"20px",textAlign:"center"},children:i===0?"Изменить сет":"Edit Set"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px",width:"100%"},children:[e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,r).subtext,marginBottom:"10px",textAlign:"center"},children:i===0?"Повторы":"Reps"}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(O,{items:Ve,value:L,onChange:T,theme:t,width:"60px"})})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,r).subtext,marginBottom:"10px",textAlign:"center"},children:i===0?"Вес (кг)":"Weight"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[e.jsx(O,{items:Ge,value:Math.floor(C),onChange:o=>W(o+C%1),theme:t,width:"50px"}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:s.get("subText",t)},children:"."}),e.jsx(O,{items:Xe,value:C%1,onChange:o=>W(Math.floor(C)+o),theme:t,width:"40px"})]})]})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"4px",margin:"20px 0"},children:[e.jsx("div",{onClick:()=>{J(!0)},style:{...n(t).segmentBtn,color:U?s.get("difficulty2",t):s.get("subText",t)},children:i===0?"Разминка":"Warmup"}),e.jsx("div",{onClick:()=>{J(!1)},style:{...n(t).segmentBtn,color:U?s.get("subText",t):s.get("difficulty5",t)},children:i===0?"Рабочий":"Work"})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsxs("div",{style:{...n(t,r).subtext,marginBottom:"10px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(rn,{})," ",i===0?"Время":"Time"]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:[e.jsx(O,{items:Ze,value:Math.floor(z/6e4),onChange:o=>X(o*6e4+z%6e4),theme:t,width:"50px",suffix:"m"}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:s.get("subText",t)},children:":"}),e.jsx(O,{items:qe,value:Math.floor(z%6e4/1e3),onChange:o=>X(Math.floor(z/6e4)*6e4+o*1e3),theme:t,width:"50px",suffix:"s"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"20px"},children:[e.jsx("button",{onClick:()=>de(!1),style:{...n(t).secondaryBtn,flex:1},children:e.jsx(Z,{style:{fontSize:"24px"}})}),e.jsx("button",{onClick:()=>{zt()},style:{...n(t).primaryBtn,flex:3},children:e.jsx(V,{style:{fontSize:"24px"}})})]})]})}),pt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsx(xn,{theme:t,langIndex:i,setTime:X,setShowPanel:xe})}),ut&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsx(un,{theme:t,langIndex:i,fSize:r,setShowCalculator:ke})}),gt&&!Oe.hasPremium&&e.jsxs("div",{onClick:o=>o.stopPropagation(),style:{position:"absolute",inset:0,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:ue.value==="dark"?"rgba(10, 10, 10, 0.85)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",textAlign:"center"},children:[e.jsx("div",{style:{color:ue.value==="dark"?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:i===0?"ТОЛЬКО ДЛЯ ПРЕМИУМ":"PREMIUM USERS ONLY"}),e.jsx("button",{onClick:()=>{we(!1)},style:{...n(t,r).btn,margin:"10px"},children:i===0?"Закрыть":"Close"})]}),it&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto"},children:[e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",marginBottom:"25px"},children:i===0?"Завершить тренировку?":"Finish session?"}),e.jsxs("div",{style:{display:"flex",width:"80%",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>ae(!1),style:n(t).secondaryBtn,children:e.jsx(Z,{style:{fontSize:"28px"}})}),e.jsx("button",{onClick:()=>{Rt()},style:n(t).primaryBtn,children:e.jsx(V,{style:{fontSize:"28px"}})})]})]})}),ot&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto"},children:[e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",marginBottom:"25px"},children:i===0?"Удалить упражнение?":"Delete exercise?"}),e.jsxs("div",{style:{display:"flex",width:"80%",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>Q(!1),style:n(t).secondaryBtn,children:e.jsx(Z,{style:{fontSize:"28px"}})}),e.jsx("button",{onClick:()=>{Mt()},style:{...n(t).primaryBtn,backgroundColor:s.get("skipped",t)},children:e.jsx(Ke,{style:{fontSize:"20px"}})})]})]})}),rt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"85%",justifyContent:"flex-start",paddingTop:"10px"},children:[e.jsx("div",{style:{...n(t,r).subtext,fontSize:"18px",fontWeight:"bold",marginTop:"17px",color:s.get("done",t)},children:i===0?"Результаты тренировки":"Session results"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",width:"100%",marginTop:"20px",paddingBottom:"20px",borderBottom:`1px solid ${s.get("border",t)}`},children:[e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,r).subtext,fontSize:"12px"},children:i===0?"Время":"Time"}),e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",fontWeight:"bold",margin:0},children:ee(x.duration)})]}),e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,r).subtext,fontSize:"12px"},children:i===0?"Тоннаж":"Tonnage"}),e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",fontWeight:"bold",margin:0},children:(G*.001).toFixed(2)+(i===0?" т":" t")})]}),e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,r).subtext,fontSize:"12px"},children:i===0?"Повторения":"Reps"}),e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",fontWeight:"bold",margin:0},children:$})]}),e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,r).subtext,fontSize:"12px"},children:i===0?"Сеты":"Sets"}),e.jsx("div",{style:{...n(t,r).text,fontSize:"20px",fontWeight:"bold",margin:0},children:Vt(a.dayKey,a.dInd)})]})]}),e.jsxs("div",{style:{width:"100%",flex:1,overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{...n(t,r).subtext,fontSize:"16px",fontWeight:"bold",marginTop:"17px",marginBottom:"10px"},children:i===0?"Рекорды":"Records"}),e.jsx("img",{src:"images/Medal.png",style:{width:"60px",height:"60px",marginBottom:"10px"}}),Se.length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",width:"100%",padding:"0 10px"},children:Se.map(({exId:o,newRm:y,oldRm:R,improvement:P})=>{const D=I.exercises[o];return D?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"10px"},children:[e.jsx("div",{style:{...n(t,r).subtext,fontWeight:"bold",textAlign:"center",fontSize:"14px"},children:D.name[i]}),e.jsxs("div",{style:{...n(t,r).text,fontSize:"20px",fontWeight:"bold",marginTop:"6px",color:s.get("iconsHighlited",t)},children:[y," ",i===0?"кг":"kg"]}),e.jsxs("div",{style:{...n(t,r).subtext,fontSize:"11px",marginTop:"4px",opacity:.6},children:[i===0?"было":"was"," ",R>0?`${R} ${i===0?"кг":"kg"}`:"-"]}),e.jsx("div",{style:{...n(t,r).subtext,fontSize:"12px",fontWeight:"bold",color:s.get("done",t),marginTop:"4px"},children:P>0?i===0?`↑ +${P.toFixed(1)} кг`:`↑ +${P.toFixed(1)} kg`:""})]},o):null})}):e.jsx("div",{style:{...n(t,r).subtext,marginTop:"12px",fontStyle:"italic"},children:i===0?"Новых рекордов нет":"No new records"})]}),e.jsxs("button",{onClick:()=>{Ut("TrainingMain")},style:{...n(t).primaryBtn,width:"90%",marginTop:"15px"},children:[e.jsx(V,{style:{fontSize:"24px",marginRight:"10px"}}),i===0?"Завершить":"Finish"]})]})}),dt&&e.jsx("div",{style:{...n(t).confirmContainer},children:e.jsx(an,{needToAdd:!0,setEx:Wt})}),mt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto",padding:"25px"},children:[e.jsx("p",{style:{...n(t,!1).text,textAlign:"center",fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:i===0?"Стратегия выполнения":"Set Strategy"}),e.jsxs("div",{style:{display:"flex",width:"100%",justifyContent:"center",marginBottom:"20px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:"4px"},children:[e.jsx("div",{onClick:()=>{Me(0)},style:{...n(t).segmentBtn,width:"50%",backgroundColor:se===0?s.get("iconsHighlited",t):"transparent"},children:i===0?"Повторы":"Reps"}),e.jsx("div",{onClick:()=>{Me(1)},style:{...n(t).segmentBtn,width:"50%",backgroundColor:se===1?s.get("iconsHighlited",t):"transparent"},children:i===0?"Время":"Time"})]}),se===0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",width:"100%",marginBottom:"25px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(ye,{onClick:()=>Be(o=>o+1),style:n(t).icon}),e.jsx("div",{style:{...n(t).text,fontSize:"24px",fontWeight:"bold"},children:ze}),e.jsx(me,{onClick:()=>Be(o=>o-1>0?o-1:1),style:n(t).icon}),e.jsx("span",{style:n(t).subtext,children:i===0?"Сеты":"Sets"})]}),e.jsx("p",{style:{...n(t).text,fontSize:"20px",opacity:.5},children:"X"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(ye,{onClick:()=>Re(o=>o+1),style:n(t).icon}),e.jsx("div",{style:{...n(t).text,fontSize:"24px",fontWeight:"bold"},children:ne}),e.jsx(me,{onClick:()=>Re(o=>o-1>0?o-1:1),style:n(t).icon}),e.jsx("span",{style:n(t).subtext,children:"Min"})]}),e.jsx("p",{style:{...n(t).text,fontSize:"20px",opacity:.5},children:"-"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(ye,{onClick:()=>De(o=>o+1),style:n(t).icon}),e.jsx("div",{style:{...n(t).text,fontSize:"24px",fontWeight:"bold"},children:We}),e.jsx(me,{onClick:()=>De(o=>o-1>ne+2?o-1:ne+2),style:n(t).icon}),e.jsx("span",{style:n(t).subtext,children:"Max"})]})]}),e.jsx("button",{onClick:()=>Ee(!0),style:n(t).primaryBtn,children:e.jsx(V,{style:{fontSize:"22px"}})})]})}),yt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto"},children:[e.jsx("div",{style:{...n(t,r).text,fontSize:"18px",textAlign:"center",marginBottom:"25px"},children:i===0?"Добавить упражнение также в программу?":"Add the exercise to the program too?"}),e.jsxs("div",{style:{display:"flex",width:"80%",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>Ee(!1),style:n(t).secondaryBtn,children:i===0?"Нет":"No"}),e.jsx("button",{onClick:()=>{Te(!0),te(!1)},style:n(t).primaryBtn,children:i===0?"Да":"Yes"})]})]})})]})},re=(t,d)=>({fontSize:"15px",fontWeight:"bold",color:d===0?s.get("difficulty2",t):s.get("difficulty5",t),width:"25%",textAlign:"left",paddingLeft:"4px"}),le=t=>({fontSize:"13px",color:s.get("subText",t),width:"25%",textAlign:"left",paddingLeft:"4px",fontStyle:"italic"}),Cn=(t,d)=>({fontSize:"10px",position:"relative",top:"-4px",left:"2px",fontWeight:"bold",color:d?s.get("done",t):s.get("skipped",t)}),n=(t,d)=>({container:{backgroundColor:s.get("background",t),display:"flex",position:"absolute",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"92vh",top:"10vh",width:"100vw",fontFamily:"Segoe UI"},panel:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyContent:"start"},headerCard:{width:"95%",backgroundColor:s.get("bottomPanel",t),borderRadius:"20px",padding:"15px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",marginBottom:"15px",marginTop:"10px"},headerIcon:{fontSize:"20px",color:s.get("icons",t)},toolIconWrapper:{width:"36px",height:"36px",borderRadius:"12px",backgroundColor:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},scrollView:{display:"flex",flexDirection:"column",alignItems:"center",overflowY:"scroll",width:"100%",overflowX:"hidden",height:"66vh"},text:{textAlign:"left",fontSize:d===0?"13px":"15px",color:s.get("mainText",t),marginBottom:"5px"},subtext:{fontSize:d===0?"11px":"13px",color:s.get("subText",t)},icon:{fontSize:"18px",color:s.get("icons",t),cursor:"pointer"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.65)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2900},bottomSheet:{width:"90%",height:"60%",position:"absolute",bottom:0,backgroundColor:s.get("bottomPanel",t),borderTopLeftRadius:"25px",borderTopRightRadius:"25px",padding:"15px 20px 30px 20px",display:"flex",flexDirection:"column",boxShadow:"0 -5px 20px rgba(0,0,0,0.3)"},modalCard:{width:"80%",backgroundColor:s.get("bottomPanel",t),borderRadius:"24px",padding:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.3)"},inputCard:{flex:1,height:"80px",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"16px",padding:"10px",display:"flex",flexDirection:"column",alignItems:"center"},circleBtn:{fontSize:"24px",color:s.get("icons",t),padding:"8px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.05)",cursor:"pointer"},circleBtnSmall:{fontSize:"18px",color:s.get("icons",t),padding:"8px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.05)",cursor:"pointer"},primaryBtn:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:s.get("done",t),color:"#fff",border:"none",borderRadius:"15px",padding:"12px 20px",fontSize:"16px",fontWeight:"bold",boxShadow:"0 4px 10px rgba(0,0,0,0.2)"},secondaryBtn:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:s.get("skipped",t),color:s.get("mainText",t),border:"none",borderRadius:"15px",padding:"12px 20px",fontSize:"16px"},segmentBtn:{flex:1,textAlign:"center",padding:"8px",borderRadius:"10px",fontSize:"14px",fontWeight:"600",transition:"all 0.2s"},slider:{width:"90%",alignSelf:"center",color:s.get("difficulty",t)},actionBtnSmall:{display:"flex",alignItems:"center",justifyContent:"center",border:"none",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"8px 16px",cursor:"pointer"},floatingMenu:{position:"fixed",bottom:"90px",width:"88%",maxWidth:"400px",height:"40px",backgroundColor:t==="dark"?"rgba(15, 15, 15, 0.57)":"rgba(219, 219, 219, 0.46)",backdropFilter:"blur(10px)",borderRadius:"30px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 10px",boxShadow:"0 10px 25px rgba(0,0,0,0.4)",zIndex:1e3,border:`1px solid ${s.get("border",t)}`},menuPillBtn:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 16px",borderRadius:"20px",backgroundColor:t==="dark"?"rgba(28, 28, 28, 0.85)":"rgba(235, 235, 235, 0.46)",color:s.get("mainText",t),fontSize:"14px",fontWeight:"600",cursor:"pointer",height:"20px"},menuIconBtn:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},statBox:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"rgba(255,255,255,0.03)",borderRadius:"12px",padding:"10px"},topSection:{width:"85%",display:"flex",flexDirection:"column",alignItems:"center",background:"rgba(0,0,0,0.05)",borderRadius:"16px",padding:"15px",marginTop:"10px"},label:{display:"flex",flexDirection:"column",alignItems:"center",color:s.get("mainText",t),marginBottom:"10px",fontFamily:"sans-serif"}});function be({exId:t,setIndex:d,beforeDate:i,value:p,isReps:r,theme:u,isTime:a=!1}){const S=String(t),x=et(S,d,i,I.trainingLog);let m="",c=0;if(x!==null&&typeof p=="number"&&!isNaN(p))if(a){const f=x.time||0;c=p-f;const g=Math.round(c/1e3),b=Math.abs(g);if(b===0)m="";else if(b>=60){const w=Math.floor(b/60),M=b%60;m=`${g>0?"▴":"▾"}${w}:${M.toString().padStart(2,"0")}`}else m=`${g>0?"▴":""}${b}`}else{const f=r?x.reps:x.weight;c=p-f,c!==0&&(m=`${c>0?"▴":""}${c}`)}return e.jsx("span",{style:Cn(u,c>0),children:m})}function je(t,d,i,p,r=!1){const u=t.toString(),a=et(u,d,i,I.trainingLog);return a?r?ee(a.time):p?a.reps.toString():a.weight.toString():"-"}function wn({time:t,maxTime:d,theme:i}){const p=d-t,r=Math.floor(p/6e4),u=Math.floor(p%6e4/1e3),a=p>0?`${r>0?r+":":""}${u.toString().padStart(2,"0")}`:"",S=l.useRef(u),[x,m]=l.useState(!1),c=d>0?t/d*100:0;if(l.useEffect(()=>{if(u!==S.current){m(!0),S.current=u;const w=setTimeout(()=>{m(!1)},200);return()=>clearTimeout(w)}},[u]),t<=0||p<=0)return null;const g=x?"21px":"18px",b=c<50&&c>30?s.get("trainingIsolatedFont",i):c<30?s.get("subText",i):s.get("trainingBaseFont",i);return e.jsx("div",{style:{color:b,fontSize:g,fontWeight:"bold",transition:"font-size 0.2s ease-out",lineHeight:1,fontFamily:"monospace"},children:a})}function ee(t){if(t<=0)return"-";const d=Math.floor(t/1e3),i=Math.floor(d/60),p=d%60;return`${i}:${p.toString().padStart(2,"0")}`}function kn(t){return t===0?`КАК ИСПОЛЬЗОВАТЬ:
1️⃣ ВЫБЕРИТЕ ДЕНЬ: Нажмите на дату в календаре.
2️⃣ СОЗДАЙТЕ ТРЕНИРОВКУ: Нажмите на значок открытой книги 📖, чтобы начать новую сессию.
3️⃣ ДОБАВЬТЕ УПРАЖНЕНИЯ: Используйте ➕, чтобы добавить упражнение из программы.
4️⃣ ЗАПОЛНИТЕ ПОДХОДЫ: Укажите повторения и вес. Тоннаж считается автоматически.
5️⃣ РЕДАКТИРУЙТЕ: Нажмите ✏️, чтобы изменить упражнение или подход.
6️⃣ ЗАВЕРШИТЕ: Нажмите 🏁, чтобы сохранить тренировку. Данные сохраняются мгновенно!`:`HOW TO USE:
1️⃣ SELECT A DAY: Tap a date in the calendar.
2️⃣ START TRAINING: Tap the open book icon 📖 to begin a new session.
3️⃣ ADD EXERCISES: Use ➕ to add exercises from your program.
4️⃣ LOG SETS: Enter reps and weight. Tonnage is calculated automatically.
5️⃣ EDIT: Tap ✏️ to modify an exercise or set.
6️⃣ FINISH: Tap 🏁 to complete and save your workout instantly!`}export{$n as default};
