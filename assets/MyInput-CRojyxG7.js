import{H as w,r as i,aV as I,aW as M,j as f,C as m,A as b,aX as j,aY as k}from"./index-DMiE244U.js";function B(s){return w({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 10a1 1 0 0 1 1 1v7.584l1.293 -1.291a1 1 0 0 1 1.32 -.083l.094 .083a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1 -.112 .097l-.11 .071l-.114 .054l-.105 .035l-.149 .03l-.117 .006l-.075 -.003l-.126 -.017l-.111 -.03l-.111 -.044l-.098 -.052l-.096 -.067l-.09 -.08l-3 -3a1 1 0 0 1 1.414 -1.414l1.293 1.293v-7.586a1 1 0 0 1 1 -1m0 -8a3 3 0 1 1 -3 3l.005 -.176a3 3 0 0 1 2.995 -2.824"},child:[]}]})(s)}function T(s){return w({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11.852 2.011l.058 -.007l.09 -.004l.075 .003l.126 .017l.111 .03l.111 .044l.098 .052l.104 .074l.082 .073l3 3a1 1 0 1 1 -1.414 1.414l-1.293 -1.292v7.585a1 1 0 0 1 -2 0v-7.585l-1.293 1.292a1 1 0 0 1 -1.32 .083l-.094 -.083a1 1 0 0 1 0 -1.414l3 -3q .053 -.054 .112 -.097l.11 -.071l.114 -.054l.105 -.035z"},child:[]},{tag:"path",attr:{d:"M12 16a3 3 0 1 1 0 6a3 3 0 0 1 0 -6"},child:[]}]})(s)}function W(s){return w({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]},{tag:"path",attr:{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(s)}const z=({keyType:s=0,maxL:P=500,placeHolder:C,theme:a,h:p="90%",w:y="vh",value:d="",onChange:x=null,clear:g=!1})=>{const[e,n]=i.useState({myString:"",cursorPos:0}),[o,h]=i.useState(!1),[u,c]=i.useState(!0);return i.useEffect(()=>{n({myString:d,cursorPos:0})},[d]),i.useEffect(()=>{const l=I.subscribe(t=>{o&&(t==="bs"?n(r=>{const S=Array.from(r.myString);return r.cursorPos===0?r:{myString:[...S.slice(0,r.cursorPos-1),...S.slice(r.cursorPos)].join(""),cursorPos:r.cursorPos-1}}):t==="bsall"?n({myString:"",cursorPos:0}):t.length===1&&n(r=>({myString:r.myString.slice(0,r.cursorPos)+t+r.myString.slice(r.cursorPos),cursorPos:r.cursorPos+1})))});return()=>l.unsubscribe()},[o]),i.useEffect(()=>{if(!o){c(!1);return}c(!0);const l=setInterval(()=>{c(t=>!t)},500);return()=>clearInterval(l)},[o]),i.useEffect(()=>{const l=M.subscribe(t=>{t===!1&&(h(!1),g&&n({myString:"",cursorPos:0}))});return()=>l.unsubscribe()},[]),i.useEffect(()=>{x&&o&&x(e.myString)},[e]),f.jsx("div",{style:{width:y,height:p,borderBottom:`1px solid ${m.get("border",a)}`,display:"flex",alignItems:"flex-end",justifyContent:"flex-start"},onClick:l=>{j(""),h(!0),k({type:s,value:!0}),n(t=>({myString:t.myString,cursorPos:v(l,t.myString)}))},children:f.jsx("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflow:"hidden",fontSize:b.prefs[4]===0?"13px":"15px",display:"block",paddingLeft:"8px",textAlign:"left",paddingBottom:"2px",lineHeight:"18px",fontFamily:"Segoe UI",color:e.myString.length===0?m.get("icons",a):m.get("mainText",a)},children:e.myString.length>0||o?f.jsxs(f.Fragment,{children:[e.myString.slice(0,e.cursorPos),u&&f.jsx("span",{style:{color:m.get("iconsHighlited",a),fontSize:b.prefs[4]===0?"13px":"15px",fontWeight:"bold"},children:"|"}),e.myString.slice(e.cursorPos)]}):C})})},v=(s,P)=>{const a=b.prefs[4]===0?13:15,p=18,y=s.nativeEvent.offsetX-8,d=s.nativeEvent.offsetY,g=document.createElement("canvas").getContext("2d");g.font=`${a}px 'Segoe UI', 'Apple Color Emoji', 'Noto Color Emoji', 'Arial'`;const e=P.split(`
`),n=Math.floor(d/p),o=Math.min(n,e.length-1),h=e[o],u=Array.from(h);let c=0;for(let t=0;t<u.length;t++){const r=g.measureText(u[t]).width;if(c+=r,y<c)return e.slice(0,o).reduce((A,E)=>A+Array.from(E).length+1,0)+t}return e.slice(0,o).reduce((t,r)=>t+Array.from(r).length+1,0)+u.length};export{z as M,B as T,T as a,W as b};
