import{A as a,U as f,t as ne,l as le,f as re,p as ae,C as o,j as e,m as g,bp as de,z as ce,B as pe,D as xe,bL as ge,G as ue,c5 as he,bb as be,bc as fe,b as ye,c6 as me,c7 as je,b$ as ve,c8 as Ce,a as Se,M as ke,_ as Fe,y as we}from"./index-HEAg23VM.js";import{r as c}from"./recharts-Bg6K2Pzo.js";import{e as N,f as U}from"./index-CqI9hGJ0.js";import{S as w}from"./ScrollPicker-_Am4ppA4.js";const Te=[["Набор массы","Mass gain"],["Сила","Strength"],["Жиросжигание","Weight loss"],["Здоровье","Health"]],z=(i,d,t=1)=>{const l=[];for(let n=i;n<=d;n+=t)l.push(t===1?n:parseFloat(n.toFixed(1)));return l},Me=()=>{const[i,d]=c.useState("dark"),[t,l]=c.useState(a.prefs[0]),[n,T]=c.useState(a.prefs[4]),[p,V]=c.useState(f.hasPremium),[B,m]=c.useState(!1),[L,Y]=c.useState(a.pData.age||25),[D,M]=c.useState(a.pData.gender||0),[W,_]=c.useState(a.pData.height||175),[P,q]=c.useState(a.pData.wrist||17),[A,J]=c.useState(a.pData.goal||0),K=c.useMemo(()=>z(10,100),[]),Q=c.useMemo(()=>z(50,250),[]),Z=c.useMemo(()=>z(10,40,.5),[]),j=c.useMemo(()=>Te.map(x=>x[t]),[t]);c.useEffect(()=>{const x=ne.subscribe(d),v=le.subscribe(k=>l(k==="ru"?0:1)),C=re.subscribe(T),S=ae.subscribe(V);return()=>{x.unsubscribe(),v.unsubscribe(),C.unsubscribe(),S.unsubscribe()}},[]);const r=c.useMemo(()=>{const x=a.choosenHabits?.length||0,v=Object.keys(a.trainingLog||{}).length,C=Object.keys(a.mentalLog||{}).length,S=Object.keys(a.sleepingLog||{}).length,k=Object.keys(a.meditationLog||{}).length+Object.keys(a.breathingLog||{}).length+Object.keys(a.hardeningLog||{}).length,$=v*50+C*30+S*20+k*20+x*10;let u=1,F=500,I=0;for(;$>=F;)I=F,u++,F+=u*500;const G=$-I,O=F-I,se=Math.min(100,Math.max(0,G/O*100)),oe=[{title:["Новичок","Novice"],color:"#4f4f4f"},{title:["Искатель","Seeker"],color:"#4CAF50"},{title:["Достигатор","Achiever"],color:"#2196F3"},{title:["Элита","Elite"],color:"#9C27B0"},{title:["Легенда","Legend"],color:"#FFD700"}];let b=0;u>=50?b=4:u>=20?b=3:u>=10?b=2:u>=5&&(b=1);const H=oe[b];return{counts:{habits:x,training:v,mental:C,sleep:S,recovery:k},level:{current:u,xp:G,needed:O,percent:se,title:H.title[t],color:H.color},body:{age:a.pData?.age||"--",height:a.pData?.height||"--",gender:a.pData?.gender,goal:j[a.pData?.goal]||"--"}}},[t,B]),ee=()=>ve(""),te=async()=>{a.pData={filled:!0,age:L,gender:D,height:W,wrist:P,goal:A},await we(),m(!1)},s=h(i),ie=p?"#FFD700":o.get("accent",i);return e.jsxs(g.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:s.container,children:[e.jsxs("div",{style:s.header,children:[e.jsx("span",{style:s.headerTitle,children:t===0?"Профиль":"Profile"}),e.jsx("div",{style:{width:40}})]}),e.jsxs("div",{style:s.scrollContent,className:"no-scrollbar",children:[e.jsxs("div",{style:s.heroSection,children:[e.jsxs("div",{style:{...s.avatarWrapper,borderColor:ie},children:[f.photo?e.jsx("img",{src:f.photo,style:s.avatarImg,alt:"user"}):e.jsx("div",{style:s.avatarPlaceholder,children:f.name?.charAt(0).toUpperCase()}),p&&e.jsx("div",{style:s.premiumMiniBadge,children:e.jsx(de,{size:10})}),e.jsxs("div",{style:{...s.levelBadge,backgroundColor:r.level.color,boxShadow:`0 4px 15px ${r.level.color}60`},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"700",textTransform:"uppercase"},children:"LVL"}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"900",lineHeight:1},children:r.level.current})]})]}),e.jsx("h2",{style:s.userName,children:f.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[e.jsx("span",{style:{...s.userTitle,color:r.level.color},children:r.level.title}),r.body.gender!==void 0&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 8px",borderRadius:"12px",backgroundColor:r.body.gender===0?"rgba(59, 130, 246, 0.15)":"rgba(236, 72, 153, 0.15)",color:r.body.gender===0?"#3B82F6":"#EC4899"},children:r.body.gender===0?e.jsx(N,{size:14}):e.jsx(U,{size:14})})]}),e.jsxs("div",{style:s.xpContainer,children:[e.jsxs("div",{style:s.xpInfo,children:[e.jsx("span",{children:"XP"}),e.jsxs("span",{children:[Math.floor(r.level.xp)," / ",r.level.needed]})]}),e.jsx("div",{style:s.xpTrack,children:e.jsx(g.div,{initial:{width:0},animate:{width:`${r.level.percent}%`},transition:{duration:1,ease:"easeOut"},style:{...s.xpFill,backgroundColor:r.level.color}})})]})]}),e.jsxs("div",{style:s.metricsScrollContainer,children:[e.jsx(y,{icon:e.jsx(ce,{}),label:t===0?"Привычки":"Habits",value:r.counts.habits,color:"#FFD700",theme:i}),e.jsx(y,{icon:e.jsx(pe,{}),label:t===0?"Тренировки":"Trainings",value:r.counts.training,color:"#FF4D4D",theme:i}),e.jsx(y,{icon:e.jsx(xe,{}),label:t===0?"Ментал":"Mental",value:r.counts.mental,color:"#4DA6FF",theme:i}),e.jsx(y,{icon:e.jsx(ge,{}),label:t===0?"Восстан.":"Recovery",value:r.counts.recovery,color:"#4DFF88",theme:i}),e.jsx(y,{icon:e.jsx(ue,{}),label:t===0?"Сон":"Sleep",value:r.counts.sleep,color:"#A64DFF",theme:i})]}),e.jsxs("div",{style:s.infoGrid,children:[e.jsx(R,{icon:e.jsx(he,{}),label:t===0?"Возраст":"Age",value:`${r.body.age}`,theme:i}),e.jsx(R,{icon:e.jsx(be,{}),label:t===0?"Рост":"Height",value:`${r.body.height} cm`,theme:i}),e.jsx(R,{icon:e.jsx(fe,{}),label:t===0?"Цель":"Goal",value:r.body.goal,theme:i,fullWidth:!0})]}),!p&&e.jsx(g.div,{whileTap:{scale:.98},onClick:()=>ye("premium"),style:{...s.premiumCard,background:p?"linear-gradient(135deg, #FFD700 0%, #FFA000 100%)":"linear-gradient(135deg, #232526 0%, #414345 100%)"},children:e.jsxs("div",{style:s.premiumInfo,children:[e.jsx("div",{style:{color:p?"#000":"#FFD700"},children:e.jsx(me,{size:28})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{...s.premTitle,color:p?"#000":"#FFF"},children:p?"UltyMyLife Premium":t===0?"Активировать Premium":"Activate Premium"}),e.jsx("span",{style:{...s.premSub,color:p?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.6)"},children:p?t===0?"Все функции разблокированы":"All features unlocked":t===0?"Статистика, ИИ и облако":"Analytics, AI & Cloud"})]})]})}),e.jsxs("div",{style:s.actionList,children:[e.jsx(X,{icon:e.jsx(je,{}),label:t===0?"Изменить персональные данные":"Edit personal data",theme:i,onClick:()=>m(!0)}),e.jsx(X,{onClick:ee,icon:e.jsx(Ce,{}),label:t===0?"Выйти":"Logout",theme:i,noBorder:!0,color:"#FF4D4D"})]}),e.jsx("div",{style:{height:"100px"}})]}),e.jsx(Se,{children:B&&e.jsxs(De,{onClose:()=>m(!1),theme:i,children:[e.jsx("h3",{style:s.modalTitle,children:t===0?"Параметры тела":"Body Metrics"}),e.jsxs("div",{style:{padding:"20px 0"},children:[e.jsxs("div",{style:{...s.pickerRow,justifyContent:"space-around"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:s.pickerLabel,children:t===0?"Возраст":"Age"}),e.jsx(w,{items:K,value:L,onChange:Y,theme:i,width:"100px"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:s.pickerLabel,children:t===0?"Рост (см)":"Height"}),e.jsx(w,{items:Q,value:W,onChange:_,theme:i,width:"100px"})]})]}),e.jsxs("div",{style:{...s.pickerRow,justifyContent:"space-around",marginTop:"15px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:s.pickerLabel,children:t===0?"Запястье (см)":"Wrist"}),e.jsx(w,{items:Z,value:P,onChange:q,theme:i,width:"100px"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100px"},children:[e.jsx("span",{style:{...s.pickerLabel,marginBottom:"10px"},children:t===0?"Пол":"Gender"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx(E,{active:D===0,icon:e.jsx(N,{}),color:"#5fb6c6",onClick:()=>M(0),theme:i}),e.jsx(E,{active:D===1,icon:e.jsx(U,{}),color:"#c65f9d",onClick:()=>M(1),theme:i})]})]})]}),e.jsxs("div",{style:{...s.pickerRow,flexDirection:"column",marginTop:"15px"},children:[e.jsx("span",{style:s.pickerLabel,children:t===0?"Цель":"Goal"}),e.jsx(w,{items:j,value:j[A],onChange:x=>J(j.indexOf(x)),theme:i,width:"200px"})]})]}),e.jsx(Ie,{onClose:()=>m(!1),onConfirm:te,theme:i})]})})]})},De=({children:i,onClose:d,theme:t})=>e.jsx("div",{style:h(t).backdrop,onClick:d,children:e.jsxs(g.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},style:h(t).sheet,onClick:l=>l.stopPropagation(),children:[e.jsx("div",{style:h(t).handle}),i]})}),E=({active:i,icon:d,color:t,onClick:l,theme:n})=>e.jsx(g.div,{whileTap:{scale:.9},onClick:l,style:{width:"40px",height:"40px",borderRadius:"12px",backgroundColor:i?t:n==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:i?"#fff":o.get("subText",n),border:i?"none":`1px solid ${o.get("border",n)}`},children:d}),Ie=({onClose:i,onConfirm:d,theme:t})=>e.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"25px"},children:[e.jsx(g.button,{whileTap:{scale:.95},onClick:i,style:h(t).secBtn,children:e.jsx(ke,{size:22})}),e.jsx(g.button,{whileTap:{scale:.95},onClick:d,style:h(t).priBtn,children:e.jsx(Fe,{size:22})})]}),y=({icon:i,label:d,value:t,color:l,theme:n})=>e.jsxs("div",{style:{minWidth:"85px",backgroundColor:o.get("simplePanel",n),borderRadius:"18px",padding:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginRight:"10px",border:`1px solid ${o.get("border",n)}50`,flexShrink:0},children:[e.jsx("div",{style:{color:l,fontSize:"18px",marginBottom:"6px"},children:i}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"900",color:o.get("mainText",n)},children:t}),e.jsx("div",{style:{fontSize:"10px",color:o.get("subText",n),fontWeight:"bold"},children:d})]}),R=({icon:i,label:d,value:t,theme:l,fullWidth:n})=>e.jsxs("div",{style:{gridColumn:n?"span 2":"span 1",backgroundColor:o.get("simplePanel",l),borderRadius:"18px",padding:"15px",display:"flex",alignItems:"center",gap:"12px",border:`1px solid ${o.get("border",l)}50`},children:[e.jsx("div",{style:{color:o.get("accent",l),fontSize:"18px"},children:i}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontSize:"10px",color:o.get("subText",l),fontWeight:"bold",textTransform:"uppercase"},children:d}),e.jsx("span",{style:{fontSize:"15px",fontWeight:"700",color:o.get("mainText",l)},children:t})]})]}),X=({icon:i,label:d,theme:t,noBorder:l,color:n,onClick:T})=>e.jsxs(g.div,{whileTap:{backgroundColor:"rgba(255,255,255,0.05)"},onClick:T,style:{display:"flex",alignItems:"center",padding:"18px",cursor:"pointer",borderBottom:l?"none":`1px solid ${o.get("border",t)}30`},children:[e.jsx("div",{style:{marginRight:"15px",color:n||o.get("subText",t),fontSize:"18px"},children:i}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:n||o.get("mainText",t),flex:1},children:d})]}),h=(i,d)=>{const t=o.get("mainText",i),l=o.get("subText",i),n=o.get("simplePanel",i);return{container:{backgroundColor:o.get("background",i),display:"flex",flexDirection:"column",height:"100vh",width:"100vw",fontFamily:"Segoe UI, sans-serif",zIndex:3e3,position:"fixed",top:0,left:0},header:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",padding:"50px 20px 20px 20px",position:"relative"},backBtn:{position:"absolute",left:"20px",width:"40px",height:"40px",borderRadius:"14px",backgroundColor:n,color:t,display:"flex",alignItems:"center",justifyContent:"center"},headerTitle:{fontSize:"17px",fontWeight:"800",color:t,letterSpacing:"0.5px"},scrollContent:{flex:1,overflowY:"auto",padding:"0 20px"},heroSection:{display:"flex",flexDirection:"column",alignItems:"center",margin:"10px 0 20px 0",position:"relative"},avatarWrapper:{width:"110px",height:"110px",borderRadius:"40px",border:"3px solid",padding:"6px",position:"relative",marginBottom:"15px"},avatarImg:{width:"100%",height:"100%",borderRadius:"32px",objectFit:"cover"},avatarPlaceholder:{width:"100%",height:"100%",borderRadius:"32px",backgroundColor:n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"38px",fontWeight:"900",color:t},premiumMiniBadge:{position:"absolute",bottom:"0px",right:"0px",backgroundColor:"#FFD700",color:"#000",width:"28px",height:"28px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",border:"2px solid #000",zIndex:1},levelBadge:{position:"absolute",top:"-10px",right:"-15px",color:"#FFF",padding:"4px 10px",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:`3px solid ${o.get("background",i)}`,zIndex:2},userName:{fontSize:"26px",fontWeight:"900",color:t,margin:0},userTitle:{fontSize:"13px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},xpContainer:{width:"100%",marginTop:"15px",padding:"0 10px"},xpInfo:{display:"flex",justifyContent:"space-between",fontSize:"11px",fontWeight:"700",color:l,marginBottom:"6px"},xpTrack:{width:"100%",height:"8px",backgroundColor:n,borderRadius:"4px",overflow:"hidden"},xpFill:{height:"100%",borderRadius:"4px"},metricsScrollContainer:{display:"flex",overflowX:"auto",padding:"5px",margin:"15px 0",scrollbarWidth:"none",msOverflowStyle:"none"},infoGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",margin:"10px 0"},premiumCard:{borderRadius:"24px",padding:"20px",margin:"15px 0"},premiumInfo:{display:"flex",alignItems:"center",gap:"18px"},premTitle:{fontSize:"17px",fontWeight:"900"},premSub:{fontSize:"12px",fontWeight:"bold"},actionList:{backgroundColor:n,borderRadius:"28px",overflow:"hidden",marginTop:"10px"},backdrop:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(5px)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center"},sheet:{width:"100%",maxWidth:"600px",backgroundColor:o.get("background",i),borderTopLeftRadius:"30px",borderTopRightRadius:"30px",padding:"20px 20px 40px 20px",boxShadow:"0 -10px 40px rgba(0,0,0,0.3)",borderTop:`1px solid ${o.get("border",i)}`,display:"flex",flexDirection:"column"},handle:{width:"40px",height:"4px",backgroundColor:o.get("subText",i),borderRadius:"2px",margin:"0 auto 20px auto",opacity:.3},modalTitle:{fontSize:"18px",fontWeight:"800",color:t,margin:"0 0 20px 0",textAlign:"center"},pickerLabel:{fontSize:"12px",color:l,marginBottom:"5px"},pickerRow:{display:"flex",alignItems:"center",backgroundColor:i==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"15px"},secBtn:{flex:1,padding:"15px",borderRadius:"16px",border:"none",backgroundColor:o.get("skipped",i),color:l,cursor:"pointer",display:"flex",justifyContent:"center"},priBtn:{flex:1,padding:"15px",borderRadius:"16px",border:"none",backgroundColor:o.get("done",i),color:"#fff",cursor:"pointer",display:"flex",justifyContent:"center",boxShadow:"0 5px 15px rgba(0,0,0,0.2)"}}};export{Me as default};
