import{r as c,A as w,t as ze,l as Ie,J as Pe,f as Ae,j as e,C as r,az as Re,S as re,g as le,_ as O,aA as Le,aB as Te,aC as ce,aD as $e,i as J,k as P,aE as Ee,aF as Fe,O as Me,aG as Be,aH as Ne,aI as Ge,aJ as He,aK as Ue,aL as Oe,aM as Je}from"./index-hCb2YDDG.js";import{b,c as v}from"./index-CzWd7BNY.js";import{T as de,a as xe,M as W}from"./MyInput-DgQPYJ54.js";import We from"./TrainingExercise-D9QSXXym.js";const _e=()=>{const[i,A]=c.useState(w.programs),u=()=>{A(w.programs)},[t,fe]=c.useState("dark"),[l,pe]=c.useState(w.prefs[0]),[f,ge]=c.useState(w.prefs[1]),[ue,R]=c.useState(!1),[g,K]=c.useState(!1),[d,V]=c.useState(-1),[x,k]=c.useState(-1),[L,T]=c.useState(""),[$,E]=c.useState(""),[Y,_]=c.useState(3),[h,Q]=c.useState(4),[F,M]=c.useState(6),[j,X]=c.useState(0),[y,B]=c.useState(0),[Z,ee]=c.useState(1),[N,D]=c.useState(l===0?"День 1":"Day 1"),[ye,z]=c.useState(!1),[me,te]=c.useState(!1),[he,G]=c.useState(!1),[je,ne]=c.useState(!1),[Ce,Se]=c.useState(""),[se,ie]=c.useState(0);c.useEffect(()=>{h>F-2&&M(n=>n+1)},[h]),c.useEffect(()=>{const n=ze.subscribe(fe),a=Ie.subscribe(o=>{pe(o==="ru"?0:1)});return()=>{a.unsubscribe(),n.unsubscribe()}},[]),c.useEffect(()=>{const n=Pe.subscribe(o=>R(o==="AddProgrammPanel")),a=Ae.subscribe(ge);return()=>{n.unsubscribe(),a.unsubscribe()}},[]),c.useEffect(()=>{if(d===-1)return;const a=i[d].schedule.length;ee(a),D(l===0?`День ${a+1}`:`Day ${a+1}`)},[d,l]);function C(){u(),K(!1),z(!1),G(!1),Me("")}function we(){Ge(q(L),q($)),T(""),E(""),C()}function be(){He(d,q(N)),ee(n=>n+1),D(l===0?"День "+(Z+2):"Day "+(Z+2)),C()}function ve(){let n=l===0?"время":"time";j===0&&(n=Y+"x"+h+"-"+F),Ue(d,x,y,n),ne(!1),u()}function H(n){ie(n);let a="";switch(n){case 0:const o=i[d].name,p=Array.isArray(o)?o[l]:o;a=l===0?"Вы уверены, что хотите удалить программу : "+p+" ?":"Are you sure you want to delete the program : "+p+" ?";break;case 1:const S=i[d]?.schedule[x]?.name;a=l===0?"Вы уверены, что хотите удалить тренировочный день : "+S[l]+" ?":"Are you sure you want to delete the training day : "+S[l]+" ?";break;case 2:const U=i[d].schedule[x]?.exercises[y]?.exId;Ee(d,x,U),u();break}Se(a),G(n<2)}function ke(){switch(se){case 0:Je(d),V(-1);break;case 1:Oe(d,x),k(n=>n-1);break}C()}function oe(n){switch(K(!0),ie(n),n){case 0:const a=Array.isArray(i[d].name);T(a?i[d].name[l]:i[d].name),E(a?i[d].description[l]:i[d].description),R(!0);break;case 1:const o=i[d].schedule[x].name,p=Array.isArray(o)?o[l]:o;D(p),z(!0);break}}function ae(){switch(se){case 0:Ne(d,L,$);break;case 1:Be(d,x,N);break}C()}function I(n,a){if(Fe(d,n,a,x,y),n===0){let o=x;a===1?o=x-1:a===0&&(o=x+1),o>=0&&k(o)}else{let o=y;a===1?o=y-1:a===0&&(o=y+1),o>=0&&B(o)}u()}function De(n){B(n),te(!1),ne(!0)}return e.jsxs("div",{style:s(t).container,children:[Object.entries(i).map(([n,a])=>({id:Number(n),...a})).filter(n=>n.show).sort((n,a)=>n.id-a.id).map(n=>e.jsxs("div",{style:s(t).panel,children:[e.jsxs("div",{style:s(t,d===n.id,!1).groupPanel,onClick:()=>{V(a=>a===n.id?-1:n.id),k(-1)},children:[d===n.id?e.jsx(b,{style:s(t).icon}):e.jsx(v,{style:s(t).icon}),e.jsx(Re,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"16px"}}),e.jsx("p",{style:s(t,!1,!1,f).text,children:Array.isArray(n.name)?n.name[l]:n.name}),e.jsx("p",{style:{...s(t,!1,!1,f).subtext,marginRight:"5px",marginLeft:"auto"},children:n.creationDate})]}),d===n.id&&e.jsxs("div",{style:{...s(t).panel},children:[e.jsx("div",{style:{...s(t,!1,!1,f).subtext,marginRight:"15px",marginLeft:"15px"},children:x===-1&&(Array.isArray(n.description)?n.description[l]:n.description)}),e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center"},children:x===-1&&e.jsxs("div",{style:{...s(t,!1,!1,f).dayPanel,width:"98%",justifyContent:"space-around",flexDirection:"row"},children:[e.jsx(re,{onClick:()=>z(!0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(le,{onClick:()=>oe(0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(O,{onClick:()=>H(0),style:{...s(t).icon,fontSize:"14px"}})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:n.schedule.map((a,o)=>e.jsxs("div",{children:[e.jsxs("div",{style:{...s(t,!1,x===o).dayPanel,width:"98%",flexDirection:"row"},onClick:()=>k(p=>p===o?-1:o),children:[x===o?e.jsx(b,{style:{...s(t).icon,marginLeft:"2%",width:"10px",marginTop:"7px"}}):e.jsx(v,{style:{...s(t).icon,marginLeft:"2%",width:"10px",marginTop:"7px"}}),e.jsx(Le,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:s(t,!1,!1,f).text,children:l===0?`${o+1}-день : ${a.name[0]}`:`${o+1}-day : ${a.name[1]}`}),x===o&&e.jsxs("div",{onClick:p=>p.stopPropagation(),style:{display:"flex",flexDirection:"row",justifyContent:"center",marginLeft:"auto"},children:[e.jsx(Te,{onClick:()=>te(!0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(de,{onClick:()=>I(0,0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(xe,{onClick:()=>I(0,1),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(le,{onClick:()=>oe(1),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(O,{onClick:()=>H(1),style:{...s(t).icon,fontSize:"14px",marginRight:"8px"}})]})]}),x===o&&e.jsx("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:a.exercises.map((p,m)=>{const S=w.exercises[p.exId];return S?e.jsxs("div",{onClick:()=>B(m),style:{display:"flex",flexDirection:"row",width:"95%",marginLeft:"6px",marginRight:"5%",justifyContent:"flex-start",alignItems:"center"},children:[e.jsxs("p",{style:s(t,!1,!1,f).text,children:[m+1,"."]}),e.jsx(ce,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:s(t,!1,!1,f).text,children:S.name[l]}),e.jsx("p",{style:{...s(t,!1,!1,f).subtext,marginLeft:"auto"},children:p.sets}),y===m&&e.jsxs("div",{onClick:U=>U.stopPropagation(),style:{display:"flex",flexDirection:"row",justifyContent:"center",marginLeft:"auto"},children:[e.jsx(de,{onClick:()=>I(1,0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(xe,{onClick:()=>I(1,1),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(O,{onClick:()=>H(2),style:{...s(t).icon,fontSize:"14px",marginRight:"8px"}})]})]},m):e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"95%",marginLeft:"6px",marginRight:"5%",justifyContent:"flex-start",alignItems:"center"},children:[e.jsxs("p",{style:s(t,!1,!1,f).text,children:[m+1,"."]}),e.jsx(ce,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:{...s(t,!1,!1,f).text,color:"#ff6b6b"},children:l===0?"Упражнение удалено":"Exercise deleted"})]},m)})})]},o))}),e.jsx($e,{programmId:n.id,theme:t,langIndex:l,programs:i})]})]},n.id)),d===-1&&e.jsx("div",{onClick:()=>R(!0),style:{...s(t).groupPanel,height:"5%",justifyContent:"center"},children:e.jsx(re,{style:{...s(t).icon,fontSize:"24px"}})}),ue&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{...s(t).additionalPanel,height:"40%"},children:[e.jsx("p",{style:s(t,!1,!1,f).text,children:l===0?g?"Редактировать программу":"Новая программа":g?"Redact programm":"New programm"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:r.get("background",t),height:"82%",width:"100%",alignItems:"center"},children:[e.jsx(W,{maxL:30,w:"80%",h:"18%",value:g?L:"",theme:t,onChange:n=>T(n),placeHolder:l===0?"Название программы":"Programm name"}),e.jsx(W,{maxL:100,w:"80%",h:"44%",value:g?$:"",theme:t,onChange:n=>E(n),placeHolder:l===0?"Описание программы":"Programm description"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(J,{onClick:()=>C(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(P,{onClick:()=>{g?ae():we()},style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),ye&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{...s(t).additionalPanel,height:"40%"},children:[e.jsx("p",{style:s(t,!1,!1,f).text,children:l===0?g?"Редактировать тренировочный день":"Добавь тренировочный день":g?"Redact training day":"Add training day"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",backgroundColor:r.get("background",t),height:"80%",width:"100%",alignItems:"center"},children:e.jsx(W,{maxL:30,w:"90%",h:"40%",theme:t,value:N,onChange:n=>D(n),placeHolder:l===0?"День":"Day"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(J,{onClick:()=>z(!1),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(P,{onClick:()=>{g?ae():be()},style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),me&&e.jsx("div",{style:{...s(t).addContainer},children:e.jsx(We,{needToAdd:!0,setEx:De})}),je&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{position:"fixed",top:"30vh",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",width:"80vw",height:"80vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${r.get("border",t)}`,backgroundColor:r.get("background",t),zIndex:"7000"},children:[e.jsx("p",{style:{...s(t,!1,!1,f).text,padding:"20px",marginLeft:"10%",marginRight:"5%"},children:l===0?"Установите стратегию выполнения":"Set performing strategy"}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"90%",justifyContent:"space-around"},children:[e.jsx("div",{onClick:()=>{X(0)},style:{width:"40%",border:j===0?`2px solid ${r.get("trainingIsolatedFont",t)}`:`1px solid ${r.get("icons",t)}`,borderRadius:"16px",padding:"4px",fontSize:"16px",color:j===1?r.get("subText",t):r.get("trainingIsolatedFont",t)},children:l===0?"Повторы":"Reps"}),e.jsx("div",{onClick:()=>{X(1)},style:{width:"40%",border:j===1?`2px solid ${r.get("trainingIsolatedFont",t)}`:`1px solid ${r.get("icons",t)}`,borderRadius:"16px",padding:"4px",fontSize:"16px",color:j===0?r.get("subText",t):r.get("trainingIsolatedFont",t)},children:l===0?"Время":"Time"})]}),j===0&&e.jsxs("div",{style:{display:"flex",flexDirection:"row",height:"50%",width:"60%",justifyContent:"space-around"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(b,{onClick:()=>_(n=>n+1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...s(t).text,fontSize:"24px"},children:Y}),e.jsx(v,{onClick:()=>_(n=>n-1>0?n-1:1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}})]}),e.jsx("p",{style:{...s(t).text,fontSize:"24px",marginTop:"30%"},children:"x"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(b,{onClick:()=>Q(n=>n+1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...s(t).text,fontSize:"24px"},children:h}),e.jsx(v,{onClick:()=>Q(n=>n-1>0?n-1:1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}})]}),e.jsx("p",{style:{...s(t).text,fontSize:"24px",marginTop:"30%"},children:"-"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(b,{onClick:()=>M(n=>n+1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...s(t).text,fontSize:"24px"},children:F}),e.jsx(v,{onClick:()=>M(n=>n-1>h+2?n-1:h+2),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"center"},children:e.jsx(P,{onClick:()=>ve(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})})]})}),he&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{position:"fixed",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85vw",height:"40vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${r.get("border",t)}`,backgroundColor:r.get("background",t),zIndex:"7000"},children:[e.jsx("p",{style:{...s(t,!1,!1,f).text,textAlign:"center",padding:"20px",marginLeft:"10%",marginRight:"5%"},children:Ce}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(J,{onClick:()=>G(!1),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(P,{onClick:()=>ke(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})})]})},s=(i,A,u,t)=>({container:{backgroundColor:r.get("background",i),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI"},groupPanel:{display:"flex",flexDirection:"row",width:"100%",height:"6vh",backgroundColor:A?r.get("trainingGroupSelected",i):r.get("trainingGroup",i),borderTop:`1px solid ${r.get("border",i)}`,alignItems:"center",justifyContent:"left",alignContent:"center"},dayPanel:{display:"flex",flexDirection:"column",width:"100vW",height:"4vh",backgroundColor:u?r.get("trainingGroupSelected",i):r.get("background",i),borderBottom:`1px solid ${r.get("border",i)}`,alignItems:"center",justifyContent:"left"},panel:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyItems:"center"},text:{textAlign:"left",fontSize:t===0?"13px":"15px",color:r.get("mainText",i),marginBottom:"12px"},subtext:{textAlign:"left",fontSize:t===0?"11px":"13px",color:r.get("subText",i),marginBottom:"12px"},icon:{fontSize:"20px",color:r.get("icons",i),marginLeft:"20px"},addContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"10px"},additionalPanel:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",borderRadius:"24px",border:`1px solid ${r.get("border",i)}`,backgroundColor:r.get("simplePanel",i),boxShadow:`4px 4px 6px ${r.get("shadow",i)}`,width:"100%",height:"100vw"},exercisePanel:{display:"flex",flexDirection:"column",width:"90vW",height:"5vh",backgroundColor:u?r.get("trainingGroupSelected",i):r.get("background",i),alignItems:"center",justifyContent:"left"}}),q=i=>i&&i.charAt(0).toUpperCase()+i.slice(1);export{_e as default};
