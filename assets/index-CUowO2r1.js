import{bH as ae,bI as re,bJ as oe,bK as Z,r as B,bL as ie,bM as ue,bN as ce,bO as le,bP as fe,bQ as me,bR as P,bS as pe,bT as de,bU as ye,bV as ge,bW as $,bX as he,bY as be,bZ as Se,b_ as Ve,b$ as Ae,c0 as Ee,c1 as ve,c2 as Me,c3 as xe,c4 as De,c5 as F,c6 as Te,c7 as Ie,c8 as Ce,c9 as Oe}from"./index-CAMJfZuh.js";function we(e,t=100,n){const s=n({...e,keyframes:[0,t]}),a=Math.min(ae(s),re);return{type:"keyframes",ease:r=>s.next(a*r).value/t,duration:oe(a)}}function Le(e){const t=Z(()=>ue(e)),{isStatic:n}=B.useContext(ie);if(n){const[,s]=B.useState(e);B.useEffect(()=>t.on("change",s),[])}return t}function q(e,t){const n=Le(t()),s=()=>n.set(t());return s(),ce(()=>{const a=()=>le.preRender(s,!1,!0),r=e.map(o=>o.on("change",a));return()=>{r.forEach(o=>o()),fe(s)}}),n}const Ge=e=>e&&typeof e=="object"&&e.mix,Ke=e=>Ge(e)?e.mix:void 0;function Fe(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],a=e[1+n],r=e[2+n],o=e[3+n],u=me(a,r,{mixer:Ke(r[0]),...o});return t?u(s):u}function Ne(e){P.current=[],e();const t=q(P.current,e);return P.current=void 0,t}function ot(e,t,n,s){if(typeof e=="function")return Ne(e);const a=typeof t=="function"?t:Fe(t,n,s);return Array.isArray(e)?J(e,a):J([e],([r])=>a(r))}function J(e,t){const n=Z(()=>[]);return q(e,()=>{n.length=0;const s=e.length;for(let a=0;a<s;a++)n[a]=e[a].get();return t(n)})}const je=(e,t,n)=>{const s=t-e;return((n-e)%s+s)%s+e};function ee(e,t){return pe(e)?e[je(0,e.length,t)]:e}function R(e){return typeof e=="object"&&!Array.isArray(e)}function te(e,t,n,s){return typeof e=="string"&&R(t)?de(e,n,s):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function Be(e,t,n){return e*(t+1)}function Q(e,t,n,s){var a;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:(a=s.get(t))!==null&&a!==void 0?a:e}function Pe(e,t,n){for(let s=0;s<e.length;s++){const a=e[s];a.at>t&&a.at<n&&(ge(e,a),s--)}}function Re(e,t,n,s,a,r){Pe(e,a,r);for(let o=0;o<t.length;o++)e.push({value:t[o],at:ye(a,r,s[o]),easing:ee(n,o)})}function We(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function _e(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const ze="easeInOut";function He(e,{defaultTransition:t={},...n}={},s,a){const r=t.duration||.3,o=new Map,u=new Map,A={},E=new Map;let x=0,c=0,w=0;for(let v=0;v<e.length;v++){const p=e[v];if(typeof p=="string"){E.set(p,c);continue}else if(!Array.isArray(p)){E.set(p.name,Q(c,p.at,x,E));continue}let[V,d,l={}]=p;l.at!==void 0&&(c=Q(c,l.at,x,E));let f=0;const M=(y,g,b,D=0,T=0)=>{const i=Ue(y),{delay:N=0,times:h=he(i),type:j="keyframes",repeat:L,repeatType:st,repeatDelay:at=0,...se}=g;let{ease:S=t.ease||"easeOut",duration:m}=g;const W=typeof N=="function"?N(D,T):N,_=i.length,z=Se(j)?j:a?.[j];if(_<=2&&z){let I=100;if(_===2&&Qe(i)){const C=i[1]-i[0];I=Math.abs(C)}const G={...se};m!==void 0&&(G.duration=Ve(m));const K=we(G,I,z);S=K.ease,m=K.duration}m??(m=r);const H=c+W;h.length===1&&h[0]===0&&(h[1]=1);const U=h.length-i.length;if(U>0&&be(h,U),i.length===1&&i.unshift(null),L){m=Be(m,L);const I=[...i],G=[...h];S=Array.isArray(S)?[...S]:[S];const K=[...S];for(let C=0;C<L;C++){i.push(...I);for(let O=0;O<I.length;O++)h.push(G[O]+(C+1)),S.push(O===0?"linear":ee(K,O-1))}We(h,L)}const k=H+m;Re(b,i,S,h,H,k),f=Math.max(W+m,f),w=Math.max(k,w)};if($(V)){const y=X(V,u);M(d,l,Y("default",y))}else{const y=te(V,d,s,A),g=y.length;for(let b=0;b<g;b++){d=d,l=l;const D=y[b],T=X(D,u);for(const i in d)M(d[i],ke(l,i),Y(i,T),b,g)}}x=c,c+=f}return u.forEach((v,p)=>{for(const V in v){const d=v[V];d.sort(_e);const l=[],f=[],M=[];for(let g=0;g<d.length;g++){const{at:b,value:D,easing:T}=d[g];l.push(D),f.push(Ae(0,w,b)),M.push(T||"easeOut")}f[0]!==0&&(f.unshift(0),l.unshift(l[0]),M.unshift(ze)),f[f.length-1]!==1&&(f.push(1),l.push(null)),o.has(p)||o.set(p,{keyframes:{},transition:{}});const y=o.get(p);y.keyframes[V]=l,y.transition[V]={...t,duration:w,ease:M,times:f,...n}}}),o}function X(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function Y(e,t){return t[e]||(t[e]=[]),t[e]}function Ue(e){return Array.isArray(e)?e:[e]}function ke(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const Je=e=>typeof e=="number",Qe=e=>e.every(Je);function Xe(e,t){return e in t}class Ye extends Ee{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(Xe(n,t)){const s=t[n];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return ve()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function Ze(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Me(e)?new xe(t):new De(t);n.mount(e),F.set(e,n)}function $e(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Ye(t);n.mount(e),F.set(e,n)}function qe(e,t){return $(e)||typeof e=="number"||typeof e=="string"&&!R(t)}function ne(e,t,n,s){const a=[];if(qe(e,t))a.push(Te(e,R(t)&&t.default||t,n&&(n.default||n)));else{const r=te(e,t,s),o=r.length;for(let u=0;u<o;u++){const A=r[u],E=A instanceof Element?Ze:$e;F.has(A)||E(A);const x=F.get(A),c={...n};"delay"in c&&typeof c.delay=="function"&&(c.delay=c.delay(u,o)),a.push(...Ie(x,{...t,transition:c},{}))}}return a}function et(e,t,n){const s=[];return He(e,t,n,{spring:Ce}).forEach(({keyframes:r,transition:o},u)=>{s.push(...ne(u,r,o))}),s}function tt(e){return Array.isArray(e)&&e.some(Array.isArray)}function nt(e){function t(n,s,a){let r=[];return tt(n)?r=et(n,s,e):r=ne(n,s,a,e),new Oe(r)}return t}const it=nt();export{ot as a,it as b,Le as u};
