import{H as O,R as V,r as g,A as l,t as E,l as G,f as K,j as t,C as i,aI as U,s as P}from"./index-BIfy9fDg.js";import{g as J}from"./TrainingLogHelper-DAwItdJa.js";function N(e){return O({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"},child:[]},{tag:"path",attr:{d:"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"},child:[]},{tag:"path",attr:{d:"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"},child:[]}]})(e)}const m=e=>{const c=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),y=String(e.getDate()).padStart(2,"0");return`${c}-${o}-${y}`},q=e=>(e.getDay()+6)%7;m(new Date);const S=new Audio("Audio/Click.wav"),te=()=>{const[e,c]=V.useState("dark"),[o,y]=g.useState(l.prefs[0]),[r,T]=g.useState(new Date),[d,z]=g.useState(r),[M,k]=g.useState(0),[X,I]=g.useState(l.prefs[4]);g.useEffect(()=>{const n=E.subscribe(c),h=G.subscribe(x=>{y(x==="ru"?0:1)}),s=K.subscribe(x=>{I(x)});return()=>{n.unsubscribe(),h.unsubscribe(),s.unsubscribe()}},[]);const F=new Date(r.getFullYear(),r.getMonth(),1),$=new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),A=(F.getDay()+6)%7,H=[["–ü–Ω","–í—Ç","–°—Ä","–ß—Ç","–ü—Ç","–°–±","–í—Å"],["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]],Y=[["–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫","–í—Ç–æ—Ä–Ω–∏–∫","–°—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä–≥","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞","–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"],["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]],u=[],C=[];for(let n=0;n<A;n++)u.push(null);for(let n=1;n<=$;n++)u.push(n);for(let n=0;n<u.length;n+=7)C.push(u.slice(n,n+7));const B=()=>{T(new Date(r.getFullYear(),r.getMonth()-1)),D(S)},L=()=>{T(new Date(r.getFullYear(),r.getMonth()+1)),D(S)};return t.jsxs("div",{style:a(e).container,children:[t.jsxs("div",{style:a(e).panel,children:[t.jsxs("div",{style:a(e).calendarHead,children:[t.jsx("h1",{style:a(e).header,children:r.getFullYear()+"/"+(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)}),t.jsx("div",{onClick:B,children:t.jsx("h1",{style:a(e).header,children:"<"})}),t.jsx("div",{onClick:L,children:t.jsx("h1",{style:a(e).header,children:">"})})]}),t.jsxs("table",{style:a(e).table,children:[t.jsx("thead",{children:t.jsx("tr",{children:H[o].map(n=>t.jsx("th",{children:t.jsx("p",{style:{textAlign:"center",fontSize:"12px",color:n==="–í—Å"||n==="Sun"?"#873535ff":i.get("subText",e)},children:n})},n))})}),t.jsx("tbody",{children:C.map((n,h)=>t.jsx("tr",{children:n.map((s,x)=>{const b=r.getMonth(),j=r.getFullYear(),W=s===d.getDate()&&b===d.getMonth()&&j===d.getFullYear(),v=m(new Date(j,b,s)),w=v in l.trainingLog?l.trainingLog[v].length:0;let p=0,f=0;return w>0&&l.trainingLog[v].forEach(R=>{R.completed?f++:p++}),t.jsx("td",{children:t.jsxs("div",{style:{...a(e).cell,border:`3px solid ${W?i.get("currentDateBorder",e):i.get("background",e)}`,backgroundColor:i.get("background",e)},onClick:()=>{z(new Date(j,b,s)),k(w),D(S)},children:[s,w>0&&t.jsxs("div",{style:{display:"flex",flexDirection:"row",marginTop:"10px"},children:[p>0&&t.jsx("div",{style:{fontSize:"10px",color:i.get("done",e),lineHeight:"5px"},children:"‚è≥"}),p>0&&t.jsx("div",{style:{fontSize:"11px",color:i.get("subText",e),lineHeight:"5px"},children:p}),f>0&&t.jsx("div",{style:{fontSize:"10px",color:i.get("done",e),lineHeight:"5px"},children:"üèãÔ∏è‚Äç‚ôÇÔ∏è"}),f>0&&t.jsx("div",{style:{fontSize:"11px",color:i.get("subText",e),lineHeight:"5px"},children:f})]})]})},x)})},h))})]})]}),t.jsxs("div",{style:{height:"30vh",width:"95%",display:"flex",flexDirection:"column",alignContent:"center"},children:[t.jsx("h1",{style:{...a(e).subtext,fontSize:"18px",textAlign:"center"},children:d.getDate()+"/"+(d.getMonth()+1)+"/"+d.getFullYear()+" "+Y[o][q(d)]+" / "+Q(M,o)}),M>0&&t.jsx("div",{style:a(e).scrollView,children:l.trainingLog[m(new Date(d))].map((n,h)=>t.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",width:"100%",borderBottom:`1px solid ${i.get("border",e)}`},children:[t.jsx("p",{style:{...a(e).mainText,marginBottom:"10px",fontSize:"16px"},children:h+1}),t.jsx("p",{style:{...a(e).mainText,marginBottom:"10px",fontSize:"16px"},children:n.completed?"‚úÖ":"‚è≥"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:a(e).mainText,children:l.programs.find(s=>s.id===n.programId).name[o]}),t.jsx("div",{style:a(e).mainText,children:(o===0?"–î–µ–Ω—å ":"Day ")+(h+1)+": "+l.programs.find(s=>s.id===n.programId).schedule[n.dayIndex].name[o]}),n.completed&&t.jsx("div",{style:{...a(e).subtext,marginBottom:"10px"},children:`${Math.round(n.duration/6e4)}${o===0?" –º–∏–Ω":" min"}  /  ${n.tonnage*.001} ${o===0?" —Ç–æ–Ω–Ω":" tons"}${J(n,o)}`})]}),t.jsx(N,{onClick:()=>{U({mode:n.completed?"redact":"new",dayKey:m(new Date(d)),dInd:n.dayIndex}),P("TrainingCurrent")},style:{...a(e).subtext,width:"18px",height:"18px",marginLeft:"auto",marginRight:"10px"}})]},h))})]})]})},a=(e,c)=>({container:{backgroundColor:i.get("background",e),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI"},panel:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyContent:"start",borderBottom:`1px solid ${i.get("border",e)}`},scrollView:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",width:"100%",height:"100%",overflowY:"scroll",backgroundColor:i.get("trainingGroup",e),borderRadius:"12px"},mainText:{textAlign:"left",fontSize:"15px",color:i.get("mainText",e),marginLeft:"10px",marginBottom:"2px"},subtext:{textAlign:"left",fontSize:"13px",color:i.get("subText",e),marginLeft:"10px",marginBottom:"12px"},calendarHead:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",height:"10%",background:i.get("headGradient",e)},header:{fontFamily:"Segoe UI",padding:"2vw",marginLeft:"6vw",marginRight:"6vw",fontSize:"36px",fontWeight:"bold",color:i.get("subText",e)},table:{border:"5",cellPadding:"5",borderCollapse:"collapse",width:"90%",textAlign:"center"},cell:{boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",width:"13vw",height:"13vw",borderRadius:"12px",fontSize:"16px",fontWeight:"bold",color:i.get("mainText",e),fontFamily:"Segoe UI"}});function D(e){l.prefs[2]==0&&e!==null&&(e.paused||(e.pause(),e.currentTime=0),e.volume=.5,e.play()),l.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}const Q=(e,c)=>e==0?c==0?"–Ω–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫":"no trainings":e==1?c==0?"1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞":"1 training":e>1&&e<5?e+(c==0?" —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏":" trainings"):e+(c==0?" —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫":" trainings");export{te as default};
