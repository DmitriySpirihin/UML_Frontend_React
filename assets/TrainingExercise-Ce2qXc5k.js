import{r as f,A as y,t as le,l as oe,J as re,f as ae,j as t,C as o,b7 as j,aB as ce,g as de,_ as fe,S as xe,b8 as W,b9 as U,i as L,k as F,Y as G,ba as pe,bb as ue,bc as ge}from"./index-Cog06kIW.js";import{b as q,c as Y}from"./index-C6WYEt1U.js";import{b as me,M as P}from"./MyInput-D3dgxTmL.js";const je=({needToAdd:c,setEx:A})=>{const[e,w]=f.useState("dark"),[n,_]=f.useState(y.prefs[0]),[x,J]=f.useState(y.prefs[1]),[V,B]=f.useState(""),[p,N]=f.useState(-1),[g,E]=f.useState(-1),[H,O]=f.useState(""),[K,T]=f.useState(!1),[R,Q]=f.useState(!1),[X,M]=f.useState(!1),[S,v]=f.useState(""),[C,k]=f.useState(""),[I,b]=f.useState(!0),[m,D]=f.useState([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]);f.useEffect(()=>{const i=le.subscribe(w),l=oe.subscribe(a=>{_(a==="ru"?0:1)});return()=>{l.unsubscribe(),i.unsubscribe()}},[]),f.useEffect(()=>{const i=re.subscribe(B),l=ae.subscribe(J);return()=>{i.unsubscribe(),l.unsubscribe()}},[]);function Z(i){h(null),N(p==i?-1:i),p===-1&&E(-1)}function ee(i){h(null),E(g==i?-1:i)}function $(){h(null),B(""),D([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),v(""),k(""),b(!0)}function te(){if(S.length<3){G(n===0?"Введите название упражнения, не менее 3 символов":"Set exercise name, at least 3 characters",2e3,!1);return}if(p<0||p>13){G(n===0?"Выберите группу мышц для упражнения":"Please select a muscle group for the exercise",2e3,!1);return}const i=[];for(let r=0;r<m.length;r++)m[r]&&i.push(r);h(null);const l=z(S),a=C.length>3?z(C):"";pe(p,i,[n===0?l:"Custom exercise",n===1?l:"Своё упражнение"],[n===0?a||"Своё упражнение":"Custom exercise",n===1?a||"Custom exercise":"Своё упражнение"],I),$()}function se(){const i=y.exercises[g];if(i){v(i.name[n]);const l=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];i.addMgIds.length>0&&i.addMgIds.forEach(a=>{l[a]=!0}),D(l),k(i.description[n]),N(i.mgId),b(i.isBase),M(!0)}else G(n===0?"Упражнение не найдено":"Exercise not found",2e3,!1)}function ne(){h(null);const i=[];for(let d=0;d<m.length;d++)m[d]&&i.push(d);const l=y.exercises[g],a=[...l.name];a[n]=z(S);const r=[...l.description];C.length>3?r[n]=z(C):r[n]=n===0?"Своё упражнение":"Custom exercise",ge(g,p,i,a,r,I),M(!1)}function ie(){h(null),ue(g),E(-1),T(!1),$()}return t.jsxs("div",{style:s(e).container,children:[Object.keys(j.muscleIconsSrc[0]).map(i=>{const l=Number(i);return t.jsxs("div",{style:s(e).panel,children:[t.jsxs("div",{style:s(e,p===l,!1).groupPanel,onClick:()=>Z(a=>a===l?-1:l),children:[p===l?t.jsx(q,{style:s(e).icon}):t.jsx(Y,{style:s(e).icon}),j.get(l,n,e)]}),p===l?t.jsxs("div",{style:s(e).panel,children:[Object.entries(y.exercises).filter(([a,r])=>r.mgId===l&&r.show).sort(([a],[r])=>Number(a)-Number(r)).map(([a,r])=>{const d=Number(a);return t.jsxs("div",{style:s(e).panel,children:[t.jsxs("div",{style:{...s(e,!1,g===d).exercisePanel,width:"100%",flexDirection:"row"},onClick:()=>ee(u=>u===d?-1:d),children:[g===d?t.jsx(q,{style:{...s(e).icon,marginLeft:"5%",width:"10px",marginTop:"7px"}}):t.jsx(Y,{style:{...s(e).icon,marginLeft:"7%",width:"10px",marginTop:"7px"}}),t.jsx("p",{style:{...s(e,!1,!1,x).text,marginLeft:"6px"},children:r.name[n]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",justifyContent:"center"},children:[t.jsx("p",{style:{...s(e,!1,!1,x).subtext,marginRight:"5px",color:r.isBase?o.get("trainingBaseFont",e):o.get("trainingIsolatedFont",e)},children:r.isBase?n===0?"Базовое":"Base":n===0?"Изолированное":"Isolated"}),c&&t.jsx(ce,{onClick:u=>{u.stopPropagation(),A(d)},style:{...s(e).icon,fontSize:"20px",marginRight:"35px"}})]})]}),g===d?t.jsxs("div",{style:{...s(e).panel,flexDirection:"row",marginLeft:"6%",width:"86%"},children:[t.jsx("p",{style:s(e,!1,!1,x).subtext,children:r.description[n]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",justifyContent:"center"},children:[R&&t.jsx(de,{onClick:u=>{u.stopPropagation(),O(r.name[n]),se()},style:{...s(e).icon,fontSize:"18px"}}),R&&t.jsx(fe,{onClick:u=>{u.stopPropagation(),O(r.name[n]),T(!0)},style:{...s(e).icon,fontSize:"18px"}}),t.jsx(me,{onClick:u=>{u.stopPropagation(),Q(!R)},style:{...s(e).icon,fontSize:"18px"}})]})]}):null]},d)}).sort((a,r)=>a.key-r.key),t.jsx("div",{style:{...s(e).exercisePanel,width:"98%",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:t.jsx(xe,{onClick:()=>{h(null),B("AddExercisePanel")},style:{...s(e).icon,fontSize:"24px"}})})]}):null]},l)}),t.jsx("div",{style:{height:"10vh"},children:t.jsx("p",{style:s(e,!1,!1,x).text,children:"_"})}),V==="AddExercisePanel"&&t.jsx("div",{style:s(e).addContainer,children:t.jsxs("div",{style:{...s(e).additionalPanel,height:"70%"},children:[t.jsx("p",{style:s(e,!1,!1,x).text,children:n===0?"Добавь свое упражнение":"Add your exercise"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:o.get("background",e),height:"85%",width:"100%",alignItems:"center"},children:[t.jsx(P,{maxL:40,w:"80%",h:"10%",theme:e,onChange:i=>v(i),placeHolder:n===0?"Название упражнения":"Exercise name"}),t.jsx(P,{maxL:300,w:"80%",h:"20%",theme:e,onChange:i=>k(i),placeHolder:n===0?"Описание упражнения":"Exercise description"}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"50%",justifyContent:"space-around",alignItems:"center",marginTop:"5%"},children:[t.jsx("p",{style:s(e,!1,!1,x).text,children:n===0?"Базовое упражнение":"Base exercise"}),I?t.jsx(W,{onClick:()=>b(!1),style:{...s(e).icon,fontSize:"24px"}}):t.jsx(U,{onClick:()=>b(!0),style:{...s(e).icon,fontSize:"24px"}})]}),t.jsxs("div",{style:{...s(e).text,display:"flex",flexDirection:"row",width:"90%",justifyContent:"space-around",alignItems:"center",marginTop:"5%",borderBottom:`1px solid ${o.get("border",e)}`},children:[n===0?"Основная мышца:":"Main muscle:",j.get(p,n,e,!1,"40%")]}),t.jsx("div",{style:s(e,!1,!1,x).text,children:n===0?"Дополнительные мышцы":"Additional muscles"}),t.jsx("div",{style:{display:"grid",alignContent:"center",justifyContent:"center",gridTemplateColumns:"1fr 1fr",gridAutoRows:"2fr",gap:"2px",height:"33%",width:"90%",marginTop:"10px",borderBottom:`1px solid ${o.get("border",e)}`},children:j.names[n].map((i,l)=>p==l?null:t.jsx("div",{onClick:()=>{D(a=>a.map((r,d)=>d===l?!r:r))},style:{...s(e,!1,!1,x).subtext,width:"90%",border:`1px solid ${m[l]?o.get("medium",e):o.get("border",e)}`,borderRadius:"12px",color:m[l]?o.get("medium",e):o.get("border",e)},children:i},l))})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[t.jsx(L,{onClick:()=>$(),style:{...s(e).icon,fontSize:"32px",marginBottom:"8px"}}),t.jsx(F,{onClick:()=>te(),style:{...s(e).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),K&&t.jsxs("div",{style:{position:"fixed",top:"50vh",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85vw",height:"40vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${o.get("border",e)}`,backgroundColor:o.get("background",e),zIndex:"7000"},children:[t.jsx("p",{style:{...s(e,!1,!1,x).text,padding:"20px",marginLeft:"10%",marginRight:"5%"},children:n===0?`Вы уверены, что хотите удалить упражнение? ${H}`:`Are you sure you want to delete the exercise? ${H}`}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[t.jsx(L,{onClick:()=>T(!1),style:{...s(e).icon,fontSize:"32px",marginBottom:"8px"}}),t.jsx(F,{onClick:()=>ie(),style:{...s(e).icon,fontSize:"32px",marginBottom:"8px"}})]})]}),X&&t.jsx("div",{style:s(e).addContainer,children:t.jsxs("div",{style:{...s(e).additionalPanel,height:"70%"},children:[t.jsx("p",{style:s(e,!1,!1,x).text,children:n===0?"Добавь свое упражнение":"Add your exercise"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:o.get("background",e),height:"85%",width:"100%",alignItems:"center"},children:[t.jsx(P,{maxL:40,w:"80%",h:"10%",value:S,theme:e,onChange:i=>v(i),placeHolder:n===0?"Название упражнения":"Exercise name"}),t.jsx(P,{maxL:300,w:"80%",h:"20%",value:C,theme:e,onChange:i=>k(i),placeHolder:n===0?"Описание упражнения":"Exercise description"}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"50%",justifyContent:"space-around",alignItems:"center",marginTop:"5%"},children:[t.jsx("p",{style:s(e,!1,!1,x).text,children:n===0?"Базовое упражнение":"Base exercise"}),I?t.jsx(W,{onClick:()=>b(!1),style:{...s(e).icon,fontSize:"24px"}}):t.jsx(U,{onClick:()=>b(!0),style:{...s(e).icon,fontSize:"24px"}})]}),t.jsxs("div",{style:{...s(e).text,display:"flex",flexDirection:"row",width:"90%",justifyContent:"space-around",alignItems:"center",marginTop:"5%",borderBottom:`1px solid ${o.get("border",e)}`},children:[n===0?"Основная мышца:":"Main muscle:",j.get(p,n,e,!1,"40%")]}),t.jsx("div",{style:s(e,!1,!1,x).text,children:n===0?"Дополнительные мышцы":"Additional muscles"}),t.jsx("div",{style:{display:"grid",alignContent:"center",justifyContent:"center",gridTemplateColumns:"1fr 1fr",gridAutoRows:"2fr",gap:"2px",height:"33%",width:"90%",marginTop:"10px",borderBottom:`1px solid ${o.get("border",e)}`},children:j.names[n].map((i,l)=>p==l?null:t.jsx("div",{onClick:()=>{D(a=>a.map((r,d)=>d===l?!r:r))},style:{...s(e,!1,!1,x).subtext,width:"90%",border:`1px solid ${m[l]?o.get("medium",e):o.get("border",e)}`,borderRadius:"12px",color:m[l]?o.get("medium",e):o.get("border",e)},children:i},l))})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[t.jsx(L,{onClick:()=>M(!1),style:{...s(e).icon,fontSize:"32px",marginBottom:"8px"}}),t.jsx(F,{onClick:()=>ne(),style:{...s(e).icon,fontSize:"32px",marginBottom:"8px"}})]})]})})]})},s=(c,A,e,w)=>({container:{backgroundColor:o.get("background",c),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI"},groupPanel:{display:"flex",flexDirection:"row",width:"98vW",height:"6vh",backgroundColor:A?o.get("trainingGroupSelected",c):o.get("trainingGroup",c),borderTop:`1px solid ${o.get("border",c)}`,alignItems:"center",justifyContent:"left",alignContent:"space-between"},exercisePanel:{display:"flex",flexDirection:"column",width:"90vW",height:"5vh",backgroundColor:e?o.get("trainingGroupSelected",c):o.get("background",c),alignItems:"center",justifyContent:"left"},panel:{display:"flex",flexDirection:"column",width:"100vW",alignItems:"center"},text:{textAlign:"left",fontSize:w===0?"13px":"15px",color:o.get("mainText",c),marginBottom:"12px"},subtext:{textAlign:"left",fontSize:w===0?"11px":"13px",color:o.get("subText",c),marginBottom:"12px"},icon:{fontSize:"20px",color:o.get("icons",c),marginLeft:"20px"},addContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},additionalPanel:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",borderRadius:"24px",border:`1px solid ${o.get("border",c)}`,backgroundColor:o.get("simplePanel",c),boxShadow:`4px 4px 6px ${o.get("shadow",c)}`,width:"100%",height:"100vw"}});function h(c){y.prefs[2]==0,y.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}const z=c=>c&&c.charAt(0).toUpperCase()+c.slice(1);export{je as default};
