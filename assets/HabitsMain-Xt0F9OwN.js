import{A as p,t as $e,f as Me,ac as We,l as Ie,C as l,j as e,M as ye,a2 as Se,b as ke,ab as fe,m as ee,ad as Le,d as Oe,U as Ue,q as Ve,p as Ye,ae as qe,g as De,o as Fe,af as je,a6 as Xe,ag as Ke,s as _e}from"./index-BsaS51Ip.js";import{R as ue,r}from"./recharts-C3psbGwv.js";import{I as te,u as Je,a as Qe,b as he}from"./Icons-FdhTxX6T.js";import{F as be}from"./index-CVLwr-YU.js";import{T as Ze}from"./index-J1gmWFbM.js";import{T as et,a as tt}from"./TimerOffTwoTone-KOBa5Aa0.js";import{H as st}from"./HoverInfoButton--D7uGNqa.js";import{S as ot}from"./Slider-CAqelywa.js";const me=new Date().toISOString().split("T")[0],Te=new Audio("Audio/Click.wav"),nt=new Audio("Audio/Skip.wav"),we=new Audio("Audio/IsDone.wav");let it,at,jt;const C=(t,d=0)=>{const f=t==="light"||t==="speciallight",m=f?"#F2F4F6":l.get("background",t),y=f?"#FFFFFF":l.get("simplePanel",t),S=f?"rgba(0,0,0,0.0)":`1px solid ${l.get("border",t)}`,c=f?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:m,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:S,backgroundColor:y,boxShadow:c,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:y,borderRadius:"24px",border:S,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:c},mainText:{fontSize:"17px",fontWeight:"600",color:l.get("mainText",t),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:l.get("subText",t),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:f?"#E5E5EA":"rgba(255,255,255,0.1)",color:f?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:l.get("icons",t),fontSize:"24px"}}},ve=t=>({Здоровье:["Здоровье","Health"],Health:["Здоровье","Health"],Развитие:["Развитие","Growth"],Growth:["Развитие","Growth"],Продуктивность:["Продуктивность","Productivity"],Productivity:["Продуктивность","Productivity"],"Отношения и отдых":["Отношения и отдых","Relationships & recreation"],"Relationships & recreation":["Отношения и отдых","Relationships & recreation"],"Отказ от вредного":["Отказ от вредного","Bad habits to quit"],"Bad habits to quit":["Отказ от вредного","Bad habits to quit"]})[t]||["Здоровье","Health"],wt=()=>{const[t,d]=ue.useState("dark"),[f,m]=ue.useState([]),[y,S]=ue.useState([]),[c,z]=r.useState(p.prefs[0]),[x,v]=r.useState(0),[h,F]=r.useState(p.choosenHabits.length>0),[E,Y]=r.useState(0),[j,M]=r.useState(0),[n,b]=r.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[A,W]=r.useState(""),[H,L]=r.useState(""),[I,R]=r.useState(""),[O,se]=r.useState(""),[oe,q]=r.useState(!1),[P,X]=r.useState("Здоровье"),[de,K]=r.useState(null),[_,G]=r.useState(""),[J,k]=r.useState(!1);r.useEffect(()=>{if(n.type===0&&(L($().find(s=>s.id===n.hId)?.name[c]||""),R($().find(s=>s.id===n.hId)?.description[c]||""),se($().find(s=>s.id===n.hId)?.iconName||""),X($().find(s=>s.id===n.hId)?.category[0]||"Здоровье")),n.type===4){if(n.gId<=0)return;n.setGoals(s=>{const u=[...s];return[u[n.gId-1],u[n.gId]]=[u[n.gId],u[n.gId-1]],p.choosenHabitsGoals[n.hId]=u,u})}else n.type===5&&n.setGoals(s=>{if(n.gId>=s.length-1)return s;const u=[...s];return[u[n.gId],u[n.gId+1]]=[u[n.gId+1],u[n.gId]],p.choosenHabitsGoals[n.hId]=u,u})},[n]),r.useEffect(()=>{const s=$e.subscribe(d),u=Me.subscribe(v),a=We.subscribe(k);return()=>{s.unsubscribe(),u.unsubscribe(),a.unsubscribe()}},[]),r.useEffect(()=>{const s=Ie.subscribe(u=>{z(u==="ru"?0:1)});return()=>s.unsubscribe()},[]),r.useEffect(()=>{m(p.choosenHabits)},[]),r.useEffect(()=>{if(f.length>0){const s=new Set;f.forEach(u=>{const a=$().find(i=>i.id===u);a&&!s.has(a.category[0])&&s.add(a.category[0])}),S(Array.from(s))}},[f]);const pe=(s,u,a,i,D)=>{m(T=>{const B=new Set(T);return B.has(s)?T:(p.addHabit(s,u,a,i,D),[...B,s])}),F(p.choosenHabits.length>0)},V=s=>{if(f.includes(s)){p.removeHabit(s),m(T=>T.filter(B=>B!==B));const i=($().find(T=>T.id===s)?.name||["",""])[c]||(c===0?"Привычка":"Habit"),D=c===0?`Привычка: '${i}' удалена`:`Habit: '${i}' deleted`;fe(D,2e3,!0),F(p.choosenHabits.length>0)}},N=()=>{switch(n.type){case 0:p.CustomHabits||(p.CustomHabits=[]);const s=p.CustomHabits.findIndex(a=>a.id===n.hId),u=ve(P);if(s!==-1)p.CustomHabits=p.CustomHabits.map((a,i)=>i===s?{...a,name:[H.trim(),H.trim()],description:[I.trim(),I.trim()],iconName:O,category:u}:a);else{const a=ke.find(i=>i.id===n.hId);if(a){const i={...a,name:[H.trim(),H.trim()],description:[I.trim(),I.trim()],iconName:O,category:u,isCustom:!0};p.CustomHabits=[...p.CustomHabits,i]}}m(a=>[...a]),b(a=>({...a,show:!1})),n.hInfo&&n.hInfo({name:[H,H],descr:[I,I],icon:O}),M(a=>a+1);break;case 1:A.length>0?(n.setGoals(a=>[...a,{text:A,isDone:!1}]),p.addHabitGoal(n.hId,{text:A,isDone:!1}),b(a=>({...a,show:!1}))):fe(c===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:A.length>0?(n.setGoals(a=>a.map((i,D)=>D===n.gId?{...i,text:A.trim()}:i)),p.choosenHabitsGoals[n.hId][n.gId].text=A,b(a=>({...a,show:!1}))):fe(c===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:n.setGoals(a=>a.filter((i,D)=>D!==n.gId)),p.choosenHabitsGoals[n.hId].splice(n.gId,1),b(a=>({...a,show:!1}));break}};it=V,at=pe;const Q=t==="light"||t==="speciallight",Z=Q?"#F2F4F6":l.get("background",t);return e.jsxs("div",{style:{...C(t).container,backgroundColor:Z},children:[e.jsx(st,{tab:"HabitsMain"}),J&&e.jsx("div",{style:C(t).confirmContainer,children:e.jsxs("div",{style:C(t).cP,children:[e.jsx("div",{style:C(t,x).mainText,children:_}),e.jsxs("div",{style:C(t).buttonsRow,children:[e.jsxs("button",{style:C(t).btnCancel,onClick:()=>k(!1),children:[e.jsx(ye,{size:20,style:{marginRight:5}})," ",c===0?"Нет":"No"]}),e.jsxs("button",{style:{...C(t).btnSave,backgroundColor:"#FF453A"},onClick:()=>{V(de),k(!1)},children:[e.jsx(Se,{size:20,style:{marginRight:5}})," ",c===0?"Да":"Yes"]})]})]})}),!h&&e.jsx("div",{style:{...C(t).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:e.jsx("p",{style:{...C(t).subText,fontSize:x===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:l.get("subText",t)},children:dt(c)})}),h&&e.jsxs("div",{style:C(t).scrollView,children:[rt({theme:t,habitsCards:f,categories:y,setCP:b,setCurrentId:Y,fSize:x,setNeedConfirmation:k,setConfirmMessage:G,setHabitToDelete:K}),e.jsx("div",{style:{marginBottom:"150px"}})]},j),n.show&&e.jsx("div",{style:C(t).confirmContainer,children:e.jsxs("div",{style:{...C(t).cP,width:"90%"},children:[e.jsxs("div",{style:C(t).mainText,children:[n.type===1&&(c===0?"Новая цель":"New goal"),n.type===2&&(c===0?"Изменить цель":"Edit goal"),n.type===3&&(c===0?"Удалить цель?":"Delete goal?"),n.type===0&&(c===0?"Настройки привычки":"Edit habit")]}),n.type===1&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:c===0?"Название цели...":"Goal title...",value:A,onChange:s=>W(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),n.type===2&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:c===0?"Название цели...":"Goal title...",value:A,onChange:s=>W(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),n.type===0&&e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("div",{style:{overflowX:"auto",display:"flex",gap:"8px",paddingBottom:"5px",scrollbarWidth:"none"},children:["Здоровье","Развитие","Продуктивность","Отношения и отдых","Отказ от вредного"].map(s=>e.jsx("div",{onClick:()=>X(s),style:{padding:"8px 14px",borderRadius:"12px",whiteSpace:"nowrap",cursor:"pointer",backgroundColor:P===s?l.get("scrollFont",t):Q?"#F2F2F7":"rgba(255,255,255,0.05)",color:P===s?"#FFF":l.get("subText",t),fontSize:"12px",fontWeight:"700",transition:"0.2s all"},children:c===0?s:ve(s)[1]},s))}),e.jsx("input",{type:"text",placeholder:c===0?"Название":"Name",value:H,onChange:s=>L(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsx("input",{type:"text",placeholder:c===0?"Описание (опц.)":"Description (opt.)",value:I,onChange:s=>R(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>q(!oe),children:[e.jsx("span",{style:{fontSize:"14px",color:l.get("subText",t)},children:c===0?"Иконка":"Icon"}),e.jsx("div",{style:{color:l.get("habitIcon",t)},children:te.getIcon(O,{size:28})})]})]}),e.jsxs("div",{style:C(t).buttonsRow,children:[e.jsxs("button",{style:C(t).btnCancel,onClick:()=>b(s=>({...s,show:!1})),children:[e.jsx(ye,{size:22,style:{marginRight:"6px"}})," ",c===0?"Отмена":"Cancel"]}),e.jsxs("button",{style:{...C(t).btnSave,backgroundColor:n.type===3?"#FF453A":"#007AFF"},onClick:()=>{N()},children:[e.jsx(Se,{size:22,style:{marginRight:"6px"}})," ",n.type===3?c===0?"Удалить":"Delete":c===0?"Готово":"Save"]})]})]})}),oe&&e.jsx("div",{style:C(t).confirmContainer,onClick:()=>q(!1),children:e.jsxs("div",{style:{...C(t).selectPanel},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:l.get("subText",t),fontSize:"13px",fontWeight:"600"},children:c===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(te.ic).map(([s])=>e.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{se(s),q(!1)},children:te.getIcon(s,{size:30,style:{color:l.get("habitIcon",t)}})},s))]})})]})};function $(){const t=p.CustomHabits||[];return t.concat(ke.filter(d=>!t.some(f=>f.id===d.id)))}function rt({theme:t,habitsCards:d,categories:f,setCP:m,setCurrentId:y,fSize:S,setNeedConfirmation:c,setConfirmMessage:z,setHabitToDelete:x}){return f.map(v=>{const h=d.map(F=>$().find(E=>E.id===F)).filter(F=>F&&F.category[0]===v);return h.length===0?null:e.jsx(ct,{text:h[0].category,theme:t,isNegative:v==="Отказ от вредного",children:h.map(F=>e.jsx(lt,{id:F.id,theme:t,setCP:m,setCurrentId:y,fSize:S,setConfirmMessage:z,setNeedConfirmation:c,setHabitToDelete:x},F.id))},v)})}function lt({id:t=0,theme:d,setCP:f,setCurrentId:m,fSize:y,setNeedConfirmation:S,setConfirmMessage:c,setHabitToDelete:z}){const[x,v]=r.useState(p.habitsByDate[me]?.[t]),[h,F]=r.useState(p.prefs[0]),[E,Y]=r.useState(Ue.hasPremium),j=$().find(o=>o.id===t);if(!j)return null;const[M,n]=r.useState({name:j?.name||["",""],descr:j?.description||["",""],icon:j?.iconName||"default"}),b=j.category[0]==="Отказ от вредного",A=Ve(t),W=120,H=-W,[L,I]=r.useState(!0),[R,O]=r.useState(!1),[se,oe]=r.useState(!1),[q,P]=r.useState(p.choosenHabitsGoals[t]),[X,de]=r.useState(0),[K,_]=r.useState(!1),[G,J]=r.useState(!!b),[k,pe]=r.useState(b?864e5:6e4),[V,N]=r.useState(b?Math.round(Date.now()-new Date(p.choosenHabitsLastSkip[t])):6e4),[Q,Z]=r.useState(0),[s,u]=r.useState(0),a=b?"#FF3B30":j.color||"#32D74B",i=d==="light"||d==="speciallight";let D=i?"#FFFFFF":l.get("simplePanel",d)+"99",T=i?"#1D1D1F":l.get("mainText",d),B=i?"#8E8E93":l.get("subText",d),ne=i?"#FFFFFF":"rgba(70, 70, 70, 0.2)",xe=a,ie=i?"transparent":`1px solid ${l.get("border",d)}80`,He=i?"0 12px 24px -6px rgba(0,0,0,0.08), 0 4px 8px -3px rgba(0,0,0,0.04)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";b&&(D=i?"#FFF5F5":"rgba(255, 59, 48, 0.08)",ie=i?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",ne="rgba(255, 59, 48, 0.15)"),x===1?(D=i?"#E8F5E9":"rgba(20, 60, 30, 0.85)",T=i?"#1E5E25":"#ffffff",B=i?"#2E7D32":"rgba(255,255,255,0.7)",ne=i?"#FFFFFF":"rgba(255,255,255,0.2)",xe=i?"#2E7D32":"#ffffff",ie="transparent"):x===-1&&(D=i?"#FFEBEE":"rgba(60, 20, 20, 0.85)",T=i?"#B71C1C":"#ffffff",B=i?"#C62828":"rgba(255,255,255,0.7)",ne=i?"#FFFFFF":"rgba(255,255,255,0.2)",xe=i?"#C62828":"#ffffff",ie="transparent");const ge=Array.from(Object.values(p.habitsByDate));r.useEffect(()=>{if(t>-1){let o=0;const g=new Date().toISOString().split("T")[0];for(let w=ge.length-2;w>=0;w--)if(t in ge[w])if(ge[w][t]>0)o++;else break;p.habitsByDate[g]?.[t]>0&&o++,u(o)}},[t,p.habitsByDate,x]),r.useEffect(()=>{const o=Ye.subscribe(Y);return()=>o.unsubscribe()},[]),r.useEffect(()=>{if(G){let o=0;const g=setInterval(()=>{o+=50;const w=(V+o)/k*100;Z(w),o===1e3&&N(le=>{const U=le+1e3;return o=0,!b&&U>=k?(we.play(),clearInterval(g),v(1),N(0),J(!1),Z(0)):U>=k&&x<1&&v(1),U})},50);return()=>clearInterval(g)}},[V,G,k]),r.useEffect(()=>{const o=Ie.subscribe(g=>F(g==="ru"?0:1));return()=>o.unsubscribe()},[]),r.useEffect(()=>{p.changeStatus(me,t,x)},[x]);const ze=()=>j.isCustom&&j.iconName?te.getIcon(j.iconName,{size:22}):te.getHabitIcon(j.name?j.name[0]:"default",{size:22}),Ee=Je(0),ae=Qe(Ee,[-1,1],[H,W]),Ae=(o,g)=>{b?g.offset.x<H&&L&&(re(!1),he(ae,0,{type:"tween",duration:.2}),I(!1)):Math.abs(g.offset.x)>W&&L&&((x<1&&g.offset.x>0||x>-1&&g.offset.x<0)&&re(g.offset.x>0),he(ae,0,{type:"tween",duration:.2}),I(!1))},Re=()=>{L&&he(ae,0,{type:"tween",duration:.2}),I(!0)},re=o=>{let g=0;o?g=1:x===0?(g=-1,u(0)):x===1?(g=b?-1:0,u(0),b&&(N(0),p.choosenHabitsLastSkip[t]=Date.now())):x===-1&&(g=-1,b&&(N(0),p.choosenHabitsLastSkip[t]=Date.now())),p.habitsByDate[me][t]=g,g===1?ce(we):g===-1&&ce(nt),v(g)},Ce=()=>{m(t),ce(Te);const o=!R;O(o),_e(o?t:null)};r.useEffect(()=>{const o=qe.subscribe(g=>O(g===t));return()=>o.unsubscribe()},[t]),r.useEffect(()=>{I(!K)},[K]);const Be=()=>{x<1&&!b&&(J(!0),N(0))},Pe=()=>{b||(J(!1),Z(0),N(0))},Ge=o=>{z(o),S(!0),c(p.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return e.jsxs(ee.div,{id:t,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:D,backdropFilter:i?"none":"blur(40px)",border:i?"none":ie,boxShadow:He,x:ae},onClick:o=>{const g=document.getElementById(t);(g.clientHeight<80||o.nativeEvent.pageY-(g.getBoundingClientRect().top+window.scrollY)<80)&&Ce()},drag:L?"x":!1,dragConstraints:{left:H,right:x>0||b?0:W},onDrag:Ae,onDragEnd:Re,whileTap:{scale:.99},animate:{height:R?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ne,color:x===1?"#fff":xe,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:R?"5px":"0"},children:ze()}),e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:"700",letterSpacing:"0.5px",color:T,opacity:.5,marginBottom:"4px"},children:j.category[h]}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:T,whiteSpace:R?"normal":"nowrap",overflow:R?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:M.name[h]}),G&&e.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:x===1?i?"#2E7D32":"#FFF":a,marginTop:"4px",opacity:.9},children:pt(V,k,h,b)}),!G&&!b&&s>0&&e.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:x===1?i?"#2E7D32":"#FFF":a,marginTop:"4px",opacity:.9},children:ft(h,s)})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!b&&e.jsxs(e.Fragment,{children:[!G&&x===0&&e.jsx(et,{onClick:o=>{o.stopPropagation(),_(!0)},style:{color:l.get("icons",d),opacity:.4,fontSize:"24px",marginRight:"15px"}}),G&&e.jsx(tt,{onClick:o=>{o.stopPropagation(),Pe()},style:{color:a,fontSize:"24px",marginRight:"15px"}}),e.jsx("div",{onClick:o=>{o.stopPropagation(),re(!0)},style:{width:"30px",height:"30px",borderRadius:"50%",border:x!==0?"none":`2px solid ${i?"#E5E5EA":"#3A3A3C"}`,backgroundColor:x===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:x===1&&e.jsx(be,{size:16,color:"#FFF"})})]}),b&&e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(De,{size:16,color:"#FF453A"})})]})]}),R&&e.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[e.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:i?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),M.descr[h]&&e.jsx("div",{style:{color:B,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:M.descr[h]}),E?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:q?.map((o,g)=>e.jsxs(ee.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"90%",padding:"14px 16px",borderRadius:"16px",backgroundColor:i?"#FFFFFF":"rgba(255,255,255,0.05)",border:i?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:i?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[e.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:o.isDone?i?"#AEAEB2":"#636366":T,textDecoration:o.isDone?"line-through":"none"},children:o.text}),se&&X===g&&e.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[e.jsx(Fe,{onClick:()=>f(w=>({...w,show:!0,type:2,hId:t,gId:g,setGoals:P})),style:{fontSize:"14px",margin:"0 6px",color:l.get("icons",d),opacity:.7}}),e.jsx(je,{onClick:()=>f(w=>({...w,show:!0,type:3,hId:t,gId:g,setGoals:P})),style:{fontSize:"14px",margin:"0 6px",color:l.get("icons",d),opacity:.7}})]}),e.jsx("div",{onClick:()=>{oe(w=>!(w&&X===g)),de(g),m(t)},children:e.jsx(Ze,{style:{fontSize:"16px",color:l.get("icons",d),opacity:.4,marginRight:"12px"}})}),e.jsx("div",{onClick:()=>P(w=>{const le=w.map((U,Ne)=>Ne===g?{...U,isDone:!U.isDone}:U);return p.choosenHabitsGoals[t]=le,le}),style:{width:"24px",height:"24px",borderRadius:"8px",border:o.isDone?"none":`2px solid ${i?"#E5E5EA":"#3A3A3C"}`,backgroundColor:o.isDone?a:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:o.isDone&&e.jsx(be,{size:12,color:"#FFF"})})]},g))}),e.jsxs("div",{onClick:()=>f({show:!0,type:1,hId:t,gId:0,setGoals:P}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${a}66`,backgroundColor:`${a}10`},children:[e.jsx(Xe,{style:{fontSize:"12px",color:a}}),e.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:a,fontWeight:"600"},children:h===0?"Добавить цель":"Add goal"})]}),e.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:l.get("subText",d),textTransform:"uppercase",letterSpacing:"0.5px"},children:h===0?"Достижения":"Achievements"}),p.choosenHabitsAchievements[t]?.map((o,g)=>e.jsx(gt,{index:g,milestone:o,id:t,isNegative:b,percent:A,theme:d,fSize:y,langIndex:h},g))]}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",marginBottom:"15px",fontSize:"12px",fontWeight:"600",color:l.get("subText",d),border:`2px dashed ${l.get("subText",d)}66`,padding:"12px",borderRadius:"16px"},children:h===0?"Микро цели и достижения с премиум":"Micro goals and achievements with premium"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"20px"},children:[e.jsx(Fe,{onClick:()=>f(o=>({...o,show:!0,type:0,hId:t,gId:0,hInfo:n})),style:{fontSize:"18px",color:l.get("icons",d),opacity:.7}}),e.jsx(je,{onClick:()=>Ge(t),style:{fontSize:"18px",color:l.get("icons",d),opacity:.7}}),e.jsx(Ke,{style:{fontSize:"18px",color:l.get("icons",d),opacity:.7},onClick:()=>{Ce()}}),!b&&e.jsx("div",{onClick:()=>re(!0),style:{width:"18px",height:"18px",borderRadius:"50%",border:x!==0?"none":`2px solid ${i?"#E5E5EA":"#3A3A3C"}`,backgroundColor:x===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:x===1&&e.jsx(be,{size:16,color:"#FFF"})})]})]}),K&&e.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:i?"#FFF":l.get("background",d)},onClick:o=>o.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[e.jsx("div",{style:{color:l.get("mainText",d),fontWeight:"bold"},children:xt(k)}),e.jsx(ot,{style:{width:"50%",color:a},min:1,max:59,value:k/6e4,valueLabelDisplay:"off",onChange:o=>{pe(o.target.value*6e4),o.stopPropagation()}}),e.jsx(ye,{onClick:o=>{o.stopPropagation(),_(!1)},style:{cursor:"pointer",color:l.get("icons",d),fontSize:"24px"}}),e.jsx(Se,{onClick:o=>{o.stopPropagation(),Be(),_(!1)},style:{cursor:"pointer",color:a,fontSize:"24px"}})]})})]})}function ct({text:t=["Имя","Name"],children:d,theme:f}){const[m,y]=r.useState(!0),S=f==="light"||f==="speciallight",c=p.prefs[0];return e.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[e.jsxs("div",{onClick:()=>{y(!m),ce(Te)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:S?"#1D1D1F":l.get("mainText",f)},children:t[c]}),e.jsx(ee.div,{animate:{rotate:m?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(Le,{size:14,color:S?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(Oe,{initial:!1,children:m&&e.jsx(ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:d})})})]})}function dt(t){return t===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function ce(t){p.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),p.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function pt(t,d,f,m){const y=m?t:d-t,S=Math.floor(y/1e3),c=Math.floor(S/86400),z=Math.floor(S%86400/3600),x=Math.floor(S%3600/60),v=S%60;if(c>0)if(f===0){let h="";const F=c%10,E=c%100;return E>=11&&E<=14?h="дней":F===1?h="день":F>=2&&F<=4?h="дня":h="дней",c+" "+h}else return c+(c===1?" day":" days");return z>0?z.toString().padStart(2,"0")+":"+x.toString().padStart(2,"0"):x.toString().padStart(2,"0")+":"+v.toString().padStart(2,"0")}function xt(t){return Math.floor(t/6e4)+"m"}const gt=({milestone:t,index:d,id:f,theme:m,langIndex:y})=>{const S=p.choosenHabits.indexOf(f),c=p.choosenHabitsLastSkip[f],z=p.choosenHabitsStartDates[S],x=c||z,v=1440*60*1e3,h=x?Math.floor((Date.now()-x)/v):0,E=[30,50,100][d]||30,Y=h<E,j=E-h,M=y===0?`${j} days left to unlock`:`Осталось ${j} дн. до открытия`;return e.jsx("div",{style:{fontSize:"13px",color:l.get("subText",m),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:Y?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",opacity:.6},children:[e.jsx("div",{style:{width:"12px",height:"12px",border:`1px solid ${l.get("subText",m)}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"bold"},children:"i"}),e.jsx("span",{style:{fontSize:"11px"},children:M})]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{size:12,color:l.get("icons",m),style:{opacity:.8}}),t[y]]})})},ft=(t,d)=>{if(t===0){let f="";const m=d%10,y=d%100;return y>=11&&y<=14?f="дней":m===1?f="день":m>=2&&m<=4?f="дня":f="дней",d+" "+f}else return d+(d===1?" day":" days")};export{at as addHabitFn,jt as currentId,wt as default,xt as parsedTimeSimple,it as removeHabitFn};
