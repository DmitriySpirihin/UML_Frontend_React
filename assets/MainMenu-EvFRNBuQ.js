import{U as L,s as P,f as B,A as v,a as U,R as d,t as $,l as F,h as N,i as O,j as n,C as R}from"./index-ed11Oxd-.js";/*! Grained.js 
* Author : Sarath Saleem  - https://github.com/sarathsaleem 
* MIT license: http://opensource.org/licenses/MIT 
* GitHub : https://github.com/sarathsaleem/grained 
* v0.0.1 
*/(function(t,e){function o(s,h){function y(i,u,x,S){var k="";k=u.length?u+"{"+x+"}":x,"insertRule"in i?i.insertRule(k,S):"addRule"in i&&i.addRule(u,x,S)}var a=null,p=null,w=null;if(typeof s=="string"&&(a=e.getElementById(s.split("#")[1])),!a)return void console.error("Grained: cannot find the element with id "+s);p=a.id,a.style.position!=="absolute"&&(a.style.position="relative"),a.style.overflow="hidden";var l=["","-moz-","-o-animation-","-webkit-","-ms-"],r={animate:!0,patternWidth:100,patternHeight:100,grainOpacity:.1,grainDensity:1,grainWidth:1,grainHeight:1,grainChaos:.5,grainSpeed:20};Object.keys(h).forEach(function(i){r[i]=h[i]});for(var j=function(){var i=e.createElement("canvas"),u=i.getContext("2d");i.width=r.patternWidth,i.height=r.patternHeight;for(var x=0;x<r.patternWidth;x+=r.grainDensity)for(var S=0;S<r.patternHeight;S+=r.grainDensity){var k=256*Math.random()|0;u.fillStyle="rgba("+[k,k,k,r.grainOpacity].join()+")",u.fillRect(x,S,r.grainWidth,r.grainHeight)}return i.toDataURL("image/png")},f=j(),m="",T=["0%:-10%,10%","10%:-25%,0%","20%:-30%,10%","30%:-30%,30%","40%::-20%,20%","50%:-15%,10%","60%:-20%,20%","70%:-5%,20%","80%:-25%,5%","90%:-30%,25%","100%:-10%,10%"],c=l.length;c--;){m+="@"+l[c]+"keyframes grained{";for(var M=0;M<T.length;M++){var E=T[M].split(":");m+=E[0]+"{",m+=l[c]+"transform:translate("+E[1]+");",m+="}"}m+="}"}var C=e.getElementById("grained-animation");C&&C.parentElement.removeChild(C);var g=e.createElement("style");g.type="text/css",g.id="grained-animation",g.innerHTML=m,e.body.appendChild(g);var D=e.getElementById("grained-animation-"+p);D&&D.parentElement.removeChild(D),g=e.createElement("style"),g.type="text/css",g.id="grained-animation-"+p,e.body.appendChild(g);var b="background-image: url("+f+");";if(b+='position: absolute;content: "";height: 300%;width: 300%;left: -100%;top: -100%;',c=l.length,r.animate)for(;c--;)b+=l[c]+"animation-name:grained;",b+=l[c]+"animation-iteration-count: infinite;",b+=l[c]+"animation-duration: "+r.grainChaos+"s;",b+=l[c]+"animation-timing-function: steps("+r.grainSpeed+", end);";w="#"+p+"::before",y(g.sheet,w,b)}t.grained=o})(window,document);class A{static BASE_URL="https://uml-backend-node.onrender.com/api/notifications";static async sendMessage(e,o){fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:e,message:o,userId:L.id,metadata:{}})}).then(s=>s.json()).then(s=>{console.log("Success:",s),e==="password"?P(s.message):B(s.message)}).catch(s=>console.error("Error:",s))}}const W=()=>{try{if(!v.choosenHabits||v.choosenHabits.length===0){console.log("No habits chosen");return}const t=v.prefs[0],e=v.choosenHabits.map(h=>U?.find(y=>y.id===h)).filter(Boolean);if(e.length===0){console.log("No valid habits found");return}let o="⏰ "+(L?.name||"")+", ";o+=t===0?e.length>1?"время для ваших привычек: ":"время для вашей привычки: ":`it's time to work on your ${e.length>1?"habits":"habit"}: `;const s=e.map(h=>h.name[t]).join(", ");o+=s,A.sendMessage("habit",o)}catch(t){console.error("Error in habitReminder:",t)}},_=()=>{try{const t=v.prefs[0],e=L?.name||"",o=t===0?`Пора тренироваться, ${e}!`:`It's time to train, ${e}!`;A.sendMessage("training",o)}catch(t){console.error("Error in trainingReminder:",t)}},q=t=>{A.sendMessage("password",t)},V=({onPageChange:t})=>{const[e,o]=d.useState("dark"),[s,h]=d.useState(v.prefs[0]),[y,a]=d.useState(0),[p,w]=d.useState(!1),[l,r]=d.useState(""),[j,f]=d.useState(""),[m,T]=d.useState(""),[c,M]=d.useState(!1),[E,C]=d.useState(!1),g=10;d.useEffect(()=>{const i=$.subscribe(o),u=F.subscribe(x=>{h(x==="ru"?0:1)});return()=>{i.unsubscribe(),u.unsubscribe()}},[]),d.useEffect(()=>{window.grained("#grain",{animate:!0,grainSize:.05,grainDensity:.2,grainOpacity:.01,grainWidth:.9,grainHeight:.9,grainColor:"#ffffffff"});const i=N.subscribe(r),u=O.subscribe(M);return()=>{i.unsubscribe(),u.unsubscribe()}},[]),d.useEffect(()=>{c&&(C(!1),w(!0))},[c]);const D=()=>{y>=g&&(C(!0),a(0)),a(y+1)},b=i=>{i.length>5&&q(i)};return n.jsxs(n.Fragment,{children:[p&&n.jsxs("div",{style:{position:"absolute",display:"flex",alignItems:"center",flexDirection:"column",top:"10vh",left:"0",width:"100vw",height:"40vh",backgroundColor:"rgba(0,0,0,0.7)",zIndex:1e3},children:[n.jsx("div",{style:{borderRadius:"12px",width:"85vw",height:"13vh",fontSize:"12px",fontFamily:"Segoe UI",border:"2px solid white",color:"white"},children:l}),n.jsx("textarea",{style:{borderRadius:"12px",width:"85vw",height:"12vh",fontSize:"12px",fontFamily:"Segoe UI",border:"2px solid white",color:"white"},value:m,onChange:i=>T(i.target.value)}),n.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around"},children:[n.jsx("input",{style:{borderRadius:"12px",width:"50vw",height:"3vh",fontSize:"12px",fontFamily:"Segoe UI",border:"2px solid white",color:"white"},type:"text",onChange:i=>f(i.target.value)}),n.jsx("button",{onClick:()=>A.sendMessage(j,m),children:"Submit"})]}),n.jsxs("div",{style:{width:"90%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[n.jsx("button",{onClick:()=>W(),children:"Habit reminder"}),n.jsx("button",{onClick:()=>_(),children:"Training reminder"}),n.jsx("button",{onClick:()=>w(!1),children:"Close console"})]})]}),n.jsxs("div",{style:I(e).container,children:[n.jsx("div",{style:{height:"20vh"}}),n.jsx("h2",{style:I(e).mainText,children:s===0?"Выберите категорию":"Choose category"}),E&&n.jsx("input",{style:{width:"85vw",height:"2vh",fontSize:"12px",zIndex:1001},type:"password",onChange:i=>b(i.target.value)}),n.jsxs("div",{style:I(e).scrollView,children:[n.jsx(H,{text:["Привычки","Habits"],decr:["Приложение использует научно обоснованные методы формирования привычек, включая теорию петли привычки (Чарльз Дахигг), принципы подкрепления (Б.Ф. Скиннер) и 21-дневное правило формирования привычек (Максвелл Мальц).","This app utilizes evidence-based habit formation techniques, including the habit loop theory (Charles Duhigg), principles of reinforcement (B.F. Skinner), and the 21-day rule of habit formation (Maxwell Maltz)."],theme:e,lang:s,onClick:()=>{t("HabitsMain"),z(null,100)}}),n.jsx(H,{text:["Тренировочная дневник","Training diary"],decr:["Отслеживайте свой тренировочный прогресс, ставьте цели и анализируйте результаты. Идеальный инструмент для системного подхода к физическому развитию.","Track your workout progress, set goals, and analyze results. The perfect tool for a systematic approach to physical development."],colorDark:"#143113ff",colorLight:"#98f9a0ff",colorSpecialDark:"#26352fff",colorSpecialLight:"#9de074ff",theme:e,lang:s,onClick:()=>{t("TrainingMain"),z(null,100)}}),n.jsx(H,{text:["Список задач","Simple task manager"],decr:["Скоро будет доступно","Coming soon"],colorDark:"#4b3f1fff",colorLight:"#ebe58eff",colorSpecialDark:"#36341cff",colorSpecialLight:"#d0e074ff",theme:e,lang:s,onClick:()=>{z(null,100)}}),n.jsx(H,{text:["Хорошие новости","Good news"],decr:["Скоро будет доступно","Coming soon"],colorDark:"#3a201bff",colorLight:"#ecae94ff",colorSpecialDark:"#4a2828ff",colorSpecialLight:"#e194c6ff",theme:e,lang:s,onClick:()=>{z(null,100)}}),n.jsx("div",{style:{height:"5vh",width:"100%"},onClick:()=>{D()}})]})]})]})};function H({text:t=["Категория","Category"],decr:e=["Скоро будет доступно","Coming soon"],colorDark:o="#122636ff",colorLight:s="#9cccf1ff",colorSpecialDark:h="#1d262dff",colorSpecialLight:y="#45dff4ff",theme:a,lang:p,onClick:w}){const l=f=>f==="dark"?o:f==="specialdark"?h:f==="speciallight"?y:s,j={alignItems:"start",justifyContent:"start",height:"14vh",borderRadius:"24px",border:`2px solid ${(f=>f==="dark"?"#9099a0ff":f==="specialdark"?"#938b8bff":f==="speciallight"?"#e0b1b1ff":"#8a8e91ff")(a)}`,margin:"10px",backgroundColor:l(a),overflow:"hidden",position:"relative"};return n.jsxs("div",{id:"grain",style:j,onClick:w,children:[n.jsx("h2",{style:I(a).cardText,children:Array.isArray(t)?t[p]:t}),n.jsx("p",{style:I(a).text,children:Array.isArray(e)?e[p]:e})]})}const I=t=>({container:{backgroundColor:R.get("background",t),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI"},mainText:{textAlign:"left",marginBottom:"5px",fontSize:"14px",color:R.get("mainText",t)},cardText:{textAlign:"left",marginBottom:"5px",fontSize:"14px",color:R.get("mainText",t),marginLeft:"30px"},text:{textAlign:"left",fontSize:"10px",color:R.get("subText",t),marginLeft:"30px"},scrollView:{width:"95vw",maxHeight:"90vh",overflowY:"auto",justifyContent:"center",alignItems:"center"}});function z(t,e){v.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),v.prefs[3]==0&&navigator.vibrate(e)}export{V as default};
