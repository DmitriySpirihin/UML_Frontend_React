import{A as g,U as C,t as k,l as w,f as z,p as M,C as s,j as t}from"./index-HEAg23VM.js";import{r as n}from"./recharts-Bg6K2Pzo.js";import{M as R}from"./MyAreaChart-CiEihQq1.js";import{M as I}from"./MyBarChart-U59rgbEX.js";const O=()=>{const[e,d]=n.useState("dark"),[a,b]=n.useState(g.prefs[0]),[U,S]=n.useState(g.prefs[4]),[j,v]=n.useState(C.hasPremium);n.useEffect(()=>{const l=k.subscribe(d),x=w.subscribe(y=>b(y==="ru"?0:1)),c=z.subscribe(S),h=M.subscribe(v);return()=>{l.unsubscribe(),x.unsubscribe(),c.unsubscribe(),h.unsubscribe()}},[]);const i=n.useMemo(()=>{const l=g.todoList||[],x=l.filter(o=>o.isDone).length,c=l.length,h=c>0?Math.round(x/c*100):0,D=Array.from({length:7},(o,u)=>{const f=new Date;return f.setDate(f.getDate()-u),f.toISOString().split("T")[0]}).reverse().map(o=>({label:o.split("-")[2],value:l.filter(u=>u.isDone&&u.startDate===o).length})),p={};l.forEach(o=>{p[o.category]=(p[o.category]||0)+1});const T=Object.keys(p).map(o=>({label:o,value:p[o]}));return{total:c,completed:x,rate:h,areaData:D,barData:T}},[g.todoList]),r=P(e);return t.jsx("div",{style:r.container,children:t.jsxs("div",{style:r.scrollContent,className:"no-scrollbar",children:[t.jsxs("div",{style:r.summaryRow,children:[t.jsx(m,{label:a===0?"Всего":"Total",value:i.total,theme:e}),t.jsx(m,{label:a===0?"Готово":"Done",value:i.completed,theme:e,color:s.get("done",e)}),t.jsx(m,{label:a===0?"Успех":"Rate",value:i.rate+"%",theme:e,color:s.get("areaChart",e)})]}),t.jsxs("div",{style:r.chartBox,children:[t.jsx("h3",{style:r.chartTitle,children:a===0?"Продуктивность (7д)":"Productivity (7d)"}),t.jsx(R,{data:i.areaData,color:s.get("areaChart",e),height:180})]}),t.jsxs("div",{style:r.chartBox,children:[t.jsx("h3",{style:r.chartTitle,children:a===0?"По категориям":"By Categories"}),t.jsx(I,{data:i.barData,color:s.get("barsColorTonnage",e),height:180})]}),j&&t.jsxs("div",{style:r.lockOverlay,children:[t.jsx("div",{style:r.lockText,children:a===0?"ТОЛЬКО ДЛЯ ПРЕМИУМ":"PREMIUM USERS ONLY"}),t.jsx("div",{style:{fontSize:"10px",color:s.get("subText",e),marginTop:"5px"},children:a===0?"Разблокируйте детальную аналитику":"Unlock detailed analytics"})]})]})})},m=({label:e,value:d,theme:a,color:b})=>t.jsxs("div",{style:{flex:1,backgroundColor:s.get("simplePanel",a),borderRadius:"16px",padding:"15px",display:"flex",flexDirection:"column",alignItems:"center",boxShadow:s.get("shadow",a)},children:[t.jsx("span",{style:{fontSize:"11px",color:s.get("subText",a),fontWeight:"700",textTransform:"uppercase"},children:e}),t.jsx("span",{style:{fontSize:"20px",fontWeight:"800",color:b||s.get("mainText",a),marginTop:"5px"},children:d})]}),P=(e,d)=>({container:{backgroundColor:s.get("background",e),height:"90vh",width:"100vw",marginTop:"100px",paddingTop:"60px",display:"flex",flexDirection:"column",fontFamily:"Segoe UI, sans-serif"},scrollContent:{flex:1,overflowY:"auto",padding:"0 20px 100px 20px",display:"flex",flexDirection:"column",gap:"20px",position:"relative"},summaryRow:{display:"flex",gap:"12px",width:"100%"},chartBox:{backgroundColor:s.get("simplePanel",e),borderRadius:"24px",padding:"20px",boxShadow:s.get("shadow",e)},chartTitle:{fontSize:"14px",fontWeight:"700",color:s.get("subText",e),marginBottom:"15px",textTransform:"uppercase",letterSpacing:"0.5px"},lockOverlay:{position:"absolute",inset:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:e==="dark"?"rgba(10, 10, 10, 0.8)":"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(8px)",textAlign:"center",borderRadius:"24px"},lockText:{color:e==="dark"?"#FFD700":"#D97706",fontSize:"12px",fontWeight:"800",fontFamily:"Segoe UI"}});export{O as default};
