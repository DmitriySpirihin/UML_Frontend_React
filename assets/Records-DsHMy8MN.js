import{A as j,U as b,t as G,l as M,f as B,p as W,j as e,C as s,cr as L,cb as U,cj as P,bw as $,bv as E,m as C,a as H,N as K,cs as O,ce as V,F as Y,z as D}from"./index-A1abLcxm.js";import{r as o}from"./recharts-Bg6K2Pzo.js";import{a as _,G as q}from"./index-C0LUjP2A.js";const J=[768852208,8484480648],Q=["âš¡","ðŸ§ ","ðŸ§©","ðŸŽ¯"],w=[P,$,_,q,E],se=()=>{const[t,u]=o.useState("dark"),[r,l]=o.useState(j.prefs[0]),[d,x]=o.useState(j.prefs[4]),[c,g]=o.useState(0),[n,f]=o.useState(0),[p,y]=o.useState(b.hasPremium),[k,I]=o.useState([]),[T,A]=o.useState(!0),[F,R]=o.useState(0);o.useEffect(()=>{(async()=>{try{const a=await K.getMentalRecordsGlobal()||[];!a||a.length===0?I([{name:b?.name||"User",data:j.mentalRecords}]):I(a)}catch{I([{name:b?.name||"User",data:j.mentalRecords}])}finally{A(!1)}})()},[]),o.useEffect(()=>{const i=G.subscribe(u),a=M.subscribe(N=>l(N==="ru"?0:1)),m=B.subscribe(x),h=W.subscribe(y);return()=>{i.unsubscribe(),a.unsubscribe(),m.unsubscribe(),h.unsubscribe()}},[]);const z=[...k].filter(i=>{if(F===0)return!0;const a=Number(i.uid)===Number(b.id);J.includes(Number(i.uid));const m=b.friends&&b.friends.some(h=>Number(h.uid)===Number(i.uid));return a||m}).sort((i,a)=>{const m=i.data?.[c]?.[n]||0;return(a.data?.[c]?.[n]||0)-m});return e.jsxs("div",{style:S(t).container,children:[e.jsxs("div",{style:S(t).controlsWrapper,children:[e.jsx(v,{items:[L,U],selectedIndex:F,setSelectedIndex:R,theme:t,colorKey:"difficulty",isSecondary:!0,isTop:!0}),e.jsx(v,{items:Q,selectedIndex:c,setSelectedIndex:i=>{g(i),n>3&&f(3)},theme:t,colorKey:"difficulty"}),e.jsx(v,{items:c>0?w.slice(0,-1):w,selectedIndex:n,setSelectedIndex:f,theme:t,colorKey:"difficulty",isSecondary:!0})]}),e.jsx("div",{style:S(t).listContainer,children:T?e.jsx("div",{style:S(t).loadingText,children:r===0?"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...":"Loading..."}):e.jsxs(C.div,{layout:!0,style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px",paddingBottom:"20px"},children:[e.jsx(H,{mode:"popLayout",children:z.map((i,a)=>e.jsx(X,{theme:t,fSize:d,isUser:i.name===b.name,isAdmin,rank:a+1,name:i.name,score:i.data?.[c]?.[n]||0,index:a},i.name+a))}),z.length===0&&e.jsx("div",{style:{textAlign:"center",color:s.get("subText",t),marginTop:20},children:F===1?r===0?"Ð”Ñ€ÑƒÐ·ÑŒÑ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹":"No friends found":r===0?"ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…":"No records yet"})]})})]})},v=({items:t,selectedIndex:u,setSelectedIndex:r,theme:l,colorKey:d,isSecondary:x,isTop:c=!1})=>e.jsx("div",{style:{marginTop:c?"25px":0,display:"flex",backgroundColor:s.get("panel",l),padding:"2px",borderRadius:"16px",gap:"4px",justifyContent:"center",boxShadow:"inset 0 2px 5px rgba(0,0,0,0.05)"},children:t.map((g,n)=>{const f=u===n,p=s.get(d+n,l);return e.jsxs("div",{onClick:()=>r(n),style:{position:"relative",padding:x?"6px 14px":"8px 20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:[f&&e.jsx(C.div,{layoutId:x?"diff-bg":"cat-bg",style:{position:"absolute",inset:0,backgroundColor:s.get("simplePanel",l),borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:-1},transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx("div",{size:x?18:22,style:{transition:"color 0.3s ease"},children:typeof g=="string"?g:e.jsx(g,{size:x?18:22,style:{color:f?c?s.get(d,l):p:s.get("subText",l)}})})]},n)})}),X=({theme:t,fSize:u,isUser:r,isAdmin:l,rank:d,name:x,score:c,index:g})=>{const n=t==="dark",f={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{delay:g*.05,type:"spring",stiffness:300,damping:24}},exit:{opacity:0,scale:.9}};let p=null,y=s.get("mainText",t);return d===1?(p=Y,y=s.get("barsColorWeight",t)):d===2?(p=D,y=s.get("icons",t)):d===3&&(p=D,y=s.get("difficulty5",t)),e.jsxs(C.div,{layout:!0,variants:f,initial:"hidden",animate:"visible",exit:"exit",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderRadius:"16px",backgroundColor:r?n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)":n?"rgba(30, 30, 30, 0.4)":"#FFFFFF",border:r?`1px solid ${s.get("done",t)}`:"none",backdropFilter:"blur(10px)",boxShadow:n?"0 4px 6px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.05)",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:n?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",fontWeight:"bold",color:y,fontSize:"14px"},children:p?e.jsx(p,{size:16}):d}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:u===0?"15px":"17px",fontWeight:r||l?"bold":"normal",color:s.get("mainText",t)},children:[x,r&&e.jsx(O,{size:10,color:s.get("light",t)}),l&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 191, 255, 0.15)",borderRadius:"4px",padding:"2px 4px"},children:[e.jsx(V,{size:12,color:"#00BFFF"}),e.jsx("span",{style:{fontSize:"8px",marginLeft:"3px",color:"#00BFFF"},children:"ADM"})]})]})})]}),e.jsx("div",{style:{fontSize:u===0?"16px":"18px",fontWeight:"bold",color:s.get("done",t),fontFamily:"monospace",letterSpacing:"-0.5px"},children:c})]})},S=(t,u)=>({container:{backgroundColor:s.get("background",t),display:"flex",flexDirection:"column",alignItems:"center",width:"100vw",height:"92vh",marginTop:"110px",fontFamily:"Segoe UI"},controlsWrapper:{width:"90%",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px",marginBottom:"20px",zIndex:10},listContainer:{flex:1,width:"94%",overflowY:"scroll",padding:"0 5px",display:"flex",flexDirection:"column",scrollbarWidth:"none",msOverflowStyle:"none"},loadingText:{textAlign:"center",marginTop:"40px",color:s.get("subText",t),fontSize:"14px"}});export{se as default};
