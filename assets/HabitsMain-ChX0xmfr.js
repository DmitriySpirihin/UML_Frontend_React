import{A as p,t as ue,f as Be,a4 as Ne,l as Ie,C as x,j as e,M as he,W as be,d as Se,a3 as pe,m as q,a5 as Me,a as We,U as $e,q as Le,p as Oe,a6 as Ue,g as ve,o as Ce,a7 as je,_ as Ye,a8 as Ve,s as Xe}from"./index-Ciq8Bg4-.js";import{R as xe,r}from"./recharts-Bg6K2Pzo.js";import{I as K,u as _e,a as qe,b as fe}from"./Icons-D-RyFYiZ.js";import{F as we}from"./index-BxOV1gSi.js";import{T as Ke}from"./index-VfeM7g29.js";import{T as Je,a as Qe}from"./TimerOffTwoTone-t_zyfLYf.js";import{M as ie}from"./MyInput-BqRJwxe9.js";import{S as Ze}from"./Slider-BTFTmSCF.js";const ge=new Date().toISOString().split("T")[0],ke=new Audio("Audio/Click.wav"),et=new Audio("Audio/Skip.wav"),Fe=new Audio("Audio/IsDone.wav");let tt,st,mt;const m=(t,d=0)=>{const g=t==="light"||t==="speciallight",b=g?"#F2F4F6":x.get("background",t),j=g?"#FFFFFF":x.get("simplePanel",t),y=g?"rgba(0,0,0,0.0)":`1px solid ${x.get("border",t)}`,c=g?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:b,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:y,backgroundColor:j,boxShadow:c,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:j,borderRadius:"24px",border:y,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:c},mainText:{fontSize:"17px",fontWeight:"600",color:x.get("mainText",t),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:x.get("subText",t),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:g?"#E5E5EA":"rgba(255,255,255,0.1)",color:g?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:x.get("icons",t),fontSize:"24px"}}},yt=()=>{const[t,d]=xe.useState("dark"),[g,b]=xe.useState([]),[j,y]=xe.useState([]),[c,G]=r.useState(p.prefs[0]),[u,D]=r.useState(0),[S,w]=r.useState(p.choosenHabits.length>0),[J,re]=r.useState(0),[C,U]=r.useState(0),[o,h]=r.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[I,B]=r.useState(""),[T,N]=r.useState(""),[v,z]=r.useState(""),[$,Q]=r.useState(""),[Z,Y]=r.useState(!1),[L,ee]=r.useState(null),[le,V]=r.useState(""),[X,k]=r.useState(!1);r.useEffect(()=>{if(o.type===0&&(N(W().find(i=>i.id===o.hId)?.name[c]||""),z(W().find(i=>i.id===o.hId)?.description[c]||""),Q(W().find(i=>i.id===o.hId)?.iconName||"")),o.type===4){if(o.gId<=0)return;o.setGoals(i=>{const s=[...i];return[s[o.gId-1],s[o.gId]]=[s[o.gId],s[o.gId-1]],p.choosenHabitsGoals[o.hId]=s,s})}else o.type===5&&o.setGoals(i=>{if(o.gId>=i.length-1)return i;const s=[...i];return[s[o.gId],s[o.gId+1]]=[s[o.gId+1],s[o.gId]],p.choosenHabitsGoals[o.hId]=s,s})},[o]),r.useEffect(()=>{const i=ue.subscribe(d),s=Be.subscribe(D),f=Ne.subscribe(k);return()=>{i.unsubscribe(),s.unsubscribe(),f.unsubscribe()}},[]),r.useEffect(()=>{const i=Ie.subscribe(s=>{G(s==="ru"?0:1)});return()=>i.unsubscribe()},[]),r.useEffect(()=>{b(p.choosenHabits)},[]),r.useEffect(()=>{if(g.length>0){const i=new Set;g.forEach(s=>{const f=W().find(a=>a.id===s);f&&!i.has(f.category[0])&&i.add(f.category[0])}),y(Array.from(i))}},[g]);const _=(i,s,f,a,R)=>{b(F=>{const P=new Set(F);return P.has(i)?F:(p.addHabit(i,s,f,a,R),[...P,i])}),w(p.choosenHabits.length>0)},E=i=>{if(g.includes(i)){p.removeHabit(i),b(F=>F.filter(P=>P!==i));const a=(W().find(F=>F.id===i)?.name||["",""])[c]||(c===0?"Привычка":"Habit"),R=c===0?`Привычка: '${a}' удалена`:`Habit: '${a}' deleted`;pe(R,2e3,!0),w(p.choosenHabits.length>0)}},ce=()=>{switch(o.type){case 0:const i=p.CustomHabits.findIndex(s=>s.id===o.hId);i!==-1&&(p.CustomHabits=p.CustomHabits.map((s,f)=>f===i?{...s,name:[T.trim(),T.trim()],description:[v.trim(),v.trim()],iconName:$}:s)),b(s=>[...s]),h(s=>({...s,show:!1})),o.hInfo&&o.hInfo({name:[T,T],descr:[v,v],icon:$}),U(s=>s+1);break;case 1:I.length>0?(o.setGoals(s=>[...s,{text:I,isDone:!1}]),p.addHabitGoal(o.hId,{text:I,isDone:!1}),h(s=>({...s,show:!1}))):pe(c===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:I.length>0?(o.setGoals(s=>s.map((f,a)=>a===o.gId?{...f,text:I.trim()}:f)),p.choosenHabitsGoals[o.hId][o.gId].text=I,h(s=>({...s,show:!1}))):pe(c===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:o.setGoals(s=>s.filter((f,a)=>a!==o.gId)),p.choosenHabitsGoals[o.hId].splice(o.gId,1),h(s=>({...s,show:!1}));break}};tt=E,st=_;const M=t==="light"||t==="speciallight",A=M?"#F2F4F6":x.get("background",t);return e.jsxs("div",{style:{...m(t).container,backgroundColor:A},children:[X&&e.jsx("div",{style:m(t).confirmContainer,children:e.jsxs("div",{style:m(t).cP,children:[e.jsx("div",{style:m(t,u).mainText,children:le}),e.jsxs("div",{style:m(t).buttonsRow,children:[e.jsxs("button",{style:m(t).btnCancel,onClick:()=>k(!1),children:[e.jsx(he,{size:20,style:{marginRight:5}})," ",c===0?"Нет":"No"]}),e.jsxs("button",{style:{...m(t).btnSave,backgroundColor:"#FF453A"},onClick:()=>{E(L),k(!1)},children:[e.jsx(be,{size:20,style:{marginRight:5}})," ",c===0?"Да":"Yes"]})]})]})}),!S&&e.jsx("div",{style:{...m(t).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:e.jsx("p",{style:{...m(t).subText,fontSize:u===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:x.get("subText",t)},children:at(c)})}),S&&e.jsxs("div",{style:m(t).scrollView,children:[nt({theme:t,habitsCards:g,categories:j,setCP:h,setCurrentId:re,fSize:u,setNeedConfirmation:k,setConfirmMessage:V,setHabitToDelete:ee}),e.jsx("div",{style:{height:"100px"}})]},C),o.show&&e.jsx("div",{style:m(t).confirmContainer,children:e.jsxs("div",{style:{...m(t).cP,width:"90%"},children:[e.jsxs("div",{style:m(t).mainText,children:[o.type===1&&(c===0?"Новая цель":"New goal"),o.type===2&&(c===0?"Изменить цель":"Edit goal"),o.type===3&&(c===0?"Удалить цель?":"Delete goal?"),o.type===0&&(c===0?"Настройки привычки":"Edit habit")]}),o.type===1&&e.jsx(ie,{w:"100%",h:"50px",value:I,onChange:B,placeholder:c===0?"Название цели...":"Goal title...",theme:t}),o.type===2&&e.jsx(ie,{w:"100%",h:"50px",value:I,onChange:B,placeholder:c===0?"Название цели...":"Goal title...",theme:t}),o.type===0&&e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx(ie,{w:"100%",h:"50px",value:T,onChange:N,placeholder:c===0?"Название":"Name",theme:t}),e.jsx(ie,{w:"100%",h:"50px",value:v,onChange:z,placeholder:c===0?"Описание (опц.)":"Description (opt.)",theme:t}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:M?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>Y(!Z),children:[e.jsx("span",{style:{fontSize:"14px",color:x.get("subText",t)},children:c===0?"Иконка":"Icon"}),e.jsx("div",{style:{color:x.get("habitIcon",t)},children:K.getIcon($,{size:28})})]})]}),e.jsxs("div",{style:m(t).buttonsRow,children:[e.jsxs("button",{style:m(t).btnCancel,onClick:()=>h(i=>({...i,show:!1})),children:[e.jsx(he,{size:22,style:{marginRight:"6px"}})," ",c===0?"Отмена":"Cancel"]}),e.jsxs("button",{style:{...m(t).btnSave,backgroundColor:o.type===3?"#FF453A":"#007AFF"},onClick:()=>{ce()},children:[e.jsx(be,{size:22,style:{marginRight:"6px"}})," ",o.type===3?c===0?"Удалить":"Delete":c===0?"Готово":"Save"]})]})]})}),Z&&e.jsx("div",{style:m(t).confirmContainer,onClick:()=>Y(!1),children:e.jsxs("div",{style:{...m(t).selectPanel},onClick:i=>i.stopPropagation(),children:[e.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:x.get("subText",t),fontSize:"13px",fontWeight:"600"},children:c===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(K.ic).map(([i])=>e.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:M?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{Q(i),Y(!1)},children:K.getIcon(i,{size:30,style:{color:x.get("habitIcon",t)}})},i))]})})]})};function W(){return Se.concat((p.CustomHabits||[]).filter(t=>!Se.some(d=>d.id===t.id)))}function nt({theme:t,habitsCards:d,categories:g,setCP:b,setCurrentId:j,fSize:y,setNeedConfirmation:c,setConfirmMessage:G,setHabitToDelete:u}){return g.map(D=>{const S=d.map(w=>W().find(J=>J.id===w)).filter(w=>w&&w.category[0]===D);return S.length===0?null:e.jsx(it,{text:S[0].category,theme:t,isNegative:D==="Отказ от вредного",children:S.map(w=>e.jsx(ot,{id:w.id,theme:t,setCP:b,setCurrentId:j,fSize:y,setConfirmMessage:G,setNeedConfirmation:c,setHabitToDelete:u},w.id))},D)})}function ot({id:t=0,theme:d,setCP:g,setCurrentId:b,fSize:j,setNeedConfirmation:y,setConfirmMessage:c,setHabitToDelete:G}){const[u,D]=r.useState(p.habitsByDate[ge]?.[t]),[S,w]=r.useState(p.prefs[0]),[J,re]=r.useState($e.hasPremium),C=W().find(n=>n.id===t);if(!C)return null;const[U,o]=r.useState({name:C?.name||["",""],descr:C?.description||["",""],icon:C?.iconName||"default"}),h=C.category[0]==="Отказ от вредного",I=Le(t),B=120,T=-B,[N,v]=r.useState(!0),[z,$]=r.useState(!1),[Q,Z]=r.useState(!1),[Y,L]=r.useState(p.choosenHabitsGoals[t]),[ee,le]=r.useState(0),[V,X]=r.useState(!1),[k,_]=r.useState(!!h),[E,ce]=r.useState(h?864e5:6e4),[M,A]=r.useState(h?Math.round(Date.now()-new Date(p.choosenHabitsLastSkip[t])):6e4),[i,s]=r.useState(0),f=h?"#FF3B30":C.color||"#32D74B",a=d==="light"||d==="speciallight";let R=a?"#FFFFFF":x.get("simplePanel",d)+"99",F=a?"#1D1D1F":x.get("mainText",d),P=a?"#8E8E93":x.get("subText",d),te=a?`${f}15`:`${f}20`,de=f,se=a?"transparent":`1px solid ${x.get("border",d)}80`,De=a?"0 12px 24px -6px rgba(0,0,0,0.08), 0 4px 8px -3px rgba(0,0,0,0.04)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";h&&(R=a?"#FFF5F5":"rgba(255, 59, 48, 0.08)",se=a?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",te="rgba(255, 59, 48, 0.15)"),u===1?(R=a?"#E8F5E9":"rgba(20, 60, 30, 0.85)",F=a?"#1E5E25":"#ffffff",P=a?"#2E7D32":"rgba(255,255,255,0.7)",te=a?"#FFFFFF":"rgba(255,255,255,0.2)",de=a?"#2E7D32":"#ffffff",se="transparent"):u===-1&&(R=a?"#FFEBEE":"rgba(60, 20, 20, 0.85)",F=a?"#B71C1C":"#ffffff",P=a?"#C62828":"rgba(255,255,255,0.7)",te=a?"#FFFFFF":"rgba(255,255,255,0.2)",de=a?"#C62828":"#ffffff",se="transparent"),r.useEffect(()=>{const n=Oe.subscribe(re);return()=>n.unsubscribe()},[]),r.useEffect(()=>{if(k){let n=0;const l=setInterval(()=>{n+=50;const H=(M+n)/E*100;s(H),n===1e3&&A(oe=>{const O=oe+1e3;return n=0,h?O>=E&&u<1&&D(1):(Fe.play(),clearInterval(l),D(1),A(0),_(!1),s(0)),O})},50);return()=>clearInterval(l)}},[M,k,E]),r.useEffect(()=>{const n=Ie.subscribe(l=>w(l==="ru"?0:1));return()=>n.unsubscribe()},[]),r.useEffect(()=>{p.changeStatus(ge,t,u)},[u]);const Te=()=>C.isCustom&&C.iconName?K.getIcon(C.iconName,{size:22}):K.getHabitIcon(C.name?C.name[0]:"default",{size:22}),ze=_e(0),ne=qe(ze,[-1,1],[T,B]),Ee=(n,l)=>{h?l.offset.x<T&&N&&(me(!1),fe(ne,0,{type:"tween",duration:.2}),v(!1)):Math.abs(l.offset.x)>B&&N&&((u<1&&l.offset.x>0||u>-1&&l.offset.x<0)&&me(l.offset.x>0),fe(ne,0,{type:"tween",duration:.2}),v(!1))},He=()=>{N&&fe(ne,0,{type:"tween",duration:.2}),v(!0)},me=n=>{let l=0;n?l=1:u===0?l=-1:u===1?(l=h?-1:0,h&&(A(0),p.choosenHabitsLastSkip[t]=Date.now())):u===-1&&(l=-1,h&&(A(0),p.choosenHabitsLastSkip[t]=Date.now())),p.habitsByDate[ge][t]=l,l===1?ae(Fe):l===-1&&ae(et),D(l)},ye=()=>{b(t),ae(ke);const n=!z;$(n),Xe(n?t:null)};r.useEffect(()=>{const n=Ue.subscribe(l=>$(l===t));return()=>n.unsubscribe()},[t]),r.useEffect(()=>{v(!V)},[V]);const Ae=()=>{u<1&&!h&&(_(!0),A(0))},Re=()=>{h||(_(!1),s(0),A(0))},Pe=n=>{G(n),y(!0),c(p.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return e.jsxs(q.div,{id:t,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:R,backdropFilter:a?"none":"blur(40px)",border:a?"none":se,boxShadow:De,x:ne},onClick:n=>{const l=document.getElementById(t);(l.clientHeight<80||n.nativeEvent.pageY-(l.getBoundingClientRect().top+window.scrollY)<80)&&ye()},drag:N?"x":!1,dragConstraints:{left:T,right:u>0||h?0:B},onDrag:Ee,onDragEnd:He,whileTap:{scale:.99},animate:{height:z?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,height:"3px",width:`${i}%`,backgroundColor:f,borderRadius:"24px 0 0 0"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:te,color:u===1?"#fff":de,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:z?"5px":"0"},children:Te()}),e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:"700",letterSpacing:"0.5px",color:F,opacity:.5,marginBottom:"4px"},children:C.category[S]}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:F,whiteSpace:z?"normal":"nowrap",overflow:z?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:U.name[S]}),k&&e.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:u===1?a?"#2E7D32":"#FFF":f,marginTop:"4px",opacity:.9},children:rt(M,E,h)})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!h&&e.jsxs(e.Fragment,{children:[!k&&u===0&&e.jsx(Je,{onClick:n=>{n.stopPropagation(),X(!0)},style:{color:x.get("icons",d),opacity:.4,fontSize:"24px",marginRight:"15px"}}),k&&e.jsx(Qe,{onClick:n=>{n.stopPropagation(),Re()},style:{color:f,fontSize:"24px",marginRight:"15px"}}),e.jsx("div",{style:{width:"30px",height:"30px",borderRadius:"50%",border:u!==0?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:u===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:u===1&&e.jsx(we,{size:16,color:"#FFF"})})]}),h&&e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ve,{size:16,color:"#FF453A"})})]})]}),z&&e.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[e.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:a?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),U.descr[S]&&e.jsx("div",{style:{color:P,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:U.descr[S]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Y?.map((n,l)=>e.jsxs(q.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"100%",padding:"14px 16px",borderRadius:"16px",backgroundColor:a?"#FFFFFF":"rgba(255,255,255,0.05)",border:a?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:a?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[e.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:n.isDone?a?"#AEAEB2":"#636366":F,textDecoration:n.isDone?"line-through":"none"},children:n.text}),Q&&ee===l&&e.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[e.jsx(Ce,{onClick:()=>g(H=>({...H,show:!0,type:2,hId:t,gId:l,setGoals:L})),style:{fontSize:"14px",margin:"0 6px",color:x.get("icons",d),opacity:.7}}),e.jsx(je,{onClick:()=>g(H=>({...H,show:!0,type:3,hId:t,gId:l,setGoals:L})),style:{fontSize:"14px",margin:"0 6px",color:x.get("icons",d),opacity:.7}})]}),e.jsx("div",{onClick:()=>{Z(H=>!(H&&ee===l)),le(l),b(t)},children:e.jsx(Ke,{style:{fontSize:"16px",color:x.get("icons",d),opacity:.4,marginRight:"12px"}})}),e.jsx("div",{onClick:()=>L(H=>{const oe=H.map((O,Ge)=>Ge===l?{...O,isDone:!O.isDone}:O);return p.choosenHabitsGoals[t]=oe,oe}),style:{width:"24px",height:"24px",borderRadius:"8px",border:n.isDone?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:n.isDone?f:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:n.isDone&&e.jsx(we,{size:12,color:"#FFF"})})]},l))}),e.jsxs("div",{onClick:()=>g({show:!0,type:1,hId:t,gId:0,setGoals:L}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${f}66`,backgroundColor:`${f}10`},children:[e.jsx(Ye,{style:{fontSize:"12px",color:f}}),e.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:f,fontWeight:"600"},children:S===0?"Добавить цель":"Add goal"})]}),e.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:x.get("subText",d),textTransform:"uppercase",letterSpacing:"0.5px"},children:S===0?"Достижения":"Achievements"}),p.choosenHabitsAchievements[t]?.map((n,l)=>e.jsx(ct,{index:l,milestone:n,habitId:t,isNegative:h,percent:I,theme:d,fSize:j,langIndex:S},l)),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"20px"},children:[e.jsx(Ce,{onClick:()=>g(n=>({...n,show:!0,type:0,hId:t,gId:0,hInfo:o})),style:{fontSize:"18px",color:x.get("icons",d),opacity:.7}}),e.jsx(je,{onClick:()=>Pe(t),style:{fontSize:"18px",color:x.get("icons",d),opacity:.7}}),e.jsx(Ve,{style:{fontSize:"18px",color:x.get("icons",d),opacity:.7},onClick:()=>{ye()}})]}),!J&&e.jsx("div",{onClick:n=>n.stopPropagation(),style:{position:"fixed",width:"100%",height:"80%",zIndex:2,top:"86px",left:"0px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:ue.value==="dark"?"rgba(10, 10, 10, 0.85)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",textAlign:"center"},children:e.jsx("div",{style:{color:ue.value==="dark"?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:S===0?"ТОЛЬКО ДЛЯ ПРЕМИУМ":"PREMIUM USERS ONLY"})})]}),V&&e.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:a?"#FFF":x.get("background",d)},onClick:n=>n.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[e.jsx("div",{style:{color:x.get("mainText",d),fontWeight:"bold"},children:lt(E)}),e.jsx(Ze,{style:{width:"50%",color:f},min:1,max:59,value:E/6e4,valueLabelDisplay:"off",onChange:n=>{ce(n.target.value*6e4),n.stopPropagation()}}),e.jsx(he,{onClick:n=>{n.stopPropagation(),X(!1)},style:{cursor:"pointer",color:x.get("icons",d),fontSize:"24px"}}),e.jsx(be,{onClick:n=>{n.stopPropagation(),Ae(),X(!1)},style:{cursor:"pointer",color:f,fontSize:"24px"}})]})})]})}function it({text:t=["Имя","Name"],children:d,theme:g}){const[b,j]=r.useState(!0),y=g==="light"||g==="speciallight",c=p.prefs[0];return e.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[e.jsxs("div",{onClick:()=>{j(!b),ae(ke)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:y?"#1D1D1F":x.get("mainText",g)},children:t[c]}),e.jsx(q.div,{animate:{rotate:b?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(Me,{size:14,color:y?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(We,{initial:!1,children:b&&e.jsx(q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:d})})})]})}function at(t){return t===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function ae(t){p.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),p.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function rt(t,d,g){const b=g?t:d-t,j=Math.floor(b%36e5/6e4),y=Math.floor(b%6e4/1e3);return j+":"+y.toString().padStart(2,"0")}function lt(t){return Math.floor(t/6e4)+"m"}const ct=({milestone:t,index:d,habitId:g,isNegative:b,percent:j,theme:y,fSize:c,langIndex:G})=>e.jsxs("div",{style:{fontSize:"13px",color:x.get("subText",y),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ve,{size:12,color:x.get("icons",y),style:{opacity:.5}}),t[G]]});export{st as addHabitFn,mt as currentId,yt as default,lt as parsedTimeSimple,tt as removeHabitFn};
