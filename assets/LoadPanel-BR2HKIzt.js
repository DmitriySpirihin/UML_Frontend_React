import{R as a,r as y,t as j,l as S,j as t,C as r,A as o,U as k,f as v,i as M,s as T}from"./index-CzuXeBMj.js";import{M as C,a as D}from"./Main_Light-EK1TkwRU.js";import{i as L,a as P,g as U,u as $,l as A}from"./SaveHelper-CAe2wseq.js";function R(){const[e,c]=a.useState("dark"),[d,m]=a.useState(0),[l,p]=a.useState(""),[g,f]=a.useState(null),[h,x]=a.useState(!0);return y.useEffect(()=>{async function u(){try{await L();const i=typeof window<"u"?!window.Telegram?.WebApp:!0;await P({mock:i});const{user:s,languageCode:w,colorScheme:b}=U();s?(o.prefs[0]===0&&o.prefs[1]===0&&(o.prefs[0]=w==="ru"?0:1,o.prefs[1]=b==="dark"?0:1),m(o.prefs[0]),c(b==="dark"?"dark":"light"),k.Init(s.username,s.photo_url),setTimeout(()=>p(s.username),1e3),setTimeout(()=>f(s.photo_url),1e3)):(setTimeout(()=>p("guest"),1e3),setTimeout(()=>f($),1e3)),await A(),v(),M(),setTimeout(()=>x(!1),1e3),setTimeout(()=>T("MainMenu"),2600)}catch(i){console.error("Initialization error:",i),setTimeout(()=>x(!1),1e3),setTimeout(()=>T("MainMenu"),2e3)}}u()},[]),a.useEffect(()=>{const u=j.subscribe(c),i=S.subscribe(s=>m(s==="ru"?0:1));return()=>{u.unsubscribe(),i.unsubscribe()}},[]),t.jsx(t.Fragment,{children:t.jsxs("div",{style:n(e).container,children:[t.jsx("img",{src:e==="dark"?C:D,style:n(e).logo}),h&&t.jsx("div",{className:"spinner",children:t.jsx("style",{children:`.spinner {
                        margin-top: 20%;
                        border: 4px solid ${r.get("subText",e)};
                        border-top: 4px solid ${r.get("habitCardSkipped",e)};
                        border-radius: 50%;
                        width: 10vw;
                        height: 10vw;
                        animation: spinner 1.6s linear infinite;
                    }
                    @keyframes spinner {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }`})}),!h&&g&&t.jsx("img",{src:g,style:n(e).userPhoto}),t.jsx("h2",{style:n(e).mainText,children:l!==""?d===0?`Добро пожаловать в UltyMyLife ${l}`:`Welcome to UltyMyLife ${l}`:d===0?"Загружаю данные...":"Loading data..."})]})})}const n=e=>({container:{backgroundColor:r.get("background",e),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw"},logo:{width:"256px",objectFit:"contain",marginTop:"40%"},mainText:{marginTop:"10%",fontSize:"14px",color:r.get("subText",e)},userPhoto:{border:"4px solid "+r.get("border",e),boxShadow:"0px 0px 10px "+r.get("shadow",e),width:"10vw",height:"10vw",borderRadius:"50%",objectFit:"cover",marginTop:"20%"}});export{R as default};
