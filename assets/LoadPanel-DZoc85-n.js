import{R as a,r as D,t as S,l as U,j as s,C as i,v,w as k,x as P,A as o,U as n,y as C,z as M,B as A,D as E,E as L,s as b}from"./index-DqEWKYW_.js";function $(){const[e,w]=a.useState("dark"),[d,y]=a.useState(0),[l,c]=a.useState("Guest"),[p,h]=a.useState("images/Ui/Guest.jpg"),[f,x]=a.useState(!0);return D.useEffect(()=>{async function g(){try{await v();const r=typeof window<"u"?!window.Telegram?.WebApp:!0;await k({mock:r});const{user:t,languageCode:T,colorScheme:j}=P();t?(o.isFirstStart&&(o.prefs[0]=T==="ru"?0:1,o.prefs[1]=j==="dark"?0:2),n.Init(t.id,t.username,t.photo_url||"images/Ui/Guest.jpg"),await C(t.id),setTimeout(()=>c(t.username),500),setTimeout(()=>h(Array.isArray(t.photo_url)?t.photo_url[0]:t.photo_url),1e3)):(n.Init(0,o.prefs[0]===0?"гость":"guest","images/Ui/Guest.jpg"),setTimeout(()=>c("guest"),500),setTimeout(()=>h("images/Ui/Guest.jpg"),500)),n.hasPremium=!0;const m=new Date;m.setDate(m.getDate()+30),n.premiumEndDate=m,M(!1),await A(),E(),L(),setTimeout(()=>x(!1),500),setTimeout(()=>b("MainMenu"),1200)}catch(r){console.error("Initialization error:",r),setTimeout(()=>x(!1),500),setTimeout(()=>b("MainMenu"),1200)}}g()},[]),a.useEffect(()=>{const g=S.subscribe(w),r=U.subscribe(t=>y(t==="ru"?0:1));return()=>{g.unsubscribe(),r.unsubscribe()}},[]),s.jsx(s.Fragment,{children:s.jsxs("div",{style:u(e).container,children:[s.jsx("img",{src:e==="dark"?"images/Ui/Main_Dark.png":"images/Ui/Main_Light.png",style:u(e).logo}),f&&s.jsx("div",{className:"spinner",children:s.jsx("style",{children:`.spinner {
                        margin-top: 20%;
                        border: 4px solid ${i.get("subText",e)};
                        border-top: 4px solid ${i.get("habitCardSkipped",e)};
                        border-radius: 50%;
                        width: 10vw;
                        height: 10vw;
                        animation: spinner 1.6s linear infinite;
                    }
                    @keyframes spinner {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }`})}),!f&&p&&s.jsx("img",{src:p,style:u(e).userPhoto}),s.jsx("h2",{style:u(e).mainText,children:l!==""?d===0?`Добро пожаловать в UltyMyLife ${l}`:`Welcome to UltyMyLife ${l}`:d===0?"Загружаю данные...":"Loading data..."})]})})}const u=e=>({container:{backgroundColor:i.get("background",e),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw"},logo:{width:"256px",objectFit:"contain",marginTop:"40%"},mainText:{marginTop:"10%",fontSize:"14px",color:i.get("subText",e)},userPhoto:{border:"4px solid "+i.get("border",e),boxShadow:"0px 0px 10px "+i.get("shadow",e),width:"10vw",height:"10vw",borderRadius:"50%",objectFit:"cover",marginTop:"20%"}});export{$ as default};
