import{A as h,U as f,t as N,l as W,f as M,p as B,j as t,C as s,cr as L,cb as P,cj as U,bw as $,bv as E,m as F,a as H,N as K,cs as O,F as V,z as w}from"./index-BuXiURDS.js";import{r as l}from"./recharts-Bg6K2Pzo.js";import{a as Y,G as q}from"./index-BGAhx9rn.js";const J=["âš¡","ðŸ§ ","ðŸ§©","ðŸŽ¯"],z=[U,$,Y,q,E],ee=()=>{const[e,u]=l.useState("dark"),[c,i]=l.useState(h.prefs[0]),[b,p]=l.useState(h.prefs[4]),[d,x]=l.useState(0),[o,r]=l.useState(0),[g,D]=l.useState(f.hasPremium),[k,S]=l.useState([]),[T,R]=l.useState(!0),[v,A]=l.useState(0);l.useEffect(()=>{(async()=>{try{const a=await K.getMentalRecordsGlobal()||[];!a||a.length===0?S([{name:f?.name||"User",data:h.mentalRecords}]):S(a)}catch{S([{name:f?.name||"User",data:h.mentalRecords}])}finally{R(!1)}})()},[]),l.useEffect(()=>{const n=N.subscribe(u),a=W.subscribe(G=>i(G==="ru"?0:1)),y=M.subscribe(p),m=B.subscribe(D);return()=>{n.unsubscribe(),a.unsubscribe(),y.unsubscribe(),m.unsubscribe()}},[]);const C=[...k].filter(n=>{if(v===0)return!0;const a=Number(n.uid)===Number(f.id),y=f.friends&&f.friends.some(m=>Number(m.uid)===Number(n.uid));return a||y}).sort((n,a)=>{const y=n.data?.[d]?.[o]||0;return(a.data?.[d]?.[o]||0)-y});return t.jsxs("div",{style:j(e).container,children:[t.jsxs("div",{style:j(e).controlsWrapper,children:[t.jsx(I,{items:[L,P],selectedIndex:v,setSelectedIndex:A,theme:e,colorKey:"difficulty",isSecondary:!0,isTop:!0}),t.jsx(I,{items:J,selectedIndex:d,setSelectedIndex:n=>{x(n),o>3&&r(3)},theme:e,colorKey:"difficulty"}),t.jsx(I,{items:d>0?z.slice(0,-1):z,selectedIndex:o,setSelectedIndex:r,theme:e,colorKey:"difficulty",isSecondary:!0})]}),t.jsx("div",{style:j(e).listContainer,children:T?t.jsx("div",{style:j(e).loadingText,children:c===0?"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...":"Loading..."}):t.jsxs(F.div,{layout:!0,style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px",paddingBottom:"20px"},children:[t.jsx(H,{mode:"popLayout",children:C.map((n,a)=>t.jsx(Q,{theme:e,fSize:b,isUser:n.name===f.name,rank:a+1,name:n.name,score:n.data?.[d]?.[o]||0,index:a},n.name+a))}),C.length===0&&t.jsx("div",{style:{textAlign:"center",color:s.get("subText",e),marginTop:20},children:v===1?c===0?"Ð”Ñ€ÑƒÐ·ÑŒÑ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹":"No friends found":c===0?"ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…":"No records yet"})]})})]})},I=({items:e,selectedIndex:u,setSelectedIndex:c,theme:i,colorKey:b,isSecondary:p,isTop:d=!1})=>t.jsx("div",{style:{marginTop:d?"25px":0,display:"flex",backgroundColor:s.get("panel",i),padding:"2px",borderRadius:"16px",gap:"4px",justifyContent:"center",boxShadow:"inset 0 2px 5px rgba(0,0,0,0.05)"},children:e.map((x,o)=>{const r=u===o,g=s.get(b+o,i);return t.jsxs("div",{onClick:()=>c(o),style:{position:"relative",padding:p?"6px 14px":"8px 20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:[r&&t.jsx(F.div,{layoutId:p?"diff-bg":"cat-bg",style:{position:"absolute",inset:0,backgroundColor:s.get("simplePanel",i),borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:-1},transition:{type:"spring",bounce:.2,duration:.6}}),t.jsx("div",{size:p?18:22,style:{transition:"color 0.3s ease"},children:typeof x=="string"?x:t.jsx(x,{size:p?18:22,style:{color:r?d?s.get(b,i):g:s.get("subText",i)}})})]},o)})}),Q=({theme:e,fSize:u,isUser:c,rank:i,name:b,score:p,index:d})=>{const x=e==="dark",o={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{delay:d*.05,type:"spring",stiffness:300,damping:24}},exit:{opacity:0,scale:.9}};let r=null,g=s.get("mainText",e);return i===1?(r=V,g=s.get("barsColorWeight",e)):i===2?(r=w,g=s.get("icons",e)):i===3&&(r=w,g=s.get("difficulty5",e)),t.jsxs(F.div,{layout:!0,variants:o,initial:"hidden",animate:"visible",exit:"exit",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderRadius:"16px",backgroundColor:c?x?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)":x?"rgba(30, 30, 30, 0.4)":"#FFFFFF",border:c?`1px solid ${s.get("done",e)}`:"none",backdropFilter:"blur(10px)",boxShadow:x?"0 4px 6px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.05)",marginBottom:"8px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[t.jsx("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:x?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",fontWeight:"bold",color:g,fontSize:"14px"},children:r?t.jsx(r,{size:16}):i}),t.jsx("div",{style:{display:"flex",flexDirection:"column"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:u===0?"15px":"17px",fontWeight:c?"bold":"normal",color:s.get("mainText",e)},children:[b,c&&t.jsx(O,{size:10,color:s.get("light",e)})]})})]}),t.jsx("div",{style:{fontSize:u===0?"16px":"18px",fontWeight:"bold",color:s.get("done",e),fontFamily:"monospace",letterSpacing:"-0.5px"},children:p})]})},j=(e,u)=>({container:{backgroundColor:s.get("background",e),display:"flex",flexDirection:"column",alignItems:"center",width:"100vw",height:"92vh",marginTop:"110px",fontFamily:"Segoe UI"},controlsWrapper:{width:"90%",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px",marginBottom:"20px",zIndex:10},listContainer:{flex:1,width:"94%",overflowY:"scroll",padding:"0 5px",display:"flex",flexDirection:"column",scrollbarWidth:"none",msOverflowStyle:"none"},loadingText:{textAlign:"center",marginTop:"40px",color:s.get("subText",e),fontSize:"14px"}});export{ee as default};
