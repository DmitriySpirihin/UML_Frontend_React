import{r as l,bc as Te,j as h,C as I,A as _,t as Ke,l as Re,f as Fe}from"./index-BLkUZoJi.js";import{b6 as $e,av as X,aq as q,b1 as J,aY as Ne,an as le,c as z,a6 as _e,b7 as We,f as F,aV as Ge,ax as K,ay as R,at as ge,aA as ye,b8 as be,b9 as Ue,ba as Ye,aX as ce,bb as Ve,bc as ue,aZ as Xe,U as G,aB as Ze,P as He,J as te,a3 as Ie,a7 as qe,aC as Je,aD as Qe,Z as ae,a5 as ke,ab as et,aE as tt,aG as at,a9 as rt,I as U,x as Ae,aI as nt,bd as it,be as ot,bf as de,ah as Pe,X as st,Y as Se,ac as lt,ad as ct,af as D,am as ut,aw as dt,L as ft,ai as vt,b0 as pt,ao as fe,aK as mt,aL as xt,aS as ht,aU as gt,bg as yt}from"./CartesianChart-B3x1oVNI.js";import{s as L,a as T,C as bt,X as It,Y as kt}from"./YAxis-D7n-reI-.js";import{S as At,C as Pt,c as St,u as Be,a as je,b as Oe}from"./ErrorBarContext-Bl75Osfs.js";var ve=(e,t,a)=>{var r=a??e;if(!X(r))return q(r,t,0)},Bt=(e,t,a)=>{var r={},i=e.filter($e),n=e.filter(c=>c.stackId==null),s=i.reduce((c,f)=>(c[f.stackId]||(c[f.stackId]=[]),c[f.stackId].push(f),c),r),u=Object.entries(s).map(c=>{var[f,o]=c,d=o.map(y=>y.dataKey),g=ve(t,a,o[0].barSize);return{stackId:f,dataKeys:d,barSize:g}}),p=n.map(c=>{var f=[c.dataKey].filter(d=>d!=null),o=ve(t,a,c.barSize);return{stackId:void 0,dataKeys:f,barSize:o}});return[...u,...p]};function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?pe(Object(a),!0).forEach(function(r){jt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function jt(e,t,a){return(t=Ot(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ot(e){var t=Et(e,"string");return typeof t=="symbol"?t:t+""}function Et(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wt(e,t,a,r,i){var n=r.length;if(!(n<1)){var s=q(e,a,0,!0),u,p=[];if(J(r[0].barSize)){var c=!1,f=a/n,o=r.reduce((v,m)=>v+(m.barSize||0),0);o+=(n-1)*s,o>=a&&(o-=(n-1)*s,s=0),o>=a&&f>0&&(c=!0,f*=.9,o=n*f);var d=(a-o)/2>>0,g={offset:d-s,size:0};u=r.reduce((v,m)=>{var P,k={stackId:m.stackId,dataKeys:m.dataKeys,position:{offset:g.offset+g.size+s,size:c?f:(P=m.barSize)!==null&&P!==void 0?P:0}},B=[...v,k];return g=B[B.length-1].position,B},p)}else{var y=q(t,a,0,!0);a-2*y-(n-1)*s<=0&&(s=0);var x=(a-2*y-(n-1)*s)/n;x>1&&(x>>=0);var b=J(i)?Math.min(x,i):x;u=r.reduce((v,m,P)=>[...v,{stackId:m.stackId,dataKeys:m.dataKeys,position:{offset:y+(x+s)*P+(x-b)/2,size:b}}],p)}return u}}var Ct=(e,t,a,r,i,n,s)=>{var u=X(s)?t:s,p=wt(a,r,i!==n?i:n,e,u);return i!==n&&p!=null&&(p=p.map(c=>W(W({},c),{},{position:W(W({},c.position),{},{offset:c.position.offset-i/2})}))),p},Mt=(e,t)=>{var a=Ne(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:n}=i;if(n)return n.find(s=>s.key===a)}}}};function Dt(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&J(e.zIndex)?e.zIndex:t}var zt="Invariant failed";function Lt(e,t){throw new Error(zt)}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q.apply(null,arguments)}function Y(e){return l.createElement(At,Q({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Tt=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(le(t))return t;var n=le(r)||X(r);return n?t(r,i):(n||Lt(),a)}},Kt=(e,t,a)=>a,Rt=(e,t)=>t,$=z([ye,Rt],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),Ft=z([$],e=>e?.maxBarSize),$t=(e,t,a,r)=>r,Nt=z([F,ye,L,T,Kt],(e,t,a,r,i)=>t.filter(n=>e==="horizontal"?n.xAxisId===a:n.yAxisId===r).filter(n=>n.isPanorama===i).filter(n=>n.hide===!1).filter(n=>n.type==="bar")),_t=(e,t,a)=>{var r=F(e),i=L(e,t),n=T(e,t);if(!(i==null||n==null))return r==="horizontal"?ce(e,"yAxis",n,a):ce(e,"xAxis",i,a)},Wt=(e,t)=>{var a=F(e),r=L(e,t),i=T(e,t);if(!(r==null||i==null))return a==="horizontal"?ue(e,"xAxis",r):ue(e,"yAxis",i)},Gt=z([Nt,Ve,Wt],Bt),Ut=(e,t,a)=>{var r,i,n=$(e,t);if(n!=null){var s=L(e,t),u=T(e,t);if(!(s==null||u==null)){var p=F(e),c=be(e),{maxBarSize:f}=n,o=X(f)?c:f,d,g;return p==="horizontal"?(d=K(e,"xAxis",s,a),g=R(e,"xAxis",s,a)):(d=K(e,"yAxis",u,a),g=R(e,"yAxis",u,a)),(r=(i=ge(d,g,!0))!==null&&i!==void 0?i:o)!==null&&r!==void 0?r:0}}},Ee=(e,t,a)=>{var r=F(e),i=L(e,t),n=T(e,t);if(!(i==null||n==null)){var s,u;return r==="horizontal"?(s=K(e,"xAxis",i,a),u=R(e,"xAxis",i,a)):(s=K(e,"yAxis",n,a),u=R(e,"yAxis",n,a)),ge(s,u)}},Yt=z([Gt,be,Ue,Ye,Ut,Ee,Ft],Ct),Vt=(e,t,a)=>{var r=L(e,t);if(r!=null)return K(e,"xAxis",r,a)},Xt=(e,t,a)=>{var r=T(e,t);if(r!=null)return K(e,"yAxis",r,a)},Zt=(e,t,a)=>{var r=L(e,t);if(r!=null)return R(e,"xAxis",r,a)},Ht=(e,t,a)=>{var r=T(e,t);if(r!=null)return R(e,"yAxis",r,a)},qt=z([Yt,$],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),Jt=z([_t,$],Mt),Qt=z([_e,We,Vt,Xt,Zt,Ht,qt,F,Ge,Ee,Jt,$,$t],(e,t,a,r,i,n,s,u,p,c,f,o,d)=>{var{chartData:g,dataStartIndex:y,dataEndIndex:x}=p;if(!(o==null||s==null||t==null||u!=="horizontal"&&u!=="vertical"||a==null||r==null||i==null||n==null||c==null)){var{data:b}=o,v;if(b!=null&&b.length>0?v=b:v=g?.slice(y,x+1),v!=null)return Oa({layout:u,barSettings:o,pos:s,parentViewBox:t,bandSize:c,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:n,stackedData:f,displayedData:v,offset:e,cells:d,dataStartIndex:y})}}),ea=["index"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ee.apply(null,arguments)}function ta(e,t){if(e==null)return{};var a,r,i=aa(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function aa(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var we=l.createContext(void 0),ra=e=>{var t=l.useContext(we);if(t!=null)return t.stackId;if(e!=null)return Xe(e)},na=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),ia=e=>{var t=l.useContext(we);if(t!=null){var{stackId:a}=t;return"url(#".concat(na(a,e),")")}},oa=e=>{var{index:t}=e,a=ta(e,ea),r=ia(t);return l.createElement(G,ee({className:"recharts-bar-stack-layer",clipPath:r},a))},sa=["onMouseEnter","onMouseLeave","onClick"],la=["value","background","tooltipPosition"],ca=["id"],ua=["onMouseEnter","onClick","onMouseLeave"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},C.apply(null,arguments)}function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?me(Object(a),!0).forEach(function(r){da(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function da(e,t,a){return(t=fa(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fa(e){var t=va(e,"string");return typeof t=="symbol"?t:t+""}function va(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V(e,t){if(e==null)return{};var a,r,i=pa(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function pa(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var ma=e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:n}=e;return[{inactive:n,dataKey:t,type:i,color:r,value:ke(a,t),payload:e}]},xa=l.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:n,hide:s,unit:u,tooltipType:p,id:c}=e,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:ke(n,t),hide:s,type:p,color:i,unit:u,graphicalItemId:c}};return l.createElement(et,{tooltipEntrySettings:f})});function ha(e){var t=U(Pe),{data:a,dataKey:r,background:i,allOtherBarProps:n}=e,{onMouseEnter:s,onMouseLeave:u,onClick:p}=n,c=V(n,sa),f=Be(s,r,n.id),o=je(u),d=Oe(p,r,n.id);if(!i||a==null)return null;var g=st(i);return l.createElement(ae,{zIndex:Dt(i,te.barBackground)},a.map((y,x)=>{var{value:b,background:v,tooltipPosition:m}=y,P=V(y,la);if(!v)return null;var k=f(y,x),B=o(y,x),A=d(y,x),E=S(S(S(S(S({option:i,isActive:String(x)===t},P),{},{fill:"#eee"},v),g),Se(c,y,x)),{},{onMouseEnter:k,onMouseLeave:B,onClick:A,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return l.createElement(Y,C({key:"background-bar-".concat(x)},E))}))}function ga(e){var{showLabels:t,children:a,rects:r}=e,i=r?.map(n=>{var s={x:n.x,y:n.y,width:n.width,lowerWidth:n.width,upperWidth:n.width,height:n.height};return S(S({},s),{},{value:n.value,payload:n.payload,parentViewBox:n.parentViewBox,viewBox:s,fill:n.fill})});return l.createElement(dt,{value:t?i:void 0},a)}function ya(e){var{shape:t,activeBar:a,baseProps:r,entry:i,index:n,dataKey:s}=e,u=U(Pe),p=U(vt),c=a&&String(n)===u&&(p==null||s===p),f=c?a:t;return c?l.createElement(ae,{zIndex:te.activeBar},l.createElement(Y,C({},r,{name:String(r.name)},i,{isActive:c,option:f,index:n,dataKey:s}))):l.createElement(Y,C({},r,{name:String(r.name)},i,{isActive:c,option:f,index:n,dataKey:s}))}function ba(e){var{shape:t,baseProps:a,entry:r,index:i,dataKey:n}=e;return l.createElement(Y,C({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:i,dataKey:n}))}function Ia(e){var t,{data:a,props:r}=e,i=(t=ft(r))!==null&&t!==void 0?t:{},{id:n}=i,s=V(i,ca),{shape:u,dataKey:p,activeBar:c}=r,{onMouseEnter:f,onClick:o,onMouseLeave:d}=r,g=V(r,ua),y=Be(f,p,n),x=je(d),b=Oe(o,p,n);return a?l.createElement(l.Fragment,null,a.map((v,m)=>l.createElement(oa,C({index:m,key:"rectangle-".concat(v?.x,"-").concat(v?.y,"-").concat(v?.value,"-").concat(m),className:"recharts-bar-rectangle"},Se(g,v,m),{onMouseEnter:y(v,m),onMouseLeave:x(v,m),onClick:b(v,m)}),c?l.createElement(ya,{shape:u,activeBar:c,baseProps:s,entry:v,index:m,dataKey:p}):l.createElement(ba,{shape:u,baseProps:s,entry:v,index:m,dataKey:p})))):null}function ka(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:i,isAnimationActive:n,animationBegin:s,animationDuration:u,animationEasing:p,onAnimationEnd:c,onAnimationStart:f}=t,o=a.current,d=lt(t,"recharts-bar-"),[g,y]=l.useState(!1),x=!g,b=l.useCallback(()=>{typeof c=="function"&&c(),y(!1)},[c]),v=l.useCallback(()=>{typeof f=="function"&&f(),y(!0)},[f]);return l.createElement(ga,{showLabels:x,rects:r},l.createElement(ct,{animationId:d,begin:s,duration:u,isActive:n,easing:p,onAnimationEnd:b,onAnimationStart:v,key:d},m=>{var P=m===1?r:r?.map((k,B)=>{var A=o&&o[B];if(A)return S(S({},k),{},{x:D(A.x,k.x,m),y:D(A.y,k.y,m),width:D(A.width,k.width,m),height:D(A.height,k.height,m)});if(i==="horizontal"){var E=D(0,k.height,m),w=D(k.stackedBarStart,k.y,m);return S(S({},k),{},{y:w,height:E})}var j=D(0,k.width,m),O=D(k.stackedBarStart,k.x,m);return S(S({},k),{},{width:j,x:O})});return m>0&&(a.current=P??null),P==null?null:l.createElement(G,null,l.createElement(Ia,{props:t,data:P}))}),l.createElement(ut,{label:t.label}),t.children)}function Aa(e){var t=l.useRef(null);return l.createElement(ka,{previousRectanglesRef:t,props:e})}var Ce=0,Pa=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Ae(e,t)}};class Sa extends l.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:i,xAxisId:n,yAxisId:s,needClip:u,background:p,id:c}=this.props;if(t||a==null)return null;var f=Te("recharts-bar",i),o=c;return l.createElement(G,{className:f,id:c},u&&l.createElement("defs",null,l.createElement(nt,{clipPathId:o,xAxisId:n,yAxisId:s})),l.createElement(G,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(o,")"):void 0},l.createElement(ha,{data:a,dataKey:r,background:p,allOtherBarProps:this.props}),l.createElement(Aa,this.props)))}}var Ba={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Ce,xAxisId:0,yAxisId:0,zIndex:te.bar};function ja(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:n,activeBar:s,animationBegin:u,animationDuration:p,animationEasing:c,isAnimationActive:f}=e,{needClip:o}=tt(t,a),d=at(),g=Ie(),y=rt(e.children,Pt),x=U(m=>Qt(m,e.id,g,y));if(d!=="vertical"&&d!=="horizontal")return null;var b,v=x?.[0];return v==null||v.height==null||v.width==null?b=0:b=d==="vertical"?v.height/2:v.width/2,l.createElement(St,{xAxisId:t,yAxisId:a,data:x,dataPointFormatter:Pa,errorBarOffset:b},l.createElement(Sa,C({},e,{layout:d,needClip:o,data:x,xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:n,activeBar:s,animationBegin:u,animationDuration:p,animationEasing:c,isAnimationActive:f})))}function Oa(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:i,bandSize:n,xAxis:s,yAxis:u,xAxisTicks:p,yAxisTicks:c,stackedData:f,displayedData:o,offset:d,cells:g,parentViewBox:y,dataStartIndex:x}=e,b=t==="horizontal"?u:s,v=f?b.scale.domain():null,m=it({numericAxis:b}),P=b.scale(m);return o.map((k,B)=>{var A,E,w,j,O,Z;if(f){var re=f[B+x];if(re==null)return null;A=ot(re,v)}else A=Ae(k,a),Array.isArray(A)||(A=[m,A]);var M=Tt(r,Ce)(A[1],B);if(t==="horizontal"){var H,[ne,N]=[u.scale(A[0]),u.scale(A[1])];E=de({axis:s,ticks:p,bandSize:n,offset:i.offset,entry:k,index:B}),w=(H=N??ne)!==null&&H!==void 0?H:void 0,j=i.size;var ie=ne-N;if(O=pt(ie)?0:ie,Z={x:E,y:d.top,width:j,height:d.height},Math.abs(M)>0&&Math.abs(O)<Math.abs(M)){var oe=fe(O||M)*(Math.abs(M)-Math.abs(O));w-=oe,O+=oe}}else{var[se,De]=[s.scale(A[0]),s.scale(A[1])];if(E=se,w=de({axis:u,ticks:c,bandSize:n,offset:i.offset,entry:k,index:B}),j=De-se,O=i.size,Z={x:d.left,y:w,width:d.width,height:O},Math.abs(M)>0&&Math.abs(j)<Math.abs(M)){var ze=fe(j||M)*(Math.abs(M)-Math.abs(j));j+=ze}}if(E==null||w==null||j==null||O==null)return null;var Le=S(S({},k),{},{stackedBarStart:P,x:E,y:w,width:j,height:O,value:f?A:A[1],payload:k,background:Z,tooltipPosition:{x:E+j/2,y:w+O/2},parentViewBox:y},g&&g[B]&&g[B].props);return Le}).filter(Boolean)}function Ea(e){var t=He(e,Ba),a=ra(t.stackId),r=Ie();return l.createElement(qe,{id:t.id,type:"bar"},i=>l.createElement(l.Fragment,null,l.createElement(Je,{legendPayload:ma(t)}),l.createElement(xa,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),l.createElement(Qe,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),l.createElement(ae,{zIndex:t.zIndex},l.createElement(ja,C({},t,{id:i})))))}var Me=l.memo(Ea,Ze);Me.displayName="Bar";var wa=["axis","item"],Ca=l.forwardRef((e,t)=>l.createElement(mt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wa,tooltipPayloadSearcher:xt,categoricalChartProps:e,ref:t}));const xe=e=>{if(!e||e<=0)return"0:00";const t=Math.floor(e/6e4),a=Math.floor(t/60),r=t%60;return`${a}:${r.toString().padStart(2,"0")}`},Ma=e=>e/(1e3*60*60),Da=({data:e=[],theme:t="dark",textColor:a="#94a3b8",linesColor:r="#334155",backgroundColor:i="#0f172a",height:n=220})=>{if(!Array.isArray(e)||e.length===0)return h.jsx("div",{style:{height:`${n}px`,display:"flex",alignItems:"center",justifyContent:"center",color:a,backgroundColor:i,fontFamily:"Segoe UI, system-ui, sans-serif",fontSize:"14px",borderRadius:"12px"},children:"No data"});const s={1:I.get("difficulty3",t),2:I.get("difficulty2",t),3:I.get("difficulty1",t),4:I.get("difficulty0",t),5:I.get("difficulty5",t)},u=e.map(o=>({date:o.date,ms:o.ms||0,mood:Math.max(1,Math.min(5,Math.round(o.mood||3))),hours:Ma(o.ms||0)})),p=Math.max(...u.map(o=>o.hours),1),c=o=>s[o]||s[3],f=({active:o,payload:d,label:g})=>{if(o&&d&&d.length){const y=d[0].payload,x=y?.ms||0,b=y?.mood||0,v=b?"★".repeat(b)+"☆".repeat(5-b):"—";return h.jsxs("div",{style:{backgroundColor:I.get("panel",t)||"#1e293b",padding:"10px",borderRadius:"8px",border:`1px solid ${r}`,boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontFamily:"Segoe UI",fontSize:"13px",color:I.get("mainText",t)||"#f1f5f9"},children:[h.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:g}),h.jsxs("div",{children:["Sleep: ",xe(x)]}),h.jsxs("div",{style:{marginTop:"4px",color:c(b)},children:["Mood: ",v]})]})}return null};return h.jsx("div",{style:{width:"100%",height:`${n}px`,backgroundColor:i,borderRadius:"12px",padding:"8px 4px",fontFamily:"Segoe UI, system-ui, sans-serif"},children:h.jsx(ht,{width:"100%",height:"100%",children:h.jsxs(Ca,{data:u,margin:{top:15,right:10,left:-10,bottom:5},children:[h.jsx(bt,{stroke:r,strokeOpacity:.2,vertical:!1}),h.jsx(It,{dataKey:"date",tick:{fill:a,fontSize:11},axisLine:!1,tickLine:!1,minTickGap:20}),h.jsx(kt,{domain:[0,Math.ceil(p)],tick:{fill:a,fontSize:10},axisLine:!1,tickLine:!1,width:30,tickFormatter:o=>`${Math.round(o)}h`}),h.jsx(gt,{content:h.jsx(f,{}),cursor:{fill:"rgba(100,100,100,0.1)"}}),h.jsx(Me,{dataKey:"hours",radius:[4,4,0,0],barSize:28,fill:"#6366f1",shape:o=>{const{x:d,y:g,width:y,height:x,index:b}=o,v=u[b]?.mood||3,m=c(v);return h.jsx("rect",{x:d,y:g,width:y,height:x,fill:m,rx:4,ry:4})},children:h.jsx(yt,{dataKey:"ms",position:"top",fontSize:11,fill:a,formatter:o=>xe(o)})})]})})})},he=[["месяц","month"],["пол года","half year"],["год","year"]],za=[28,180,360],La=e=>Math.floor(e/6e4),Ta=e=>{const t=La(e),a=Math.floor(t/60),r=t%60;return a>0?`${a}h ${r}m`:`${r}m`},Ka=(e,t)=>new Date(e).toLocaleDateString(t===0?"ru-RU":"en-US",{day:"2-digit",month:"short"}),Ra=({theme:e,langIndex:t,fSize:a,periodIndex:r,setPeriodIndex:i})=>h.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"8px 0"},children:he.map((n,s)=>h.jsxs("span",{onClick:()=>i(s),style:{padding:"6px 10px",cursor:"pointer",fontSize:a===0?"11px":"13px",fontWeight:r===s?"600":"400",color:r===s?I.get("mainText",e):I.get("subText",e),opacity:r===s?1:.8,transition:"all 0.2s ease"},children:[n[t],s<he.length-1&&h.jsx("span",{style:{margin:"0 8px",color:I.get("border",e),fontSize:a===0?"12px":"14px"},children:"|"})]},s))}),Ga=()=>{const[e,t]=l.useState("dark"),[a,r]=l.useState(_.prefs[0]),[i,n]=l.useState(_.prefs[4]),[s,u]=l.useState(0);l.useEffect(()=>{const o=Ke.subscribe(t),d=Re.subscribe(y=>r(y==="ru"?0:1)),g=Fe.subscribe(n);return()=>{o.unsubscribe(),d.unsubscribe(),g.unsubscribe()}},[]);const p=l.useMemo(()=>_.sleepingLog?Object.entries(_.sleepingLog).map(([o,d])=>({date:o,durationMs:d.duration||0,mood:d.mood||0,note:d.note||""})).sort((o,d)=>new Date(o.date)-new Date(d.date)):[],[]),c=l.useMemo(()=>{if(p.length===0)return[];const o=new Date;return o.setDate(o.getDate()-za[s]),p.filter(d=>new Date(d.date)>=o)},[p,s]),f=l.useMemo(()=>c.map(o=>({date:o.date.split("-").slice(1).reverse().join("."),ms:o.durationMs,mood:o.mood||3})),[c]);return h.jsxs("div",{style:Fa(e).container,children:[h.jsx("div",{style:{fontSize:i===0?"14px":"16px",fontWeight:"bold",fontFamily:"Segoe UI",color:I.get("mainText",e),marginBottom:"8px"},children:a===0?"Продолжительность сна":"Sleep Duration"}),h.jsx("div",{style:{width:"100%",height:"220px",marginBottom:"16px"},children:h.jsx(Da,{data:f,theme:e,textColor:I.get("subText",e),linesColor:I.get("border",e),backgroundColor:I.get("background",e)})}),h.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginBottom:"12px"},children:h.jsx(Ra,{theme:e,langIndex:a,fSize:i,periodIndex:s,setPeriodIndex:u})}),h.jsx("div",{style:{width:"90%",height:"48%",overflowY:"auto",padding:"8px",backgroundColor:I.get("panel",e),borderRadius:"12px",border:`1px solid ${I.get("border",e)}`,scrollbarWidth:"thin",scrollbarColor:`${I.get("icons",e)} ${I.get("background",e)}`},children:c.length===0?h.jsx("div",{style:{color:I.get("subText",e),fontSize:i===0?"13px":"15px",textAlign:"center"},children:a===0?"Нет данных за выбранный период":"No data for selected period"}):c.slice().reverse().map((o,d)=>h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 12px",borderBottom:`1px solid ${I.get("border",e)}`},children:[h.jsx("span",{style:{color:I.get("mainText",e),fontSize:i===0?"13px":"15px"},children:Ka(o.date,a)}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("span",{style:{color:I.get("icons",e),fontSize:i===0?"13px":"15px",fontWeight:"500"},children:Ta(o.durationMs)}),o.mood>0&&h.jsxs("span",{style:{color:I.get("subText",e),fontSize:i===0?"12px":"14px"},children:["★".repeat(o.mood),"☆".repeat(5-o.mood)]})]})]},`${o.date}-${d}`))})]})},Fa=e=>({container:{backgroundColor:I.get("background",e),display:"flex",position:"absolute",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",top:"14vh",width:"100vw",fontFamily:"Segoe UI"}});export{Ga as default};
