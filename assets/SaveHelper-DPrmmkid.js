import{a8 as kr,a9 as ho,A as hi}from"./index-Cg-_c7eF.js";var Gt;function yo(e){return{lang:e?.lang??Gt?.lang,message:e?.message,abortEarly:e?.abortEarly??Gt?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Gt?.abortPipeEarly}}var yi;function _i(e){return yi?.get(e)}var gi;function vi(e){return gi?.get(e)}var bi;function mi(e,t){return bi?.get(e)?.get(t)}function wi(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function ie(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=o?.expected??e.expects??null,u=o?.received??wi(s),c={kind:e.kind,type:e.type,input:s,expected:i,received:u,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},p=e.kind==="schema",d=o?.message??e.message??mi(e.reference,c.lang)??(p?vi(c.lang):null)??r.message??_i(c.lang);d!==void 0&&(c.message=typeof d=="function"?d(c):d),p&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function ee(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},yo())}}}function _o(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Ai(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var rn=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function go(e){return{kind:"transformation",type:"transform",reference:go,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Si(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function An(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Sn(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function vo(){return{kind:"schema",type:"any",reference:vo,expects:"any",async:!1,get"~standard"(){return ee(this)},"~run"(e){return e.typed=!0,e}}}function bo(e,t){return{kind:"schema",type:"array",reference:bo,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return ee(this)},"~run"(n,r){const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let s=0;s<o.length;s++){const i=o[s],u=this.item["~run"]({value:i},r);if(u.issues){const c={type:"array",origin:"value",input:o,key:s,value:i};for(const p of u.issues)p.path?p.path.unshift(c):p.path=[c],n.issues?.push(p);if(n.issues||(n.issues=u.issues),r.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}}else ie(this,"type",n,r);return n}}}function on(e){return{kind:"schema",type:"boolean",reference:on,expects:"boolean",async:!1,message:e,get"~standard"(){return ee(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:ie(this,"type",t,n),t}}}function mo(e){return{kind:"schema",type:"date",reference:mo,expects:"Date",async:!1,message:e,get"~standard"(){return ee(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?ie(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:ie(this,"type",t,n),t}}}function Cn(e){return{kind:"schema",type:"function",reference:Cn,expects:"Function",async:!1,message:e,get"~standard"(){return ee(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:ie(this,"type",t,n),t}}}function wo(e,t){return{kind:"schema",type:"instance",reference:wo,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return ee(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:ie(this,"type",n,r),n}}}function se(e,t){return{kind:"schema",type:"loose_object",reference:se,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return ee(this)},"~run"(n,r){const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const s in this.entries){const i=this.entries[s];if(s in o||(i.type==="exact_optional"||i.type==="optional"||i.type==="nullish")&&i.default!==void 0){const u=s in o?o[s]:An(i),c=i["~run"]({value:u},r);if(c.issues){const p={type:"object",origin:"value",input:o,key:s,value:u};for(const d of c.issues)d.path?d.path.unshift(p):d.path=[p],n.issues?.push(d);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[s]=c.value}else if(i.fallback!==void 0)n.value[s]=Si(i);else if(i.type!=="exact_optional"&&i.type!=="optional"&&i.type!=="nullish"&&(ie(this,"key",n,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:o,key:s,value:o[s]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const s in o)_o(o,s)&&!(s in this.entries)&&(n.value[s]=o[s])}else ie(this,"type",n,r);return n}}}function Qe(e,t){return{kind:"schema",type:"nullish",reference:Qe,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return ee(this)},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=An(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function gt(e){return{kind:"schema",type:"number",reference:gt,expects:"number",async:!1,message:e,get"~standard"(){return ee(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:ie(this,"type",t,n),t}}}function vt(e,t){return{kind:"schema",type:"optional",reference:vt,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return ee(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=An(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Ao(e,t,n){return{kind:"schema",type:"record",reference:Ao,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return ee(this)},"~run"(r,o){const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const i in s)if(_o(s,i)){const u=s[i],c=this.key["~run"]({value:i},o);if(c.issues){const d={type:"object",origin:"key",input:s,key:i,value:u};for(const _ of c.issues)_.path=[d],r.issues?.push(_);if(r.issues||(r.issues=c.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:u},o);if(p.issues){const d={type:"object",origin:"value",input:s,key:i,value:u};for(const _ of p.issues)_.path?_.path.unshift(d):_.path=[d],r.issues?.push(_);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!c.typed||!p.typed)&&(r.typed=!1),c.typed&&(r.value[c.value]=p.value)}}else ie(this,"type",r,o);return r}}}function J(e){return{kind:"schema",type:"string",reference:J,expects:"string",async:!1,message:e,get"~standard"(){return ee(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:ie(this,"type",t,n),t}}}function Er(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function So(e,t){return{kind:"schema",type:"union",reference:So,expects:Ai(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return ee(this)},"~run"(n,r){let o,s,i;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)s?s.push(c):s=[c];else{o=c;break}else i?i.push(c):i=[c]}if(o)return o;if(s){if(s.length===1)return s[0];ie(this,"type",n,r,{issues:Er(s)}),n.typed=!0}else{if(i?.length===1)return i[0];ie(this,"type",n,r,{issues:Er(i)})}return n}}}function Co(){return{kind:"schema",type:"unknown",reference:Co,expects:"unknown",async:!1,get"~standard"(){return ee(this)},"~run"(e){return e.typed=!0,e}}}function De(e,t,n){const r=e["~run"]({value:t},yo(n));if(r.issues)throw new rn(r.issues);return r.value}function _t(...e){return{...e[0],pipe:e,get"~standard"(){return ee(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}var Ci=Object.defineProperty,ki=(e,t,n)=>t in e?Ci(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sn=(e,t,n)=>ki(e,typeof t!="symbol"?t+"":t,n),Ei=Object.defineProperty,xi=(e,t,n)=>t in e?Ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mi=(e,t,n)=>xi(e,t+"",n);function Pi(e,t){return n=>n instanceof e&&n.type===t}function ko(e,t){t||(t=[]);const n=Symbol(e);class r extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),Mi(this,"type",n),this.name=e}}return Object.defineProperty(r,"name",{value:e}),[r,Pi(r,n)]}const[Oi,Ii]=ko("CancelledError","Promise was canceled"),[Ti]=ko("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),Eo=Symbol("Resolved");function xr(e){return Array.isArray(e)&&e[0]===Eo}function $i(e){return[Eo,e]}function Mr(e,t){return e.reject=t.reject,e.abort=t.abort,e}let z=class an extends Promise{constructor(t,n){let r,o;super((s,i)=>{let u,c;typeof t=="function"?(u=t,c=n):c=t;const p=[],d=A=>(...X)=>{const D=A(...X);return p.forEach(Ke=>Ke()),D},_=new AbortController,{signal:h}=_;o=A=>{!h.aborted&&_.abort(A)};const I=()=>h.reason,H=A=>{const X=()=>{A(I())};h.addEventListener("abort",X,!0);const D=()=>{h.removeEventListener("abort",X,!0)};return p.push(D),D},ye=d(A=>{s(A),o($i(A))});r=d(A=>{i(A),o(A)}),c||(c={});const{abortSignal:C,rejectOnAbort:F=!0}=c;if(C)if(C.aborted){const{reason:A}=C;if(F)return r(A);o(A)}else{const A=()=>{o(C.reason)};C.addEventListener("abort",A),p.push(()=>{C.removeEventListener("abort",A)})}F&&H(i);const{timeout:O}=c;if(O){const A=setTimeout(()=>{o(new Ti(O))},O);p.push(()=>{clearTimeout(A)})}const E=()=>h.aborted,R=()=>xr(I()),M=()=>{const A=I();return xr(A)?A[1]:void 0};try{const A=u&&u(ye,r,{abortReason:I,abortSignal:h,isAborted:E,isResolved:R,onAborted:H,onResolved:X=>H(()=>{R()&&X(M())}),resolved:M,throwIfAborted(){if(E())throw I()}});A instanceof Promise&&A.catch(r)}catch(A){r(A)}}),sn(this,"abort"),sn(this,"reject"),this.abort=o,this.reject=r}static fn(t,n){return new an(async(r,o,s)=>{try{r(await t(s))}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new an((n,r)=>{r(t)})}cancel(){this.abort(new Oi)}catch(t){return this.then(void 0,t)}finally(t){return Mr(super.finally(t),this)}then(t,n){return Mr(super.then(t,n),this)}};function Pr(e,t){return e.resolve=t.resolve,e}let Li=class un extends z{constructor(t,n){let r,o;typeof t=="function"?(r=t,o=n):o=t;let s;super((i,u,c)=>{s=i,r&&r(i,u,c)},o),sn(this,"resolve"),this.resolve=s}static fn(t,n){return new un((r,o,s)=>{try{Promise.resolve(t(s)).then(r,o)}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new un((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return Pr(super.finally(t),this)}then(t,n){return Pr(super.then(t,n),this)}};function xo(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Di(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`)}function Mo(e){return`tapps/${e}`}function fe(e,t){sessionStorage.setItem(Mo(e),JSON.stringify(t))}function re(e){const t=sessionStorage.getItem(Mo(e));try{return t?JSON.parse(t):void 0}catch{}}function At(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function Po(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:o}=t,s=o===void 0?!0:o,i=typeof s=="boolean"?()=>s:s,u=(c,p,...d)=>{if(p||i()){const _="font-weight:bold;padding:0 5px;border-radius:100px",[h,I,H]={log:["#0089c3","white","INFO"],error:["#ff0000F0","white","ERR"],warn:["#D38E15","white","WARN"]}[c];console[c](`%c${H} ${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c %c${e}`,`${_};background-color:${h};color:${I}`,"",`${_};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...d)}};return[["log","forceLog"],["warn","forceWarn"],["error","forceError"]].reduce((c,[p,d])=>(c[p]=u.bind(void 0,p,!1),c[d]=u.bind(void 0,p,!0),c),{})}function Oo(e){return{lang:e?.lang??void 0,message:e?.message,abortEarly:e?.abortEarly??void 0,abortPipeEarly:e?.abortPipeEarly??void 0}}function Bi(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function ji(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function ae(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=o?.expected??e.expects??null,u=o?.received??ji(s),c={kind:e.kind,type:e.type,input:s,expected:i,received:u,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},p=e.kind==="schema",d=o?.message??e.message??Bi(e.reference,c.lang)??(p?(c.lang,void 0):null)??r.message??(c.lang,void 0);d&&(c.message=typeof d=="function"?d(c):d),p&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function le(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Oo())}}}function Io(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Fi(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var Ri=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function To(e,t){return{kind:"validation",type:"check",reference:To,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&ae(this,"input",n,r),n}}}function $o(e){return{kind:"validation",type:"integer",reference:$o,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&ae(this,"integer",t,n),t}}}function ve(e){return{kind:"transformation",type:"transform",reference:ve,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Lo(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function qi(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Je(e){return{kind:"schema",type:"boolean",reference:Je,expects:"boolean",async:!1,message:e,get"~standard"(){return le(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:ae(this,"type",t,n),t}}}function Do(e){return{kind:"schema",type:"date",reference:Do,expects:"Date",async:!1,message:e,get"~standard"(){return le(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?ae(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:ae(this,"type",t,n),t}}}function Bo(e,t){return{kind:"schema",type:"instance",reference:Bo,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return le(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:ae(this,"type",n,r),n}}}function kn(e){return{kind:"schema",type:"lazy",reference:kn,expects:"unknown",async:!1,getter:e,get"~standard"(){return le(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function Fe(e,t){return{kind:"schema",type:"loose_object",reference:Fe,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return le(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const u=this.entries[i];if(i in s||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=i in s?s[i]:Lo(u),p=u["~run"]({value:c},r);if(p.issues){const d={type:"object",origin:"value",input:s,key:i,value:c};for(const _ of p.issues)_.path?_.path.unshift(d):_.path=[d],(o=n.issues)==null||o.push(_);if(n.issues||(n.issues=p.issues),r.abortEarly){n.typed=!1;break}}p.typed||(n.typed=!1),n.value[i]=p.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(ae(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)Io(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else ae(this,"type",n,r);return n}}}function St(e){return{kind:"schema",type:"number",reference:St,expects:"number",async:!1,message:e,get"~standard"(){return le(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:ae(this,"type",t,n),t}}}function q(e,t){return{kind:"schema",type:"optional",reference:q,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return le(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Lo(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function jo(e,t,n){return{kind:"schema",type:"record",reference:jo,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return le(this)},"~run"(r,o){var s,i;const u=r.value;if(u&&typeof u=="object"){r.typed=!0,r.value={};for(const c in u)if(Io(u,c)){const p=u[c],d=this.key["~run"]({value:c},o);if(d.issues){const h={type:"object",origin:"key",input:u,key:c,value:p};for(const I of d.issues)I.path=[h],(s=r.issues)==null||s.push(I);if(r.issues||(r.issues=d.issues),o.abortEarly){r.typed=!1;break}}const _=this.value["~run"]({value:p},o);if(_.issues){const h={type:"object",origin:"value",input:u,key:c,value:p};for(const I of _.issues)I.path?I.path.unshift(h):I.path=[h],(i=r.issues)==null||i.push(I);if(r.issues||(r.issues=_.issues),o.abortEarly){r.typed=!1;break}}(!d.typed||!_.typed)&&(r.typed=!1),d.typed&&(r.value[d.value]=_.value)}}else ae(this,"type",r,o);return r}}}function $(e){return{kind:"schema",type:"string",reference:$,expects:"string",async:!1,message:e,get"~standard"(){return le(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:ae(this,"type",t,n),t}}}function Or(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function En(e,t){return{kind:"schema",type:"union",reference:En,expects:Fi(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return le(this)},"~run"(n,r){let o,s,i;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)s?s.push(c):s=[c];else{o=c;break}else i?i.push(c):i=[c]}if(o)return o;if(s){if(s.length===1)return s[0];ae(this,"type",n,r,{issues:Or(s)}),n.typed=!0}else{if(i?.length===1)return i[0];ae(this,"type",n,r,{issues:Or(i)})}return n}}}function Fo(){return{kind:"schema",type:"unknown",reference:Fo,expects:"unknown",async:!1,get"~standard"(){return le(this)},"~run"(e){return e.typed=!0,e}}}function Ro(e,t,n){const r=e["~run"]({value:t},Oo(n));if(r.issues)throw new Ri(r.issues);return r.value}function be(...e){return{...e[0],pipe:e,get"~standard"(){return le(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Ni(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Ui(e){return Object.entries(e).reduce((t,[n,r])=>(t[Ni(n)]=r,t),{})}function cn(e){const t=Ui(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(cn):cn(r))}return t}function xn(e){return ve(t=>e?cn(t):t)}function qo(e){return t=>be(e,xn(t))}function Wi(e){return(t,n)=>Ro(be(e,xn(n)),t)}function Mn(){return ve(JSON.parse)}function Pn(e){const t=qo(e);return n=>be($(),Mn(),t(n))}function No(e){return ve(t=>{const n={};return new URLSearchParams(t).forEach((r,o)=>{const s=n[o];Array.isArray(s)?s.push(r):s===void 0?n[o]=r:n[o]=[s,r]}),Ro(e,n)})}function Uo(e){return t=>be(En([$(),Bo(URLSearchParams)]),No(e),xn(t))}const Ir=q(kn(()=>Ji())),Ki=Fe({id:St(),photo_url:q($()),type:$(),title:$(),username:q($())}),Gi=Fe({added_to_attachment_menu:q(Je()),allows_write_to_pm:q(Je()),first_name:$(),id:St(),is_bot:q(Je()),is_premium:q(Je()),last_name:q($()),language_code:q($()),photo_url:q($()),username:q($())}),Hi=Fe({auth_date:be($(),ve(e=>new Date(Number(e)*1e3)),Do()),can_send_after:q(be($(),ve(Number),$o())),chat:q(kn(()=>Qi())),chat_type:q($()),chat_instance:q($()),hash:$(),query_id:q($()),receiver:Ir,start_param:q($()),signature:$(),user:Ir}),Qi=Pn(Ki),Ji=Pn(Gi),Vi=Uo(Hi);function Re(e){return/^#[\da-f]{6}$/i.test(e)}function zi(e){return/^#[\da-f]{3}$/i.test(e)}function Xi(e){const t=e.replace(/\s/g,"").toLowerCase();if(Re(t))return t;if(zi(t)){let r="#";for(let o=0;o<3;o+=1)r+=t[1+o].repeat(2);return r}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((r,o)=>r+parseInt(o,10).toString(16).padStart(2,"0"),"#")}const Wo=qo(jo($(),be(En([$(),St()]),ve(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),To(Re)))),Ht=q(be($(),ve(e=>e==="1"))),Tr=Pn(Wo()),Yi=Fe({tgWebAppBotInline:Ht,tgWebAppData:q(Vi()),tgWebAppDefaultColors:q(Tr()),tgWebAppFullscreen:Ht,tgWebAppPlatform:$(),tgWebAppShowSettings:Ht,tgWebAppStartParam:q($()),tgWebAppThemeParams:Tr(),tgWebAppVersion:$()}),Ko=Uo(Yi),Go=Wi(Ko()),Zi=Fe({eventType:$(),eventData:q(Fo())});function ea(e){try{return qi(Ko(),e)}catch{return!1}}function ta(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}let $e;function na(e,t){$e&&$e.set(e,t)||t()}function Ze(e){if($e)return e();$e=new Map;try{e()}finally{$e.forEach(t=>t()),$e=void 0}}function qe(e,t){t||(t={});const n=t.equals||Object.is;let r=[],o=e;const s=p=>{if(!n(o,p)){const d=o;o=p,na(c,()=>{[...r].forEach(([_,h])=>{_(p,d),h&&u(_,!0)})})}};function i(p){const d=typeof p!="object"?{once:p}:p;return{once:d.once||!1,signal:d.signal||!1}}const u=(p,d)=>{const _=i(d),h=r.findIndex(([I,H])=>I===p&&H.once===_.once&&H.signal===_.signal);h>=0&&r.splice(h,1)},c=Object.assign(function(){return ra(c),o},{destroy(){r=[]},set:s,reset(){s(e)},sub(p,d){return r.push([p,i(d)]),()=>u(p,d)},unsub:u,unsubAll(){r=r.filter(p=>p[1].signal)}});return c}const Ve=[];function ra(e){Ve.length&&Ve[Ve.length-1].add(e)}function oa(e,t){let n=new Set,r;function o(){return r||(r=qe(i(),t))}function s(){o().set(i())}function i(){n.forEach(p=>{p.unsub(s,{signal:!0})});const u=new Set;let c;Ve.push(u);try{c=e()}finally{Ve.pop()}return u.forEach(p=>{p.sub(s,{signal:!0})}),n=u,c}return Object.assign(function(){return o()()},{destroy(){o().destroy()},sub(...u){return o().sub(...u)},unsub(...u){o().unsub(...u)},unsubAll(...u){o().unsubAll(...u)}})}var sa=Object.defineProperty,ia=(e,t,n)=>t in e?sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fn=(e,t,n)=>ia(e,typeof t!="symbol"?t+"":t,n);function Ho(e,t){return n=>n instanceof e&&n.type===t}function Y(e,t){t||(t=[]);const n=Symbol(e);class r extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),fn(this,"type",n),this.name=e}}return Object.defineProperty(r,"name",{value:e}),[r,Ho(r,n)]}function aa(e,t,n){const r=Symbol(e);class o extends Y(e,n)[0]{constructor(...i){super(...i),fn(this,"data"),fn(this,"type",r),this.data=t(...i)}}return Object.defineProperty(o,"name",{value:e}),[o,Ho(o,r)]}function Qo(e){return Sn(se({TelegramWebviewProxy:se({postEvent:Cn()})}),e)}function ua(){try{return window.self!==window.top}catch{return!0}}function ca(e,t){const n=new Map,r=ta(),o=(s,i,u)=>{u||(u=!1);const c=n.get(s)||new Map;n.set(s,c);const p=c.get(i)||[];c.set(i,p);const d=p.findIndex(_=>_[1]===u);if(d>=0&&(r.off(s,p[d][0]),p.splice(d,1),!p.length&&(c.delete(i),!c.size))){const _=n.size;n.delete(s),_&&!n.size&&t()}};return[function(s,i,u){!n.size&&e();const c=()=>{o(s,i,u)},p=(...h)=>{u&&c(),s==="*"?i(h):i(...h)};r.on(s,p);const d=n.get(s)||new Map;n.set(s,d);const _=d.get(i)||[];return d.set(i,_),_.push([p,u||!1]),c},o,r.emit,function(){const s=n.size;r.all.clear(),n.clear(),s&&t()}]}function Qt(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let fa=!1;const et=qe(Po("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return fa}}));function Jo(e,t,n,r){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n,set:r})}function $r(e,t){const n=e[t];Jo(e,t,()=>n,r=>{Object.entries(r).forEach(([o,s])=>{n[o]=s})})}function Lr(e,t,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n})}function Jt(e,t,n){const r=e[t],o=[n];typeof r=="function"&&o.push(r);const s=(...u)=>{o.forEach(c=>{c(...u)})},i=Object.assign((...u)=>{s(...u)},{unwrap(){const{length:u}=o;if(u===1){delete e[t];return}if(u===2){Lr(e,t,o[1]);return}o.unshift(1),Lr(e,t,s)}});Jo(e,t,()=>i,u=>{o.push(u)})}const la={clipboard_text_received:se({req_id:J(),data:Qe(J())}),custom_method_invoked:se({req_id:J(),result:vt(Co()),error:vt(J())}),popup_closed:Qe(se({button_id:Qe(J(),()=>{})}),{}),viewport_changed:se({height:gt(),width:Qe(gt(),()=>window.innerWidth),is_state_stable:on(),is_expanded:on()}),theme_changed:se({theme_params:Wo()})};function Dr(e){if(e.source!==window.parent)return;let t;try{t=De(_t(J(),Mn(),Zi),e.data)}catch{return}const{eventType:n,eventData:r}=t,o=la[n];let s;try{s=o?De(o,r):r}catch(i){return et().forceError([`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,i)}pa(n,s)}const[V,st,pa]=ca(()=>{const e=window;!e.TelegramGameProxy&&(e.TelegramGameProxy={}),Jt(e.TelegramGameProxy,"receiveEvent",Qt),$r(e,"TelegramGameProxy"),!e.Telegram&&(e.Telegram={}),!e.Telegram.WebView&&(e.Telegram.WebView={}),Jt(e.Telegram.WebView,"receiveEvent",Qt),$r(e.Telegram,"WebView"),Jt(e,"TelegramGameProxy_receiveEvent",Qt),window.addEventListener("message",Dr)},()=>{[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{const t=window;let n=[void 0,t];for(const s of e)if(n=[n[1],n[1][s]],!n[1])return;const[r,o]=n;"unwrap"in o&&(o.unwrap(),r&&r!==t&&!Object.keys(r).length&&delete t[e[0]])}),window.removeEventListener("message",Dr)}),[da]=Y("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[ha]=Y("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]),[ya]=aa("LaunchParamsRetrieveError",e=>({errors:e}),e=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment","","Collected errors:",...e.map(([t,n])=>`Source: ${t} / ${n instanceof Error?n.message:String(n)}`)].join(`
`)]);Y("InvalidLaunchParamsError",(e,t)=>[`Invalid value for launch params: ${e}`,{cause:t}]);const[_a]=Y("UnknownEnvError"),[ga]=Y("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]),va=qe((...e)=>{try{window.parent.postMessage(...e)}catch(t){t instanceof SyntaxError?et().forceError("Unable to call window.parent.postMessage due to incorrectly configured target origin. Use the setTargetOrigin method to allow this origin to receive events",t):et().forceError(t)}}),ba=(...e)=>va()(...e),ma=qe("https://web.telegram.org");function On(e,t){et().log("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(ua())return ba(r,ma());if(Qo(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(Sn(se({external:se({notify:Cn()})}),n)){n.external.notify(r);return}throw new _a}function In(e,t,n){n||(n={});const{capture:r}=n,[o,s]=At();return new z(i=>{(Array.isArray(t)?t:[t]).forEach(u=>{o(V(u,c=>{(!r||(Array.isArray(t)?r({event:u,payload:c}):r(c)))&&i(c)}))}),(n.postEvent||On)(e,n.params)},n).finally(s)}const Br="launchParams";function jr(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function wa(){const e=[];for(const[t,n]of[[()=>jr(window.location.href),"window.location.href"],[()=>{const r=performance.getEntriesByType("navigation")[0];return r&&jr(r.name)},"performance navigation entries"],[()=>re(Br),"local storage"]]){const r=t();if(!r){e.push([n,new Error("Source is empty")]);continue}if(ea(r))return fe(Br,r),r;try{Go(r)}catch(o){e.push([n,o])}}throw new ya(e)}function Vo(e){return Go(wa())}function Fr(e,t){try{return Vo(),!0}catch{return!1}return z.fn(async n=>{if(Qo(window))return!0;try{return await In("web_app_request_theme","theme_changed",n),!0}catch{return!1}},{timeout:100})}function Aa(e){return({req_id:t})=>t===e}function Rr(e){return e.split(".").map(Number)}function Sa(e,t){const n=Rr(e),r=Rr(t),o=Math.max(n.length,r.length);for(let s=0;s<o;s+=1){const i=n[s]||0,u=r[s]||0;if(i!==u)return i>u?1:-1}return 0}function Q(e,t){return Sa(e,t)<=0}function Be(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return Q("6.4",n);if(t==="try_browser")return Q("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return Q("6.9",n);if(e==="web_app_close"&&t==="return_back")return Q("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return Q("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return Q("6.1",t);case"web_app_open_popup":return Q("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return Q("6.4",t);case"web_app_switch_inline_query":return Q("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return Q("6.9",t);case"web_app_setup_settings_button":return Q("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return Q("7.2",t);case"web_app_setup_swipe_behavior":return Q("7.7",t);case"web_app_share_to_story":return Q("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return Q("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return Q("8.0",t);case"web_app_device_storage_clear":case"web_app_device_storage_get_key":case"web_app_device_storage_save_key":case"web_app_secure_storage_clear":case"web_app_secure_storage_get_key":case"web_app_secure_storage_restore_key":case"web_app_secure_storage_save_key":return Q("9.0",t);case"web_app_hide_keyboard":return Q("9.1",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function Ca(e,t){t||(t="strict");const n=typeof t=="function"?t:r=>{const{method:o,version:s}=r,i="param"in r?new ha(o,r.param,s):new da(o,s);if(t==="strict")throw i;return et().forceWarn(i.message)};return(r,o)=>Be(r,e)?r==="web_app_set_header_color"&&Sn(se({color:vo()}),o)&&!Be(r,"color",e)?n({version:e,method:r,param:"color"}):On(r,o):n({version:e,method:r})}function ka(e,t,n,r){return In("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:n},capture:Aa(n)}).then(({result:o,error:s})=>{if(s)throw new ga(s);return o})}function Ea(){return performance.getEntriesByType("navigation")[0]}function ue(){const e=Ea();return!!e&&e.type==="reload"}function Ne(e,t){return qe(e,t)}function W(e,t){return oa(e,t)}function L(e,t){const n=Ne(e,t);return[n,W(n)]}let xa=!1;const ln=qe(Po("Bridge",{bgColor:"forestgreen",textColor:"white",shouldLog(){return xa}})),Vt=Ne(0),zo=Ne(On),[qr,Ct]=L({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),Se=W(()=>Ct().tgWebAppVersion);function Ma(e){e||(e={});const{postEvent:t}=e,n=e.launchParams||Vo();qr.set(n),zo.set(typeof t=="function"?t:Ca(n.tgWebAppVersion)),ln().log("The package was configured. Launch params:",qr())}function Pa(){return Vt.set(Vt()+1),Vt().toString()}function it(e,t,n){return ka(e,t,Pa(),{...n||{},postEvent:T})}const Z=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=T),In(e,t,n)),T=(e,t)=>zo()(e,t);function Me(e){return[e]}const[Tn]=Y("CSSVarsBoundError","CSS variables are already bound"),[Xo]=Y("NotAvailableError",Me);Y("InvalidEnvError",Me);const[He]=Y("FunctionNotAvailableError",Me),[ge]=Y("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[Oa]=Y("ConcurrentCallError",Me),[Ia]=Y("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[Ta]=Y("AccessDeniedError",Me),[$a]=Y("FullscreenFailedError",Me);Y("ShareMessageError",Me);const[$n]=Y("UnknownThemeParamsKeyError",e=>[`Unknown theme params key passed: ${e}`]);function Nr(){return typeof window>"u"}function Ln(e,t,n){n||(n={});const{isSupported:r,isMounted:o,isMounting:s,component:i,supports:u}=n||{},c=`${i?`${i}.`:""}${e}()`,p=r?Array.isArray(r)||typeof r=="object"&&"any"in r?r:[r]:void 0;function d(O){if(u){const E=u[O];return Be(E[0],E[1],Se())}return!0}function _(){if(!p)return;function O(M){return typeof M=="function"?M():Be(M,Se())?void 0:`it is unsupported in Mini Apps version ${Se()}`}const E=Array.isArray(p)?p:p.any,R=E.map(O).filter(Boolean);return Array.isArray(p)?R[0]:R.length===E.length?R[R.length-1]:void 0}function h(...O){for(const E in u)if(u[E][2](...O)&&!d(E))return`option ${E} is not supported in Mini Apps version ${Se()}`}let I;if(u){I={};for(const O in u)I[O]=W(()=>d(O))}const H=W(()=>!_()),ye=W(()=>Se()!=="0.0"),C=W(()=>!o||o()),F=W(()=>Fr()&&!Nr()&&ye()&&H()&&C());return Object.assign((...O)=>{const E=`Unable to call the ${c} ${i?"method":"function"}:`;if(Nr()||!Fr())throw new He(`${E} it can't be called outside Mini Apps`);if(!ye())throw new He(`${E} the SDK was not initialized. Use the SDK init() function`);const R=_();if(R)throw new He(`${E} ${R}`);const M=h(...O);if(M)throw new He(`${E} ${M}`);if(!C()){const A=s&&s()?"mounting. Wait for the mount completion":`unmounted. Use the ${i}.mount() method`;throw new He(`${E} the component is ${A}`)}return t(...O)},t,{isAvailable:F,ifAvailable(...O){return F()?[!0,t(...O)]:[!1]}},p?{isSupported:H}:{},I?{supports:I}:{})}function kt(e,t){return t||(t={}),(n,r,o,s)=>Ln(n,r,{...t,isSupported:o||t.isSupported,supports:s,component:e})}function me(e,t,n){return kt(e,{isSupported:n,isMounted:t})}function ce(e,t){return kt(e,{isSupported:t})}const Dn="web_app_setup_back_button",Yo="back_button_pressed",Et="backButton",[Ur]=L(!1),[pn]=L(!1),Zo=me(Et,pn,Dn),Bn=ce(Et,Dn);Zo("hide",()=>{jn(!1)});Bn("mount",()=>{pn()||(jn(ue()&&re(Et)||!1),pn.set(!0))});function jn(e){e!==Ur()&&(T(Dn,{is_visible:e}),fe(Et,e),Ur.set(e))}Bn("onClick",e=>V(Yo,e));Bn("offClick",e=>{st(Yo,e)});Zo("show",()=>{jn(!0)});function oe(e,t,n){n||(n={});const{promise:r,error:o}=n,[s,i]=r?[r,W(r)]:L(),[u,c]=o?[o,W(o)]:L();return[Object.assign((...p)=>{if(s()){const _=new Oa(t);return u.set(_),z.reject(_)}Ze(()=>{s.set(e(...p)),u.set(void 0)});let d;return s().catch(_=>{throw d=_,_}).finally(()=>{Ze(()=>{s.set(void 0),u.set(d)})})},e),[s,i,W(()=>!!s())],[u,c]]}function at(e,t,n){const[r,...o]=oe(t,`The ${e} component is already mounting`),[s,i]=L(!1);return[(...u)=>s()?z.resolve():r(...u).then(c=>{Ze(()=>{s.set(!0),n(c)})}),...o,[s,i]]}const[es]=L({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),Wr="web_app_biometry_get_info",La=Ln("requestBiometry",e=>Z(Wr,"biometry_info_received",e),{isSupported:Wr});function ts(e){if(!Ii(e))throw e}function ns(e){const t=e();t&&t.catch(ts).cancel()}const tt="biometry",Fn="web_app_biometry_request_auth",rs="biometry_info_received",Da=e=>{xt(Rn(e))};function os(){throw new Xo("Biometry is not available")}function Rn(e){let t=!1,n=!1,r="",o=!1,s="",i=!1;return e.available&&(t=!0,n=e.token_saved,r=e.device_id,o=e.access_requested,s=e.type,i=e.access_granted),{available:t,tokenSaved:n,deviceId:r,type:s,accessGranted:i,accessRequested:o}}const[Ba,ja,Fa,ss]=at(tt,e=>{const t=ue()&&re(tt);return t?z.resolve(t):La({abortSignal:e}).then(Rn)},e=>{V(rs,Da),xt(e)}),is=ce(tt,Fn),qn=me(tt,ss[0],Fn);is("mount",Ba);const[,bf,mf]=ja,[,wf]=Fa,[Af,Sf]=ss,[Ra,qa,Na]=oe(e=>z.fn(async t=>{const n=es();n.available||os();const r=await Z(Fn,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:o}=r;return typeof o=="string"&&xt({...n,token:o}),r},e),"Biometry authentication is already in progress");qn("authenticate",Ra);const[,Cf,kf]=qa,[,Ef]=Na;is("openSettings",()=>{T("web_app_biometry_open_settings")});const[Ua,Wa,Ka]=oe(e=>z.fn(async t=>{const n=await Z("web_app_biometry_request_access",rs,{...e,...t,params:{reason:(e||{}).reason||""}}).then(Rn);return n.available||os(),xt(n),n.accessGranted},e),"Biometry access request is already in progress");qn("requestAccess",Ua);const[,xf,Mf]=Wa,[,Pf]=Ka;function xt(e){es.set(e),fe(tt,e)}qn("updateToken",e=>(e||(e={}),Z("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status)));function Mt(e,t){return kt(e,{isMounted:t})}const we=kt,Pt="closingBehavior",[Kr]=L(!1),[Gr,Ga]=L(!1),as=Mt(Pt,Ga),Ha=we(Pt);as("disableConfirmation",()=>{Nn(!1)});as("enableConfirmation",()=>{Nn(!0)});Ha("mount",()=>{Gr()||(Nn(ue()&&re(Pt)||!1),Gr.set(!0))});function Nn(e){e!==Kr()&&(T("web_app_setup_closing_behavior",{need_confirmation:e}),fe(Pt,e),Kr.set(e))}const Qa="web_app_invoke_custom_method",ut=ce("cloudStorage",Qa),Ja=ut("deleteItem",(e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?it("deleteStorageValues",{keys:n},t).then():z.resolve()});function Va(e,t){const n=Array.isArray(e)?e:[e];return n.length?it("getStorageValues",{keys:n},t).then(r=>{const o={...n.reduce((s,i)=>(s[i]="",s),{}),...De(Ao(J(),J()),r)};return typeof e=="string"?o[e]:o}):z.resolve(Array.isArray(e)?{}:"")}const bt=ut("getItem",Va),za=ut("getKeys",e=>it("getStorageKeys",{},e).then(t=>De(bo(J()),t))),Le=ut("setItem",(e,t,n)=>it("saveStorageValue",{key:e,value:t},n).then());ut("clear",e=>za(e).then(Ja));const Ot="web_app_trigger_haptic_feedback",Un=ce("hapticFeedback",Ot);Un("impactOccurred",e=>{T(Ot,{type:"impact",impact_style:e})});Un("notificationOccurred",e=>{T(Ot,{type:"notification",notification_type:e})});Un("selectionChanged",()=>{T(Ot,{type:"selection_change"})});const us="web_app_open_invoice",Xa=ce("invoice",us);function Ya(e,t,n){let r;if(t==="url"){const{hostname:o,pathname:s}=new URL(e,window.location.href);if(o!=="t.me")throw new ge(`Link has unexpected hostname: ${o}`);const i=s.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!i)throw new ge('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=i}else r=e,n=t;return Z(us,"invoice_closed",{...n,params:{slug:r},capture:o=>r===o.slug}).then(o=>o.status)}const[Za,eu,tu]=oe(Ya,"Invoice is already opened");Xa("open",Za);const[,Of,If]=eu,[,Tf]=tu,ze="locationManager",cs="web_app_check_location",Hr="web_app_open_location_settings",dn=Ne({available:!1,accessGranted:!1,accessRequested:!1});function nu(e){let t=!1,n,r;return e.available&&(t=!0,n=e.access_requested,r=e.access_granted),{available:t,accessGranted:r||!1,accessRequested:n||!1}}const[ru,ou,su,fs]=at(ze,e=>{const t=ue()&&re(ze);return t?z.resolve(t):Z("web_app_check_location","location_checked",e).then(nu)},e=>{dn.set(e),fe(ze,e)}),ls=ce(ze,cs),iu=me(ze,fs[0],cs);ls("mount",ru);const[,$f,Lf]=ou,[,Df]=su,[Bf,jf]=fs,[au,uu,cu]=oe(e=>Z("web_app_request_location","location_requested",e).then(t=>{if(!t.available)throw dn.set({...dn(),available:!1}),new Xo("Location data tracking is not available");const{available:n,...r}=t;return r}),"Location request is currently in progress");iu("requestLocation",au);const[,Ff,Rf]=uu,[,qf]=cu;ls("openSettings",()=>{T(Hr)},Hr);function Wn(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=r)}return t}function fu(e){const t=Xi(e);return Math.sqrt([.299,.587,.114].reduce((n,r,o)=>{const s=parseInt(t.slice(1+o*2,1+(o+1)*2),16);return n+s*s*r},0))<120}const[zt]=L(!1),[ke,ct]=L({});function Kn(e){return W(()=>ke()[e])}const ps=Kn("button_color"),lu=Kn("button_text_color"),pu=Kn("secondary_bg_color"),Xe=Ne({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),du=W(()=>{const e=Xe();return{...e,backgroundColor:e.backgroundColor||ps()||"#2481cc",textColor:e.textColor||lu()||"#ffffff"}}),[Qr,hu]=L(!1),yu="web_app_setup_main_button",ds="main_button_pressed",It="mainButton",Gn=we(It),_u=Mt(It,hu);Gn("mount",()=>{if(!Qr()){const e=ue()&&re(It);e&&Xe.set(e),Qr.set(!0)}});Gn("onClick",e=>V(ds,e));Gn("offClick",e=>{st(ds,e)});_u("setParams",e=>{Xe.set({...Xe(),...Wn(e)}),fe(It,Xe());const t=du();t.text&&T(yu,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})});function Hn(e,t){document.documentElement.style.setProperty(e,t)}function Qn(e){document.documentElement.style.removeProperty(e)}const je="themeParams",hs="theme_changed",ys=we(je),_s=({theme_params:e})=>{ke.set(e),fe(je,e)},[gu,gs,vu,vs]=at(je,e=>z.resolve(ue()&&re(je)||Ct().tgWebAppThemeParams||{}),e=>{V(hs,_s),ke.set(e)}),bu=Mt(je,vs[0]);bu("bindCssVars",e=>{if(zt())throw new Tn;e||(e=r=>`--tg-theme-${Di(r)}`);function t(r){Object.entries(ke()).forEach(([o,s])=>{s&&r(o,s)})}function n(){t((r,o)=>{Hn(e(r),o)})}return n(),ke.sub(n),zt.set(!0),()=>{t(Qn),ke.unsub(n),zt.set(!1)}});const mu=ys("mount",gu);gs[2];gs[1];vu[1];const[Jr,Nf]=vs,wu=ys("mountSync",()=>{if(!Jr()){const e=ue()&&re(je)||Ct().tgWebAppThemeParams||{};V(hs,_s),Ze(()=>{ke.set(e),Jr.set(!0)})}});function bs(e){return W(()=>Tt(e()))}function Tt(e){return Re(e)?e:ct()[e]}const[nt,Au]=L("bg_color"),Jn=bs(nt),[rt,Su]=L("bottom_bar_bg_color"),Vn=W(()=>{const e=rt();return Re(e)?e:ct()[e]||pu()}),[ot,Cu]=L("bg_color"),ms=bs(ot),[Xt,ku]=L(!1),Eu=W(()=>{const e=Jn();return e?fu(e):!1}),[$t,xu]=L(!0),ws=W(()=>({backgroundColor:nt(),bottomBarColor:rt(),headerColor:ot(),isActive:$t()})),mt="web_app_set_background_color",wt="web_app_set_bottom_bar_color",Ce="web_app_set_header_color",zn="visibility_changed",xe="miniApp",Xn={any:[mt,wt,Ce]},Mu=W(()=>Xn.any.some(e=>Be(e,Se()))),Yn=e=>{$t.set(e.is_visible),Dt()},Zn=e=>{[[ot,Ce],[nt,mt],[rt,wt]].forEach(([t,n])=>{const r=t();if(!Re(r)&&(n!==Ce||r!=="bg_color"&&r!=="secondary_bg_color")){const o=e[r];o&&T(n,{color:o})}})},[Pu,As,Ou,Ss]=at(xe,e=>mu(e).then(()=>ue()&&re(xe)||void 0),e=>{er.ifAvailable(e?e.backgroundColor:"bg_color"),tr.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),nr.ifAvailable(e?e.headerColor:"bg_color"),$t.set(e?e.isActive:!0),V(zn,Yn),ct.sub(Zn)}),Cs=we(xe),ks=ce(xe,Xn),Lt=me(xe,Ss[0],Xn),Iu=Lt("bindCssVars",e=>{if(Xt())throw new Tn;const[t,n]=At();function r(o,s){function i(){Hn(o,s()||null)}i(),t(s.sub(i),Qn.bind(null,o))}return e||(e=o=>`--tg-${xo(o)}`),r(e("bgColor"),Jn),r(e("bottomBarColor"),Vn),r(e("headerColor"),ms),t(()=>{Xt.set(!1)}),Xt.set(!0),n}),Tu=Cs("close",e=>{T("web_app_close",{return_back:e})}),$u=ks("mount",Pu),Lu=As[2],Es=As[1],Du=Ou[1],[hn,Bu]=Ss,ju=ks("mountSync",()=>{if(!hn()){wu();const e=ue()&&re(xe)||void 0;er.ifAvailable(e?e.backgroundColor:"bg_color"),tr.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),nr.ifAvailable(e?e.headerColor:"bg_color"),V(zn,Yn),ct.sub(Zn),Ze(()=>{$t.set(e?e.isActive:!0),hn.set(!0)})}}),Fu=Cs("ready",()=>{T("web_app_ready")});function Dt(){fe(xe,ws())}const er=Lt("setBackgroundColor",e=>{if(e===nt())return;const t=Tt(e);if(!t)throw new $n(e);T(mt,{color:t}),nt.set(e),Dt()},mt),tr=Lt("setBottomBarColor",e=>{if(e===rt())return;const t=Tt(e);if(!t)throw new $n(e);T(wt,{color:t}),rt.set(e),Dt()},wt),nr=Lt("setHeaderColor",e=>{if(e!==ot()){if(e==="bg_color"||e==="secondary_bg_color")T(Ce,{color_key:e});else{const t=Tt(e);if(!t)throw new $n(e);T(Ce,{color:t})}ot.set(e),Dt()}},Ce,{rgb:[Ce,"color",Re]});function Ru(){ns(Es),st(zn,Yn),ct.unsub(Zn),hn.set(!1)}const Vr=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Au,backgroundColorRGB:Jn,bindCssVars:Iu,bottomBarColor:Su,bottomBarColorRGB:Vn,close:Tu,headerColor:Cu,headerColorRGB:ms,isActive:xu,isCssVarsBound:ku,isDark:Eu,isMounted:Bu,isMounting:Lu,isSupported:Mu,mount:$u,mountError:Du,mountPromise:Es,mountSync:ju,ready:Fu,setBackgroundColor:er,setBottomBarColor:tr,setHeaderColor:nr,state:ws,unmount:Ru},Symbol.toStringTag,{value:"Module"}));function qu(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];if(n.length>64)throw new ge(`Invalid title: ${n}`);if(!t||t.length>256)throw new ge(`Invalid message: ${t}`);if(r.length>3)throw new ge(`Invalid buttons count: ${r.length}`);return{title:n,message:t,buttons:r.length?r.map((o,s)=>{const i=o.id||"";if(i.length>64)throw new ge(`Button with index ${s} has invalid id: ${i}`);if(!o.type||o.type==="default"||o.type==="destructive"){const u=o.text.trim();if(!u||u.length>64)throw new ge(`Button with index ${s} has invalid text: ${u}`);return{type:o.type,text:u,id:i}}return{type:o.type,id:i}}):[{type:"close",id:""}]}}const xs="web_app_open_popup",Ms=ce("popup",xs),[Ps,rr,Os]=oe(e=>Z(xs,"popup_closed",{...e,params:qu(e)}).then(({button_id:t})=>t===void 0?null:t),"A popup is already opened");Ms("open",Ps);rr[1];rr[2];Os[1];Ms("show",Ps);const[,Uf,Wf]=rr,[,Kf]=Os,Is="web_app_close_scan_qr_popup",Ts="web_app_open_scan_qr_popup",Nu="scan_qr_popup_closed",Uu="qr_text_received",$s=ce("qrScanner",Ts);$s("close",()=>{T(Is),ns(Qu)});function Wu(e){e||(e={});const{onCaptured:t,text:n,capture:r}=e,[,o]=At(V(Nu,()=>{s.resolve()}),V(Uu,i=>{t?t(i.data):(!r||r(i.data))&&(s.resolve(i.data),T(Is))})),s=new Li(e);return(e.postEvent||T)(Ts,{text:n}),z.resolve(s).catch(ts).finally(o)}const[Ku,Gu,Hu]=oe(Wu,"The QR Scanner is already opened");$s("open",Ku);const[,Qu,Gf]=Gu,[,Hf]=Hu,Ye=Ne({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),Ju=W(()=>{const e=Ye();return{...e,backgroundColor:e.backgroundColor||Vn()||"#000000",textColor:e.textColor||ps()||"#2481cc"}}),[zr,Vu]=L(!1),or="web_app_setup_secondary_button",Ls="secondary_button_pressed",Bt="secondaryButton",sr=ce(Bt,or),zu=me(Bt,Vu,or);sr("mount",()=>{if(!zr()){const e=ue()&&re(Bt);e&&Ye.set(e),zr.set(!0)}});sr("onClick",e=>V(Ls,e));sr("offClick",e=>{st(Ls,e)});zu("setParams",e=>{Ye.set({...Ye(),...Wn(e)}),fe(Bt,Ye());const t=Ju();t.text&&T(or,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})});const ir="web_app_setup_settings_button",Ds="settings_button_pressed",jt="settingsButton",[Xr]=L(!1),[yn]=L(!1),ar=ce(jt,ir),Bs=me(jt,yn,ir);Bs("hide",()=>{ur(!1)});ar("mount",()=>{yn()||(ur(ue()&&re(jt)||!1),yn.set(!0))});function ur(e){e!==Xr()&&(T(ir,{is_visible:e}),fe(jt,e),Xr.set(e))}ar("onClick",e=>V(Ds,e));ar("offClick",e=>{st(Ds,e)});Bs("show",()=>{ur(!0)});const cr="web_app_setup_swipe_behavior",Ft="swipeBehavior",[_n]=L(!1),[Yr]=L(!0),Xu=ce(Ft,cr),js=me(Ft,_n,cr);js("disableVertical",()=>{fr(!1)});js("enableVertical",()=>{fr(!0)});Xu("mount",()=>{_n()||(fr(ue()&&re(Ft)||!1,!0),_n.set(!0))});function fr(e,t){(e!==Yr()||t)&&(T(cr,{allow_vertical_swipe:e}),fe(Ft,e),Yr.set(e))}const Pe="viewport",Fs="fullscreen_changed",Rs="safe_area_changed",qs="content_safe_area_changed",Ns="viewport_changed",Us=we(Pe),Zr={left:0,top:0,bottom:0,right:0};function Yt(e){return Math.max(e,0)}const[Zt,Yu]=L({contentSafeAreaInsets:Zr,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:Zr,stableHeight:0,width:0});function Ue(e){return W(()=>Yu()[e])}const Zu=Ue("height"),ec=Ue("stableHeight"),tc=Ue("width");function We(e){const{height:t,stableHeight:n,width:r}=e;Zt.set({...Zt(),...Wn({...e,height:t?Yt(t):void 0,width:r?Yt(r):void 0,stableHeight:n?Yt(n):void 0})}),fe(Pe,Zt())}function nc(){return re(Pe)}function Rt(e){return W(()=>Ws()[e])}const Ws=Ue("contentSafeAreaInsets"),rc=Rt("bottom"),oc=Rt("left"),sc=Rt("right"),ic=Rt("top");function qt(e){return W(()=>Ks()[e])}const Ks=Ue("safeAreaInsets"),ac=qt("bottom"),uc=qt("left"),cc=qt("right"),fc=qt("top"),Gs="web_app_request_safe_area",Hs=ce(Pe,Gs),eo=Hs("requestContentSafeAreaInsets",e=>Z("web_app_request_content_safe_area",qs,e));function lc(e){return Z("web_app_request_viewport",Ns,e)}const to=Hs("requestSafeAreaInsets",e=>Z(Gs,Rs,e)),pc=e=>{const{height:t}=e;We({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},dc=e=>{We({isFullscreen:e.is_fullscreen})},hc=e=>{We({safeAreaInsets:e})},yc=e=>{We({contentSafeAreaInsets:e})},[_c,gc,vc,bc]=at(Pe,e=>{const t=ue()&&nc();return t?z.resolve(t):z.fn(async n=>{const r=await z.all([to.isAvailable()?to(n):Ks(),eo.isAvailable()?eo(n):Ws()]),o=Ct(),s={contentSafeAreaInsets:r[1],isFullscreen:!!o.tgWebAppFullscreen,safeAreaInsets:r[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(o.tgWebAppPlatform)){const i=window;return{...s,height:i.innerHeight,isExpanded:!0,stableHeight:i.innerHeight,width:i.innerWidth}}return lc(n).then(i=>({...s,height:i.height,isExpanded:i.is_expanded,stableHeight:i.is_state_stable?i.height:0,width:i.width}))},e)},e=>{V(Ns,pc),V(Fs,dc),V(Rs,hc),V(qs,yc),We(e)});Us("mount",_c);const[,Qf,Jf]=gc,[,Vf]=vc,[Qs,zf]=bc,mc=Mt(Pe,Qs),[en]=L(!1);mc("bindCssVars",e=>{if(en())throw new Tn;e||(e=n=>`--tg-viewport-${xo(n)}`);const t=[["height",Zu],["stableHeight",ec],["width",tc],["safeAreaInsetTop",fc],["safeAreaInsetBottom",ac],["safeAreaInsetLeft",uc],["safeAreaInsetRight",cc],["contentSafeAreaInsetTop",ic],["contentSafeAreaInsetBottom",rc],["contentSafeAreaInsetLeft",oc],["contentSafeAreaInsetRight",sc]].reduce((n,[r,o])=>{const s=e(r);if(s){const i=()=>{Hn(s,`${o()}px`)};n.push([i,o.sub(i),s])}return n},[]);return t.forEach(n=>{n[0]()}),en.set(!0),()=>{t.forEach(n=>{n[1](),Qn(n[2])}),en.set(!1)}});Us("expand",()=>{T("web_app_expand")});const Js="web_app_request_fullscreen",wc=me(Pe,Qs,Js),Ac=Ue("isFullscreen"),[Sc]=L(),[Cc]=L();function Vs(e,t){return wc(e,oe(n=>Z(t?Js:"web_app_exit_fullscreen",[Fs,"fullscreen_failed"],n).then(r=>{if("error"in r&&r.error!=="ALREADY_FULLSCREEN")throw new $a(r.error);const o="is_fullscreen"in r?r.is_fullscreen:!0;o!==Ac()&&We({isFullscreen:o})}),"Fullscreen mode change is already being requested",{promise:Sc,error:Cc})[0])}Vs("requestFullscreen",!0);Vs("exitFullscreen");const kc="web_app_request_emoji_status_access",[Xf,Ec,xc]=oe(e=>Z(kc,"emoji_status_access_requested",e).then(t=>t.status),"Emoji status access request is already in progress"),[,Yf,Zf]=Ec,[,el]=xc,Mc="web_app_set_emoji_status",[tl,Pc,Oc]=oe((e,t)=>Z(Mc,["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(n=>{if(n&&"error"in n)throw new Ia(n.error)}),"Emoji status set request is currently in progress"),[,nl,rl]=Pc,[,ol]=Oc,Ic="web_app_check_home_screen",[sl,Tc,$c]=oe(e=>Z(Ic,"home_screen_checked",e).then(t=>t.status||"unknown"),"Check home screen status request is currently in progress"),[,il,al]=Tc,[,ul]=$c,Lc=we();Lc("openLink",(e,t)=>{if(typeof e=="string")try{e=new URL(e)}catch(n){throw new ge(`"${e.toString()}" is invalid URL`,n)}t||(t={}),T("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})});const no="web_app_open_tg_link",Dc=we(),Bc=Dc("openTelegramLink",e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new ge(`"${t}" is invalid URL`);if(!Be(no,Se())){window.location.href=t;return}e=new URL(e),T(no,{path_full:e.pathname+e.search})}),jc=we();jc("shareURL",(e,t)=>{Bc("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});function Fc(e,t){return new z({abortSignal:t,timeout:e}).catch(()=>{})}const zs="web_app_request_phone",[Rc,qc,Nc]=oe(e=>Z(zs,"phone_requested",e).then(t=>t.status),"Phone access request is currently in progress"),Uc=Ln("requestPhoneAccess",Rc,{isSupported:zs}),[,cl,fl]=qc,[,ll]=Nc;async function ro(e){const t=De(J(),await it("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3}));return{raw:t,parsed:De(_t(So([J(),wo(URLSearchParams)]),No(se({contact:_t(J(),Mn(),se({user_id:gt(),phone_number:J(),first_name:J(),last_name:vt(J())})),auth_date:_t(J(),go(n=>new Date(Number(n)*1e3)),mo()),hash:J()}))),t)}}const[pl,Wc,Kc]=oe(e=>new z(async(t,n,r)=>{try{return t(await ro(r))}catch(s){if(s instanceof rn)throw s}if(await Uc(r)!=="sent")throw new Ta("User denied access");let o=50;for(;!r.isAborted();){try{return t(await ro(r))}catch(s){if(s instanceof rn)throw s}await Fc(o),o+=50}},e),"Contact is already being requested"),[,dl,hl]=Wc,[,yl]=Kc,Gc="web_app_request_write_access",[_l,Hc,Qc]=oe(e=>Z(Gc,"write_access_requested",e).then(t=>t.status),"Write access request is currently in progress"),[,gl,vl]=Hc,[,bl]=Qc;function Jc(e){Ma(e);const[t,n]=At(V("reload_iframe",()=>{ln().log("Received a request to reload the page"),T("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:r=!0}={};if(r){const o=document.createElement("style");o.id="telegram-custom-styles",document.head.appendChild(o),t(V("set_custom_style",s=>{o.innerHTML=s}),()=>{document.head.removeChild(o)})}return T("iframe_ready",{reload_supported:!0}),ln().log("The package was initialized"),n}const Vc="data:image/jpeg;base64,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",gn=(e,t)=>t.some(n=>e instanceof n);let oo,so;function zc(){return oo||(oo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xc(){return so||(so=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vn=new WeakMap,tn=new WeakMap,Nt=new WeakMap;function Yc(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{n(Ee(e.result)),o()},i=()=>{r(e.error),o()};e.addEventListener("success",s),e.addEventListener("error",i)});return Nt.set(t,e),t}function Zc(e){if(vn.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{n(),o()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});vn.set(e,t)}let bn={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return vn.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ee(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Xs(e){bn=e(bn)}function ef(e){return Xc().includes(e)?function(...t){return e.apply(mn(this),t),Ee(this.request)}:function(...t){return Ee(e.apply(mn(this),t))}}function tf(e){return typeof e=="function"?ef(e):(e instanceof IDBTransaction&&Zc(e),gn(e,zc())?new Proxy(e,bn):e)}function Ee(e){if(e instanceof IDBRequest)return Yc(e);if(tn.has(e))return tn.get(e);const t=tf(e);return t!==e&&(tn.set(e,t),Nt.set(t,e)),t}const mn=e=>Nt.get(e);function nf(e,t,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const i=indexedDB.open(e,t),u=Ee(i);return r&&i.addEventListener("upgradeneeded",c=>{r(Ee(i.result),c.oldVersion,c.newVersion,Ee(i.transaction),c)}),n&&i.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),o&&c.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const rf=["get","getKey","getAll","getAllKeys","count"],of=["put","add","delete","clear"],nn=new Map;function io(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(nn.get(t))return nn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=of.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||rf.includes(n)))return;const s=async function(i,...u){const c=this.transaction(i,o?"readwrite":"readonly");let p=c.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),o&&c.done]))[0]};return nn.set(t,s),s}Xs(e=>({...e,get:(t,n,r)=>io(t,n)||e.get(t,n,r),has:(t,n)=>!!io(t,n)||e.has(t,n)}));const sf=["continue","continuePrimaryKey","advance"],ao={},wn=new WeakMap,Ys=new WeakMap,af={get(e,t){if(!sf.includes(t))return e[t];let n=ao[t];return n||(n=ao[t]=function(...r){wn.set(this,Ys.get(this)[t](...r))}),n}};async function*uf(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,af);for(Ys.set(n,t),Nt.set(n,mn(t));t;)yield n,t=await(wn.get(n)||t.continue()),wn.delete(n)}function uo(e,t){return t===Symbol.asyncIterator&&gn(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&gn(e,[IDBIndex,IDBObjectStore])}Xs(e=>({...e,get(t,n,r){return uo(t,n)?uf:e.get(t,n,r)},has(t,n){return uo(t,n)||e.has(t,n)}}));var co={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fo;function cf(){if(fo)return co;fo=1;var e;return(function(t){(function(n){var r=typeof globalThis=="object"?globalThis:typeof kr=="object"?kr:typeof self=="object"?self:typeof this=="object"?this:c(),o=s(t);typeof r.Reflect<"u"&&(o=s(r.Reflect,o)),n(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function s(p,d){return function(_,h){Object.defineProperty(p,_,{configurable:!0,writable:!0,value:h}),d&&d(_,h)}}function i(){try{return Function("return this;")()}catch{}}function u(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||u()}})(function(n,r){var o=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",i=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",u=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",p={__proto__:[]}instanceof Array,d=!c&&!p,_={create:c?function(){return Kt(Object.create(null))}:p?function(){return Kt({__proto__:null})}:function(){return Kt({})},has:d?function(a,f){return o.call(a,f)}:function(a,f){return f in a},get:d?function(a,f){return o.call(a,f)?a[f]:void 0}:function(a,f){return a[f]}},h=Object.getPrototypeOf(Function),I=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ci(),H=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:fi(),ye=typeof WeakMap=="function"?WeakMap:li(),C=s?Symbol.for("@reflect-metadata:registry"):void 0,F=ii(),O=ai(F);function E(a,f,l,y){if(S(l)){if(!gr(a))throw new TypeError;if(!vr(f))throw new TypeError;return dt(a,f)}else{if(!gr(a))throw new TypeError;if(!K(f))throw new TypeError;if(!K(y)&&!S(y)&&!Oe(y))throw new TypeError;return Oe(y)&&(y=void 0),l=_e(l),ht(a,f,l,y)}}n("decorate",E);function R(a,f){function l(y,w){if(!K(y))throw new TypeError;if(!S(w)&&!oi(w))throw new TypeError;pr(a,f,y,w)}return l}n("metadata",R);function M(a,f,l,y){if(!K(l))throw new TypeError;return S(y)||(y=_e(y)),pr(a,f,l,y)}n("defineMetadata",M);function A(a,f,l){if(!K(f))throw new TypeError;return S(l)||(l=_e(l)),Ae(a,f,l)}n("hasMetadata",A);function X(a,f,l){if(!K(f))throw new TypeError;return S(l)||(l=_e(l)),B(a,f,l)}n("hasOwnMetadata",X);function D(a,f,l){if(!K(f))throw new TypeError;return S(l)||(l=_e(l)),pe(a,f,l)}n("getMetadata",D);function Ke(a,f,l){if(!K(f))throw new TypeError;return S(l)||(l=_e(l)),lr(a,f,l)}n("getOwnMetadata",Ke);function ft(a,f){if(!K(a))throw new TypeError;return S(f)||(f=_e(f)),dr(a,f)}n("getMetadataKeys",ft);function lt(a,f){if(!K(a))throw new TypeError;return S(f)||(f=_e(f)),hr(a,f)}n("getOwnMetadataKeys",lt);function pt(a,f,l){if(!K(f))throw new TypeError;if(S(l)||(l=_e(l)),!K(f))throw new TypeError;S(l)||(l=_e(l));var y=Ge(f,l,!1);return S(y)?!1:y.OrdinaryDeleteMetadata(a,f,l)}n("deleteMetadata",pt);function dt(a,f){for(var l=a.length-1;l>=0;--l){var y=a[l],w=y(f);if(!S(w)&&!Oe(w)){if(!vr(w))throw new TypeError;f=w}}return f}function ht(a,f,l,y){for(var w=a.length-1;w>=0;--w){var N=a[w],G=N(f,l,y);if(!S(G)&&!Oe(G)){if(!K(G))throw new TypeError;y=G}}return y}function Ae(a,f,l){var y=B(a,f,l);if(y)return!0;var w=Wt(f);return Oe(w)?!1:Ae(a,w,l)}function B(a,f,l){var y=Ge(f,l,!1);return S(y)?!1:_r(y.OrdinaryHasOwnMetadata(a,f,l))}function pe(a,f,l){var y=B(a,f,l);if(y)return lr(a,f,l);var w=Wt(f);if(!Oe(w))return pe(a,w,l)}function lr(a,f,l){var y=Ge(f,l,!1);if(!S(y))return y.OrdinaryGetOwnMetadata(a,f,l)}function pr(a,f,l,y){var w=Ge(l,y,!0);w.OrdinaryDefineOwnMetadata(a,f,l,y)}function dr(a,f){var l=hr(a,f),y=Wt(a);if(y===null)return l;var w=dr(y,f);if(w.length<=0)return l;if(l.length<=0)return w;for(var N=new H,G=[],x=0,g=l;x<g.length;x++){var v=g[x],b=N.has(v);b||(N.add(v),G.push(v))}for(var m=0,P=w;m<P.length;m++){var v=P[m],b=N.has(v);b||(N.add(v),G.push(v))}return G}function hr(a,f){var l=Ge(a,f,!1);return l?l.OrdinaryOwnMetadataKeys(a,f):[]}function yr(a){if(a===null)return 1;switch(typeof a){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return a===null?1:6;default:return 6}}function S(a){return a===void 0}function Oe(a){return a===null}function ei(a){return typeof a=="symbol"}function K(a){return typeof a=="object"?a!==null:typeof a=="function"}function ti(a,f){switch(yr(a)){case 0:return a;case 1:return a;case 2:return a;case 3:return a;case 4:return a;case 5:return a}var l="string",y=br(a,i);if(y!==void 0){var w=y.call(a,l);if(K(w))throw new TypeError;return w}return ni(a)}function ni(a,f){var l,y,w;{var N=a.toString;if(yt(N)){var y=N.call(a);if(!K(y))return y}var l=a.valueOf;if(yt(l)){var y=l.call(a);if(!K(y))return y}}throw new TypeError}function _r(a){return!!a}function ri(a){return""+a}function _e(a){var f=ti(a);return ei(f)?f:ri(f)}function gr(a){return Array.isArray?Array.isArray(a):a instanceof Object?a instanceof Array:Object.prototype.toString.call(a)==="[object Array]"}function yt(a){return typeof a=="function"}function vr(a){return typeof a=="function"}function oi(a){switch(yr(a)){case 3:return!0;case 4:return!0;default:return!1}}function Ut(a,f){return a===f||a!==a&&f!==f}function br(a,f){var l=a[f];if(l!=null){if(!yt(l))throw new TypeError;return l}}function mr(a){var f=br(a,u);if(!yt(f))throw new TypeError;var l=f.call(a);if(!K(l))throw new TypeError;return l}function wr(a){return a.value}function Ar(a){var f=a.next();return f.done?!1:f}function Sr(a){var f=a.return;f&&f.call(a)}function Wt(a){var f=Object.getPrototypeOf(a);if(typeof a!="function"||a===h||f!==h)return f;var l=a.prototype,y=l&&Object.getPrototypeOf(l);if(y==null||y===Object.prototype)return f;var w=y.constructor;return typeof w!="function"||w===a?f:w}function si(){var a;!S(C)&&typeof r.Reflect<"u"&&!(C in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(a=ui(r.Reflect));var f,l,y,w=new ye,N={registerProvider:G,getProvider:g,setProvider:b};return N;function G(m){if(!Object.isExtensible(N))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case a===m:break;case S(f):f=m;break;case f===m:break;case S(l):l=m;break;case l===m:break;default:y===void 0&&(y=new H),y.add(m);break}}function x(m,P){if(!S(f)){if(f.isProviderFor(m,P))return f;if(!S(l)){if(l.isProviderFor(m,P))return f;if(!S(y))for(var j=mr(y);;){var U=Ar(j);if(!U)return;var de=wr(U);if(de.isProviderFor(m,P))return Sr(j),de}}}if(!S(a)&&a.isProviderFor(m,P))return a}function g(m,P){var j=w.get(m),U;return S(j)||(U=j.get(P)),S(U)&&(U=x(m,P),S(U)||(S(j)&&(j=new I,w.set(m,j)),j.set(P,U))),U}function v(m){if(S(m))throw new TypeError;return f===m||l===m||!S(y)&&y.has(m)}function b(m,P,j){if(!v(j))throw new Error("Metadata provider not registered.");var U=g(m,P);if(U!==j){if(!S(U))return!1;var de=w.get(m);S(de)&&(de=new I,w.set(m,de)),de.set(P,j)}return!0}}function ii(){var a;return!S(C)&&K(r.Reflect)&&Object.isExtensible(r.Reflect)&&(a=r.Reflect[C]),S(a)&&(a=si()),!S(C)&&K(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,C,{enumerable:!1,configurable:!1,writable:!1,value:a}),a}function ai(a){var f=new ye,l={isProviderFor:function(v,b){var m=f.get(v);return S(m)?!1:m.has(b)},OrdinaryDefineOwnMetadata:G,OrdinaryHasOwnMetadata:w,OrdinaryGetOwnMetadata:N,OrdinaryOwnMetadataKeys:x,OrdinaryDeleteMetadata:g};return F.registerProvider(l),l;function y(v,b,m){var P=f.get(v),j=!1;if(S(P)){if(!m)return;P=new I,f.set(v,P),j=!0}var U=P.get(b);if(S(U)){if(!m)return;if(U=new I,P.set(b,U),!a.setProvider(v,b,l))throw P.delete(b),j&&f.delete(v),new Error("Wrong provider for target.")}return U}function w(v,b,m){var P=y(b,m,!1);return S(P)?!1:_r(P.has(v))}function N(v,b,m){var P=y(b,m,!1);if(!S(P))return P.get(v)}function G(v,b,m,P){var j=y(m,P,!0);j.set(v,b)}function x(v,b){var m=[],P=y(v,b,!1);if(S(P))return m;for(var j=P.keys(),U=mr(j),de=0;;){var Cr=Ar(U);if(!Cr)return m.length=de,m;var pi=wr(Cr);try{m[de]=pi}catch(di){try{Sr(U)}finally{throw di}}de++}}function g(v,b,m){var P=y(b,m,!1);if(S(P)||!P.delete(v))return!1;if(P.size===0){var j=f.get(b);S(j)||(j.delete(m),j.size===0&&f.delete(j))}return!0}}function ui(a){var f=a.defineMetadata,l=a.hasOwnMetadata,y=a.getOwnMetadata,w=a.getOwnMetadataKeys,N=a.deleteMetadata,G=new ye,x={isProviderFor:function(g,v){var b=G.get(g);return!S(b)&&b.has(v)?!0:w(g,v).length?(S(b)&&(b=new H,G.set(g,b)),b.add(v),!0):!1},OrdinaryDefineOwnMetadata:f,OrdinaryHasOwnMetadata:l,OrdinaryGetOwnMetadata:y,OrdinaryOwnMetadataKeys:w,OrdinaryDeleteMetadata:N};return x}function Ge(a,f,l){var y=F.getProvider(a,f);if(!S(y))return y;if(l){if(F.setProvider(a,f,O))return O;throw new Error("Illegal state.")}}function ci(){var a={},f=[],l=(function(){function x(g,v,b){this._index=0,this._keys=g,this._values=v,this._selector=b}return x.prototype["@@iterator"]=function(){return this},x.prototype[u]=function(){return this},x.prototype.next=function(){var g=this._index;if(g>=0&&g<this._keys.length){var v=this._selector(this._keys[g],this._values[g]);return g+1>=this._keys.length?(this._index=-1,this._keys=f,this._values=f):this._index++,{value:v,done:!1}}return{value:void 0,done:!0}},x.prototype.throw=function(g){throw this._index>=0&&(this._index=-1,this._keys=f,this._values=f),g},x.prototype.return=function(g){return this._index>=0&&(this._index=-1,this._keys=f,this._values=f),{value:g,done:!0}},x})(),y=(function(){function x(){this._keys=[],this._values=[],this._cacheKey=a,this._cacheIndex=-2}return Object.defineProperty(x.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),x.prototype.has=function(g){return this._find(g,!1)>=0},x.prototype.get=function(g){var v=this._find(g,!1);return v>=0?this._values[v]:void 0},x.prototype.set=function(g,v){var b=this._find(g,!0);return this._values[b]=v,this},x.prototype.delete=function(g){var v=this._find(g,!1);if(v>=0){for(var b=this._keys.length,m=v+1;m<b;m++)this._keys[m-1]=this._keys[m],this._values[m-1]=this._values[m];return this._keys.length--,this._values.length--,Ut(g,this._cacheKey)&&(this._cacheKey=a,this._cacheIndex=-2),!0}return!1},x.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=a,this._cacheIndex=-2},x.prototype.keys=function(){return new l(this._keys,this._values,w)},x.prototype.values=function(){return new l(this._keys,this._values,N)},x.prototype.entries=function(){return new l(this._keys,this._values,G)},x.prototype["@@iterator"]=function(){return this.entries()},x.prototype[u]=function(){return this.entries()},x.prototype._find=function(g,v){if(!Ut(this._cacheKey,g)){this._cacheIndex=-1;for(var b=0;b<this._keys.length;b++)if(Ut(this._keys[b],g)){this._cacheIndex=b;break}}return this._cacheIndex<0&&v&&(this._cacheIndex=this._keys.length,this._keys.push(g),this._values.push(void 0)),this._cacheIndex},x})();return y;function w(x,g){return x}function N(x,g){return g}function G(x,g){return[x,g]}}function fi(){var a=(function(){function f(){this._map=new I}return Object.defineProperty(f.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),f.prototype.has=function(l){return this._map.has(l)},f.prototype.add=function(l){return this._map.set(l,l),this},f.prototype.delete=function(l){return this._map.delete(l)},f.prototype.clear=function(){this._map.clear()},f.prototype.keys=function(){return this._map.keys()},f.prototype.values=function(){return this._map.keys()},f.prototype.entries=function(){return this._map.entries()},f.prototype["@@iterator"]=function(){return this.keys()},f.prototype[u]=function(){return this.keys()},f})();return a}function li(){var a=16,f=_.create(),l=y();return(function(){function g(){this._key=y()}return g.prototype.has=function(v){var b=w(v,!1);return b!==void 0?_.has(b,this._key):!1},g.prototype.get=function(v){var b=w(v,!1);return b!==void 0?_.get(b,this._key):void 0},g.prototype.set=function(v,b){var m=w(v,!0);return m[this._key]=b,this},g.prototype.delete=function(v){var b=w(v,!1);return b!==void 0?delete b[this._key]:!1},g.prototype.clear=function(){this._key=y()},g})();function y(){var g;do g="@@WeakMap@@"+x();while(_.has(f,g));return f[g]=!0,g}function w(g,v){if(!o.call(g,l)){if(!v)return;Object.defineProperty(g,l,{value:_.create()})}return g[l]}function N(g,v){for(var b=0;b<v;++b)g[b]=Math.random()*255|0;return g}function G(g){if(typeof Uint8Array=="function"){var v=new Uint8Array(g);return typeof crypto<"u"?crypto.getRandomValues(v):typeof msCrypto<"u"?msCrypto.getRandomValues(v):N(v,g),v}return N(new Array(g),g)}function x(){var g=G(a);g[6]=g[6]&79|64,g[8]=g[8]&191|128;for(var v="",b=0;b<a;++b){var m=g[b];(b===4||b===6||b===8)&&(v+="-"),m<16&&(v+="0"),v+=m.toString(16).toLowerCase()}return v}}function Kt(a){return a.__=void 0,delete a.__,a}})})(e||(e={})),co}cf();var k;(function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(k||(k={}));var ff=(function(){function e(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return e.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},e.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},e.prototype.findTransformMetadatas=function(t,n,r){return this.findMetadatas(this._transformMetadatas,t,n).filter(function(o){return!o.options||o.options.toClassOnly===!0&&o.options.toPlainOnly===!0?!0:o.options.toClassOnly===!0?r===k.CLASS_TO_CLASS||r===k.PLAIN_TO_CLASS:o.options.toPlainOnly===!0?r===k.CLASS_TO_PLAIN:!0})},e.prototype.findExcludeMetadata=function(t,n){return this.findMetadata(this._excludeMetadatas,t,n)},e.prototype.findExposeMetadata=function(t,n){return this.findMetadata(this._exposeMetadatas,t,n)},e.prototype.findExposeMetadataByCustomName=function(t,n){return this.getExposedMetadatas(t).find(function(r){return r.options&&r.options.name===n})},e.prototype.findTypeMetadata=function(t,n){return this.findMetadata(this._typeMetadatas,t,n)},e.prototype.getStrategy=function(t){var n=this._excludeMetadatas.get(t),r=n&&n.get(void 0),o=this._exposeMetadatas.get(t),s=o&&o.get(void 0);return r&&s||!r&&!s?"none":r?"excludeAll":"exposeAll"},e.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},e.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},e.prototype.getExposedProperties=function(t,n){return this.getExposedMetadatas(t).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?n===k.CLASS_TO_CLASS||n===k.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?n===k.CLASS_TO_PLAIN:!0}).map(function(r){return r.propertyName})},e.prototype.getExcludedProperties=function(t,n){return this.getExcludedMetadatas(t).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?n===k.CLASS_TO_CLASS||n===k.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?n===k.CLASS_TO_PLAIN:!0}).map(function(r){return r.propertyName})},e.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},e.prototype.getMetadata=function(t,n){var r=t.get(n),o;r&&(o=Array.from(r.values()).filter(function(_){return _.propertyName!==void 0}));for(var s=[],i=0,u=this.getAncestors(n);i<u.length;i++){var c=u[i],p=t.get(c);if(p){var d=Array.from(p.values()).filter(function(_){return _.propertyName!==void 0});s.push.apply(s,d)}}return s.concat(o||[])},e.prototype.findMetadata=function(t,n,r){var o=t.get(n);if(o){var s=o.get(r);if(s)return s}for(var i=0,u=this.getAncestors(n);i<u.length;i++){var c=u[i],p=t.get(c);if(p){var d=p.get(r);if(d)return d}}},e.prototype.findMetadatas=function(t,n,r){var o=t.get(n),s;o&&(s=o.get(r));for(var i=[],u=0,c=this.getAncestors(n);u<c.length;u++){var p=c[u],d=t.get(p);d&&d.has(r)&&i.push.apply(i,d.get(r))}return i.slice().reverse().concat((s||[]).slice().reverse())},e.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var n=[],r=Object.getPrototypeOf(t.prototype.constructor);typeof r.prototype<"u";r=Object.getPrototypeOf(r.prototype.constructor))n.push(r);this._ancestorsMap.set(t,n)}return this._ancestorsMap.get(t)},e})(),te=new ff;function lf(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function pf(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var lo=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function df(e){var t=new e;return!(t instanceof Set)&&!("push"in t)?[]:t}var Ie=(function(){function e(t,n){this.transformationType=t,this.options=n,this.recursionStack=new Set}return e.prototype.transform=function(t,n,r,o,s,i){var u=this;if(i===void 0&&(i=0),Array.isArray(n)||n instanceof Set){var c=o&&this.transformationType===k.PLAIN_TO_CLASS?df(o):[];return n.forEach(function(C,F){var O=t?t[F]:void 0;if(!u.options.enableCircularCheck||!u.isCircular(C)){var E=void 0;if(typeof r!="function"&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(u.transformationType===k.PLAIN_TO_CLASS){E=r.options.discriminator.subTypes.find(function(X){return X.name===C[r.options.discriminator.property]});var R={newObject:c,object:C,property:void 0},M=r.typeFunction(R);E===void 0?E=M:E=E.value,r.options.keepDiscriminatorProperty||delete C[r.options.discriminator.property]}u.transformationType===k.CLASS_TO_CLASS&&(E=C.constructor),u.transformationType===k.CLASS_TO_PLAIN&&(C[r.options.discriminator.property]=r.options.discriminator.subTypes.find(function(X){return X.value===C.constructor}).name)}else E=r;var A=u.transform(O,C,E,void 0,C instanceof Map,i+1);c instanceof Set?c.add(A):c.push(A)}else u.transformationType===k.CLASS_TO_CLASS&&(c instanceof Set?c.add(C):c.push(C))}),c}else{if(r===String&&!s)return n==null?n:String(n);if(r===Number&&!s)return n==null?n:Number(n);if(r===Boolean&&!s)return n==null?n:!!n;if((r===Date||n instanceof Date)&&!s)return n instanceof Date?new Date(n.valueOf()):n==null?n:new Date(n);if(lf().Buffer&&(r===Buffer||n instanceof Buffer)&&!s)return n==null?n:Buffer.from(n);if(pf(n)&&!s)return new Promise(function(C,F){n.then(function(O){return C(u.transform(void 0,O,r,void 0,void 0,i+1))},F)});if(!s&&n!==null&&typeof n=="object"&&typeof n.then=="function")return n;if(typeof n=="object"&&n!==null){!r&&n.constructor!==Object&&(!Array.isArray(n)&&n.constructor===Array||(r=n.constructor)),!r&&t&&(r=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(n);var p=this.getKeys(r,n,s),d=t||{};!t&&(this.transformationType===k.PLAIN_TO_CLASS||this.transformationType===k.CLASS_TO_CLASS)&&(s?d=new Map:r?d=new r:d={});for(var _=function(C){if(C==="__proto__"||C==="constructor")return"continue";var F=C,O=C,E=C;if(!h.options.ignoreDecorators&&r){if(h.transformationType===k.PLAIN_TO_CLASS){var R=te.findExposeMetadataByCustomName(r,C);R&&(E=R.propertyName,O=R.propertyName)}else if(h.transformationType===k.CLASS_TO_PLAIN||h.transformationType===k.CLASS_TO_CLASS){var R=te.findExposeMetadata(r,C);R&&R.options&&R.options.name&&(O=R.options.name)}}var M=void 0;h.transformationType===k.PLAIN_TO_CLASS?M=n[F]:n instanceof Map?M=n.get(F):n[F]instanceof Function?M=n[F]():M=n[F];var A=void 0,X=M instanceof Map;if(r&&s)A=r;else if(r){var D=te.findTypeMetadata(r,E);if(D){var Ke={newObject:d,object:n,property:E},ft=D.typeFunction?D.typeFunction(Ke):D.reflectedType;D.options&&D.options.discriminator&&D.options.discriminator.property&&D.options.discriminator.subTypes?n[F]instanceof Array?A=D:(h.transformationType===k.PLAIN_TO_CLASS&&(A=D.options.discriminator.subTypes.find(function(pe){if(M&&M instanceof Object&&D.options.discriminator.property in M)return pe.name===M[D.options.discriminator.property]}),A===void 0?A=ft:A=A.value,D.options.keepDiscriminatorProperty||M&&M instanceof Object&&D.options.discriminator.property in M&&delete M[D.options.discriminator.property]),h.transformationType===k.CLASS_TO_CLASS&&(A=M.constructor),h.transformationType===k.CLASS_TO_PLAIN&&M&&(M[D.options.discriminator.property]=D.options.discriminator.subTypes.find(function(pe){return pe.value===M.constructor}).name)):A=ft,X=X||D.reflectedType===Map}else if(h.options.targetMaps)h.options.targetMaps.filter(function(pe){return pe.target===r&&!!pe.properties[E]}).forEach(function(pe){return A=pe.properties[E]});else if(h.options.enableImplicitConversion&&h.transformationType===k.PLAIN_TO_CLASS){var lt=Reflect.getMetadata("design:type",r.prototype,E);lt&&(A=lt)}}var pt=Array.isArray(n[F])?h.getReflectedType(r,E):void 0,dt=t?t[F]:void 0;if(d.constructor.prototype){var ht=Object.getOwnPropertyDescriptor(d.constructor.prototype,O);if((h.transformationType===k.PLAIN_TO_CLASS||h.transformationType===k.CLASS_TO_CLASS)&&(ht&&!ht.set||d[O]instanceof Function))return"continue"}if(!h.options.enableCircularCheck||!h.isCircular(M)){var Ae=h.transformationType===k.PLAIN_TO_CLASS?O:C,B=void 0;h.transformationType===k.CLASS_TO_PLAIN?(B=n[Ae],B=h.applyCustomTransformations(B,r,Ae,n,h.transformationType),B=n[Ae]===B?M:B,B=h.transform(dt,B,A,pt,X,i+1)):M===void 0&&h.options.exposeDefaultValues?B=d[O]:(B=h.transform(dt,M,A,pt,X,i+1),B=h.applyCustomTransformations(B,r,Ae,n,h.transformationType)),(B!==void 0||h.options.exposeUnsetFields)&&(d instanceof Map?d.set(O,B):d[O]=B)}else if(h.transformationType===k.CLASS_TO_CLASS){var B=M;B=h.applyCustomTransformations(B,r,C,n,h.transformationType),(B!==void 0||h.options.exposeUnsetFields)&&(d instanceof Map?d.set(O,B):d[O]=B)}},h=this,I=0,H=p;I<H.length;I++){var ye=H[I];_(ye)}return this.options.enableCircularCheck&&this.recursionStack.delete(n),d}else return n}},e.prototype.applyCustomTransformations=function(t,n,r,o,s){var i=this,u=te.findTransformMetadatas(n,r,this.transformationType);return this.options.version!==void 0&&(u=u.filter(function(c){return c.options?i.checkVersion(c.options.since,c.options.until):!0})),this.options.groups&&this.options.groups.length?u=u.filter(function(c){return c.options?i.checkGroups(c.options.groups):!0}):u=u.filter(function(c){return!c.options||!c.options.groups||!c.options.groups.length}),u.forEach(function(c){t=c.transformFn({value:t,key:r,obj:o,type:s,options:i.options})}),t},e.prototype.isCircular=function(t){return this.recursionStack.has(t)},e.prototype.getReflectedType=function(t,n){if(t){var r=te.findTypeMetadata(t,n);return r?r.reflectedType:void 0}},e.prototype.getKeys=function(t,n,r){var o=this,s=te.getStrategy(t);s==="none"&&(s=this.options.strategy||"exposeAll");var i=[];if((s==="exposeAll"||r)&&(n instanceof Map?i=Array.from(n.keys()):i=Object.keys(n)),r)return i;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&t){var u=te.getExposedProperties(t,this.transformationType),c=te.getExcludedProperties(t,this.transformationType);i=lo(lo([],u,!0),c,!0)}if(!this.options.ignoreDecorators&&t){var u=te.getExposedProperties(t,this.transformationType);this.transformationType===k.PLAIN_TO_CLASS&&(u=u.map(function(_){var h=te.findExposeMetadata(t,_);return h&&h.options&&h.options.name?h.options.name:_})),this.options.excludeExtraneousValues?i=u:i=i.concat(u);var p=te.getExcludedProperties(t,this.transformationType);p.length>0&&(i=i.filter(function(_){return!p.includes(_)})),this.options.version!==void 0&&(i=i.filter(function(_){var h=te.findExposeMetadata(t,_);return!h||!h.options?!0:o.checkVersion(h.options.since,h.options.until)})),this.options.groups&&this.options.groups.length?i=i.filter(function(_){var h=te.findExposeMetadata(t,_);return!h||!h.options?!0:o.checkGroups(h.options.groups)}):i=i.filter(function(_){var h=te.findExposeMetadata(t,_);return!h||!h.options||!h.options.groups||!h.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(i=i.filter(function(d){return o.options.excludePrefixes.every(function(_){return d.substr(0,_.length)!==_})})),i=i.filter(function(d,_,h){return h.indexOf(d)===_}),i},e.prototype.checkVersion=function(t,n){var r=!0;return r&&t&&(r=this.options.version>=t),r&&n&&(r=this.options.version<n),r},e.prototype.checkGroups=function(t){return t?this.options.groups.some(function(n){return t.includes(n)}):!0},e})(),Te={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},ne=function(){return ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ne.apply(this,arguments)},hf=(function(){function e(){}return e.prototype.instanceToPlain=function(t,n){var r=new Ie(k.CLASS_TO_PLAIN,ne(ne({},Te),n));return r.transform(void 0,t,void 0,void 0,void 0,void 0)},e.prototype.classToPlainFromExist=function(t,n,r){var o=new Ie(k.CLASS_TO_PLAIN,ne(ne({},Te),r));return o.transform(n,t,void 0,void 0,void 0,void 0)},e.prototype.plainToInstance=function(t,n,r){var o=new Ie(k.PLAIN_TO_CLASS,ne(ne({},Te),r));return o.transform(void 0,n,t,void 0,void 0,void 0)},e.prototype.plainToClassFromExist=function(t,n,r){var o=new Ie(k.PLAIN_TO_CLASS,ne(ne({},Te),r));return o.transform(t,n,void 0,void 0,void 0,void 0)},e.prototype.instanceToInstance=function(t,n){var r=new Ie(k.CLASS_TO_CLASS,ne(ne({},Te),n));return r.transform(void 0,t,void 0,void 0,void 0,void 0)},e.prototype.classToClassFromExist=function(t,n,r){var o=new Ie(k.CLASS_TO_CLASS,ne(ne({},Te),r));return o.transform(n,t,void 0,void 0,void 0,void 0)},e.prototype.serialize=function(t,n){return JSON.stringify(this.instanceToPlain(t,n))},e.prototype.deserialize=function(t,n,r){var o=JSON.parse(n);return this.plainToInstance(t,o,r)},e.prototype.deserializeArray=function(t,n,r){var o=JSON.parse(n);return this.plainToInstance(t,o,r)},e})(),Zs=new hf;function yf(e,t){return Zs.instanceToPlain(e,t)}function _f(e,t,n){return Zs.plainToInstance(e,t,n)}async function ml(e={}){try{return await Jc(),Vr.ready.isAvailable()&&await Vr.ready(),!0}catch{try{const n={id:1,is_bot:!1,first_name:"Dima",last_name:"Dev",username:"dima_dev",language_code:"ru",photo_url:Vc};return typeof window<"u"&&(window.Telegram=window.Telegram||{},window.Telegram.WebApp=window.Telegram.WebApp||{},window.Telegram.WebApp.initDataUnsafe={...window.Telegram.WebApp.initDataUnsafe||{},user:window.Telegram.WebApp.initDataUnsafe?.user??n},window.Telegram.WebApp.colorScheme="dark",window.Telegram.WebApp.languageCode="ru",window.Telegram.WebApp.ready=window.Telegram.WebApp.ready||(function(){})),!0}catch{return!1}}}function wl(){const e=typeof window<"u"?window.Telegram?.WebApp:void 0,t=e?.initDataUnsafe?.user??null,n=e?.initDataUnsafe?.user?.language_code??e?.languageCode??"ru",r=e?.colorScheme??"dark";return{user:t,languageCode:n,colorScheme:r}}let he=null;async function Al(){const e="UML_Data";try{he=await nf(e,2,{upgrade(t,n){t.objectStoreNames.contains("UserData")||t.createObjectStore("UserData"),t.objectStoreNames.contains("Icons")||t.createObjectStore("Icons",{keyPath:"id"})}}),console.log("DB initialized")}catch(t){console.error("DB initialization failed:",t)}}async function Sl(){const e=gf();try{if(he){await he.put("UserData",e,"current"),console.log("Data saved to DB"+e);try{Le?.isAvailable?.()&&(await Le("UserData",e),console.log("Data saved to Cloud"))}catch{console.error("Saving to Cloud failed")}}}catch{console.error("Saving to DB failed");try{Le?.isAvailable?.()&&(await Le("UserData",e),console.log("Data saved to Cloud"))}catch{console.error("Saving to Cloud failed")}}}async function Cl(){let e=null;try{if(he&&(e=await he.get("UserData","current"),e)){po(e),console.log("Data loaded from DB"+e);return}}catch{console.error("Loading from DB failed")}try{if(bt?.isAvailable?.()&&(e=await bt("UserData"),e)){po(e),console.log("Data loaded from Cloud");return}}catch{console.error("Loading from Cloud failed")}}async function kl(e){const t=`icon_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;try{const n=await new Promise(r=>{const o=new FileReader;o.onloadend=()=>r(o.result),o.readAsDataURL(e)});return he&&await he.put("Icons",{id:t,data:n}),Le?.isAvailable?.()&&await Le(`icon_${t}`,n),t}catch(n){return console.error("Failed to save icon:",n),null}}async function El(e){if(!e)return null;try{if(he){const t=await he.get("Icons",e);if(t?.data)return t.data}if(bt?.isAvailable?.()){const t=await bt(`icon_${e}`);if(t)return he&&await he.put("Icons",{id:e,data:t},e),t}return null}catch(t){return console.error("Failed to load icon:",t),null}}function gf(){try{const e=new ho,t=yf(e);return JSON.stringify(t)}catch(e){return console.error("Serialization failed:",e),null}}function po(e){try{const t=JSON.parse(e),n=_f(ho,t);hi.init(n)}catch(t){console.error("Deserialization failed:",t)}}export{ml as a,Sl as b,El as c,wl as g,Al as i,Cl as l,kl as s,Vc as u};
