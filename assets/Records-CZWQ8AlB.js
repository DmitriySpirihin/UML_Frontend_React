import{A as b,U as y,t as j,l as A,f as L,p as P,j as e,C as s,c7 as W,c5 as B,c9 as E,bw as M,bv as U,m as v,a as $,N,ch as Y,F as H,B as F}from"./index-CRxw_TOa.js";import{r as d}from"./recharts-Bg6K2Pzo.js";import{G as K,a as O,c as V,b as q}from"./index-Cl-iJbMv.js";const J=[W,B,K,O],D=[E,M,V,q,U],ee=()=>{const[t,p]=d.useState("dark"),[n,i]=d.useState(b.prefs[0]),[f,g]=d.useState(b.prefs[4]),[x,r]=d.useState(0),[l,c]=d.useState(0),[u,w]=d.useState(y.hasPremium),[z,h]=d.useState([]),[T,R]=d.useState(!0);d.useEffect(()=>{(async()=>{try{const o=await N.getMentalRecordsGlobal()||[];!o||o.length===0?h([{name:y?.name||"User",data:b.mentalRecords}]):h(o)}catch{h([{name:y?.name||"User",data:b.mentalRecords}])}finally{R(!1)}})()},[]),d.useEffect(()=>{const a=j.subscribe(p),o=A.subscribe(G=>i(G==="ru"?0:1)),S=L.subscribe(g),C=P.subscribe(w);return()=>{a.unsubscribe(),o.unsubscribe(),S.unsubscribe(),C.unsubscribe()}},[]);const I=[...z].sort((a,o)=>{const S=a.data?.[x]?.[l]||0;return(o.data?.[x]?.[l]||0)-S});return e.jsxs("div",{style:m(t).container,children:[e.jsxs("div",{style:m(t).controlsWrapper,children:[e.jsx(k,{items:J,selectedIndex:x,setSelectedIndex:a=>{r(a),l>3&&c(3)},theme:t,colorKey:"difficulty"}),e.jsx(k,{items:x>0?D.slice(0,-1):D,selectedIndex:l,setSelectedIndex:c,theme:t,colorKey:"difficulty",isSecondary:!0})]}),e.jsx("div",{style:m(t).listContainer,children:T?e.jsx("div",{style:m(t).loadingText,children:n===0?"Загрузка...":"Loading..."}):e.jsxs(v.div,{layout:!0,style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px",paddingBottom:"20px"},children:[e.jsx($,{mode:"popLayout",children:I.map((a,o)=>e.jsx(Q,{theme:t,fSize:f,isUser:a.name===y.name,rank:o+1,name:a.name,score:a.data?.[x]?.[l]||0,index:o},a.name+o))}),I.length===0&&e.jsx("div",{style:{textAlign:"center",color:s.get("subText",t),marginTop:20},children:n===0?"Нет данных":"No records yet"})]})}),!u&&e.jsx("div",{onClick:a=>a.stopPropagation(),style:{position:"absolute",inset:0,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:j.value==="dark"?"rgba(10, 10, 10, 0.85)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",textAlign:"center"},children:e.jsx("div",{style:{color:j.value==="dark"?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:n===0?"ТОЛЬКО ДЛЯ ПРЕМИУМ":"PREMIUM USERS ONLY"})})]})},k=({items:t,selectedIndex:p,setSelectedIndex:n,theme:i,colorKey:f,isSecondary:g})=>e.jsx("div",{style:{display:"flex",backgroundColor:s.get("panel",i),padding:"4px",borderRadius:"16px",gap:"4px",justifyContent:"center",boxShadow:"inset 0 2px 5px rgba(0,0,0,0.05)"},children:t.map((x,r)=>{const l=p===r,c=s.get(f+r,i);return e.jsxs("div",{onClick:()=>n(r),style:{position:"relative",padding:g?"6px 14px":"8px 20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:[l&&e.jsx(v.div,{layoutId:g?"diff-bg":"cat-bg",style:{position:"absolute",inset:0,backgroundColor:s.get("simplePanel",i),borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:-1},transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx(x,{size:g?18:22,color:l?c:s.get("subText",i),style:{transition:"color 0.3s ease"}})]},r)})}),Q=({theme:t,fSize:p,isUser:n,rank:i,name:f,score:g,index:x})=>{const r=t==="dark",l={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{delay:x*.05,type:"spring",stiffness:300,damping:24}},exit:{opacity:0,scale:.9}};let c=null,u=s.get("mainText",t);return i===1?(c=H,u="#FFD700"):i===2?(c=F,u="#C0C0C0"):i===3&&(c=F,u="#CD7F32"),e.jsxs(v.div,{layout:!0,variants:l,initial:"hidden",animate:"visible",exit:"exit",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderRadius:"16px",backgroundColor:n?r?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)":r?"rgba(30, 30, 30, 0.4)":"#FFFFFF",border:n?`1px solid ${s.get("light",t)}`:`1px solid ${s.get("border",t)}`,backdropFilter:"blur(10px)",boxShadow:r?"0 4px 6px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.05)",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",fontWeight:"bold",color:u,fontSize:"14px"},children:c?e.jsx(c,{size:16}):i}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:p===0?"15px":"17px",fontWeight:n?"bold":"normal",color:n?s.get("light",t):s.get("mainText",t)},children:[f,n&&e.jsx(Y,{size:10,color:s.get("light",t)})]})})]}),e.jsx("div",{style:{fontSize:p===0?"16px":"18px",fontWeight:"bold",color:s.get("done",t),fontFamily:"monospace",letterSpacing:"-0.5px"},children:g})]})},m=(t,p)=>({container:{backgroundColor:s.get("background",t),display:"flex",flexDirection:"column",alignItems:"center",height:"88vh",width:"100vw",marginTop:"115px",fontFamily:"Segoe UI",overflowY:"scroll"},controlsWrapper:{width:"90%",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginBottom:"20px",zIndex:10},listContainer:{flex:1,width:"94%",overflowY:"auto",padding:"0 5px",display:"flex",flexDirection:"column",scrollbarWidth:"none",msOverflowStyle:"none"},loadingText:{textAlign:"center",marginTop:"40px",color:s.get("subText",t),fontSize:"14px"}});export{ee as default};
