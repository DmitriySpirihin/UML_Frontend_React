import{r as g}from"./index-BP5yVP41.js";const G=(f=!1)=>{const i=g.useRef(null),l=g.useRef([]),p=()=>{l.current.forEach(e=>{try{e.stop&&e.stop(),e.disconnect&&e.disconnect()}catch{}}),l.current=[]},T=()=>{if(!i.current)try{i.current=new(window.AudioContext||window.webkitAudioContext)}catch{console.warn("AudioContext not supported")}},h=()=>{if(!f||!i.current)return;const e=i.current,t=e.currentTime;p();const n=e.createBufferSource(),r=e.createBuffer(1,e.sampleRate*.6,e.sampleRate),o=r.getChannelData(0);for(let a=0;a<o.length;a++)o[a]=(Math.random()*2-1)*Math.exp(-a/(e.sampleRate*.3));n.buffer=r;const s=e.createBiquadFilter();s.type="highpass",s.frequency.value=800,s.Q.value=1;const c=e.createGain();c.gain.setValueAtTime(.12,t),c.gain.exponentialRampToValueAtTime(.01,t+.6),n.connect(s),s.connect(c),c.connect(e.destination),n.start(t),n.stop(t+.6),l.current.push(n,s,c)},x=()=>{if(!f||!i.current)return;const e=i.current,t=e.currentTime;p();const n=e.createOscillator();n.type="sine",n.frequency.value=98;const r=e.createGain();r.gain.setValueAtTime(.08,t),r.gain.exponentialRampToValueAtTime(.01,t+1.2),n.connect(r),r.connect(e.destination),n.start(t),n.stop(t+1.2);const o=e.createBufferSource(),s=e.createBuffer(1,e.sampleRate*1,e.sampleRate),c=s.getChannelData(0);for(let m=0;m<c.length;m++){const V=m/c.length;c[m]=(Math.random()*2-1)*(1-V)*.3}o.buffer=s;const a=e.createBiquadFilter();a.type="lowpass",a.frequency.value=1200,a.Q.value=.8;const u=e.createGain();u.gain.setValueAtTime(.15,t),u.gain.exponentialRampToValueAtTime(.01,t+1),o.connect(a),a.connect(u),u.connect(e.destination),o.start(t),o.stop(t+1),l.current.push(n,r,o,a,u)},y=()=>{if(!f||!i.current)return;const e=i.current,t=e.currentTime;p();const n=[392,587,784],r=[.15,.08,.04];n.forEach((o,s)=>{const c=e.createOscillator(),a=e.createGain();c.type="sine",c.frequency.value=o,a.gain.setValueAtTime(r[s],t),a.gain.exponentialRampToValueAtTime(.001,t+.8),c.connect(a),a.connect(e.destination),c.start(t),c.stop(t+.8),l.current.push(c,a)})},d=()=>{if(!f||!i.current)return;const e=i.current,t=e.currentTime;p();const n=e.createOscillator();n.type="sine",n.frequency.value=65.4;const r=e.createGain();r.gain.setValueAtTime(.1,t),r.gain.exponentialRampToValueAtTime(.03,t+3);const o=e.createOscillator();o.type="triangle",o.frequency.value=130.8;const s=e.createGain();s.gain.setValueAtTime(.07,t),s.gain.exponentialRampToValueAtTime(.02,t+3),n.connect(r),o.connect(s),r.connect(e.destination),s.connect(e.destination),n.start(t),o.start(t),n.stop(t+3),o.stop(t+3),l.current.push(n,r,o,s)},A=()=>{if(!f||!i.current)return;const e=i.current,t=e.currentTime;p();const n=[523,659,784],r=[.12,.06,.03];n.forEach((o,s)=>{const c=e.createOscillator(),a=e.createGain();c.type="sine",c.frequency.value=o,a.gain.setValueAtTime(r[s],t),a.gain.exponentialRampToValueAtTime(.001,t+.5),c.connect(a),a.connect(e.destination),c.start(t),c.stop(t+.5),l.current.push(c,a)})},R=()=>{if(!f||!i.current)return;const e=i.current,t=e.currentTime;p();const n=e.createOscillator(),r=e.createGain();n.type="sine",n.frequency.value=110,r.gain.setValueAtTime(.1,t),r.gain.exponentialRampToValueAtTime(.001,t+.4);const o=e.createBufferSource(),s=e.createBuffer(1,e.sampleRate*.1,e.sampleRate),c=s.getChannelData(0);for(let u=0;u<c.length;u++)c[u]=(Math.random()*2-1)*Math.exp(-u/(e.sampleRate*.03));o.buffer=s;const a=e.createGain();a.gain.setValueAtTime(.08,t),a.gain.exponentialRampToValueAtTime(.001,t+.3),n.connect(r),o.connect(a),r.connect(e.destination),a.connect(e.destination),n.start(t),o.start(t),n.stop(t+.4),o.stop(t+.3),l.current.push(n,r,o,a)};return g.useEffect(()=>()=>{p(),i.current&&i.current.close()},[]),{initAudio:T,playInhale:h,playExhale:x,playHold:y,playRest:d,playRight:A,playWrong:R}};export{G as B};
