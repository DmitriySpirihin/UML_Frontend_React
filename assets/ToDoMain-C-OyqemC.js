import{b$ as De,A as v,y as _,j as e,d as U,m,a0 as ke,C as l,af as Te,c0 as de,c1 as ce,b8 as me,c2 as je,aV as oe,b_ as Ce,c3 as Fe,c4 as re,bx as te,a6 as Se,a3 as le,c5 as Ie,c6 as K,ab as Be,t as Re,l as Le,f as ze,a5 as pe,c7 as Ae,c8 as Ee,c9 as we,ca as Pe,cb as $e,ad as We,g as Ge,n as Oe}from"./index-DLnKNxUw.js";import{r as f}from"./recharts-C3psbGwv.js";import{S as ne}from"./ScrollPicker-C0J3Flx7.js";import Ne from"./ToDoMetrics-CtaKXP4m.js";import{H as Ue}from"./HoverInfoButton-BIePrcKK.js";import"./MyAreaChart-Cudsf0ii.js";import"./index-BUTC-lsj.js";const T=new De(null);async function _e(i,s,t,n,x,u,a,g,C,j){const S=Date.now(),h=new Date,D=()=>(h.setFullYear(d.getFullYear()+1),d.toISOString().split("T")[0]);v.todoList.push({id:S,name:(i??"").trim()||"Untitled",description:(s??"").trim(),difficulty:Number.isFinite(t)?t:0,priority:Number.isFinite(n)?n:0,category:(x??"").trim()||"General",icon:u??"task",isDone:!1,startDate:h&&typeof h=="string"?h:new Date().toISOString().split("T")[0],deadLine:g&&typeof g=="string"&&!isNaN(Date.parse(g))?g:D(),goals:Array.isArray(C)?[...C]:[],urgency:Number.isFinite(j)?j:0}),await _(),T&&T.next({type:"UPDATE_LIST"})}async function He(i,s,t,n,x,u,a,g,C,j,S){const h=v.todoList.find(D=>D.id===i);h&&(h.name=s,h.description=t,h.difficulty=n,h.priority=x,h.category=u,h.icon=a,h.color=g,h.startDate=C,h.deadLine=j,h.note=S,await _(),T&&T.next({type:"UPDATE_LIST"}))}async function Ye(i){v.todoList=v.todoList.filter(s=>s.id!==i),await _(),T&&T.next({type:"UPDATE_LIST"})}async function Me(i){const s=v.todoList.find(t=>t.id===i);s&&(s.isDone=!s.isDone,await _(),T&&T.next({type:"UPDATE_LIST"}))}async function Ve(i,s){const t=v.todoList.find(n=>n.id===i);t&&(t.goals||(t.goals=[]),t.goals.push({text:s,isDone:!1}),await _(),T&&T.next({type:"UPDATE_LIST"}))}async function Ke(i,s,t){const n=v.todoList.find(x=>x.id===i);n&&n.goals&&n.goals[s]&&(n.goals[s].text=t,await _(),T&&T.next({type:"UPDATE_LIST"}))}async function Qe(i,s){const t=v.todoList.find(n=>n.id===i);t&&t.goals&&(t.goals.splice(s,1),await _(),T&&T.next({type:"UPDATE_LIST"}))}async function Xe(i,s){const t=v.todoList.find(n=>n.id===i);t&&t.goals&&t.goals[s]&&(t.goals[s].isDone=!t.goals[s].isDone,await _(),T&&T.next({type:"UPDATE_LIST"}))}const xe=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],ge=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],qe=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],Je=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],Ze=({show:i,setShow:s,theme:t,lang:n,fSize:x,task:u})=>{const[a,g]=f.useState(u||{}),[C,j]=f.useState(!1),[S,h]=f.useState(""),[D,A]=f.useState(null),[L,F]=f.useState(null),[I,B]=f.useState("");f.useEffect(()=>{u&&g(u),F(null),B("")},[u]),f.useEffect(()=>{i||(F(null),B(""))},[i]);const k=a.goals?.length||0,E=a.goals?.filter(o=>o.isDone).length||0,z=k===0?a.isDone?100:0:Math.round(E/k*100),p=X(t,x,a.color),R=(o,r)=>{F(o),B(r)},W=async()=>{if(L===null||!a.goals)return;const o=I.trim();if(!o){window.confirm(n===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿ÑƒÑÑ‚ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ?":"Delete empty item?")&&await M(L);return}const r=[...a.goals];r[L]={...r[L],text:o},g(y=>({...y,goals:r}));try{await Ke(a.id,L,o)}catch(y){console.error("Failed to update sub-goal:",y)}F(null)},G=()=>{F(null),B("")},M=async o=>{const r=a.goals.filter((y,O)=>O!==o);g(y=>({...y,goals:r})),await Qe(a.id,o),L===o&&(F(null),B(""))},H=async()=>{D==="main"?(await Ye(a.id),s(!1)):typeof D=="number"&&await M(D),A(null)},Q=async()=>{await He(a.id,a.name,a.description,a.difficulty,a.priority,a.category,a.icon,a.color,a.startDate,a.deadLine,a.note),j(!1)},c=async o=>{if(!a.goals)return;const r=[...a.goals];r[o]={...r[o],isDone:!r[o].isDone},g(y=>({...y,goals:r})),await Xe(a.id,o)},b=async()=>{if(!S.trim())return;const o={text:S,isDone:!1};g(r=>({...r,goals:[...r.goals||[],o]})),await Ve(a.id,S),h("")},w=o=>{o.key==="Enter"&&W(),o.key==="Escape"&&G()};return e.jsx(U,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(!1),style:p.backdrop}),e.jsxs(m.div,{initial:{y:"100%"},animate:{y:"0%"},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:p.modalContainer,children:[e.jsx(U,{children:D!==null&&e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:p.warningOverlay,children:e.jsxs("div",{style:p.warningBox,children:[e.jsx(ke,{size:40,color:"#F44336",style:{marginBottom:15}}),e.jsx("h3",{style:{color:l.get("mainText",t),margin:"0 0 10px 0"},children:n===0?"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹?":"Are you sure?"}),e.jsx("p",{style:{color:l.get("subText",t),textAlign:"center",marginBottom:20},children:n===0?"Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ.":"This action cannot be undone."}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%"},children:[e.jsx("button",{onClick:()=>A(null),style:p.cancelBtn,children:n===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("button",{onClick:H,style:p.confirmDeleteBtn,children:n===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ":"Delete"})]})]})})}),e.jsx("div",{style:p.dragArea,onClick:()=>s(!1),children:e.jsx("div",{style:p.dragHandle})}),e.jsxs("div",{style:p.toolbar,children:[e.jsx(m.div,{whileTap:{scale:.9},onClick:()=>A("main"),style:p.iconBtnRed,children:e.jsx(Te,{size:16})}),e.jsx("div",{style:p.toolbarRight,children:C?e.jsxs(m.div,{whileTap:{scale:.9},onClick:Q,style:p.saveBtn,children:[e.jsx(de,{style:{marginRight:6}})," ",n===0?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ":"Save"]}):e.jsx(m.div,{whileTap:{scale:.9},onClick:()=>j(!0),style:p.iconBtn,children:e.jsx(ce,{size:16})})})]}),e.jsxs("div",{style:{overflowY:"scroll",overflowX:"hidden"},className:"no-scrollbar",children:[e.jsxs("div",{style:p.headerWrapper,children:[e.jsxs("div",{style:p.headerTopRow,children:[e.jsx("div",{style:p.iconBadge,children:a.icon}),e.jsx(m.button,{whileTap:{scale:.95},onClick:async()=>{g(o=>({...o,isDone:!o.isDone})),await Me(a.id)},style:p.statusBadge(a.isDone),children:a.isDone?n===0?"Ð’Ð«ÐŸÐžÐ›ÐÐ•ÐÐž":"COMPLETED":n===0?"Ð’ ÐŸÐ ÐžÐ¦Ð•Ð¡Ð¡Ð•":"IN PROGRESS"})]}),C?e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:n===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Name",value:a.name,onChange:o=>g({...a,name:o.target.value}),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"}})}):e.jsx("h2",{style:p.title,children:a.name}),e.jsxs("div",{style:p.progressContainer,children:[e.jsxs("span",{style:p.progressText,children:[z,"%"]}),e.jsx("div",{style:p.progressBarBg,children:e.jsx(m.div,{initial:{width:0},animate:{width:`${z}%`},style:p.progressBarFill})})]})]}),e.jsxs("div",{style:p.bodyPadding,children:[e.jsx("div",{style:p.gridTwo,children:C?e.jsxs(e.Fragment,{children:[e.jsx("select",{style:p.selectInput,value:a.priority,onChange:o=>g({...a,priority:parseInt(o.target.value)}),children:xe.map((o,r)=>e.jsx("option",{value:r,children:o[n]},r))}),e.jsx("select",{style:p.selectInput,value:a.difficulty,onChange:o=>g({...a,difficulty:parseInt(o.target.value)}),children:ge.map((o,r)=>e.jsx("option",{value:r,children:o[n]},r))})]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{icon:e.jsx(me,{}),label:n===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority",value:xe[a?.priority][n],color:qe[a?.priority],theme:t}),e.jsx(ue,{icon:e.jsx(je,{}),label:n===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",value:ge[a?.difficulty][n],color:Je[a?.difficulty],theme:t})]})}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:C?e.jsx("input",{type:"text",placeholder:n===0?"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ":"Description",value:a.description,onChange:o=>g({...a,description:o.target.value}),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"}}):e.jsx("p",{style:p.description,children:a.description||(n===0?"ÐÐµÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ":"No description")})}),e.jsxs("div",{style:p.dateRow,children:[e.jsx(fe,{label:n===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start",value:a.startDate,icon:e.jsx(oe,{}),isEditing:C,theme:t,onChange:o=>g({...a,startDate:o})}),e.jsx(fe,{label:n===0?"Ð¡Ñ€Ð¾Ðº":"Deadline",value:a.deadLine,icon:e.jsx(Ce,{}),isEditing:C,theme:t,onChange:o=>g({...a,deadLine:o})})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsxs("div",{style:p.sectionHeader,children:[e.jsx(Fe,{style:{marginRight:"8px",color:a.color}}),n===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist",e.jsxs("span",{style:p.counterBadge,children:[E,"/",k]})]}),e.jsxs("div",{style:p.goalsContainer,children:[e.jsx(U,{children:a.goals?.map((o,r)=>e.jsx(m.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},style:{marginBottom:8},children:L===r?e.jsxs("div",{style:{...p.goalEditRow,border:o.isDone?"2px solid #2ed177":`1px solid ${l.get("border",t)}`},children:[e.jsx("div",{onClick:()=>c(r),style:p.checkbox(o.isDone),children:o.isDone&&e.jsx(re,{size:10,color:"#2ed177"})}),e.jsx("input",{type:"text",value:I,onChange:y=>B(y.target.value),onKeyDown:w,style:p.goalInput,autoFocus:!0,"aria-label":n===0?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ":"Edit task"}),e.jsx("div",{onClick:W,style:p.actionBtn,role:"button","aria-label":n===0?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ":"Save",children:e.jsx(de,{size:14,color:a.color})}),e.jsx("div",{onClick:G,style:{...p.actionBtn,color:l.get("subText",t)},role:"button","aria-label":n===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel",children:e.jsx(te,{size:14})})]}):e.jsxs("div",{style:{...p.goalRow,border:o.isDone?"2px solid #2ed177":"transparent"},children:[e.jsx("div",{onClick:()=>c(r),style:p.checkbox(o.isDone),role:"checkbox","aria-checked":o.isDone,"aria-label":n===0?"ÐžÑ‚Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ ÐºÐ°Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾":"Mark as complete",children:o.isDone&&e.jsx(re,{size:10,color:"#2ed177"})}),e.jsx("div",{style:p.goalText(o.isDone),onClick:()=>c(r),children:o.text}),e.jsx("div",{onClick:y=>{y.stopPropagation(),R(r,o.text)},style:p.actionBtn,role:"button","aria-label":n===0?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ":"Edit task",children:e.jsx(ce,{size:12,color:l.get("subText",t)})}),e.jsx("div",{onClick:y=>{y.stopPropagation(),A(r)},style:p.actionBtn,role:"button","aria-label":n===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ":"Delete task",children:e.jsx(te,{size:12,color:l.get("subText",t)})})]})},`goal-${r}`))}),e.jsxs("div",{style:p.addSubRow,children:[e.jsx(Se,{style:{color:l.get("subText",t),marginRight:10}}),e.jsx("input",{type:"text",placeholder:n===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Add item...",value:S,onChange:o=>h(o.target.value),onKeyDown:o=>o.key==="Enter"&&b(),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:l.get("mainText",t),outline:"none",marginLeft:"10px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"}}),S.length>0&&e.jsx("button",{onClick:b,style:p.addSubBtn,"aria-label":n===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ":"Add task",children:"OK"})]})]})]}),e.jsx("div",{style:{marginBottom:"560px"}})]})]})]})]})})},ue=({icon:i,label:s,value:t,color:n,theme:x})=>e.jsxs("div",{style:{...X(x).modernBadge,backgroundColor:`${n}15`,border:`1px solid ${n}30`},children:[e.jsxs("div",{style:X(x).badgeLabel,children:[i," ",e.jsx("span",{style:{marginLeft:6},children:s})]}),e.jsx("div",{style:{...X(x).badgeValue,color:n},children:t})]}),fe=({label:i,value:s,icon:t,isEditing:n,theme:x,onChange:u})=>{const a=X(x);return e.jsxs("div",{style:a.dateItem,children:[e.jsx("div",{style:{color:l.get("subText",x),marginRight:10},children:t}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:a.label,children:i}),n?e.jsx("input",{type:"date",style:a.dateInput,value:s||"",onChange:g=>u(g.target.value)}):e.jsx("span",{style:a.dateValue,children:s||"-"})]})]})},X=(i,s,t)=>{const n=l.get("background",i),x=l.get("simplePanel",i),u=l.get("mainText",i),a=l.get("subText",i),g=l.get("border",i),C=l.get("done",i);return{backdrop:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",zIndex:1e3},modalContainer:{position:"fixed",bottom:0,left:0,right:0,height:"90dvh",backgroundColor:n,borderTopLeftRadius:"32px",borderTopRightRadius:"32px",zIndex:2e3,display:"flex",flexDirection:"column",boxShadow:"0 -10px 40px rgba(0,0,0,0.5)",overflow:"hidden"},warningOverlay:{position:"absolute",inset:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},warningBox:{backgroundColor:x,borderRadius:24,padding:25,width:"100%",maxWidth:320,display:"flex",flexDirection:"column",alignItems:"center",border:`1px solid ${g}`},cancelBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:g,color:u,fontWeight:"bold"},confirmDeleteBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:"#F44336",color:"#fff",fontWeight:"bold"},dragArea:{width:"100%",padding:"15px 0",display:"flex",justifyContent:"center"},dragHandle:{width:"40px",height:"5px",backgroundColor:g,borderRadius:"10px"},toolbar:{display:"flex",justifyContent:"space-between",padding:"0 24px 15px 24px"},iconBtn:{background:x,border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:u},iconBtnRed:{background:"rgba(244, 67, 54, 0.1)",border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:"#F44336"},saveBtn:{background:C,color:"#fff",border:"none",borderRadius:"12px",padding:"0 20px",fontWeight:"bold",display:"flex",alignItems:"center"},headerWrapper:{padding:"10px 24px 25px 24px",borderBottom:`1px solid ${g}`},headerTopRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},iconBadge:{width:64,height:64,borderRadius:20,fontSize:32,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${t}20`,border:`1px solid ${t}40`},statusBadge:j=>({padding:"10px 16px",borderRadius:14,fontSize:10,fontWeight:900,border:"none",backgroundColor:j?C:x,color:j?"#fff":a}),title:{fontSize:28,fontWeight:900,color:u,margin:0},progressContainer:{marginTop:20},progressText:{fontSize:12,fontWeight:800,color:t},progressBarBg:{width:"100%",height:8,backgroundColor:g,borderRadius:10,marginTop:6,overflow:"hidden"},progressBarFill:{height:"100%",backgroundColor:i==="light"?"rgba(94, 15, 133, 0.58)":"rgba(53, 111, 199, 0.94)"},bodyPadding:{padding:24},gridTwo:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},modernBadge:{borderRadius:20,padding:15,display:"flex",flexDirection:"column",alignItems:"center"},badgeLabel:{display:"flex",alignItems:"center",fontSize:10,color:a,textTransform:"uppercase",letterSpacing:1},badgeValue:{fontSize:14,fontWeight:800,marginTop:4},dateRow:{display:"flex",gap:12,marginBottom:24},dateItem:{flex:1,display:"flex",alignItems:"center",backgroundColor:x,padding:12,borderRadius:16},dateInput:{background:"transparent",border:"none",color:u,fontSize:13,width:"100%",outline:"none"},label:{fontSize:9,color:a,textTransform:"uppercase"},dateValue:{fontSize:13,fontWeight:700,color:u},sectionHeader:{display:"flex",alignItems:"center",fontSize:17,fontWeight:800,color:u,marginBottom:15},counterBadge:{marginLeft:"auto",fontSize:11,backgroundColor:x,padding:"4px 10px",borderRadius:8,color:a},goalRow:{display:"flex",alignItems:"center",padding:"12px 14px",backgroundColor:x,borderRadius:16,transition:"all 0.2s ease"},goalEditRow:{display:"flex",alignItems:"center",padding:"8px 12px",backgroundColor:x,borderRadius:16,border:`1px solid ${g}`},goalInput:{flex:1,background:"transparent",border:"none",color:u,fontSize:15,outline:"none",marginLeft:10,minWidth:0,padding:"4px 0"},checkbox:j=>({width:22,height:22,borderRadius:6,border:`2px solid ${j?t:g}`,backgroundColor:j?t:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginRight:10,cursor:"pointer"}),goalText:j=>({flex:1,fontSize:15,color:u,opacity:j?.6:1,textDecoration:j?"line-through":"none",marginLeft:8,cursor:"pointer",wordBreak:"break-word"}),actionBtn:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,marginLeft:4,cursor:"pointer",color:a,flexShrink:0,transition:"all 0.2s ease",":hover":{backgroundColor:`${g}30`}},actionBtnHover:{backgroundColor:`${g}30`},addSubRow:{display:"flex",alignItems:"center",padding:"16px 15px",border:`2px dashed ${g}`,borderRadius:16,marginTop:8},addSubBtn:{background:t,color:"#fff",border:"none",borderRadius:8,padding:"6px 12px",fontWeight:"bold",marginLeft:10,flexShrink:0},description:{fontSize:16,lineHeight:1.6,color:u,margin:0,opacity:.9},selectInput:{width:"100%",padding:12,borderRadius:12,border:`1px solid ${g}`,backgroundColor:x,color:u}}},q=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],J=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],Z=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],se=[{icon:"ðŸ“",label:["ÐžÐ±Ñ‰ÐµÐµ","General"]},{icon:"ðŸ’¼",label:["Ð Ð°Ð±Ð¾Ñ‚Ð°","Work"]},{icon:"ðŸ ",label:["Ð”Ð¾Ð¼","Home"]},{icon:"ðŸ’ª",label:["Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ","Health"]},{icon:"ðŸ›’",label:["ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ¸","Shopping"]},{icon:"ðŸŽ“",label:["Ð£Ñ‡ÐµÐ±Ð°","Study"]},{icon:"âœˆï¸",label:["ÐŸÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ","Trip"]},{icon:"ðŸ’°",label:["Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹","Finance"]},{icon:"ðŸŽ¨",label:["Ð¥Ð¾Ð±Ð±Ð¸","Hobby"]},{icon:"ðŸ’»",label:["ÐšÐ¾Ð´","Coding"]}],et=({theme:i,lang:s,fSize:t})=>{const[n,x]=f.useState(!1),[u,a]=f.useState(""),[g,C]=f.useState(""),[j,S]=f.useState(q[1][s]),[h,D]=f.useState(J[2][s]),[A,L]=f.useState(Z[1][s]),[F,I]=f.useState(0),[B,k]=f.useState(new Date().toISOString().split("T")[0]),[E,z]=f.useState(""),[p,R]=f.useState([]),[W,G]=f.useState("");f.useEffect(()=>{const b=le.subscribe(w=>x(w==="ToDoNew"));return()=>b.unsubscribe()},[]);const M=async()=>{if(!u.trim()){Be(s===0?"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Enter name",2e3,!1);return}const b=q.findIndex(Y=>Y.includes(j)),w=J.findIndex(Y=>Y.includes(h)),o=Z.findIndex(Y=>Y.includes(A)),r=se[F],y=r.label[1],O=r.icon;await _e(u,g,w,b,y,O,B,E,p,o),H()},H=()=>{K(null),setTimeout(()=>{a(""),C(""),R([]),G(""),S(q[1][s]),D(J[2][s]),L(Z[1][s]),k(new Date().toISOString().split("T")[0]),z(""),I(0)},300)},Q=()=>{W.trim()&&(R([...p,{text:W,isDone:!1}]),G(""))},c=tt(i);return e.jsx(U,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:H,style:c.backdrop}),e.jsxs(m.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:250},style:c.container,children:[e.jsx("div",{style:c.handleContainer,children:e.jsx("div",{style:c.handle})}),e.jsxs("div",{style:c.header,children:[e.jsx(m.button,{whileTap:{scale:.9},onClick:H,style:c.textBtn,children:s===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("span",{style:c.headerTitle,children:s===0?"ÐÐ¾Ð²Ð°Ñ Ñ†ÐµÐ»ÑŒ":"New Goal"}),e.jsx(m.button,{whileTap:{scale:.9},onClick:M,style:{...c.textBtn,color:l.get("done",i),fontWeight:"700"},children:s===0?"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ":"Create"})]}),e.jsxs("div",{style:c.scrollContent,className:"no-scrollbar",children:[e.jsx("div",{style:c.section,children:e.jsxs("div",{style:c.mainInputWrapper,children:[e.jsx("div",{style:c.largeIconDisplay,children:se[F].icon}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:e.jsx("input",{type:"text",placeholder:s===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ†ÐµÐ»Ð¸...":"Goal Title...",value:u,onChange:b=>a(b.target.value),style:c.mainInput})})]})}),e.jsxs("div",{style:c.categorySection,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8,paddingLeft:5},children:[e.jsx(Ie,{size:12,color:l.get("subText",i),style:{marginRight:6}}),e.jsx("label",{style:c.label,children:s===0?"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ":"Category"})]}),e.jsx("div",{style:c.iconScrollContainer,children:se.map((b,w)=>{const o=w===F;return e.jsxs(m.div,{whileTap:{scale:.9},onClick:()=>I(w),style:{...c.categoryChip,backgroundColor:o?l.get("highlitedPanel",i):"transparent",borderColor:o?"transparent":l.get("border",i)},children:[e.jsx("span",{style:{fontSize:"1.4rem"},children:b.icon}),o&&e.jsx(m.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},style:c.categoryLabel,children:b.label[s]})]},w)})})]}),e.jsx("div",{style:c.card,children:e.jsxs("div",{style:c.pickerRow,children:[e.jsxs("div",{style:c.pickerCol,children:[e.jsx("label",{style:c.label,children:s===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority"}),e.jsx(ne,{items:q.map(b=>b[s]),value:j,onChange:S,theme:i,width:"100%"})]}),e.jsx("div",{style:c.divider}),e.jsxs("div",{style:c.pickerCol,children:[e.jsx("label",{style:c.label,children:s===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty"}),e.jsx(ne,{items:J.map(b=>b[s]),value:h,onChange:D,theme:i,width:"100%"})]}),e.jsx("div",{style:c.divider}),e.jsxs("div",{style:c.pickerCol,children:[e.jsx("label",{style:c.label,children:s===0?"Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ":"Urgency"}),e.jsx(ne,{items:Z.map(b=>b[s]),value:A,onChange:L,theme:i,width:"100%"})]})]})}),e.jsxs("div",{style:c.dateSection,children:[e.jsx("div",{style:c.dateCard,children:e.jsxs("div",{style:c.dateRow,children:[e.jsx(oe,{style:{marginRight:10,color:l.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:c.label,children:s===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start"}),e.jsx("input",{type:"date",style:c.dateInput,value:B,onChange:b=>k(b.target.value)})]})]})}),e.jsx("div",{style:c.dateCard,children:e.jsxs("div",{style:c.dateRow,children:[e.jsx(Ce,{style:{marginRight:10,color:l.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:c.label,children:s===0?"Ð¡Ñ€Ð¾Ðº":"Deadline"}),e.jsx("input",{type:"date",style:c.dateInput,value:E,onChange:b=>z(b.target.value)})]})]})})]}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:s===0?"Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ / ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ...":"Notes / Description...",value:g,onChange:b=>C(b.target.value),style:c.mainInput})}),e.jsxs("div",{style:c.subTaskContainer,children:[e.jsx("label",{style:c.sectionTitle,children:s===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist"}),e.jsxs("div",{style:c.addSubRow,children:[e.jsx("div",{style:c.subInputContainer,children:e.jsx("input",{type:"text",placeholder:s===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑˆÐ°Ð³...":"Add a step...",value:W,onChange:b=>G(b.target.value),style:c.subInput})}),e.jsx(m.div,{whileTap:{scale:.9},onClick:Q,style:c.addBtn,children:e.jsx(Se,{style:{width:"100%",color:"#fff"}})})]}),e.jsx("div",{style:c.subList,children:e.jsx(U,{children:p.map((b,w)=>e.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0,padding:0},style:c.subItem,children:[e.jsx("div",{style:c.subDot}),e.jsx("span",{style:c.subText,children:b.text}),e.jsx("div",{onClick:()=>R(p.filter((o,r)=>r!==w)),children:e.jsx(te,{style:{width:"100%",color:l.get("subText",i),cursor:"pointer"}})})]},w))})})]}),e.jsx("div",{style:{marginBottom:"100px"}})]})]})]})})},tt=i=>{const s=l.get("background",i),t=l.get("simplePanel",i),n=l.get("mainText",i),x=l.get("subText",i),u=l.get("border",i);return{backdrop:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",zIndex:998},container:{position:"fixed",bottom:0,left:0,right:0,height:"90vh",backgroundColor:s,borderRadius:"24px 24px 0 0",boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden"},handleContainer:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"12px",paddingBottom:"8px"},handle:{width:"40px",height:"5px",borderRadius:"3px",backgroundColor:l.get("border",i)},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px 15px 20px",borderBottom:`1px solid ${l.get("svgColor",i)}`},textBtn:{background:"none",border:"none",fontSize:"16px",color:x,cursor:"pointer",padding:"10px"},headerTitle:{fontSize:"18px",fontWeight:"700",color:n},scrollContent:{flex:1,overflowY:"auto",padding:"20px"},section:{marginBottom:"20px"},mainInputWrapper:{display:"flex",alignItems:"center",gap:"15px"},largeIconDisplay:{fontSize:"2.5rem",width:"50px",textAlign:"center"},mainInput:{flex:1,border:"none",background:"transparent",fontSize:"16px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",color:n,WebkitUserSelect:"auto",outline:`1px solid ${u}`,borderRadius:"16px",padding:"14px",width:"100%"},categorySection:{marginBottom:"20px"},iconScrollContainer:{display:"flex",gap:"10px",overflowX:"auto",padding:"2px 2px 10px 2px",scrollbarWidth:"none",msOverflowStyle:"none"},categoryChip:{padding:"8px 16px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",border:`1px solid ${u}`,minWidth:"60px",whiteSpace:"nowrap"},categoryLabel:{fontSize:"13px",fontWeight:"600",color:n,marginLeft:"4px"},card:{backgroundColor:t,borderRadius:"20px",padding:"15px",boxShadow:l.get("shadow",i),marginBottom:"20px"},pickerRow:{display:"flex",justifyContent:"space-between",alignItems:"center"},pickerCol:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},divider:{width:"1px",height:"60px",backgroundColor:u,margin:"0 5px"},label:{fontSize:"11px",color:x,fontWeight:"700",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},dateSection:{display:"flex",gap:"12px",marginBottom:"20px"},dateCard:{flex:1,backgroundColor:t,borderRadius:"16px",padding:"12px",border:`1px solid ${u}`,display:"flex",alignItems:"center"},dateRow:{display:"flex",alignItems:"center",width:"100%"},dateInput:{background:"transparent",border:"none",color:n,fontSize:"14px",width:"100%",outline:"none",fontFamily:"inherit",fontWeight:"600"},subTaskContainer:{marginTop:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"700",color:n,marginLeft:"5px",marginBottom:"10px",display:"block"},addSubRow:{display:"flex",alignItems:"center",gap:"10px"},subInputContainer:{flex:1,display:"flex",flexDirection:"column",border:`2px dashed ${u}`,borderRadius:"16px",padding:"12px",marginTop:"10px"},subInput:{border:"none",background:"transparent",fontSize:"16px",color:n,outline:"none",width:"100%",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"},addBtn:{width:"46px",height:"46px",borderRadius:"14px",backgroundColor:l.get("done",i),display:"flex",alignItems:"center",justifyContent:"center",border:"none",marginTop:"10px",cursor:"pointer",boxShadow:`0 4px 12px ${l.get("habitCardDone",i)}`},subList:{marginTop:"15px",display:"flex",flexDirection:"column",gap:"8px"},subItem:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:t,borderRadius:"12px"},subDot:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:x,marginRight:"12px"},subText:{flex:1,fontSize:"15px",color:n}}},P=new Audio("Audio/Click.wav"),it=new Audio("Audio/IsDone.wav"),ot=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],nt=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],st=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],ye=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],he=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],be=["#81C784","#64B5F6","#FFD54F","#FF8A65","#E57373"],mt=()=>{const[i,s]=f.useState("dark"),[t,n]=f.useState(v.prefs[0]),[x,u]=f.useState(v.prefs[4]),[a,g]=f.useState(le.value==="ToDoPage"),[C,j]=f.useState(!1),[S,h]=f.useState(0),[D,A]=f.useState(v.todoList||[]),[L,F]=f.useState(0),[I,B]=f.useState(0),[k,E]=f.useState(1),[z,p]=f.useState(""),[R,W]=f.useState("none"),G=f.useRef(null);f.useEffect(()=>{const o=Re.subscribe(s),r=Le.subscribe(N=>n(N==="ru"?0:1)),y=ze.subscribe(u),O=le.subscribe(N=>g(N==="ToDoPage")),Y=T.subscribe(N=>{N&&(F(ve=>ve+1),N.type==="OPEN_STATS"&&(j(!0),K("")),N.type==="OPEN_ADD"&&(j(!1),h(-1),K("ToDoPage")),N.type==="CLOSE_ALL"&&(j(!1),K("")))});return()=>{o.unsubscribe(),r.unsubscribe(),y.unsubscribe(),Y.unsubscribe(),O.unsubscribe()}},[]),f.useEffect(()=>{M()},[I,k,z,L]),f.useEffect(()=>{R==="search"&&G.current&&setTimeout(()=>G.current.focus(),300)},[R]);function M(){let o=v.todoList?[...v.todoList]:[];if(z.trim()){const r=z.toLowerCase();o=o.filter(y=>y.name&&y.name.toLowerCase().includes(r)||y.category&&y.category.toLowerCase().includes(r))}I===1&&(o=o.filter(r=>r.isDone)),I===2&&(o=o.filter(r=>!r.isDone)),k===0?o.sort((r,y)=>(y.difficulty||0)-(r.difficulty||0)):k===1?o.sort((r,y)=>(y.priority||0)-(r.priority||0)):k===2&&o.sort((r,y)=>ie(r.deadLine)-ie(y.deadLine)),A(o)}const H=()=>{K("")},Q=(o,r)=>{o.stopPropagation(),r.isDone=!r.isDone,F(y=>y+1),$(r.isDone?it:P)},c=o=>{$(P),W(R===o?"none":o)},b=f.useMemo(()=>{const o={};return D.forEach(r=>{const y=r.category||(t===0?"Ð”Ñ€ÑƒÐ³Ð¾Ðµ":"Other");o[y]||(o[y]=[]),o[y].push(r)}),o},[D,t]),w=lt(i);return e.jsxs("div",{style:w.container,children:[e.jsx(Ue,{tab:"ToDoMain"}),e.jsxs("div",{style:{width:"92%",marginTop:"14vh",display:"flex",flexDirection:"column",gap:"10px",zIndex:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"800",color:l.get("mainText",i),fontFamily:"Segoe UI",letterSpacing:"-0.5px"},children:t===0?"Ð—Ð°Ð´Ð°Ñ‡Ð¸":"Tasks"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(ae,{icon:e.jsx(pe,{size:16}),isActive:R==="search"||z.length>0,onClick:()=>c("search"),theme:i}),e.jsx(ae,{icon:e.jsx(Ae,{size:16}),isActive:R==="sort"||k!==1,onClick:()=>c("sort"),theme:i}),e.jsx(ae,{icon:e.jsx(Ee,{size:14}),isActive:R==="filter"||I!==0,onClick:()=>c("filter"),theme:i})]})]}),e.jsxs(U,{mode:"wait",children:[R==="search"&&e.jsx(m.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden"},children:e.jsxs("div",{style:w.inputContainer,children:[e.jsx(pe,{size:14,color:l.get("subText",i),style:{marginLeft:"16px",opacity:.6}}),e.jsx("input",{type:"text",placeholder:t===0?"ÐÐ°Ð¹Ñ‚Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Search tasks...",value:z,onChange:o=>p(o.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:l.get("mainText",i),marginLeft:"8px",outline:"none"}}),z.length>0&&e.jsx(m.div,{initial:{scale:0},animate:{scale:1},onClick:()=>p(""),style:w.clearBtn,children:e.jsx(te,{size:10,color:"#fff"})})]})},"search"),R==="sort"&&e.jsxs(m.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(V,{label:t===0?"Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Priority",icon:e.jsx(we,{size:10}),isActive:k===1,onClick:()=>{E(1),$(P)},theme:i}),e.jsx(V,{label:t===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",icon:e.jsx(Pe,{size:12}),isActive:k===0,onClick:()=>{E(0),$(P)},theme:i}),e.jsx(V,{label:t===0?"Ð”ÐµÐ´Ð»Ð°Ð¹Ð½":"Deadline",icon:e.jsx(oe,{size:12}),isActive:k===2,onClick:()=>{E(2),$(P)},theme:i})]},"sort"),R==="filter"&&e.jsxs(m.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(V,{label:t===0?"Ð’ÑÐµ":"All",isActive:I===0,onClick:()=>{B(0),$(P)},theme:i}),e.jsx(V,{label:t===0?"Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ":"Active",isActive:I===2,onClick:()=>{B(2),$(P)},theme:i}),e.jsx(V,{label:t===0?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"Done",isActive:I===1,onClick:()=>{B(1),$(P)},theme:i})]},"filter")]})]}),e.jsxs("div",{style:w.panel,className:"no-scrollbar",children:[e.jsx(U,{mode:"popLayout",children:D.length===0?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},style:w.emptyState,children:[e.jsx($e,{size:40,style:{marginBottom:10,opacity:.5}}),e.jsx("span",{children:t===0?"Ð—Ð°Ð´Ð°Ñ‡ Ð½ÐµÑ‚":"No tasks found"})]}):Object.keys(b).map(o=>e.jsx(at,{title:o,theme:i,children:b[o].map((r,y)=>e.jsx(rt,{onClick:()=>{const O=v.todoList.indexOf(r);h(O),K("ToDoPage"),$(P)},onCheck:O=>Q(O,r),item:r,theme:i,lang:t,fSize:x},r.id||y+r.name))},o))}),e.jsx("div",{style:{marginBottom:"120px",width:"100%"}})]}),e.jsx(Ze,{show:a,setShow:H,theme:i,lang:t,fSize:x,task:v.todoList[S]||{}}),C&&e.jsx(Ne,{theme:i,lang:t,onClose:()=>j(!1)}),e.jsx(et,{theme:i,lang:t,fSize:x})]})},ae=({icon:i,isActive:s,onClick:t,theme:n})=>{const x=n==="dark",u=l.get("accent",n),a=s?u:x?"rgba(255,255,255,0.1)":"#FFFFFF",g=s?"#FFFFFF":l.get("mainText",n);return e.jsx(m.div,{whileTap:{scale:.92},onClick:t,style:{width:"40px",height:"40px",borderRadius:"14px",backgroundColor:a,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:s?`0 4px 12px ${u}60`:x?"none":"0 2px 8px rgba(0,0,0,0.05)",color:g,transition:"all 0.3s ease"},children:i})},V=({label:i,icon:s,isActive:t,onClick:n,theme:x})=>{const u=x==="dark",a=l.get("accent",x);return e.jsxs(m.div,{whileTap:{scale:.95},onClick:n,style:{padding:"8px 16px",borderRadius:"12px",backgroundColor:t?a:u?"rgba(255,255,255,0.08)":"#FFFFFF",color:t?"#FFFFFF":l.get("subText",x),fontSize:"13px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",border:t?"none":`1px solid ${u?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}`,boxShadow:t?`0 4px 12px ${a}40`:"none",transition:"all 0.2s ease"},children:[s,i]})},at=({title:i,children:s,theme:t})=>{const[n,x]=f.useState(!0),u=t==="light"||t==="speciallight";return e.jsxs("div",{style:{width:"100%",marginBottom:"6px"},children:[e.jsxs("div",{onClick:()=>{x(!n),$(P)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"8px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"800",fontFamily:"Segoe UI",color:u?"#1D1D1F":l.get("mainText",t),opacity:.8},children:i}),e.jsx(m.div,{animate:{rotate:n?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(We,{size:12,color:u?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(U,{initial:!1,children:n&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:s})})]})},rt=({onClick:i,onCheck:s,item:t,theme:n,lang:x,fSize:u})=>{const a=ct(t.deadLine)&&!t.isDone,g=n==="light"||n==="speciallight",C=t.goals?t.goals.length:0,j=t.goals?t.goals.filter(z=>z.isDone).length:0;let S=t.color||l.get("accent",n);S&&S.length>7&&S.startsWith("#")&&(S=S.substring(0,7));const h=S;let D=g?"#FFFFFF":l.get("simplePanel",n)+"CC",A=g?"transparent":`1px solid ${l.get("border",n)}80`,L=g?"0 4px 12px rgba(0,0,0,0.05)":"0 4px 12px rgba(0,0,0,0.2)";const F=t.isDone?`${h}15`:`${h}25`,I=t.isDone?"transparent":`${h}40`,B=ye[t.priority]||ye[0],k=he[t.difficulty]||he[0],E=be[t.urgency||0]||be[0];return e.jsxs(m.div,{layout:!0,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,transition:{duration:.2}},whileTap:{scale:.98},onClick:i,style:{width:"88%",minHeight:"80px",borderRadius:"20px",marginBottom:"8px",padding:"10px 12px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",overflow:"hidden",cursor:"pointer",backgroundColor:D,backdropFilter:g?"none":"blur(20px)",border:A,boxShadow:L,opacity:t.isDone?.6:1},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:F,color:h,fontSize:"20px",marginRight:"14px",flexShrink:0,border:`1px solid ${I}`},children:t.icon||"ðŸ“"}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",justifyContent:"center",alignItems:"center",gap:"6px",marginRight:"14px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginBottom:"2px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.5px",color:l.get("subText",n),opacity:.7},children:t.category||(x===0?"ÐžÐ±Ñ‰ÐµÐµ":"General")}),(a||t.priority>=3)&&!t.isDone&&e.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",backgroundColor:"#FF453A"}})]}),e.jsx("div",{style:{fontSize:u===0?"16px":"17px",fontWeight:"700",color:t.isDone?l.get("subText",n):l.get("mainText",n),textDecoration:t.isDone?"line-through":"none",lineHeight:"1.2",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},children:t.name})]}),!t.isDone&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",alignItems:"center",justifyContent:"center"},children:[e.jsx(ee,{icon:e.jsx(me,{size:8}),text:ot[t.priority]?.[x],color:B}),e.jsx(ee,{icon:e.jsx(je,{size:8}),text:nt[t.difficulty]?.[x],color:k}),e.jsx(ee,{icon:e.jsx(we,{size:8}),text:st[t.urgency||0]?.[x],color:E}),t.deadLine&&e.jsx(ee,{icon:a?e.jsx(Ge,{size:8}):e.jsx(oe,{size:8}),text:pt(t.deadLine,x),color:a?"#FF453A":l.get("subText",n)}),C>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"10px",fontWeight:"700",color:l.get("subText",n),marginLeft:"4px"},children:[e.jsx(Oe,{size:10,style:{opacity:.7}}),e.jsxs("span",{children:[j,"/",C]})]})]})]}),e.jsx("div",{onClick:s,style:{width:"26px",height:"26px",borderRadius:"9px",border:t.isDone?"none":`2px solid ${l.get("border",n)}`,backgroundColor:t.isDone?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},children:t.isDone&&e.jsx(re,{size:12,color:"#FFF"})}),!t.isDone&&C>0&&e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"3px",backgroundColor:g?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)"},children:e.jsx(m.div,{initial:{width:0},animate:{width:`${j/C*100}%`},style:{height:"100%",backgroundColor:g?"rgba(94, 15, 133, 0.58)":"rgba(53, 111, 199, 0.94)"}})})]})},ee=({icon:i,text:s,color:t})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:`${t}15`,border:`1px solid ${t}30`,color:t,fontSize:"9px",fontWeight:"700",whiteSpace:"nowrap"},children:[i,s&&e.jsx("span",{children:s})]}),lt=(i,s)=>{const t=i==="light"||i==="speciallight",n=t?"#F2F4F6":l.get("background",i);l.get("mainText",i);const x=l.get("subText",i);return{container:{backgroundColor:n,display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflowY:"scroll"},panel:{display:"flex",flexDirection:"column",width:"100%",flex:1,alignItems:"center",justifyContent:"start",overflowY:"scroll",paddingTop:"2px"},emptyState:{marginTop:"50px",display:"flex",flexDirection:"column",alignItems:"center",color:x,fontSize:"16px",fontWeight:"600"},inputContainer:{width:"100%",height:"44px",backgroundColor:t?"#FFFFFF":"rgba(255,255,255,0.08)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"space-around",border:t?"none":`1px solid ${l.get("border",i)}60`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)",position:"relative"},input:{flex:1,height:"100%",border:"none",outline:"none",backgroundColor:"transparent",padding:"0 12px",fontSize:"15px",fontWeight:"600",fontFamily:"Segoe UI",color:l.get("mainText",i)},clearBtn:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"rgba(128,128,128,0.4)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",cursor:"pointer"}}};function $(i){v.prefs[2]===0&&i&&(i.paused||(i.pause(),i.currentTime=0),i.volume=.5,i.play().catch(s=>console.log("Audio play failed",s))),v.prefs[3]===0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function dt(i){if(!i)return null;if(i.includes("-"))return new Date(i);if(i.includes(".")){const s=i.split(".");return new Date(s[2],s[1]-1,s[0])}return new Date(i)}function ie(i){const s=dt(i);if(!s)return 9999;const t=new Date;return t.setHours(0,0,0,0),s.setHours(0,0,0,0),Math.ceil((s-t)/(1e3*60*60*24))}function ct(i){return ie(i)<0}function pt(i,s){if(!i)return"";const t=ie(i);return s===0?t===0?"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ":t===1?"Ð—Ð°Ð²Ñ‚Ñ€Ð°":t<0?`${Math.abs(t)} Ð´Ð½. Ð½Ð°Ð·Ð°Ð´`:`${t} Ð´Ð½.`:t===0?"Today":t===1?"Tmrw":t<0?`${Math.abs(t)}d ago`:`${t}d left`}export{mt as default};
