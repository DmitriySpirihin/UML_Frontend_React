import{r as p,A as u,t as N,l as M,f as W,j as e,C as o}from"./index-COEidKiQ.js";import{b as G,c as O}from"./index-Cmhhez3u.js";const K=(i,m)=>{const s=new Date(i),f={weekday:"long"},c=m===0?"ru-RU":"en-US";return s.toLocaleDateString(c,f)},Y=i=>`${Math.floor(i/6e4)} min`,v=["#00c6ff","#0072ff","#ff416c","#ff4b2b","#38ef7d","#11998e","#f09819","#edde5d","#834d9b","#d04ed6","#1d976c","#93f9b9","#5d29c3","#a968f2","#ff7e5f","#feb47b","#2af598","#009efd","#ff6b6b","#ffa500","#114357","#f29492","#43e97b","#38f9d7","#92fe9d","#00c9ff","#2c3e50","#3498db","#c33764","#1d2671","#ff9a9e","#fecfef","#a8ff78","#78ffd6","#b993d6","#8ca6db","#ff758c","#ff7eb3","#4facfe","#00f2fe"],V=({needToAdd:i,setEx:m})=>{const[s,f]=p.useState("dark"),[c,D]=p.useState(u.prefs[0]==="ru"?0:1),[d,E]=p.useState(u.prefs[1]),[k,z]=p.useState(null);p.useEffect(()=>{const t=N.subscribe(f),n=M.subscribe(l=>{D(l==="ru"?0:1)});return()=>{n.unsubscribe(),t.unsubscribe()}},[]),p.useEffect(()=>{const t=W.subscribe(E);return()=>{t.unsubscribe()}},[]);const b=[];for(const[t,n]of Object.entries(u.trainingLog||{}))n.forEach((l,r)=>{b.push({date:t,idx:r,session:l})});b.sort((t,n)=>{const l=t.session.startTime||0;return(n.session.startTime||0)-l});const y=new Map;let C=0;return b.forEach(({session:t})=>{const n=`${t.programId}-${t.dayIndex}`;y.has(n)||(y.set(n,v[C%v.length]),C++)}),e.jsx("div",{style:g(s).container,children:b.map(t=>{const{date:n,idx:l,session:r}=t,j=`${n}-${l}`,h=k===j,I=r.programId||0,w=r.dayIndex||0,A=`${I}-${w}`,R=y.get(A)||v[0],T=u.programs.find(x=>x.id===I),B=T?.name?.[c]||`Program ${I}`,L=T?.schedule?.[w]?.name?.[c]||`Day ${w+1}`;return e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{...g(s,!1,!1,d).sessionPanel,borderTop:`3px ridge ${R}`,backgroundColor:h?o.get("trainingGroupSelected",s):o.get("bottomPanel",s),paddingLeft:"12px",paddingRight:"12px",cursor:"pointer"},onClick:()=>z(h?null:j),children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:g(s,!1,!1,d).text,children:[n," • ",K(n,c)]}),e.jsxs("div",{style:g(s,!1,!1,d).subtext,children:[B," • ",L]})]}),h?e.jsx(G,{size:20,color:o.get("icons",s),style:{marginRight:"20px"}}):e.jsx(O,{size:20,color:o.get("icons",s),style:{marginRight:"20px"}})]}),h&&e.jsxs("div",{style:{width:"100%",paddingLeft:"12px",paddingRight:"12px",paddingBottom:"12px"},children:[e.jsxs("div",{style:g(s,!1,!1,d).subtext,children:[Y(r.duration||0)," •",(r.tonnage/1e3).toFixed(2)," ",c===0?"тонн":"tons"]}),Object.entries(r.exercises||{}).filter(([x,S])=>S?.sets?.length>0).map(([x,S])=>{const F=parseInt(x,10),P=u.exercises.find(a=>a.id===F)?.name?.[c]||`Exercise ${x}`;return e.jsxs("div",{style:{...g(s,!1,!1,d).exercisesPanel,marginTop:"10px",backgroundColor:o.get("background",s),borderRadius:"6px",padding:"10px",width:"92vw"},children:[e.jsx("div",{style:{fontSize:d===0?"12px":"14px",fontWeight:"600",color:o.get("mainText",s),marginBottom:"6px"},children:P}),S.sets.map((a,$)=>{const U=a.type===0?o.get("trainingIsolatedFont",s):o.get("trainingBaseFont",s);return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:d===0?"11px":"13px",color:U,fontWeight:"500",marginTop:"4px"},children:[e.jsxs("span",{children:["Set ",$+1,":"]}),e.jsxs("span",{children:[a.weight," kg"]}),e.jsx("span",{children:"×"}),e.jsx("span",{children:a.reps}),a.time!=null&&a.time>0&&e.jsxs("span",{children:["(",Math.round(a.time/1e3),"s)"]})]},$)})]},x)})]})]},j)})})},g=(i,m,s,f)=>({container:{backgroundColor:o.get("background",i),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI",boxSizing:"border-box"},sessionPanel:{display:"flex",flexDirection:"row",width:"98vw",height:"6vh",alignItems:"center",justifyContent:"space-between"},exercisesPanel:{display:"flex",flexDirection:"column",width:"90vw",alignItems:"flex-start",justifyContent:"flex-start",padding:"6px",borderRadius:"4px"},text:{textAlign:"left",fontSize:f===0?"13px":"15px",color:o.get("mainText",i),marginBottom:"4px"},subtext:{textAlign:"left",fontSize:f===0?"11px":"13px",color:o.get("subText",i),marginBottom:"4px"}});export{V as default};
