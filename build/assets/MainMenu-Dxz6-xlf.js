import{U as L,s as B,A as x,a as U,R as m,t as $,l as N,f as O,j as i,C as R}from"./index-vqahVW5Z.js";/*! Grained.js 
* Author : Sarath Saleem  - https://github.com/sarathsaleem 
* MIT license: http://opensource.org/licenses/MIT 
* GitHub : https://github.com/sarathsaleem/grained 
* v0.0.1 
*/(function(t,e){function o(n,g){function y(l,w,b,k){var S="";S=w.length?w+"{"+b+"}":b,"insertRule"in l?l.insertRule(S,k):"addRule"in l&&l.addRule(w,b,k)}var r=null,h=null,v=null;if(typeof n=="string"&&(r=e.getElementById(n.split("#")[1])),!r)return void console.error("Grained: cannot find the element with id "+n);h=r.id,r.style.position!=="absolute"&&(r.style.position="relative"),r.style.overflow="hidden";var s=["","-moz-","-o-animation-","-webkit-","-ms-"],a={animate:!0,patternWidth:100,patternHeight:100,grainOpacity:.1,grainDensity:1,grainWidth:1,grainHeight:1,grainChaos:.5,grainSpeed:20};Object.keys(g).forEach(function(l){a[l]=g[l]});for(var j=function(){var l=e.createElement("canvas"),w=l.getContext("2d");l.width=a.patternWidth,l.height=a.patternHeight;for(var b=0;b<a.patternWidth;b+=a.grainDensity)for(var k=0;k<a.patternHeight;k+=a.grainDensity){var S=256*Math.random()|0;w.fillStyle="rgba("+[S,S,S,a.grainOpacity].join()+")",w.fillRect(b,k,a.grainWidth,a.grainHeight)}return l.toDataURL("image/png")},c=j(),p="",E=["0%:-10%,10%","10%:-25%,0%","20%:-30%,10%","30%:-30%,30%","40%::-20%,20%","50%:-15%,10%","60%:-20%,20%","70%:-5%,20%","80%:-25%,5%","90%:-30%,25%","100%:-10%,10%"],d=s.length;d--;){p+="@"+s[d]+"keyframes grained{";for(var D=0;D<E.length;D++){var u=E[D].split(":");p+=u[0]+"{",p+=s[d]+"transform:translate("+u[1]+");",p+="}"}p+="}"}var M=e.getElementById("grained-animation");M&&M.parentElement.removeChild(M);var f=e.createElement("style");f.type="text/css",f.id="grained-animation",f.innerHTML=p,e.body.appendChild(f);var A=e.getElementById("grained-animation-"+h);A&&A.parentElement.removeChild(A),f=e.createElement("style"),f.type="text/css",f.id="grained-animation-"+h,e.body.appendChild(f);var C="background-image: url("+c+");";if(C+='position: absolute;content: "";height: 300%;width: 300%;left: -100%;top: -100%;',d=s.length,a.animate)for(;d--;)C+=s[d]+"animation-name:grained;",C+=s[d]+"animation-iteration-count: infinite;",C+=s[d]+"animation-duration: "+a.grainChaos+"s;",C+=s[d]+"animation-timing-function: steps("+a.grainSpeed+", end);";v="#"+h+"::before",y(f.sheet,v,C)}t.grained=o})(window,document);class z{static BASE_URL="https://uml-backend-node.onrender.com/api/notifications";static async sendMessage(e,o){fetch(this.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:e,message:o,userId:L.id,metadata:{}})}).then(n=>n.json()).then(n=>{console.log("Success:",n),B(n.message)}).catch(n=>console.error("Error:",n))}}const W=()=>{try{if(!x.choosenHabits||x.choosenHabits.length===0){console.log("No habits chosen");return}const t=x.prefs[0],e=x.choosenHabits.map(g=>U?.find(y=>y.id===g)).filter(Boolean);if(e.length===0){console.log("No valid habits found");return}let o="⏰ "+(L?.name||"")+", ";o+=t===0?e.length>1?"время для ваших привычек: ":"время для вашей привычки: ":`it's time to work on your ${e.length>1?"habits":"habit"}: `;const n=e.map(g=>g.name[t]).join(", ");o+=n,z.sendMessage("habit",o)}catch(t){console.error("Error in habitReminder:",t)}},F=()=>{try{const t=x.prefs[0],e=L?.name||"",o=t===0?`Пора тренироваться, ${e}!`:`It's time to train, ${e}!`;z.sendMessage("training",o)}catch(t){console.error("Error in trainingReminder:",t)}},q=({onPageChange:t})=>{const[e,o]=m.useState("dark"),[n,g]=m.useState(x.prefs[0]),[y,r]=m.useState(0),[h,v]=m.useState(!1),[s,a]=m.useState(""),[j,c]=m.useState(""),[p,E]=m.useState(""),d=10;m.useEffect(()=>{const u=$.subscribe(o),M=N.subscribe(f=>{g(f==="ru"?0:1)});return()=>{u.unsubscribe(),M.unsubscribe()}},[]),m.useEffect(()=>{window.grained("#grain",{animate:!0,grainSize:.05,grainDensity:.2,grainOpacity:.01,grainWidth:.9,grainHeight:.9,grainColor:"#ffffffff"});const u=O.subscribe(a);return()=>{u.unsubscribe()}},[]);const D=()=>{y>=d&&(v(!h),r(0)),r(y+1)};return i.jsxs(i.Fragment,{children:[h&&i.jsxs("div",{style:{position:"absolute",display:"flex",flexDirection:"column",top:"0",left:"0",width:"100vw",height:"40vh",backgroundColor:"rgba(0,0,0,0.7)",zIndex:1e3},children:[i.jsx("div",{style:{marginRight:"5vw",width:"85vw",height:"13vh",fontSize:"12px",fontFamily:"Segoe UI",border:"2px solid white",color:"white"},children:s}),i.jsx("textarea",{style:{marginRight:"5vw",width:"85vw",height:"12vh",fontSize:"12px",fontFamily:"Segoe UI",border:"2px solid white",color:"white"},value:p,onChange:u=>E(u.target.value)}),i.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[i.jsx("input",{type:"text",onChange:u=>c(u.target.value)}),i.jsx("button",{onClick:()=>z.sendMessage(j,p),children:"Submit"})]}),i.jsx("button",{onClick:()=>v(!1),children:"Close console"})]}),i.jsxs("div",{style:T(e).container,children:[i.jsx("div",{style:{height:"20vh"}}),i.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[i.jsx("button",{onClick:()=>W(),children:"Habit reminder"}),i.jsx("button",{onClick:()=>F(),children:"Training reminder"})]}),i.jsx("h2",{style:T(e).mainText,children:n===0?"Выберите категорию":"Choose category"}),i.jsxs("div",{style:T(e).scrollView,children:[i.jsx(H,{text:["Привычки","Habits"],decr:["Приложение использует научно обоснованные методы формирования привычек, включая теорию петли привычки (Чарльз Дахигг), принципы подкрепления (Б.Ф. Скиннер) и 21-дневное правило формирования привычек (Максвелл Мальц).","This app utilizes evidence-based habit formation techniques, including the habit loop theory (Charles Duhigg), principles of reinforcement (B.F. Skinner), and the 21-day rule of habit formation (Maxwell Maltz)."],theme:e,lang:n,onClick:()=>{t("HabitsMain"),I(null,100)}}),i.jsx(H,{text:["Тренировочная дневник","Training diary"],decr:["Отслеживайте свой тренировочный прогресс, ставьте цели и анализируйте результаты. Идеальный инструмент для системного подхода к физическому развитию.","Track your workout progress, set goals, and analyze results. The perfect tool for a systematic approach to physical development."],colorDark:"#143113ff",colorLight:"#98f9a0ff",colorSpecialDark:"#26352fff",colorSpecialLight:"#9de074ff",theme:e,lang:n,onClick:()=>{t("TrainingMain"),I(null,100)}}),i.jsx(H,{text:["Список задач","Simple task manager"],decr:["Скоро будет доступно","Coming soon"],colorDark:"#4b3f1fff",colorLight:"#ebe58eff",colorSpecialDark:"#36341cff",colorSpecialLight:"#d0e074ff",theme:e,lang:n,onClick:()=>{I(null,100)}}),i.jsx(H,{text:["Хорошие новости","Good news"],decr:["Скоро будет доступно","Coming soon"],colorDark:"#3a201bff",colorLight:"#ecae94ff",colorSpecialDark:"#4a2828ff",colorSpecialLight:"#e194c6ff",theme:e,lang:n,onClick:()=>{I(null,100)}}),i.jsx("div",{style:{height:"5vh",width:"100%"},onClick:()=>{D()}})]})]})]})};function H({text:t=["Категория","Category"],decr:e=["Скоро будет доступно","Coming soon"],colorDark:o="#122636ff",colorLight:n="#9cccf1ff",colorSpecialDark:g="#1d262dff",colorSpecialLight:y="#45dff4ff",theme:r,lang:h,onClick:v}){const s=c=>c==="dark"?o:c==="specialdark"?g:c==="speciallight"?y:n,j={alignItems:"start",justifyContent:"start",height:"14vh",borderRadius:"24px",border:`2px solid ${(c=>c==="dark"?"#9099a0ff":c==="specialdark"?"#938b8bff":c==="speciallight"?"#e0b1b1ff":"#8a8e91ff")(r)}`,margin:"10px",backgroundColor:s(r),overflow:"hidden",position:"relative"};return i.jsxs("div",{id:"grain",style:j,onClick:v,children:[i.jsx("h2",{style:T(r).cardText,children:Array.isArray(t)?t[h]:t}),i.jsx("p",{style:T(r).text,children:Array.isArray(e)?e[h]:e})]})}const T=t=>({container:{backgroundColor:R.get("background",t),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI"},mainText:{textAlign:"left",marginBottom:"5px",fontSize:"14px",color:R.get("mainText",t)},cardText:{textAlign:"left",marginBottom:"5px",fontSize:"14px",color:R.get("mainText",t),marginLeft:"30px"},text:{textAlign:"left",fontSize:"10px",color:R.get("subText",t),marginLeft:"30px"},scrollView:{width:"95vw",maxHeight:"90vh",overflowY:"auto",justifyContent:"center",alignItems:"center"}});function I(t,e){x.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),x.prefs[3]==0&&navigator.vibrate(e)}export{q as default};
