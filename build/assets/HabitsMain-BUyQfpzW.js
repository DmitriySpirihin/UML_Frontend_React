import{ac as Le,A as c,t as We,f as Oe,ad as Ue,l as Te,C as d,j as t,M as je,a2 as Ce,b as He,ab as he,m as te,ae as Ve,d as Ye,U as qe,q as Xe,p as Ke,af as _e,ag as Je,g as de,ah as Qe,o as Fe,ai as ve,a6 as Ze,aj as et,s as tt}from"./index-CHg4mtf-.js";import{R as be,r as p}from"./recharts-k8ghPecL.js";import{I as se,u as st,a as nt,b as ye}from"./Icons-tfRWqGcK.js";import{F as me}from"./index-DaAeu_Uz.js";import{T as ot}from"./index-D8_amfcC.js";import{T as it,a as at}from"./TimerOffTwoTone-B9XvdqE0.js";import{H as rt}from"./HoverInfoButton-Am8Bqhka.js";import{S as lt}from"./Slider-DhWvCJPI.js";function ct(e){return Le({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}const Se=new Date().toISOString().split("T")[0],ze=new Audio("Audio/Click.wav"),dt=new Audio("Audio/Skip.wav"),Ie=new Audio("Audio/IsDone.wav");let pt,xt,Ht;const j=(e,s=0)=>{const i=e==="light"||e==="speciallight",u=i?"#F2F4F6":d.get("background",e),m=i?"#FFFFFF":d.get("simplePanel",e),S=i?"rgba(0,0,0,0.0)":`1px solid ${d.get("border",e)}`,x=i?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:u,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:S,backgroundColor:m,boxShadow:x,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:m,borderRadius:"24px",border:S,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:x},mainText:{fontSize:"17px",fontWeight:"600",color:d.get("mainText",e),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:d.get("subText",e),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:i?"#E5E5EA":"rgba(255,255,255,0.1)",color:i?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:d.get("icons",e),fontSize:"24px"}}},ke=e=>({Здоровье:["Здоровье","Health"],Health:["Здоровье","Health"],Развитие:["Развитие","Growth"],Growth:["Развитие","Growth"],Продуктивность:["Продуктивность","Productivity"],Productivity:["Продуктивность","Productivity"],"Отношения и отдых":["Отношения и отдых","Relationships & recreation"],"Relationships & recreation":["Отношения и отдых","Relationships & recreation"],"Отказ от вредного":["Отказ от вредного","Bad habits to quit"],"Bad habits to quit":["Отказ от вредного","Bad habits to quit"]})[e]||["Здоровье","Health"],zt=()=>{const[e,s]=be.useState("dark"),[i,u]=be.useState([]),[m,S]=be.useState([]),[x,H]=p.useState(c.prefs[0]),[f,I]=p.useState(0),[y,C]=p.useState(c.choosenHabits.length>0),[z,Y]=p.useState(0),[w,B]=p.useState(0),[a,b]=p.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[E,M]=p.useState(""),[T,N]=p.useState(""),[D,A]=p.useState(""),[L,ne]=p.useState(""),[oe,q]=p.useState(!1),[P,X]=p.useState("Здоровье"),[xe,K]=p.useState(null),[_,W]=p.useState(""),[J,k]=p.useState(!1);p.useEffect(()=>{if(a.type===0&&(N($().find(n=>n.id===a.hId)?.name[x]||""),A($().find(n=>n.id===a.hId)?.description[x]||""),ne($().find(n=>n.id===a.hId)?.iconName||""),X($().find(n=>n.id===a.hId)?.category[0]||"Здоровье")),a.type===4){if(a.gId<=0)return;a.setGoals(n=>{const h=[...n];return[h[a.gId-1],h[a.gId]]=[h[a.gId],h[a.gId-1]],c.choosenHabitsGoals[a.hId]=h,h})}else a.type===5&&a.setGoals(n=>{if(a.gId>=n.length-1)return n;const h=[...n];return[h[a.gId],h[a.gId+1]]=[h[a.gId+1],h[a.gId]],c.choosenHabitsGoals[a.hId]=h,h})},[a]),p.useEffect(()=>{const n=We.subscribe(s),h=Oe.subscribe(I),r=Ue.subscribe(k);return()=>{n.unsubscribe(),h.unsubscribe(),r.unsubscribe()}},[]),p.useEffect(()=>{const n=Te.subscribe(h=>{H(h==="ru"?0:1)});return()=>n.unsubscribe()},[]),p.useEffect(()=>{u(c.choosenHabits)},[]),p.useEffect(()=>{if(i.length>0){const n=new Set;i.forEach(h=>{const r=$().find(l=>l.id===h);r&&!n.has(r.category[0])&&n.add(r.category[0])}),S(Array.from(n))}},[i]);const ge=(n,h,r,l,F)=>{u(R=>{const V=new Set(R);return V.has(n)?R:(c.addHabit(n,h,r,l,F),[...V,n])}),C(c.choosenHabits.length>0)},O=n=>{if(i.includes(n)){c.removeHabit(n),u(F=>F.filter(R=>R!==n)),B(F=>F+1),C(c.choosenHabits.length>0);const r=$().find(F=>F.id===n)?.name?.[x]||(x===0?"Привычка":"Habit"),l=x===0?`Привычка: '${r}' удалена`:`Habit: '${r}' deleted`;he(l,2e3,!0)}},G=()=>{switch(a.type){case 0:c.CustomHabits||(c.CustomHabits=[]);const n=c.CustomHabits.findIndex(r=>r.id===a.hId),h=ke(P);if(n!==-1)c.CustomHabits=c.CustomHabits.map((r,l)=>l===n?{...r,name:[T.trim(),T.trim()],description:[D.trim(),D.trim()],iconName:L,category:h}:r);else{const r=He.find(l=>l.id===a.hId);if(r){const l={...r,name:[T.trim(),T.trim()],description:[D.trim(),D.trim()],iconName:L,category:h,isCustom:!0};c.CustomHabits=[...c.CustomHabits,l]}}u(r=>[...r]),b(r=>({...r,show:!1})),a.hInfo&&a.hInfo({name:[T,T],descr:[D,D],icon:L}),B(r=>r+1);break;case 1:E.length>0?(a.setGoals(r=>[...r,{text:E,isDone:!1}]),c.addHabitGoal(a.hId,{text:E,isDone:!1}),b(r=>({...r,show:!1}))):he(x===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:E.length>0?(a.setGoals(r=>r.map((l,F)=>F===a.gId?{...l,text:E.trim()}:l)),c.choosenHabitsGoals[a.hId][a.gId].text=E,b(r=>({...r,show:!1}))):he(x===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:a.setGoals(r=>r.filter((l,F)=>F!==a.gId)),c.choosenHabitsGoals[a.hId].splice(a.gId,1),b(r=>({...r,show:!1}));break}};pt=O,xt=ge;const Q=e==="light"||e==="speciallight",Z=Q?"#F2F4F6":d.get("background",e);return t.jsxs("div",{style:{...j(e).container,backgroundColor:Z},children:[t.jsx(rt,{tab:"HabitsMain"}),J&&t.jsx("div",{style:j(e).confirmContainer,children:t.jsxs("div",{style:j(e).cP,children:[t.jsx("div",{style:j(e,f).mainText,children:_}),t.jsxs("div",{style:j(e).buttonsRow,children:[t.jsxs("button",{style:j(e).btnCancel,onClick:()=>k(!1),children:[t.jsx(je,{size:20,style:{marginRight:5}})," ",x===0?"Нет":"No"]}),t.jsxs("button",{style:{...j(e).btnSave,backgroundColor:"#FF453A"},onClick:()=>{O(xe),k(!1)},children:[t.jsx(Ce,{size:20,style:{marginRight:5}})," ",x===0?"Да":"Yes"]})]})]})}),!y&&t.jsx("div",{style:{...j(e).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:t.jsx("p",{style:{...j(e).subText,fontSize:f===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:d.get("subText",e)},children:ht(x)})}),y&&t.jsxs("div",{style:j(e).scrollView,children:[gt({theme:e,habitsCards:i,categories:m,setCP:b,setCurrentId:Y,fSize:f,setNeedConfirmation:k,setConfirmMessage:W,setHabitToDelete:K}),t.jsx("div",{style:{marginBottom:"150px"}})]},w),a.show&&t.jsx("div",{style:j(e).confirmContainer,children:t.jsxs("div",{style:{...j(e).cP,width:"90%"},children:[t.jsxs("div",{style:j(e).mainText,children:[a.type===1&&(x===0?"Новая цель":"New goal"),a.type===2&&(x===0?"Изменить цель":"Edit goal"),a.type===3&&(x===0?"Удалить цель?":"Delete goal?"),a.type===0&&(x===0?"Настройки привычки":"Edit habit")]}),a.type===1&&t.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:t.jsx("input",{type:"text",placeholder:x===0?"Название цели...":"Goal title...",value:E,onChange:n=>M(n.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:d.get("mainText",e),outline:`solid 1px ${d.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}})}),a.type===2&&t.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:t.jsx("input",{type:"text",placeholder:x===0?"Название цели...":"Goal title...",value:E,onChange:n=>M(n.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:d.get("mainText",e),outline:`solid 1px ${d.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}})}),a.type===0&&t.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[t.jsx("div",{style:{overflowX:"auto",display:"flex",gap:"8px",paddingBottom:"5px",scrollbarWidth:"none"},children:["Здоровье","Развитие","Продуктивность","Отношения и отдых","Отказ от вредного"].map(n=>t.jsx("div",{onClick:()=>X(n),style:{padding:"8px 14px",borderRadius:"12px",whiteSpace:"nowrap",cursor:"pointer",backgroundColor:P===n?d.get("scrollFont",e):Q?"#F2F2F7":"rgba(255,255,255,0.05)",color:P===n?"#FFF":d.get("subText",e),fontSize:"12px",fontWeight:"700",transition:"0.2s all"},children:x===0?n:ke(n)[1]},n))}),t.jsx("input",{type:"text",placeholder:x===0?"Название":"Name",value:T,onChange:n=>N(n.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:d.get("mainText",e),outline:`solid 1px ${d.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}}),t.jsx("input",{type:"text",placeholder:x===0?"Описание (опц.)":"Description (opt.)",value:D,onChange:n=>A(n.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:d.get("mainText",e),outline:`solid 1px ${d.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>q(!oe),children:[t.jsx("span",{style:{fontSize:"14px",color:d.get("subText",e)},children:x===0?"Иконка":"Icon"}),t.jsx("div",{style:{color:d.get("habitIcon",e)},children:se.getIcon(L,{size:28})})]})]}),t.jsxs("div",{style:j(e).buttonsRow,children:[t.jsxs("button",{style:j(e).btnCancel,onClick:()=>b(n=>({...n,show:!1})),children:[t.jsx(je,{size:22,style:{marginRight:"6px"}})," ",x===0?"Отмена":"Cancel"]}),t.jsxs("button",{style:{...j(e).btnSave,backgroundColor:a.type===3?"#FF453A":"#007AFF"},onClick:()=>{G()},children:[t.jsx(Ce,{size:22,style:{marginRight:"6px"}})," ",a.type===3?x===0?"Удалить":"Delete":x===0?"Готово":"Save"]})]})]})}),oe&&t.jsx("div",{style:j(e).confirmContainer,onClick:()=>q(!1),children:t.jsxs("div",{style:{...j(e).selectPanel},onClick:n=>n.stopPropagation(),children:[t.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:d.get("subText",e),fontSize:"13px",fontWeight:"600"},children:x===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(se.ic).map(([n])=>t.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{ne(n),q(!1)},children:se.getIcon(n,{size:30,style:{color:d.get("habitIcon",e)}})},n))]})})]})};function $(){const e=c.CustomHabits||[];return e.concat(He.filter(s=>!e.some(i=>i.id===s.id)))}function gt({theme:e,habitsCards:s,categories:i,setCP:u,setCurrentId:m,fSize:S,setNeedConfirmation:x,setConfirmMessage:H,setHabitToDelete:f}){return i.map(I=>{const y=s.map(C=>$().find(z=>z.id===C)).filter(C=>C&&C.category[0]===I);return y.length===0?null:t.jsx(ut,{text:y[0].category,theme:e,isNegative:I==="Отказ от вредного",children:y.map(C=>t.jsx(ft,{id:C.id,theme:e,setCP:u,setCurrentId:m,fSize:S,setConfirmMessage:H,setNeedConfirmation:x,setHabitToDelete:f},C.id))},I)})}function ft({id:e=0,theme:s,setCP:i,setCurrentId:u,fSize:m,setNeedConfirmation:S,setConfirmMessage:x,setHabitToDelete:H}){const[f,I]=p.useState(c.habitsByDate[Se]?.[e]),[y,C]=p.useState(c.prefs[0]),[z,Y]=p.useState(qe.hasPremium),w=$().find(o=>o.id===e);if(!w)return null;const[B,a]=p.useState({name:w?.name||["",""],descr:w?.description||["",""],icon:w?.iconName||"default"}),b=w.category[0]==="Отказ от вредного",E=Xe(e),M=120,T=-M,[N,D]=p.useState(!0),[A,L]=p.useState(!1),[ne,oe]=p.useState(!1),[q,P]=p.useState(c.choosenHabitsGoals[e]),[X,xe]=p.useState(0),[K,_]=p.useState(!1),[W,J]=p.useState(!!b),[k,ge]=p.useState(b?864e5:6e4),[O,G]=p.useState(b?Math.round(Date.now()-new Date(c.choosenHabitsLastSkip[e])):6e4),[Q,Z]=p.useState(0),[n,h]=p.useState(0),r=b?"#FF3B30":w.color||"#32D74B",l=s==="light"||s==="speciallight";let F=l?"#FFFFFF":d.get("simplePanel",s)+"99",R=l?"#1D1D1F":d.get("mainText",s),V=l?"#8E8E93":d.get("subText",s),ie=l?"#FFFFFF":"rgba(70, 70, 70, 0.2)",fe=r,ae=l?"transparent":`1px solid ${d.get("border",s)}80`,Ee=l?"0 12px 24px -6px rgba(0,0,0,0.08), 0 4px 8px -3px rgba(0,0,0,0.04)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";b&&(F=l?"#FFF5F5":"rgba(255, 59, 48, 0.08)",ae=l?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",ie="rgba(255, 59, 48, 0.15)"),f===1?(F=l?"#E8F5E9":"rgba(20, 60, 30, 0.85)",R=l?"#1E5E25":"#ffffff",V=l?"#2E7D32":"rgba(255,255,255,0.7)",ie=l?"#FFFFFF":"rgba(255,255,255,0.2)",fe=l?"#2E7D32":"#ffffff",ae="transparent"):f===-1&&(F=l?"#FFEBEE":"rgba(60, 20, 20, 0.85)",R=l?"#B71C1C":"#ffffff",V=l?"#C62828":"rgba(255,255,255,0.7)",ie=l?"#FFFFFF":"rgba(255,255,255,0.2)",fe=l?"#C62828":"#ffffff",ae="transparent");const ue=Array.from(Object.values(c.habitsByDate));p.useEffect(()=>{if(e>-1){let o=0;const g=new Date().toISOString().split("T")[0];for(let v=ue.length-2;v>=0;v--)if(e in ue[v])if(ue[v][e]>0)o++;else break;c.habitsByDate[g]?.[e]>0&&o++,h(o)}},[e,c.habitsByDate,f]),p.useEffect(()=>{const o=Ke.subscribe(Y);return()=>o.unsubscribe()},[]),p.useEffect(()=>{if(W){let o=0;const g=setInterval(()=>{o+=50;const v=(O+o)/k*100;Z(v),o===1e3&&G(ce=>{const U=ce+1e3;return o=0,!b&&U>=k?(Ie.play(),clearInterval(g),I(1),G(0),J(!1),Z(0)):U>=k&&f<1&&I(1),U})},50);return()=>clearInterval(g)}},[O,W,k]),p.useEffect(()=>{const o=Te.subscribe(g=>C(g==="ru"?0:1));return()=>o.unsubscribe()},[]),p.useEffect(()=>{c.changeStatus(Se,e,f)},[f]);const Ae=()=>w.isCustom&&w.iconName?se.getIcon(w.iconName,{size:22}):se.getHabitIcon(w.name?w.name[0]:"default",{size:22}),Re=st(0),re=nt(Re,[-1,1],[T,M]),Be=(o,g)=>{b?g.offset.x<T&&N&&(le(!1),ye(re,0,{type:"tween",duration:.2}),D(!1)):Math.abs(g.offset.x)>M&&N&&((f<1&&g.offset.x>0||f>-1&&g.offset.x<0)&&le(g.offset.x>0),ye(re,0,{type:"tween",duration:.2}),D(!1))},Pe=()=>{N&&ye(re,0,{type:"tween",duration:.2}),D(!0)},le=o=>{let g=0;o?g=1:f===0?(g=-1,h(0)):f===1?(g=b?-1:0,h(0),b&&(G(0),c.choosenHabitsLastSkip[e]=Date.now())):f===-1&&(g=-1,b&&(G(0),c.choosenHabitsLastSkip[e]=Date.now())),c.habitsByDate[Se][e]=g,g===1?pe(Ie):g===-1&&pe(dt),I(g)},we=()=>{u(e),pe(ze);const o=!A;L(o),tt(o?e:null)};p.useEffect(()=>{const o=_e.subscribe(g=>L(g===e));return()=>o.unsubscribe()},[e]),p.useEffect(()=>{D(!K)},[K]);const Ge=()=>{f<1&&!b&&(J(!0),G(0))},$e=()=>{b||(J(!1),Z(0),G(0))},Me=o=>{H(o),S(!0),x(c.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return t.jsxs(te.div,{id:e,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:F,backdropFilter:l?"none":"blur(40px)",border:l?"none":ae,boxShadow:Ee,x:re},onClick:o=>{const g=document.getElementById(e);(g.clientHeight<80||o.nativeEvent.pageY-(g.getBoundingClientRect().top+window.scrollY)<80)&&we()},drag:N?"x":!1,dragConstraints:{left:T,right:f>0||b?0:M},onDrag:Be,onDragEnd:Pe,whileTap:{scale:.99},animate:{height:A?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[t.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ie,color:f===1?"#fff":fe,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:A?"5px":"0"},children:Ae()}),t.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[t.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:R,whiteSpace:A?"normal":"nowrap",overflow:A?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:B.name[y]}),t.jsxs("div",{style:{display:"flex",gap:"5px",marginTop:"16px"},children:[t.jsx(ee,{theme:s,icon:t.jsx(ct,{size:9}),text:St(e),color:s==="dark"?"#e3cb31":"#9884008f"}),t.jsx(ee,{theme:s,icon:t.jsx(Je,{size:9}),text:jt(e),color:s==="dark"?"#e33131":"#9800008f"}),!b&&n>0&&t.jsx(ee,{theme:s,icon:t.jsx(de,{size:9}),text:mt(y,n),color:s==="dark"?"#31e355":"#1e98008f"}),!b&&W&&t.jsx(ee,{theme:s,icon:t.jsx(Qe,{size:9}),text:De(O,k,y,!1),color:s==="dark"?"#31c8e3":"#0086988f"}),b&&t.jsx(ee,{theme:s,icon:t.jsx(de,{size:9}),text:De(O,k,y,b),color:s==="dark"?"#31e355":"#1e98008f"})]})]}),t.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!b&&t.jsxs(t.Fragment,{children:[!W&&f===0&&t.jsx(it,{onClick:o=>{o.stopPropagation(),_(!0)},style:{color:d.get("icons",s),opacity:.4,fontSize:"24px",marginRight:"15px"}}),W&&t.jsx(at,{onClick:o=>{o.stopPropagation(),$e()},style:{color:r,fontSize:"24px",marginRight:"15px"}}),t.jsx("div",{onClick:o=>{o.stopPropagation(),le(!0)},style:{width:"30px",height:"30px",borderRadius:"50%",border:f!==0?"none":`2px solid ${l?"#E5E5EA":"#3A3A3C"}`,backgroundColor:f===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:f===1&&t.jsx(me,{size:16,color:"#FFF"})})]}),b&&t.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(de,{size:16,color:"#FF453A"})})]})]}),A&&t.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[t.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:l?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),B.descr[y]&&t.jsx("div",{style:{color:V,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:B.descr[y]}),z?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:q?.map((o,g)=>t.jsxs(te.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"90%",padding:"14px 16px",borderRadius:"16px",backgroundColor:l?"#FFFFFF":"rgba(255,255,255,0.05)",border:l?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:l?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[t.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:o.isDone?l?"#AEAEB2":"#636366":R,textDecoration:o.isDone?"line-through":"none"},children:o.text}),ne&&X===g&&t.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[t.jsx(Fe,{onClick:()=>i(v=>({...v,show:!0,type:2,hId:e,gId:g,setGoals:P})),style:{fontSize:"14px",margin:"0 6px",color:d.get("icons",s),opacity:.7}}),t.jsx(ve,{onClick:()=>i(v=>({...v,show:!0,type:3,hId:e,gId:g,setGoals:P})),style:{fontSize:"14px",margin:"0 6px",color:d.get("icons",s),opacity:.7}})]}),t.jsx("div",{onClick:()=>{oe(v=>!(v&&X===g)),xe(g),u(e)},children:t.jsx(ot,{style:{fontSize:"16px",color:d.get("icons",s),opacity:.4,marginRight:"12px"}})}),t.jsx("div",{onClick:()=>P(v=>{const ce=v.map((U,Ne)=>Ne===g?{...U,isDone:!U.isDone}:U);return c.choosenHabitsGoals[e]=ce,ce}),style:{width:"24px",height:"24px",borderRadius:"8px",border:o.isDone?"none":`2px solid ${l?"#E5E5EA":"#3A3A3C"}`,backgroundColor:o.isDone?r:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:o.isDone&&t.jsx(me,{size:12,color:"#FFF"})})]},g))}),t.jsxs("div",{onClick:()=>i({show:!0,type:1,hId:e,gId:0,setGoals:P}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${r}66`,backgroundColor:`${r}10`},children:[t.jsx(Ze,{style:{fontSize:"12px",color:r}}),t.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:r,fontWeight:"600"},children:y===0?"Добавить цель":"Add goal"})]}),t.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:d.get("subText",s),textTransform:"uppercase",letterSpacing:"0.5px"},children:y===0?"Достижения":"Achievements"}),c.choosenHabitsAchievements[e]?.map((o,g)=>t.jsx(yt,{index:g,milestone:o,id:e,isNegative:b,percent:E,theme:s,fSize:m,langIndex:y},g))]}):t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",marginBottom:"15px",fontSize:"12px",fontWeight:"600",color:d.get("subText",s),border:`2px dashed ${d.get("subText",s)}66`,padding:"12px",borderRadius:"16px"},children:y===0?"Микро цели и достижения с премиум":"Micro goals and achievements with premium"}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"20px"},children:[t.jsx(Fe,{onClick:()=>i(o=>({...o,show:!0,type:0,hId:e,gId:0,hInfo:a})),style:{fontSize:"18px",color:d.get("icons",s),opacity:.7}}),t.jsx(ve,{onClick:()=>Me(e),style:{fontSize:"18px",color:d.get("icons",s),opacity:.7}}),t.jsx(et,{style:{fontSize:"18px",color:d.get("icons",s),opacity:.7},onClick:()=>{we()}}),!b&&t.jsx("div",{onClick:()=>le(!0),style:{width:"18px",height:"18px",borderRadius:"50%",border:f!==0?"none":`2px solid ${l?"#E5E5EA":"#3A3A3C"}`,backgroundColor:f===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:f===1&&t.jsx(me,{size:16,color:"#FFF"})})]})]}),K&&t.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:l?"#FFF":d.get("background",s)},onClick:o=>o.stopPropagation(),children:t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[t.jsx("div",{style:{color:d.get("mainText",s),fontWeight:"bold"},children:bt(k)}),t.jsx(lt,{style:{width:"50%",color:r},min:1,max:59,value:k/6e4,valueLabelDisplay:"off",onChange:o=>{ge(o.target.value*6e4),o.stopPropagation()}}),t.jsx(je,{onClick:o=>{o.stopPropagation(),_(!1)},style:{cursor:"pointer",color:d.get("icons",s),fontSize:"24px"}}),t.jsx(Ce,{onClick:o=>{o.stopPropagation(),Ge(),_(!1)},style:{cursor:"pointer",color:r,fontSize:"24px"}})]})})]})}function ut({text:e=["Имя","Name"],children:s,theme:i}){const[u,m]=p.useState(!0),S=i==="light"||i==="speciallight",x=c.prefs[0];return t.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[t.jsxs("div",{onClick:()=>{m(!u),pe(ze)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[t.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:S?"#1D1D1F":d.get("mainText",i)},children:e[x]}),t.jsx(te.div,{animate:{rotate:u?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:t.jsx(Ve,{size:14,color:S?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),t.jsx(Ye,{initial:!1,children:u&&t.jsx(te.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:s})})})]})}function ht(e){return e===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function pe(e){c.prefs[2]==0&&e!==null&&(e.paused||(e.pause(),e.currentTime=0),e.volume=.5,e.play()),c.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function De(e,s,i,u){const m=u?e:s-e,S=Math.floor(m/1e3),x=Math.floor(S/86400),H=Math.floor(S%86400/3600),f=Math.floor(S%3600/60),I=S%60;if(x>0)if(i===0){let y="";const C=x%10,z=x%100;return z>=11&&z<=14?y="дней":C===1?y="день":C>=2&&C<=4?y="дня":y="дней",x+" "+y}else return x+(x===1?" day":" days");return H>0?H.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0"):f.toString().padStart(2,"0")+":"+I.toString().padStart(2,"0")}function bt(e){return Math.floor(e/6e4)+"m"}const yt=({milestone:e,index:s,id:i,theme:u,langIndex:m})=>{const S=c.choosenHabits.indexOf(i),x=c.choosenHabitsLastSkip[i],H=c.choosenHabitsStartDates[S],f=x||H,I=1440*60*1e3,y=f?Math.floor((Date.now()-f)/I):0,z=[30,50,100][s]||30,Y=y<z,w=z-y,B=m===0?`${w} days left to unlock`:`Осталось ${w} дн. до открытия`;return t.jsx("div",{style:{fontSize:"13px",color:d.get("subText",u),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:Y?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",opacity:.6},children:[t.jsx("div",{style:{width:"12px",height:"12px",border:`1px solid ${d.get("subText",u)}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"bold"},children:"i"}),t.jsx("span",{style:{fontSize:"11px"},children:B})]}):t.jsxs(t.Fragment,{children:[t.jsx(de,{size:12,color:d.get("icons",u),style:{opacity:.8}}),e[m]]})})},mt=(e,s)=>{if(e===0){let i="";const u=s%10,m=s%100;return m>=11&&m<=14?i="дней":u===1?i="день":u>=2&&u<=4?i="дня":i="дней",s+" "+i}else return s+(s===1?" day":" days")},ee=({icon:e,text:s,color:i,theme:u})=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:d.get("background",u)+"75",color:i,fontSize:"10px",fontWeight:"700",whiteSpace:"nowrap"},children:[e,s&&t.jsx("span",{children:s})]});function St(e){const s=c.choosenHabits.indexOf(e);if(s===-1)return null;let i=c.choosenHabitsStartDates[s];if(!i||i.length<8)return null;let u=i.substring(i.length-2),m=i.substring(i.length-4,i.length-2),S=i.substring(2,4);return`${u}-${m}${S}`}function jt(e){let s=0;for(const i in c.habitsByDate){const u=c.habitsByDate[i];u&&e in u&&u[e]===1&&s++}return s}export{xt as addHabitFn,Ht as currentId,zt as default,bt as parsedTimeSimple,pt as removeHabitFn};
