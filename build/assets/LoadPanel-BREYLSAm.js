import{R as i,r as w,t as j,l as S,j as s,C as a,q as v,u as U,v as k,A as l,U as C,w as D,x as M,y as A,z as x}from"./index-D1ctI6DL.js";function P(){const[e,f]=i.useState("dark"),[c,b]=i.useState(0),[n,d]=i.useState("Guest"),[g,m]=i.useState("images/Ui/Guest.jpg"),[p,h]=i.useState(!0);return w.useEffect(()=>{async function u(){try{await v();const r=typeof window<"u"?!window.Telegram?.WebApp:!0;await U({mock:r});const{user:t,languageCode:y,colorScheme:T}=k();t?(l.isFirstStart&&(l.prefs[0]=y==="ru"?0:1,l.prefs[1]=T==="dark"?0:2),C.Init(t.id,t.username,t.photo_url),setTimeout(()=>d(t.username),500),setTimeout(()=>m(Array.isArray(t.photo_url)?t.photo_url[0]:t.photo_url),1e3)):(setTimeout(()=>d("guest"),500),setTimeout(()=>m("images/Ui/Guest.jpg"),500)),await D(),M(),A(),setTimeout(()=>h(!1),500),setTimeout(()=>x("MainMenu"),1200)}catch(r){console.error("Initialization error:",r),setTimeout(()=>h(!1),500),setTimeout(()=>x("MainMenu"),1200)}}u()},[]),i.useEffect(()=>{const u=j.subscribe(f),r=S.subscribe(t=>b(t==="ru"?0:1));return()=>{u.unsubscribe(),r.unsubscribe()}},[]),s.jsx(s.Fragment,{children:s.jsxs("div",{style:o(e).container,children:[s.jsx("img",{src:e==="dark"?"images/Ui/Main_Dark.png":"images/Ui/Main_Light.png",style:o(e).logo}),p&&s.jsx("div",{className:"spinner",children:s.jsx("style",{children:`.spinner {
                        margin-top: 20%;
                        border: 4px solid ${a.get("subText",e)};
                        border-top: 4px solid ${a.get("habitCardSkipped",e)};
                        border-radius: 50%;
                        width: 10vw;
                        height: 10vw;
                        animation: spinner 1.6s linear infinite;
                    }
                    @keyframes spinner {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }`})}),!p&&g&&s.jsx("img",{src:g,style:o(e).userPhoto}),s.jsx("h2",{style:o(e).mainText,children:n!==""?c===0?`Добро пожаловать в UltyMyLife ${n}`:`Welcome to UltyMyLife ${n}`:c===0?"Загружаю данные...":"Loading data..."})]})})}const o=e=>({container:{backgroundColor:a.get("background",e),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw"},logo:{width:"256px",objectFit:"contain",marginTop:"40%"},mainText:{marginTop:"10%",fontSize:"14px",color:a.get("subText",e)},userPhoto:{border:"4px solid "+a.get("border",e),boxShadow:"0px 0px 10px "+a.get("shadow",e),width:"10vw",height:"10vw",borderRadius:"50%",objectFit:"cover",marginTop:"20%"}});export{P as default};
