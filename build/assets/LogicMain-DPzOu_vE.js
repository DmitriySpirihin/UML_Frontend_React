import{A,t as Te,l as ze,f as Fe,C as o,j as e,a as Se,m as C,ch as je,bS as Ke,ci as Je,by as ve,g as Qe,z as Xe,cj as Ze,U as et,p as tt,bR as nt,F as st,bx as it,cl as rt,cm as ot}from"./index-BXBrdbnY.js";import{r as a}from"./recharts-k8ghPecL.js";import{G as at,b as lt}from"./index-DFyY6cxE.js";import{s as ct,l as k}from"./MentalHelper-I_r7i7Gq.js";import{B as dt}from"./BreathAudio-C20VYN3v.js";import{M as pt}from"./MentalInput-CbBTh4Xj.js";const $=[{id:"easy",level:["Ð»ÐµÐ³ÐºÐ¾","easy"],title:["Ð½Ð°Ð¹Ð´Ð¸ Ð»Ð¸ÑˆÐ½Ð¸Ð¹","find the odd one"],itemsCountRange:[4,5],rules:["Ð’ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð°, ÐºÑ€Ð¾Ð¼Ðµ Ð¾Ð´Ð½Ð¾Ð³Ð¾ (Ñ„Ð¾Ñ€Ð¼Ð°/Ñ†Ð²ÐµÑ‚/Ñ‡Ð¸ÑÐ»Ð¾).","All items share one feature except a single odd one."],timeLimitSec:20,description:["ÐŸÑ€Ð¾ÑÑ‚Ñ‹Ðµ Ñ€ÑÐ´Ñ‹: Ð¾Ð´Ð¸Ð½ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ñ†Ð²ÐµÑ‚Ð¾Ð¼, Ñ„Ð¾Ñ€Ð¼Ð¾Ð¹ Ð¸Ð»Ð¸ Ñ‡Ð¸ÑÐ»Ð¾Ð¼.","Simple rows: one item differs by color, shape or number."]},{id:"medium",level:["ÑÑ€ÐµÐ´Ð½Ð¸Ð¹","medium"],title:["Ð»Ð¾Ð²Ð»ÑŽ Ð·Ð°ÐºÐ¾Ð½Ð¾Ð¼ÐµÑ€Ð½Ð¾ÑÑ‚ÑŒ","spot the pattern"],itemsCountRange:[5,6],rules:["ÐŸÐ¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ñƒ (Ñ€Ð¾ÑÑ‚/ÑƒÐ±Ñ‹Ð²Ð°Ð½Ð¸Ðµ, +2, Ã—3), Ð¾Ð´Ð¸Ð½ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð½Ð°Ñ€ÑƒÑˆÐ°ÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾.","Sequence follows a rule (+2, Ã—3, ascending/descending), one item breaks it."],timeLimitSec:25,description:["Ð§Ð¸ÑÐ»Ð¾Ð²Ñ‹Ðµ Ð¸ Ð²Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ñ Ð¾Ð´Ð½Ð¸Ð¼ Ð½Ð°Ñ€ÑƒÑˆÐ¸Ñ‚ÐµÐ»ÐµÐ¼ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°.","Number and visual patterns with one rule-breaking element."]},{id:"hard",level:["ÑÐ»Ð¾Ð¶Ð½Ð¾","hard"],title:["ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ Ð·Ð°ÐºÐ¾Ð½Ð¾Ð¼ÐµÑ€Ð½Ð¾ÑÑ‚Ð¸","complex patterns"],itemsCountRange:[6,7],rules:["Ð¦Ð²ÐµÑ‚ Ð¸ Ñ‡Ð¸ÑÐ»Ð¾ ÑÐ²ÑÐ·Ð°Ð½Ñ‹ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾Ð¼: Ñ‡Ñ‘Ñ‚Ð½Ð¾ÑÑ‚ÑŒ, Ñ‡ÐµÑ€ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ, ÑˆÐ°Ð³. ÐÐ°Ð¹Ð´Ð¸ Ð½Ð°Ñ€ÑƒÑˆÐ¸Ñ‚ÐµÐ»Ñ.","Color and number follow a joint rule: parity, alternation, or step. Find the outlier."],timeLimitSec:25,description:["Ð¦Ð²ÐµÑ‚ Ð¸ Ñ‡Ð¸ÑÐ»Ð¾ ÑÐ²ÑÐ·Ð°Ð½Ñ‹ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾Ð¼: Ñ‡Ñ‘Ñ‚Ð½Ð¾ÑÑ‚ÑŒ, Ñ‡ÐµÑ€ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ, ÑˆÐ°Ð³. ÐÐ°Ð¹Ð´Ð¸ Ð½Ð°Ñ€ÑƒÑˆÐ¸Ñ‚ÐµÐ»Ñ.","Color and number follow a joint rule: parity, alternation, or step. Find the outlier."]},{id:"max",level:["Ð¿Ñ€Ð¾-Ñ€ÐµÐ¶Ð¸Ð¼","max pro"],title:["Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð²Ñ‹Ð·Ð¾Ð²","logic challenge"],itemsCountRange:[7,9],rules:["Ð¡ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¸Ð»Ð¸ Ð¼ÐµÐ½ÑÑŽÑ‰Ð¸ÐµÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°, Ð²Ð¾Ð·Ð¼Ð¾Ð¶ÐµÐ½ Ñ€ÐµÐ²ÐµÑ€Ñ Ð¸Ð»Ð¸ ÑÐ¼ÐµÐ½Ð° Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ð° Ð¿Ð¾ÑÐµÑ€ÐµÐ´Ð¸Ð½Ðµ.","Hidden or shifting rules; pattern may reverse or change midway."],timeLimitSec:30,description:["Ð¡Ð°Ð¼Ñ‹Ðµ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ Ñ€ÑÐ´Ñ‹ Ñ Ð¼ÐµÐ½ÑÑŽÑ‰Ð¸Ð¼Ð¸ÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼Ð¸ Ð¸ Ð¾Ð´Ð½Ð¸Ð¼ Ð½ÐµÐ²ÐµÑ€Ð½Ñ‹Ð¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼.","The toughest rows with changing rules and a single incorrect item."]}],d=(n,i)=>Math.floor(Math.random()*(i-n+1))+n,E=["circle","square","triangle","hexagon"],se={reds:["#e63946","#d90429","#f15a5a","#c1121f"],blues:["#1d3557","#3a5ea5","#4a7bb7","#6c9bcf"],greens:["#2a9d8f","#264653","#2d6a4f","#4c956c"],purples:["#7b2cbf","#5a189a","#9d4edd","#c77dff"],oranges:["#e76f51","#f4a261","#e9c46a","#f28482"],cyans:["#00b4d8","#0096c7","#0077b6","#023e8a"]},xt=()=>{const n=Object.values(se),i=n[d(0,n.length-1)];return i[d(0,i.length-1)]},ut=n=>{const i=d(...$[0].itemsCountRange),s=d(0,i-1),p=["color","shape","value"][d(0,2)];if(p==="value"){const t=d(8+n,18+n),c=d(2,4)*(Math.random()>.5?1:-1),r=t+c;return[Array(i).fill().map((h,m)=>m===s?r:t),String(s+1)]}else if(p==="shape"){const t=E[d(0,E.length-1)],c=E.filter(m=>m!==t),r=c[Math.floor(Math.random()*c.length)],u=xt();return[Array(i).fill().map((m,f)=>({shape:f===s?r:t,color:u})),String(s+1)]}else{const t=Object.keys(se),c=t[d(0,t.length-1)],r=se[c],u=d(0,r.length-1);let h;do h=d(0,r.length-1);while(h===u&&r.length>1);const m=r[u],f=r[h],y=E[d(0,E.length-1)];return[Array(i).fill().map((S,z)=>({shape:y,color:z===s?f:m})),String(s+1)]}},gt=n=>{const i=d(...$[1].itemsCountRange),s=d(1,i-2),p=["add","mult","asc"][d(0,2)];let t=[],c,r;p==="add"?(c=d(2+n,8+n),r=d(2,5),t=Array(i).fill().map((m,f)=>c+f*r)):p==="mult"?(c=d(2,4),r=d(2,4),t=Array(i).fill().map((m,f)=>c*Math.pow(r,f))):(c=d(1+n,5+n),t=Array(i).fill().map((m,f)=>c+f+d(0,1)),t.sort((m,f)=>m-f));const u=t[s],h=d(3,10)*(Math.random()>.5?1:-1);return t[s]=u+h,[t,String(s+1)]},mt=n=>{const i=d(...$[2].itemsCountRange),s=d(1,i-2),p=d(0,2);let t=[],c,r;if(p===0){c=d(5+n,10+n),r=d(3,6);const u=["red","blue"];if(t=Array(i).fill().map((h,m)=>({value:c+m*r,color:u[m%2]})),Math.random()>.5)t[s].color=t[s].color==="red"?"blue":"red";else{const h=d(2,8)*(Math.random()>.5?1:-1);t[s].value+=h}}else p===1?(c=d(4+n,8+n),r=d(2,4),t=Array(i).fill().map((u,h)=>{const m=c+h*r,y=m%2===0?"red":"blue";return{value:m,color:y}}),t[s].color=t[s].color==="red"?"blue":"red"):(c=d(6+n,12+n)*2,r=d(2,5)*2,t=Array(i).fill().map((u,h)=>{const m=c+h*r,y=Math.floor(h/2)%2===0?"red":"blue";return{value:m,color:y}}),Math.random()>.5?t[s].color=t[s].color==="red"?"blue":"red":t[s].value+=1);return[t,String(s+1)]},ft=n=>{const i=d(...$[3].itemsCountRange),s=d(2,i-3),p=Math.floor(i/2),t=d(2+n,6+n),c=[];for(let u=0;u<p;u++)c.push(t+u*3);let r=c[c.length-1]*2;for(let u=p;u<i;u++)c.push(r),r*=2;if(s>=p){const u=c[s];c[s]=u+d(5,20)*(Math.random()>.5?1:-1)}else{const u=c[s];c[s]=u+d(2,6)*(Math.random()>.5?1:-1)}return[c,String(s+1)]};function ht(n,i,s){if(n!==2)return[[],"0"];switch(i){case 0:return ut(s)||[[],"0"];case 1:return gt(s)||[[],"0"];case 2:return mt(s)||[[],"0"];case 3:return ft(s)||[[],"0"];default:return[[],"0"]}}function bt(n,i,s,p,t,c,r){const h=[100,200,300,400][i]||100,m=n===2&&c===t?1:0,f=Math.min(1+s*.02,1.3),y=p/1e3,w=$[i]?.timeLimitSec||20,S=Math.min(y/w,2),z=m===1?Math.max(1.3-(S-1)*.3,1):1,I=m===1&&r>=5?Math.min(1+.1*Math.min(r/10,4),1.5):1;return Math.round(h*m*f*z*I)}function yt(n,i,s){return n===2&&s===i}function St(n,i,s){return n===2?s===i?0:1:0}const jt=3e3,vt=({show:n,type:i,difficulty:s,setShow:p})=>{const[t,c]=a.useState("dark"),[r,u]=a.useState(A.prefs[0]),[h,m]=a.useState(A.prefs[4]),[f,y]=a.useState(""),[w,S]=a.useState(""),[z,I]=a.useState(!1),[v,j]=a.useState(!1),[T,B]=a.useState(!1),[R,G]=a.useState(!1),[Rt,ie]=a.useState(!1),[ke,re]=a.useState(0),[oe,ae]=a.useState(!1),[N,Re]=a.useState(1),[Ae,Be]=a.useState(0),[V,Me]=a.useState(null),[Pe,le]=a.useState(0),[Y,ce]=a.useState(!1),{initAudio:De,playRight:We,playWrong:Le}=dt(A.prefs[2]===0),[At,de]=a.useState(0),[F,pe]=a.useState(!1),[M,H]=a.useState(0),[_,O]=a.useState(1),[xe,K]=a.useState(0),[Ee,$e]=a.useState(""),[ue,P]=a.useState(""),[ge,Ge]=a.useState(""),[D,J]=a.useState(0),[me,U]=a.useState(0),[W,Ve]=a.useState(A.mentalRecords[i]?.[s]||0),[fe,he]=a.useState(0),[be,Q]=a.useState(0);a.useEffect(()=>{if(!v||R||F){y("");return}f==="CC"?S(l=>l.length>0?l.slice(0,-1):""):f===">>>"?_e():/^\d+$/.test(f)&&S(f),y("")},[f,v,R,F]),a.useEffect(()=>{let l=null;return z&&(l=setInterval(()=>he(g=>g+100),100)),()=>clearInterval(l)},[z]),a.useEffect(()=>{const l=Te.subscribe(c),g=ze.subscribe(L=>u(L==="ru"?0:1)),b=Fe.subscribe(m);return()=>{l.unsubscribe(),g.unsubscribe(),b.unsubscribe()}},[]),a.useEffect(()=>{if(!T){Q(0);return}const l=Math.ceil(jt/1e3);Q(l);const g=setInterval(()=>{Q(b=>b<=1?(clearInterval(g),He(),B(!1),0):b-1)},1e3);return()=>clearInterval(g)},[T]),a.useEffect(()=>{if(!F)return;const l=setInterval(()=>{de(g=>{if(g>=900){clearInterval(l),pe(!1),de(0);const b=M+D;return H(b),J(0),S(""),oe?ye(b):(O(N),X(N)),0}return g+100})},100);return()=>clearInterval(l)},[F,M,D,oe,N]),a.useEffect(()=>{if(!Y||R||F)return;const l=setInterval(()=>{le(g=>g+100)},100);return()=>clearInterval(l)},[Y,R,F]);const He=()=>{De(),H(0),O(1),U(0),K(0),S(""),P(""),X(1),j(!0),I(!0),ie(!1),he(0),re(Date.now())},X=(l=_)=>{const[g,b]=ht(i,s,l),L=String(b).trim();Me({items:g,correctIndex:parseInt(b,10)}),$e(L),S(""),P(""),Re(l+1),ae(!1),Be(Date.now()),le(0),ce(!0)},_e=()=>{if(!V)return;ce(!1);const l=String(w).trim(),g=String(Ee).trim(),b=Date.now()-Ae,L=bt(i,s,_,b,g,l,xe),Z=St(i,g,l);let ee="";Z===0?(ee=It(r),U(te=>te+1)):ee=(r===0?"ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚: ":"Correct answer: ")+g;const Ye=Z===0?o.get("maxValColor",t):o.get("minValColor",t);Ge(Ye),P(ee),J(L),K(te=>yt(i,g,l)?te+1:0),Z===0?We():Le(),ae(_>=20),pe(!0)},Oe=()=>{H(0),O(1),U(0),K(0),S(""),P(""),X(1),re(Date.now()),j(!0),I(!0),ie(!1),G(!1)},ye=(l=M)=>{Ue(l);const g=l>W,b=zt(!1,r,l,me,20,g);I(!1),P(b),G(!0),j(!1)},Ue=l=>{l>W&&(Ve(l),A.mentalRecords[i][s]=l);const g=Date.now(),b=Math.round((g-ke)/1e3);ct(b,l>W,i,s,l),H(0),J(0),O(1),U(0)},qe={hidden:{y:"100%"},visible:{y:0,transition:{type:"spring",damping:25,stiffness:200}},exit:{y:"100%"}},q={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},Ne=()=>{if(!V||!V.items)return null;const{items:l}=V;if(Array.isArray(l)&&l.length>0){if(typeof l[0]=="number")return e.jsx("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:l.map((g,b)=>e.jsx("div",{style:x(t).itemBox,children:g},b))});if(typeof l[0]=="object"&&(l[0].shape||l[0].color||typeof l[0].value=="number"))return e.jsx("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap",justifyContent:"center"},children:l.map((g,b)=>e.jsx("div",{style:{...x(t).shapeBox,backgroundColor:g.color||"gray",clipPath:wt(g.shape||"circle"),color:Ct(g.color||"gray")},children:typeof g.value=="number"&&e.jsx("span",{style:{pointerEvents:"none"},children:g.value})},b))})}return e.jsx("div",{children:"?"})};return e.jsx(Se,{children:n&&e.jsx(C.div,{variants:qe,initial:"hidden",animate:"visible",exit:"exit",style:x(t).container,children:e.jsxs(Se,{mode:"wait",children:[!v&&!T&&!R&&e.jsxs(C.div,{variants:q,initial:"hidden",animate:"visible",exit:"exit",style:x(t).contentWrapper,children:[e.jsxs("div",{style:x(t).header,children:[e.jsx(je,{onClick:()=>{p(!1),G(!1)},style:x(t).iconButton}),e.jsx("h2",{style:x(t,h).title,children:k[s].level[r]}),e.jsx("div",{style:{width:40}})]}),e.jsxs("div",{style:x(t).card,children:[e.jsx("div",{style:{...x(t).title,textAlign:"center",fontSize:"16px",marginBottom:10},children:k[s].title[r]}),e.jsx("p",{style:x(t).description,children:k[s].description[r]}),e.jsxs("div",{style:x(t).statsGrid,children:[e.jsx(we,{theme:t,label:r===0?"Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²":"Items",value:`${k[s].itemsCountRange[0]}â€“${k[s].itemsCountRange[1]}`}),e.jsx(we,{theme:t,label:r===0?"Ð’Ñ€ÐµÐ¼Ñ":"Time Limit",value:`${k[s].timeLimitSec}s`})]}),e.jsx("p",{style:x(t).disclaimer,children:Tt(r)})]}),e.jsx("div",{style:x(t).playButtonContainer,children:e.jsxs(C.button,{whileTap:{scale:.9},onClick:()=>B(!0),style:x(t).playButton,children:[e.jsx(Ke,{style:{marginRight:10}})," ",r===0?"ÐÐ°Ñ‡Ð°Ñ‚ÑŒ":"Start"]})})]},"start-screen"),!R&&T&&e.jsxs(C.div,{variants:q,initial:"hidden",animate:"visible",exit:"exit",style:x(t).centeredFull,children:[e.jsx(C.div,{initial:{scale:.5,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:2,opacity:0},style:{fontSize:"8rem",fontWeight:"bold",color:o.get("icons",t)},children:be},be),e.jsx("p",{style:{color:o.get("subText",t),marginTop:20,fontSize:"1.5rem"},children:r===0?"ÐŸÑ€Ð¸Ð³Ð¾Ñ‚Ð¾Ð²ÑŒÑ‚ÐµÑÑŒ!":"Get ready!"})]},"countdown"),!R&&v&&e.jsxs(C.div,{variants:q,initial:"hidden",animate:"visible",exit:"exit",style:x(t).gameContainer,children:[e.jsxs("div",{style:x(t).gameHeader,children:[e.jsx(je,{onClick:()=>ye(M+D),style:x(t).iconButtonSmall}),e.jsxs("div",{style:x(t).gameStat,children:[e.jsx(Je,{style:{marginRight:6}})," ",Ce(fe)]}),e.jsxs("div",{style:{...x(t).gameStat,color:o.get("maxValColor",t)},children:[e.jsx(ve,{style:{marginRight:6}})," ",M]})]}),e.jsxs("div",{style:x(t).subStatsBar,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:o.get("minValColor",t)},children:[e.jsx(Qe,{})," ",xe]}),e.jsx("div",{style:{color:o.get("difficulty",t),fontWeight:"bold"},children:`${_} / 20`})]}),Y&&e.jsx("div",{style:x(t).timerWrapper,children:e.jsxs("svg",{viewBox:"0 0 28 28",style:{width:"100%",height:"100%"},children:[e.jsx("circle",{cx:"14",cy:"14",r:"12",fill:o.get("background",t),stroke:o.get("border",t),strokeWidth:"1"}),e.jsx("text",{x:"14",y:"18",textAnchor:"middle",fill:o.get("mainText",t),fontSize:"8",fontWeight:"bold",children:(Pe/1e3).toFixed(1)})]})}),e.jsxs("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(C.div,{style:{...x(t).problemCard,backgroundColor:F?ge||o.get("simplePanel",t):o.get("simplePanel",t),borderColor:F?ge:"transparent"},animate:F?{scale:[1,1.05,1]}:{scale:1},children:F?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#fff"},children:D>0?`+${D}`:r===0?"ÐžÑˆÐ¸Ð±ÐºÐ°":"Wrong"}),e.jsx("div",{style:{fontSize:"16px",color:"rgba(255,255,255,0.9)",marginTop:5},children:ue})]}):e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:"14px",marginBottom:"16px",color:o.get("subText",t),textAlign:"center",opacity:.8},children:k[s].rules[r]}),Ne(),e.jsx("div",{style:{marginTop:"20px",fontSize:"14px",color:o.get("subText",t),textAlign:"center"},children:r===0?"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ Ð»Ð¸ÑˆÐ½ÐµÐ³Ð¾ (1, 2...)":"Enter index of odd one out (1, 2...)"})]})}),e.jsx("div",{style:x(t).inputDisplay,children:w||e.jsx("span",{style:{opacity:.1},children:"_"})}),e.jsx("div",{style:{flex:1,width:"100%"},children:e.jsx(pt,{setInput:y,type:i})})]})]},"game-screen"),R&&e.jsxs(C.div,{variants:q,initial:"hidden",animate:"visible",exit:"exit",style:x(t).contentWrapper,children:[e.jsxs("div",{style:x(t).header,children:[e.jsx("div",{}),e.jsx("h2",{style:x(t,h).title,children:r===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚":"Result"}),e.jsx("div",{})]}),e.jsxs("div",{style:{...x(t).card,alignItems:"center",gap:20,paddingTop:30},children:[e.jsx(ve,{size:60,color:o.get("maxValColor",t)}),e.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:o.get("mainText",t)},children:M}),e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:10},children:[e.jsx(ne,{theme:t,label:r===0?"Ð’Ñ€ÐµÐ¼Ñ":"Time",value:Ce(fe)}),e.jsx(ne,{theme:t,label:r===0?"ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾":"Correct",value:`${me} / 20`}),M>W?e.jsxs("div",{style:x(t).recordBox,children:[e.jsx(Xe,{color:"#FFD700"})," ",r===0?"ÐÐ¾Ð²Ñ‹Ð¹ Ñ€ÐµÐºÐ¾Ñ€Ð´!":"New Record!"]}):e.jsx(ne,{theme:t,label:r===0?"Ð›ÑƒÑ‡ÑˆÐ¸Ð¹":"Best",value:W})]}),e.jsx("p",{style:{textAlign:"center",fontSize:"14px",color:o.get("subText",t),marginTop:10},children:ue})]}),e.jsx("img",{src:"images/Congrat.png",style:{position:"absolute",top:"595px",left:"36%",width:"120px",zIndex:10,filter:"drop-shadow(0 5px 5px rgba(0,0,0,0.3))"},alt:"Mascot"}),e.jsxs("div",{style:x(t).controlsRow,children:[e.jsx(C.button,{whileTap:{scale:.9},onClick:Oe,style:x(t).secondaryButton,children:e.jsx(Ze,{size:20})}),e.jsx(C.button,{whileTap:{scale:.9},onClick:()=>{p(!1),G(!1)},style:x(t).primaryButton,children:r===0?"Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ":"Finish"})]})]},"result-screen")]})},"modal-container")})},we=({theme:n,label:i,value:s})=>e.jsxs("div",{style:{backgroundColor:o.get("background",n),padding:"10px",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"12px",color:o.get("subText",n)},children:i}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:o.get("mainText",n)},children:s})]}),ne=({theme:n,label:i,value:s})=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"5px 0",borderBottom:`1px solid ${o.get("border",n)}30`},children:[e.jsx("span",{style:{color:o.get("subText",n)},children:i}),e.jsx("span",{style:{color:o.get("mainText",n),fontWeight:"bold"},children:s})]}),wt=n=>{switch(n){case"circle":return"circle(50% at 50% 50%)";case"square":return"polygon(0 0, 100% 0, 100% 100%, 0 100%)";case"triangle":return"polygon(50% 0%, 0% 100%, 100% 100%)";case"hexagon":return"polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)";default:return"circle(50% at 50% 50%)"}},Ct=n=>{if(n[0]!=="#")return"white";const i=parseInt(n.slice(1,3),16),s=parseInt(n.slice(3,5),16),p=parseInt(n.slice(5,7),16);return(i*299+s*587+p*114)/1e3>128?"black":"white"};function It(n){const p=n===0?["ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾!","Ð’ÐµÑ€Ð½Ð¾!","Ð¢Ð¾Ñ‡Ð½Ð¾!","ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾!","ÐœÐ¾Ð»Ð¾Ð´ÐµÑ†!"]:["Great!","Perfect!","Yes!","Correct!","Sharp!"];return p[Math.floor(Math.random()*p.length)]}function Ce(n){const i=Math.floor(n/1e3),s=Math.floor(i/60),p=i%60;return`${String(s).padStart(2,"0")}:${String(p).padStart(2,"0")}`}const Tt=n=>n===0?"ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð»Ð¸ÑˆÐ½Ð¸Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¿Ð¾ Ñ†Ð²ÐµÑ‚Ñƒ, Ñ„Ð¾Ñ€Ð¼Ðµ Ð¸Ð»Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÑŽ. ÐžÑ‚Ð²ÐµÑ‡Ð°Ð¹Ñ‚Ðµ Ð±Ñ‹ÑÑ‚Ñ€Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ð±Ñ€Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¾Ñ‡ÐºÐ¾Ð².":"Find the odd one out based on color, shape, or value. Answer quickly to earn more points.",zt=(n,i,s,p,t,c)=>c?i===0?`ÐÐ¾Ð²Ñ‹Ð¹ Ñ€ÐµÐºÐ¾Ñ€Ð´: ${s}!`:`New Record: ${s}!`:p>=18?i===0?"ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°!":"Sharp logic!":i===0?"Ð¥Ð¾Ñ€Ð¾ÑˆÐ°Ñ Ñ€Ð°Ð·Ð¼Ð¸Ð½ÐºÐ°!":"Good practice!",x=(n,i=14)=>({container:{backgroundColor:o.get("background",n),position:"fixed",top:0,left:0,height:"100vh",width:"100vw",zIndex:2e3,display:"flex",flexDirection:"column",fontFamily:"Segoe UI"},contentWrapper:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",width:"100%",boxSizing:"border-box"},centeredFull:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},header:{width:"90%",marginTop:"65px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},title:{fontSize:"20px",fontWeight:"bold",color:o.get("mainText",n),margin:0},card:{width:"100%",maxWidth:"400px",backgroundColor:o.get("simplePanel",n)+"80",backdropFilter:"blur(10px)",borderRadius:"24px",padding:"20px",boxSizing:"border-box",display:"flex",flexDirection:"column",border:`1px solid ${o.get("border",n)}40`},description:{fontSize:"15px",color:o.get("subText",n),textAlign:"center",marginBottom:"20px",lineHeight:1.4},statsGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",width:"100%",marginBottom:"20px"},disclaimer:{fontSize:"12px",color:o.get("subText",n),textAlign:"center",opacity:.7,marginTop:10},iconButton:{fontSize:"32px",color:o.get("skipped",n),cursor:"pointer"},iconButtonSmall:{fontSize:"28px",color:o.get("skipped",n),cursor:"pointer"},playButtonContainer:{marginTop:"auto",width:"100%",display:"flex",justifyContent:"center",paddingBottom:"40px"},playButton:{backgroundColor:o.get("barsColorMeasures",n),color:"#fff",border:"none",borderRadius:"16px",padding:"16px 40px",fontSize:"18px",fontWeight:"bold",display:"flex",alignItems:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},gameContainer:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},gameHeader:{width:"90%",display:"flex",marginTop:"75px",justifyContent:"space-between",alignItems:"center",padding:"15px 0"},gameStat:{display:"flex",alignItems:"center",fontSize:"18px",fontWeight:"bold",color:o.get("mainText",n)},subStatsBar:{width:"90%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},timerWrapper:{width:"48px",height:"48px",marginBottom:"10px"},problemCard:{width:"90%",minHeight:"200px",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",marginBottom:"20px",border:"2px solid transparent",padding:"20px",boxSizing:"border-box"},inputDisplay:{fontSize:"38px",fontWeight:"bold",color:o.get("mainText",n),height:"50px",marginBottom:"10px",fontFamily:"monospace",textAlign:"center"},itemBox:{padding:"12px 18px",backgroundColor:o.get("bottomPanel",n),borderRadius:"12px",fontWeight:"bold",fontSize:"20px",color:o.get("mainText",n),border:`2px solid ${o.get("border",n)}`},shapeBox:{width:"50px",height:"50px",border:`2px solid ${o.get("border",n)}`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",fontSize:"16px",fontWeight:"bold"},recordBox:{backgroundColor:"rgba(255, 215, 0, 0.15)",color:"#FFD700",padding:"10px",borderRadius:"12px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"bold",fontSize:"14px"},controlsRow:{display:"flex",gap:"20px",marginTop:"auto",marginBottom:"40px"},primaryButton:{backgroundColor:o.get("difficulty5",n),color:o.get("mainText",n),border:"none",borderRadius:"16px",padding:"14px 30px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},secondaryButton:{backgroundColor:o.get("background",n),color:o.get("subText",n),border:`1px solid ${o.get("border",n)}`,borderRadius:"16px",padding:"14px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}}),Et=()=>{const[n,i]=a.useState("dark"),[s,p]=a.useState(A.prefs[0]),[t,c]=a.useState(A.prefs[4]),[r,u]=a.useState(!1),[h,m]=a.useState(0),[f,y]=a.useState(et.hasPremium);a.useEffect(()=>{const v=tt.subscribe(y);return()=>v.unsubscribe()},[]),a.useEffect(()=>{const v=Te.subscribe(i),j=ze.subscribe(B=>p(B==="ru"?0:1)),T=Fe.subscribe(c);return()=>{v.unsubscribe(),j.unsubscribe(),T.unsubscribe()}},[]);const w=v=>A.mentalRecords?.[2]?.[v]||0,S={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},z={hidden:{opacity:0,y:10,scale:.98},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:25}}},I={emoji:"ðŸ§©",ru:"Ð›Ð¾Ð³Ð¸ÐºÐ°",en:"Logic"};return e.jsxs("div",{style:Ie(n).container,children:[e.jsxs("div",{style:Ie(n).scrollView,children:[e.jsx("div",{style:{height:"3vh"}}),e.jsxs("div",{style:{width:"92%",marginBottom:"20px",display:"flex",flexDirection:"column",gap:"5px",marginTop:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"28px"},children:I.emoji}),e.jsx("h1",{style:{margin:0,color:o.get("mainText",n),fontSize:"26px",fontFamily:"Segoe UI",fontWeight:"800"},children:s===0?I.ru:I.en})]}),e.jsx("span",{style:{fontSize:"14px",color:o.get("subText",n),opacity:.7,marginLeft:"4px"},children:s===0?"ÐÐ°Ð¹Ð´Ð¸ Ð»Ð¸ÑˆÐ½ÐµÐµ":"Find the odd one out"})]}),e.jsx(C.div,{variants:S,initial:"hidden",animate:"show",style:{width:"94%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",paddingBottom:"30px"},children:k.map((v,j)=>{const T=j>1&&!f,B=j===k.length-1&&j>3;return e.jsx("div",{style:B?{gridColumn:"1 / -1",width:"100%"}:{},children:e.jsx(kt,{variants:z,index:j,difficulty:j,protocol:v,theme:n,lang:s,fSize:t,needBlur:T,hasPremium:f,record:w(j),isFullWidth:B,onClick:()=>{T||(m(j),u(!0))}})},j)})}),e.jsx("div",{style:{marginBottom:"100px"},children:" "})]}),r&&e.jsx(vt,{type:2,difficulty:h,show:r,setShow:u})]})},Ft=n=>{switch(n){case 0:return{accent:"#4DFF88",bgGlow:"radial-gradient(circle at 100% 0%, rgba(77, 255, 136, 0.15) 0%, transparent 50%)",icon:e.jsx(ot,{})};case 1:return{accent:"#00E5FF",bgGlow:"radial-gradient(circle at 100% 0%, rgba(0, 229, 255, 0.15) 0%, transparent 50%)",icon:e.jsx(rt,{})};case 2:return{accent:"#A64DFF",bgGlow:"radial-gradient(circle at 100% 0%, rgba(166, 77, 255, 0.15) 0%, transparent 50%)",icon:e.jsx(lt,{})};case 3:return{accent:"#FFD700",bgGlow:"radial-gradient(circle at 100% 0%, rgba(255, 215, 0, 0.15) 0%, transparent 50%)",icon:e.jsx(at,{})};default:return{accent:"#FF4D4D",bgGlow:"radial-gradient(circle at 100% 0%, rgba(255, 77, 77, 0.15) 0%, transparent 50%)",icon:e.jsx(it,{})}}};function kt({protocol:n,difficulty:i,onClick:s,theme:p,lang:t,fSize:c,variants:r,needBlur:u,hasPremium:h,record:m,isFullWidth:f}){const y=p==="dark",w=u,{accent:S,bgGlow:z,icon:I}=Ft(i),v={position:"relative",width:"100%",height:f?"120px":"185px",display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"22px",overflow:"hidden",cursor:w?"default":"pointer",backgroundColor:o.get("simplePanel",p),boxShadow:y?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 15px rgba(0,0,0,0.05)",border:y?"1px solid rgba(255,255,255,0.05)":"1px solid rgba(0,0,0,0.02)",padding:"16px",boxSizing:"border-box"},j={width:"36px",height:"36px",borderRadius:"12px",backgroundColor:y?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)",display:"flex",alignItems:"center",justifyContent:"center",color:S,fontSize:"16px"};return e.jsxs(C.div,{variants:r,whileTap:w?{}:{scale:.96},whileHover:w?{}:{y:-2},onClick:s,style:v,children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,background:z,pointerEvents:"none"}}),w&&e.jsxs("div",{onClick:T=>{T.stopPropagation()},style:{position:"absolute",inset:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:y?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.6)",backdropFilter:"blur(8px)"},children:[e.jsx(nt,{size:18,color:S,style:{marginBottom:"8px"}}),e.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:o.get("mainText",p),marginBottom:"8px"},children:"PREMIUM"})]}),e.jsxs("div",{style:{zIndex:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsx("div",{style:j,children:I}),e.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:S,textTransform:"uppercase",letterSpacing:"0.5px",marginTop:"4px"},children:n.level[t]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("div",{style:{fontSize:f?"17px":c===0?"16px":"18px",fontWeight:"700",color:o.get("mainText",p),lineHeight:"1.2"},children:n.title[t]}),e.jsx("div",{style:{fontSize:"12px",color:o.get("subText",p),opacity:.8,lineHeight:"1.3"},children:n.difficulty?n.difficulty[t]:t===0?"Ð¢Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÐ° Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ":"Attention training"})]})]}),!w&&e.jsxs("div",{style:{zIndex:2,marginTop:"auto",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:y?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",padding:"4px 10px",borderRadius:"8px"},children:[e.jsx(st,{size:10,color:S}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:o.get("mainText",p),opacity:.9},children:m})]}),e.jsx("span",{style:{fontSize:"10px",color:o.get("subText",p),opacity:.5},children:t===0?"Ñ€ÐµÐºÐ¾Ñ€Ð´":"best"})]})]})}const Ie=n=>({container:{backgroundColor:o.get("background",n),display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center",height:"90vh",marginTop:"110px",width:"100vw",fontFamily:"Segoe UI, sans-serif",overflow:"hidden"},scrollView:{height:"100%",width:"100%",overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"}});export{Et as default};
