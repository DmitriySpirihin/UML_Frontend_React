import{ac as Me,A as l,t as $e,f as Ne,ad as Le,l as Fe,C as r,j as e,M as pe,a2 as me,b as ke,ab as ge,m as te,ae as We,d as Oe,U as Ue,q as Ve,p as Ye,af as qe,g as ce,ag as Xe,o as Ce,ah as Se,a6 as Ke,ai as _e,s as Je}from"./index-DgjiXy-O.js";import{R as ue,r as d}from"./recharts-k8ghPecL.js";import{I as se,u as Qe,a as Ze,b as he}from"./Icons-DGySJEeH.js";import{F as be}from"./index-D1vg8MOg.js";import{T as et}from"./index-DoKQF0yM.js";import{T as tt,a as st}from"./TimerOffTwoTone-UjPJdSRp.js";import{H as nt}from"./HoverInfoButton-HmqVs5o5.js";import{S as ot}from"./Slider-D8iJbG_K.js";function it(t){return Me({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}const ye=new Date().toISOString().split("T")[0],De=new Audio("Audio/Click.wav"),at=new Audio("Audio/Skip.wav"),we=new Audio("Audio/IsDone.wav");let rt,lt,Ft;const j=(t,n=0)=>{const x=t==="light"||t==="speciallight",f=x?"#F2F4F6":r.get("background",t),S=x?"#FFFFFF":r.get("simplePanel",t),m=x?"rgba(0,0,0,0.0)":`1px solid ${r.get("border",t)}`,p=x?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:f,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:m,backgroundColor:S,boxShadow:p,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:S,borderRadius:"24px",border:m,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:p},mainText:{fontSize:"17px",fontWeight:"600",color:r.get("mainText",t),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:r.get("subText",t),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:x?"#E5E5EA":"rgba(255,255,255,0.1)",color:x?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:r.get("icons",t),fontSize:"24px"}}},ve=t=>({Здоровье:["Здоровье","Health"],Health:["Здоровье","Health"],Развитие:["Развитие","Growth"],Growth:["Развитие","Growth"],Продуктивность:["Продуктивность","Productivity"],Productivity:["Продуктивность","Productivity"],"Отношения и отдых":["Отношения и отдых","Relationships & recreation"],"Relationships & recreation":["Отношения и отдых","Relationships & recreation"],"Отказ от вредного":["Отказ от вредного","Bad habits to quit"],"Bad habits to quit":["Отказ от вредного","Bad habits to quit"]})[t]||["Здоровье","Health"],kt=()=>{const[t,n]=ue.useState("dark"),[x,f]=ue.useState([]),[S,m]=ue.useState([]),[p,H]=d.useState(l.prefs[0]),[u,v]=d.useState(0),[y,I]=d.useState(l.choosenHabits.length>0),[M,Y]=d.useState(0),[C,R]=d.useState(0),[i,h]=d.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[T,$]=d.useState(""),[D,N]=d.useState(""),[k,z]=d.useState(""),[L,ne]=d.useState(""),[oe,q]=d.useState(!1),[B,X]=d.useState("Здоровье"),[xe,K]=d.useState(null),[_,W]=d.useState(""),[J,F]=d.useState(!1);d.useEffect(()=>{if(i.type===0&&(N(G().find(s=>s.id===i.hId)?.name[p]||""),z(G().find(s=>s.id===i.hId)?.description[p]||""),ne(G().find(s=>s.id===i.hId)?.iconName||""),X(G().find(s=>s.id===i.hId)?.category[0]||"Здоровье")),i.type===4){if(i.gId<=0)return;i.setGoals(s=>{const o=[...s];return[o[i.gId-1],o[i.gId]]=[o[i.gId],o[i.gId-1]],l.choosenHabitsGoals[i.hId]=o,o})}else i.type===5&&i.setGoals(s=>{if(i.gId>=s.length-1)return s;const o=[...s];return[o[i.gId],o[i.gId+1]]=[o[i.gId+1],o[i.gId]],l.choosenHabitsGoals[i.hId]=o,o})},[i]),d.useEffect(()=>{const s=$e.subscribe(n),o=Ne.subscribe(v),c=Le.subscribe(F);return()=>{s.unsubscribe(),o.unsubscribe(),c.unsubscribe()}},[]),d.useEffect(()=>{const s=Fe.subscribe(o=>{H(o==="ru"?0:1)});return()=>s.unsubscribe()},[]),d.useEffect(()=>{f(l.choosenHabits)},[]),d.useEffect(()=>{if(x.length>0){const s=new Set;x.forEach(o=>{const c=G().find(b=>b.id===o);c&&!s.has(c.category[0])&&s.add(c.category[0])}),m(Array.from(s))}},[x]);const fe=(s,o,c,b,w)=>{f(A=>{const V=new Set(A);return V.has(s)?A:(l.addHabit(s,o,c,b,w),[...V,s])}),I(l.choosenHabits.length>0)},O=s=>{if(x.includes(s)){l.removeHabit(s),f(w=>w.filter(A=>A!==s)),R(w=>w+1),I(l.choosenHabits.length>0);const c=G().find(w=>w.id===s)?.name?.[p]||(p===0?"Привычка":"Habit"),b=p===0?`Привычка: '${c}' удалена`:`Habit: '${c}' deleted`;ge(b,2e3,!0)}},P=()=>{switch(i.type){case 0:l.CustomHabits||(l.CustomHabits=[]);const s=l.CustomHabits.findIndex(c=>c.id===i.hId),o=ve(B);if(s!==-1)l.CustomHabits=l.CustomHabits.map((c,b)=>b===s?{...c,name:[D.trim(),D.trim()],description:[k.trim(),k.trim()],iconName:L,category:o}:c);else{const c=ke.find(b=>b.id===i.hId);if(c){const b={...c,name:[D.trim(),D.trim()],description:[k.trim(),k.trim()],iconName:L,category:o,isCustom:!0};l.CustomHabits=[...l.CustomHabits,b]}}f(c=>[...c]),h(c=>({...c,show:!1})),i.hInfo&&i.hInfo({name:[D,D],descr:[k,k],icon:L}),R(c=>c+1);break;case 1:T.length>0?(i.setGoals(c=>[...c,{text:T,isDone:!1}]),l.addHabitGoal(i.hId,{text:T,isDone:!1}),h(c=>({...c,show:!1}))):ge(p===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:T.length>0?(i.setGoals(c=>c.map((b,w)=>w===i.gId?{...b,text:T.trim()}:b)),l.choosenHabitsGoals[i.hId][i.gId].text=T,h(c=>({...c,show:!1}))):ge(p===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:i.setGoals(c=>c.filter((b,w)=>w!==i.gId)),l.choosenHabitsGoals[i.hId].splice(i.gId,1),h(c=>({...c,show:!1}));break}};rt=O,lt=fe;const Q=t==="light"||t==="speciallight",Z=Q?"#F2F4F6":r.get("background",t);return e.jsxs("div",{style:{...j(t).container,backgroundColor:Z},children:[e.jsx(nt,{tab:"HabitsMain"}),J&&e.jsx("div",{style:j(t).confirmContainer,children:e.jsxs("div",{style:j(t).cP,children:[e.jsx("div",{style:j(t,u).mainText,children:_}),e.jsxs("div",{style:j(t).buttonsRow,children:[e.jsxs("button",{style:j(t).btnCancel,onClick:()=>F(!1),children:[e.jsx(pe,{size:20,style:{marginRight:5}})," ",p===0?"Нет":"No"]}),e.jsxs("button",{style:{...j(t).btnSave,backgroundColor:"#FF453A"},onClick:()=>{O(xe),F(!1)},children:[e.jsx(me,{size:20,style:{marginRight:5}})," ",p===0?"Да":"Yes"]})]})]})}),!y&&e.jsx("div",{style:{...j(t).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:e.jsx("p",{style:{...j(t).subText,fontSize:u===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:r.get("subText",t)},children:xt(p)})}),y&&e.jsxs("div",{style:j(t).scrollView,children:[ct({theme:t,habitsCards:x,categories:S,setCP:h,setCurrentId:Y,fSize:u,setNeedConfirmation:F,setConfirmMessage:W,setHabitToDelete:K}),e.jsx("div",{style:{marginBottom:"150px"}})]},C),i.show&&e.jsx("div",{style:j(t).confirmContainer,children:e.jsxs("div",{style:{...j(t).cP,width:"90%"},children:[e.jsxs("div",{style:j(t).mainText,children:[i.type===1&&(p===0?"Новая цель":"New goal"),i.type===2&&(p===0?"Изменить цель":"Edit goal"),i.type===3&&(p===0?"Удалить цель?":"Delete goal?"),i.type===0&&(p===0?"Настройки привычки":"Edit habit")]}),i.type===1&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:p===0?"Название цели...":"Goal title...",value:T,onChange:s=>$(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:r.get("mainText",t),outline:`solid 1px ${r.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),i.type===2&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:p===0?"Название цели...":"Goal title...",value:T,onChange:s=>$(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:r.get("mainText",t),outline:`solid 1px ${r.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),i.type===0&&e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("div",{style:{overflowX:"auto",display:"flex",gap:"8px",paddingBottom:"5px",scrollbarWidth:"none"},children:["Здоровье","Развитие","Продуктивность","Отношения и отдых","Отказ от вредного"].map(s=>e.jsx("div",{onClick:()=>X(s),style:{padding:"8px 14px",borderRadius:"12px",whiteSpace:"nowrap",cursor:"pointer",backgroundColor:B===s?r.get("scrollFont",t):Q?"#F2F2F7":"rgba(255,255,255,0.05)",color:B===s?"#FFF":r.get("subText",t),fontSize:"12px",fontWeight:"700",transition:"0.2s all"},children:p===0?s:ve(s)[1]},s))}),e.jsx("input",{type:"text",placeholder:p===0?"Название":"Name",value:D,onChange:s=>N(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:r.get("mainText",t),outline:`solid 1px ${r.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsx("input",{type:"text",placeholder:p===0?"Описание (опц.)":"Description (opt.)",value:k,onChange:s=>z(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:r.get("mainText",t),outline:`solid 1px ${r.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>q(!oe),children:[e.jsx("span",{style:{fontSize:"14px",color:r.get("subText",t)},children:p===0?"Иконка":"Icon"}),e.jsx("div",{style:{color:r.get("habitIcon",t)},children:se.getIcon(L,{size:28})})]})]}),e.jsxs("div",{style:j(t).buttonsRow,children:[e.jsxs("button",{style:j(t).btnCancel,onClick:()=>h(s=>({...s,show:!1})),children:[e.jsx(pe,{size:22,style:{marginRight:"6px"}})," ",p===0?"Отмена":"Cancel"]}),e.jsxs("button",{style:{...j(t).btnSave,backgroundColor:i.type===3?"#FF453A":"#007AFF"},onClick:()=>{P()},children:[e.jsx(me,{size:22,style:{marginRight:"6px"}})," ",i.type===3?p===0?"Удалить":"Delete":p===0?"Готово":"Save"]})]})]})}),oe&&e.jsx("div",{style:j(t).confirmContainer,onClick:()=>q(!1),children:e.jsxs("div",{style:{...j(t).selectPanel},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:r.get("subText",t),fontSize:"13px",fontWeight:"600"},children:p===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(se.ic).map(([s])=>e.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{ne(s),q(!1)},children:se.getIcon(s,{size:30,style:{color:r.get("habitIcon",t)}})},s))]})})]})};function G(){const t=l.CustomHabits||[];return t.concat(ke.filter(n=>!t.some(x=>x.id===n.id)))}function ct({theme:t,habitsCards:n,categories:x,setCP:f,setCurrentId:S,fSize:m,setNeedConfirmation:p,setConfirmMessage:H,setHabitToDelete:u}){return x.map(v=>{const y=n.map(I=>G().find(M=>M.id===I)).filter(I=>I&&I.category[0]===v);return y.length===0?null:e.jsx(pt,{text:y[0].category,theme:t,isNegative:v==="Отказ от вредного",children:y.map(I=>e.jsx(dt,{id:I.id,theme:t,setCP:f,setCurrentId:S,fSize:m,setConfirmMessage:H,setNeedConfirmation:p,setHabitToDelete:u},I.id))},v)})}function dt({id:t=0,theme:n,setCP:x,setCurrentId:f,fSize:S,setNeedConfirmation:m,setConfirmMessage:p,setHabitToDelete:H}){const[u,v]=d.useState(l.habitsByDate[ye]?.[t]),[y,I]=d.useState(l.prefs[0]),[M,Y]=d.useState(Ue.hasPremium),C=G().find(a=>a.id===t);if(!C)return null;const[R,i]=d.useState({name:C?.name||["",""],descr:C?.description||["",""],icon:C?.iconName||"default"}),h=C.category[0]==="Отказ от вредного",T=Ve(t),$=120,D=-$,[N,k]=d.useState(!0),[z,L]=d.useState(!1),[ne,oe]=d.useState(!1),[q,B]=d.useState(l.choosenHabitsGoals[t]),[X,xe]=d.useState(0),[K,_]=d.useState(!1),[W,J]=d.useState(!!h),[F,fe]=d.useState(h?864e5:6e4),[O,P]=d.useState(h?Math.round(Date.now()-new Date(l.choosenHabitsLastSkip[t])):6e4),[Q,Z]=d.useState(0),s=h?"#FF3B30":C.color||"#32D74B",o=n==="light"||n==="speciallight";let c=o?"#FFFFFF":r.get("simplePanel",n)+"99",b=o?"#1D1D1F":r.get("mainText",n),w=o?"#8E8E93":r.get("subText",n),A=o?"#FFFFFF":"rgba(70, 70, 70, 0.2)",V=s,ie=o?"transparent":`1px solid ${r.get("border",n)}80`,He=o?"0 12px 24px -6px rgba(0, 0, 0, 0.27), 0 4px 8px -3px rgba(0, 0, 0, 0.06)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";h&&(c=o?"#9a4a4a":"rgba(255, 59, 48, 0.08)",ie=o?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",A="rgba(255, 59, 48, 0.15)"),u===1?(c=o?"#32873961":"rgba(20, 60, 30, 0.85)",b=o?"#1E5E25":"#ffffff",w=o?"#2E7D32":"rgba(255,255,255,0.7)",A=o?"#ffffff5c":"rgba(255,255,255,0.2)",V=o?"#2E7D32":"#ffffff",ie="transparent"):u===-1&&(c=o?"#bc334868":"rgba(60, 20, 20, 0.85)",b=o?"#B71C1C":"#ffffff",w=o?"#C62828":"rgba(255,255,255,0.7)",A=o?"#ffffff6e":"rgba(255,255,255,0.2)",V=o?"#C62828":"#ffffff",ie="transparent"),d.useEffect(()=>{const a=Ye.subscribe(Y);return()=>a.unsubscribe()},[]),d.useEffect(()=>{if(W){let a=0;const g=setInterval(()=>{a+=50;const E=(O+a)/F*100;Z(E),a===1e3&&P(le=>{const U=le+1e3;return a=0,!h&&U>=F?(we.play(),clearInterval(g),v(1),P(0),J(!1),Z(0)):U>=F&&u<1&&v(1),U})},50);return()=>clearInterval(g)}},[O,W,F]),d.useEffect(()=>{const a=Fe.subscribe(g=>I(g==="ru"?0:1));return()=>a.unsubscribe()},[]),d.useEffect(()=>{l.changeStatus(ye,t,u)},[u]);const Te=()=>C.isCustom&&C.iconName?se.getIcon(C.iconName,{size:22}):se.getHabitIcon(C.name?C.name[0]:"default",{size:22}),ze=Qe(0),ae=Ze(ze,[-1,1],[D,$]),Ae=(a,g)=>{h?g.offset.x<D&&N&&(re(!1),he(ae,0,{type:"tween",duration:.2}),k(!1)):Math.abs(g.offset.x)>$&&N&&((u<1&&g.offset.x>0||u>-1&&g.offset.x<0)&&re(g.offset.x>0),he(ae,0,{type:"tween",duration:.2}),k(!1))},Ee=()=>{N&&he(ae,0,{type:"tween",duration:.2}),k(!0)},re=a=>{let g=0;a?g=1:u===0?g=-1:u===1?(g=h?-1:0,h&&(P(0),l.choosenHabitsLastSkip[t]=Date.now())):u===-1&&(g=-1,h&&(P(0),l.choosenHabitsLastSkip[t]=Date.now())),l.habitsByDate[ye][t]=g,g===1?de(we):g===-1&&de(at),v(g)},je=()=>{f(t),de(De);const a=!z;L(a),Je(a?t:null)};d.useEffect(()=>{const a=qe.subscribe(g=>L(g===t));return()=>a.unsubscribe()},[t]),d.useEffect(()=>{k(!K)},[K]);const Re=()=>{u<1&&!h&&(J(!0),P(0))},Be=()=>{h||(J(!1),Z(0),P(0))},Pe=a=>{H(a),m(!0),p(l.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return e.jsxs(te.div,{id:t,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:c,backdropFilter:o?"none":"blur(40px)",border:o?"none":ie,boxShadow:He,x:ae},onClick:a=>{const g=document.getElementById(t);(g.clientHeight<80||a.nativeEvent.pageY-(g.getBoundingClientRect().top+window.scrollY)<80)&&je()},drag:N?"x":!1,dragConstraints:{left:D,right:u>0||h?0:$},onDrag:Ae,onDragEnd:Ee,whileTap:{scale:.99},animate:{height:z?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:A,color:u===1?"#fff":V,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:z?"5px":"0"},children:Te()}),e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:b,whiteSpace:z?"normal":"nowrap",overflow:z?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:R.name[y]}),e.jsxs("div",{style:{display:"flex",gap:"5px",marginTop:"16px",justifyContent:"center"},children:[e.jsx(ee,{theme:n,icon:e.jsx(it,{size:9}),text:bt(t),color:n==="dark"?"#a5a5a5":"#1e1e1e8f"}),e.jsx(ee,{theme:n,icon:e.jsx(pe,{size:9}),text:ut(t),color:n==="dark"?"#e33131":"#9800008f"}),!h&&e.jsx(ee,{theme:n,icon:e.jsx(ce,{size:9}),text:ht(t),color:n==="dark"?"#31e355":"#1e98008f"}),!h&&W&&e.jsx(ee,{theme:n,icon:e.jsx(Xe,{size:9}),text:Ie(O,F,y,!1),color:n==="dark"?"#31c8e3":"#0086988f"}),h&&e.jsx(ee,{theme:n,icon:e.jsx(ce,{size:9}),text:Ie(O,F,y,h),color:n==="dark"?"#31e355":"#1e98008f"})]})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!h&&e.jsxs(e.Fragment,{children:[!W&&u===0&&e.jsx(tt,{onClick:a=>{a.stopPropagation(),_(!0)},style:{color:r.get("icons",n),opacity:.4,fontSize:"24px",marginRight:"15px"}}),W&&e.jsx(st,{onClick:a=>{a.stopPropagation(),Be()},style:{color:s,fontSize:"24px",marginRight:"15px"}}),e.jsx("div",{onClick:a=>{a.stopPropagation(),re(!0)},style:{width:"30px",height:"30px",borderRadius:"50%",border:u!==0?"none":`2px solid ${o?"#E5E5EA":"#3A3A3C"}`,backgroundColor:u===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:u===1&&e.jsx(be,{size:16,color:"#FFF"})})]}),h&&e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ce,{size:16,color:"#FF453A"})})]})]}),z&&e.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[e.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:o?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),R.descr[y]&&e.jsx("div",{style:{color:w,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:R.descr[y]}),M?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:q?.map((a,g)=>e.jsxs(te.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"90%",padding:"14px 16px",borderRadius:"16px",backgroundColor:o?"#FFFFFF":"rgba(255,255,255,0.05)",border:o?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:o?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[e.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:a.isDone?o?"#AEAEB2":"#636366":b,textDecoration:a.isDone?"line-through":"none"},children:a.text}),ne&&X===g&&e.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[e.jsx(Ce,{onClick:()=>x(E=>({...E,show:!0,type:2,hId:t,gId:g,setGoals:B})),style:{fontSize:"14px",margin:"0 6px",color:r.get("icons",n),opacity:.7}}),e.jsx(Se,{onClick:()=>x(E=>({...E,show:!0,type:3,hId:t,gId:g,setGoals:B})),style:{fontSize:"14px",margin:"0 6px",color:r.get("icons",n),opacity:.7}})]}),e.jsx("div",{onClick:()=>{oe(E=>!(E&&X===g)),xe(g),f(t)},children:e.jsx(et,{style:{fontSize:"16px",color:r.get("icons",n),opacity:.4,marginRight:"12px"}})}),e.jsx("div",{onClick:()=>B(E=>{const le=E.map((U,Ge)=>Ge===g?{...U,isDone:!U.isDone}:U);return l.choosenHabitsGoals[t]=le,le}),style:{width:"24px",height:"24px",borderRadius:"8px",border:a.isDone?"none":`2px solid ${o?"#E5E5EA":"#3A3A3C"}`,backgroundColor:a.isDone?s:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:a.isDone&&e.jsx(be,{size:12,color:"#FFF"})})]},g))}),e.jsxs("div",{onClick:()=>x({show:!0,type:1,hId:t,gId:0,setGoals:B}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${s}66`,backgroundColor:`${s}10`},children:[e.jsx(Ke,{style:{fontSize:"12px",color:s}}),e.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:s,fontWeight:"600"},children:y===0?"Добавить цель":"Add goal"})]}),e.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:r.get("subText",n),textTransform:"uppercase",letterSpacing:"0.5px"},children:y===0?"Достижения":"Achievements"}),l.choosenHabitsAchievements[t]?.map((a,g)=>e.jsx(gt,{index:g,milestone:a,id:t,isNegative:h,percent:T,theme:n,fSize:S,langIndex:y},g))]}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",marginBottom:"15px",fontSize:"12px",fontWeight:"600",color:r.get("subText",n),border:`2px dashed ${r.get("subText",n)}66`,padding:"12px",borderRadius:"16px"},children:y===0?"Микро цели и достижения с премиум":"Micro goals and achievements with premium"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"35px"},children:[C.isCustom&&e.jsx(Ce,{onClick:()=>x(a=>({...a,show:!0,type:0,hId:t,gId:0,hInfo:i})),style:{fontSize:"18px",color:r.get("icons",n),opacity:.7}}),e.jsx(Se,{onClick:()=>Pe(t),style:{fontSize:"18px",color:r.get("icons",n),opacity:.7}}),e.jsx(_e,{style:{fontSize:"18px",color:r.get("icons",n),opacity:.7},onClick:()=>{je()}}),!h&&e.jsx("div",{onClick:()=>re(!0),style:{width:"18px",height:"18px",borderRadius:"50%",border:u!==0?"none":`2px solid ${o?"#E5E5EA":"#3A3A3C"}`,backgroundColor:u===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:u===1&&e.jsx(be,{size:16,color:"#FFF"})})]})]}),K&&e.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:o?"#FFF":r.get("background",n)},onClick:a=>a.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[e.jsx("div",{style:{color:r.get("mainText",n),fontWeight:"bold"},children:ft(F)}),e.jsx(ot,{style:{width:"50%",color:n==="dark"?"#3abfe4":"#14868878"},min:1,max:59,value:F/6e4,valueLabelDisplay:"off",onChange:a=>{fe(a.target.value*6e4),a.stopPropagation()}}),e.jsx(pe,{onClick:a=>{a.stopPropagation(),_(!1)},style:{cursor:"pointer",color:r.get("icons",n),fontSize:"24px"}}),e.jsx(me,{onClick:a=>{a.stopPropagation(),Re(),_(!1)},style:{cursor:"pointer",color:s,fontSize:"24px"}})]})})]})}function pt({text:t=["Имя","Name"],children:n,theme:x}){const[f,S]=d.useState(!0),m=x==="light"||x==="speciallight",p=l.prefs[0];return e.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[e.jsxs("div",{onClick:()=>{S(!f),de(De)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:m?"#1D1D1F":r.get("mainText",x)},children:t[p]}),e.jsx(te.div,{animate:{rotate:f?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(We,{size:14,color:m?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(Oe,{initial:!1,children:f&&e.jsx(te.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:n})})})]})}function xt(t){return t===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function de(t){l.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),l.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function Ie(t,n,x,f){const S=f?t:n-t,m=Math.floor(S/1e3),p=Math.floor(m/86400),H=Math.floor(m%86400/3600),u=Math.floor(m%3600/60),v=m%60;return p>0?p:H>0?H.toString().padStart(2,"0")+":"+u.toString().padStart(2,"0"):u.toString().padStart(2,"0")+":"+v.toString().padStart(2,"0")}function ft(t){return Math.floor(t/6e4)+"m"}const gt=({milestone:t,index:n,id:x,theme:f,langIndex:S})=>{const m=l.choosenHabits.indexOf(x),p=l.choosenHabitsLastSkip[x],H=l.choosenHabitsStartDates[m],u=p||H,v=1440*60*1e3,y=u?Math.floor((Date.now()-u)/v):0,M=[30,50,100][n]||30,Y=y<M,C=M-y,R=S===0?`${C} days left to unlock`:`Осталось ${C} дн. до открытия`;return e.jsx("div",{style:{fontSize:"13px",color:r.get("subText",f),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:Y?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",opacity:.6},children:[e.jsx("div",{style:{width:"12px",height:"12px",border:`1px solid ${r.get("subText",f)}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"bold"},children:"i"}),e.jsx("span",{style:{fontSize:"11px"},children:R})]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{size:12,color:r.get("icons",f),style:{opacity:.8}}),t[S]]})})},ee=({icon:t,text:n,color:x,theme:f})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:r.get("background",f)+"75",color:x,fontSize:"10px",fontWeight:"700",whiteSpace:"nowrap"},children:[t,n&&e.jsx("span",{children:n})]});function ut(t){let n=0;for(const x in l.habitsByDate){const f=l.habitsByDate[x];f&&t in f&&f[t]<1&&n++}return n}function ht(t){let n=0;for(const x in l.habitsByDate){const f=l.habitsByDate[x];f&&t in f&&(f[t]===1?n++:f[t]<1&&(n=0))}return n}function bt(t){let n=0;for(const x in l.habitsByDate){const f=l.habitsByDate[x];f&&t in f&&f[t]&&n++}return n}export{lt as addHabitFn,Ft as currentId,kt as default,ft as parsedTimeSimple,rt as removeHabitFn};
