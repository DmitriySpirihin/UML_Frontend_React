import{A as u,t as Z,l as ee,f as te,j as t,C as l,m as v,ac as L,a as A}from"./index-BVsRW4G0.js";import{r as c}from"./recharts-Bg6K2Pzo.js";import{b as ne}from"./index-Tl2TzZfV.js";const se=(e,x)=>{const i=new Date(e),T={weekday:"long"},m=x===0?"ru-RU":"en-US";return i.toLocaleDateString(m,T)},oe=e=>`${Math.floor(e/6e4)} min`,D=["#00c6ff","#0072ff","#ff416c","#ff4b2b","#38ef7d","#11998e","#f09819","#edde5d","#834d9b","#d04ed6","#1d976c","#93f9b9","#5d29c3","#a968f2","#ff7e5f","#feb47b","#2af598","#009efd","#ff6b6b","#ffa500","#114357","#f29492","#43e97b","#38f9d7","#92fe9d","#00c9ff","#2c3e50","#3498db","#c33764","#1d2671","#ff9a9e","#fecfef","#a8ff78","#78ffd6","#b993d6","#8ca6db","#ff758c","#ff7eb3","#4facfe","#00f2fe"],de=()=>{const[e,x]=c.useState("dark"),[i,T]=c.useState(u.prefs[0]==="ru"?0:1),[m,M]=c.useState(u.prefs[1]),[F,N]=c.useState(null),[d,P]=c.useState(0),[g,W]=c.useState(0),[C,k]=c.useState(0);c.useEffect(()=>{const n=Z.subscribe(x),o=ee.subscribe(r=>T(r==="ru"?0:1));return()=>{o.unsubscribe(),n.unsubscribe()}},[]),c.useEffect(()=>{const n=te.subscribe(M);return()=>n.unsubscribe()},[]);const{allTrainings:z,sessionColorMap:O}=c.useMemo(()=>{const n=[],o=new Map;let r=0;for(const[a,p]of Object.entries(u.trainingLog||{}))p.forEach((y,j)=>n.push({date:a,idx:j,session:y}));n.sort((a,p)=>(p.session.startTime||0)-(a.session.startTime||0)),n.forEach(({session:a})=>{const p=`${a.programId||0}-${a.dayIndex||0}`;o.has(p)||(o.set(p,D[r%D.length]),r++)});let f=n;return d===1?f=n.filter(a=>a.session.programId===g):d===2&&(f=n.filter(a=>a.session.programId===g&&a.session.dayIndex===C)),{allTrainings:f,sessionColorMap:o}},[u.trainingLog,d,g,C]),S=c.useMemo(()=>{const n=new Set;return Object.values(u.trainingLog||{}).forEach(o=>o.forEach(r=>n.add(r.programId||0))),Array.from(n).map(o=>{const r=u.programs[o];return{id:o,name:r?.name?.[i]||`Program ${o}`}}).sort((o,r)=>o.name.localeCompare(r.name))},[i]),b=c.useMemo(()=>{if(d!==2||g==null)return[];const o=u.programs[g]?.schedule||[];return o.map((r,f)=>({index:f,name:o[f]?.name?.[i]||`Day ${f+1}`}))},[d,g,i]);c.useEffect(()=>{(d===1||d===2)&&S.length>0&&g===0&&W(S[0].id),d===2&&b.length>0&&k(b[0].index)},[d,S,b,g]);const U=i===0?"Ð’ÑÐµ":"All",G=i===0?"ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°":"Program",H=i===0?"Ð”ÐµÐ½ÑŒ":"Day";return t.jsxs("div",{style:s(e).container,children:[t.jsxs("div",{style:s(e).filterContainer,children:[t.jsx("div",{style:s(e).toggleWrapper,children:[{key:0,label:U},{key:1,label:G},{key:2,label:H}].map(({key:n,label:o})=>{const r=d===n;return t.jsx(v.div,{onClick:()=>P(n),whileTap:{scale:.95},style:{...s(e).togglePill,backgroundColor:r?l.get("currentDateBorder",e):"transparent",color:r?"#fff":l.get("subText",e),fontSize:m===0?"13px":"14px"},children:o},n)})}),t.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px"},children:[(d===1||d===2)&&t.jsxs("div",{style:s(e).selectWrapper,children:[t.jsx("select",{value:g,onChange:n=>{const o=Number(n.target.value);W(o),d===2&&b.length>0&&k(b[0]?.index||0)},style:s(e).select,children:S.map(n=>t.jsx("option",{value:n.id,children:n.name},n.id))}),t.jsx(L,{style:s(e).selectIcon})]}),d===2&&t.jsxs("div",{style:s(e).selectWrapper,children:[t.jsx("select",{value:C,onChange:n=>k(Number(n.target.value)),style:s(e).select,children:b.map(n=>t.jsx("option",{value:n.index,children:n.name},n.index))}),t.jsx(L,{style:s(e).selectIcon})]})]})]}),t.jsx("div",{style:{width:"100%",maxWidth:"800px",paddingBottom:"50px"},children:z.length>0?t.jsx(A,{children:z.map((n,o)=>{const{date:r,idx:f,session:a}=n,p=`${r}-${f}`,y=F===p,j=a.programId||0,$=a.dayIndex||0,Y=`${j}-${$}`,_=O.get(Y)||D[0],B=u.programs[j],K=B?.name?.[i]||`Program ${j}`,q=B?.schedule?.[$]?.name?.[i]||`Day ${$+1}`;return t.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.05,duration:.3},style:{...s(e).card,borderLeft:`5px solid ${_}`},children:[t.jsxs("div",{onClick:()=>N(y?null:p),style:{...s(e).cardHeader,cursor:"pointer"},children:[t.jsxs("div",{style:{flex:1,padding:"12px 0 12px 16px"},children:[t.jsxs("div",{style:{...s(e,m).dateText},children:[r," â€¢ ",t.jsx("span",{style:{opacity:.8},children:se(r,i)})]}),t.jsxs("div",{style:s(e,m).programText,children:[K," ",t.jsx("span",{style:{margin:"0 6px",opacity:.5},children:"|"})," ",q]})]}),t.jsx("div",{style:{padding:"0 16px",display:"flex",alignItems:"center"},children:t.jsx(v.div,{animate:{rotate:y?180:0},children:t.jsx(ne,{size:18,color:l.get("subText",e)})})})]}),t.jsx(A,{children:y&&t.jsx(v.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{overflow:"hidden"},children:t.jsxs("div",{style:s(e).expandedContent,children:[t.jsxs("div",{style:s(e).statsRow,children:[t.jsxs("div",{style:s(e).statBadge,children:["â± ",oe(a.duration||0)]}),t.jsxs("div",{style:s(e).statBadge,children:["ðŸ‹ï¸ ",(a.tonnage/1e3).toFixed(2)," ",i===0?"Ñ‚":"t"]})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(a.exercises||{}).filter(([I,w])=>w?.sets?.length>0).map(([I,w])=>{const J=parseInt(I,10),Q=u.exercises[J]?.name?.[i]||`Exercise ${I}`;return t.jsxs("div",{style:s(e).exerciseBlock,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"6px"},children:[t.jsx("span",{style:s(e,m).exerciseTitle,children:Q}),t.jsxs("span",{style:s(e).tonnageSub,children:[(w.totalTonnage/1e3).toFixed(2)," ",i===0?"Ñ‚":"t"]})]}),t.jsx("div",{style:s(e).setsGrid,children:w.sets.map((h,R)=>{const E=h.type===0,V=E?l.get("trainingIsolatedFont",e):l.get("trainingBaseFont",e),X=E?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.0)";return t.jsxs("div",{style:{...s(e).setRow,backgroundColor:X,color:V,fontSize:m===0?"13px":"15px"},children:[t.jsx("span",{style:{opacity:.6,fontSize:"11px",marginRight:"6px"},children:R+1}),t.jsx("span",{style:{fontWeight:"600"},children:h.weight}),t.jsx("span",{style:{fontSize:"11px",margin:"0 2px"},children:i===0?"ÐºÐ³":"kg"}),t.jsx("span",{style:{margin:"0 4px",opacity:.5},children:"Ã—"}),t.jsx("span",{style:{fontWeight:"600"},children:h.reps}),h.time!=null&&h.time>0&&t.jsxs("span",{style:{marginLeft:"6px",fontSize:"11px",opacity:.8},children:["(",Math.round(h.time/1e3),"s)"]})]},R)})})]},I)})})]})})})]},p)})}):t.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},style:{padding:"40px 20px",color:l.get("subText",e),fontSize:m===0?"14px":"16px",textAlign:"center",fontStyle:"italic"},children:i===0?"Ð¢Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹":"No trainings found"})})]})},s=(e,x)=>({container:{backgroundColor:l.get("background",e),display:"flex",flexDirection:"column",alignItems:"center",height:"89vh",marginTop:"120px",width:"100vw",fontFamily:"Segoe UI, Roboto, sans-serif",overflowY:"auto",boxSizing:"border-box",padding:"0 10px"},filterContainer:{width:"100%",maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"0 10px"},toggleWrapper:{display:"flex",backgroundColor:e==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)",padding:"4px",borderRadius:"25px",width:"100%",justifyContent:"space-between"},togglePill:{flex:1,textAlign:"center",padding:"8px 0",borderRadius:"20px",cursor:"pointer",fontWeight:"500",transition:"all 0.2s ease"},selectWrapper:{position:"relative",width:"100%"},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:"none",backgroundColor:e==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.08)",color:l.get("mainText",e),fontSize:x===0?"14px":"16px",appearance:"none",outline:"none",cursor:"pointer"},selectIcon:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",color:l.get("subText",e),fontSize:"12px",pointerEvents:"none"},card:{width:"100%",backgroundColor:e==="light"?"#fff":"rgba(255,255,255,0.03)",borderRadius:"16px",marginBottom:"12px",boxShadow:e==="light"?"0 2px 10px rgba(0,0,0,0.05)":"none",border:`1px solid ${e==="light"?"transparent":"rgba(255,255,255,0.05)"}`,overflow:"hidden"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center"},dateText:{fontSize:x===0?"16px":"18px",fontWeight:"bold",color:l.get("mainText",e),marginBottom:"4px"},programText:{fontSize:x===0?"13px":"14px",color:l.get("subText",e),fontWeight:"500"},expandedContent:{padding:"0 16px 16px 16px",borderTop:`1px solid ${l.get("border",e)}`,marginTop:"0px",paddingTop:"12px",backgroundColor:e==="light"?"rgba(0,0,0,0.01)":"rgba(0,0,0,0.1)"},statsRow:{display:"flex",gap:"12px",marginBottom:"16px"},statBadge:{backgroundColor:e==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.08)",padding:"4px 10px",borderRadius:"8px",fontSize:"12px",color:l.get("mainText",e),fontWeight:"600"},exerciseBlock:{marginBottom:"8px",paddingBottom:"8px",borderBottom:`1px dashed ${l.get("border",e)}`},exerciseTitle:{color:l.get("mainText",e),fontWeight:"600",fontSize:x===0?"14px":"16px"},tonnageSub:{fontSize:"11px",color:l.get("subText",e),fontWeight:"bold"},setsGrid:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"4px"},setRow:{display:"flex",alignItems:"center",padding:"4px 8px",borderRadius:"6px",backgroundColor:e==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.03)"}});export{de as default};
