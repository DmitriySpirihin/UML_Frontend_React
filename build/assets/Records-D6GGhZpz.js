import{A as b,U as y,t as S,l as W,f as G,p as P,j as e,C as s,c2 as U,br as B,bq as E,m as v,a as L,N as M,ca as $,F as N,B as F}from"./index-Btfw6WMf.js";import{r as x}from"./recharts-Bg6K2Pzo.js";import{a as H,G as K}from"./index-DloNIftu.js";const O=["âš¡","ðŸ§ ","ðŸ§©","ðŸŽ¯"],k=[U,B,H,K,E],Q=()=>{const[t,g]=x.useState("dark"),[l,o]=x.useState(b.prefs[0]),[f,p]=x.useState(b.prefs[4]),[i,r]=x.useState(0),[c,d]=x.useState(0),[u,z]=x.useState(y.hasPremium),[w,h]=x.useState([]),[T,R]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const a=await M.getMentalRecordsGlobal()||[];!a||a.length===0?h([{name:y?.name||"User",data:b.mentalRecords}]):h(a)}catch{h([{name:y?.name||"User",data:b.mentalRecords}])}finally{R(!1)}})()},[]),x.useEffect(()=>{const n=S.subscribe(g),a=W.subscribe(A=>o(A==="ru"?0:1)),j=G.subscribe(p),C=P.subscribe(z);return()=>{n.unsubscribe(),a.unsubscribe(),j.unsubscribe(),C.unsubscribe()}},[]);const I=[...w].sort((n,a)=>{const j=n.data?.[i]?.[c]||0;return(a.data?.[i]?.[c]||0)-j});return e.jsxs("div",{style:m(t).container,children:[e.jsxs("div",{style:m(t).controlsWrapper,children:[e.jsx(D,{items:O,selectedIndex:i,setSelectedIndex:n=>{r(n),c>3&&d(3)},theme:t,colorKey:"difficulty"}),e.jsx(D,{items:i>0?k.slice(0,-1):k,selectedIndex:c,setSelectedIndex:d,theme:t,colorKey:"difficulty",isSecondary:!0})]}),e.jsx("div",{style:m(t).listContainer,children:T?e.jsx("div",{style:m(t).loadingText,children:l===0?"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...":"Loading..."}):e.jsxs(v.div,{layout:!0,style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px",paddingBottom:"20px"},children:[e.jsx(L,{mode:"popLayout",children:I.map((n,a)=>e.jsx(Y,{theme:t,fSize:f,isUser:n.name===y.name,rank:a+1,name:n.name,score:n.data?.[i]?.[c]||0,index:a},n.name+a))}),I.length===0&&e.jsx("div",{style:{textAlign:"center",color:s.get("subText",t),marginTop:20},children:l===0?"ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…":"No records yet"})]})}),!u&&e.jsx("div",{onClick:n=>n.stopPropagation(),style:{position:"absolute",inset:0,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:S.value==="dark"?"rgba(10, 10, 10, 0.85)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",textAlign:"center"},children:e.jsx("div",{style:{color:S.value==="dark"?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:l===0?"Ð¢ÐžÐ›Ð¬ÐšÐž Ð”Ð›Ð¯ ÐŸÐ Ð•ÐœÐ˜Ð£Ðœ":"PREMIUM USERS ONLY"})})]})},D=({items:t,selectedIndex:g,setSelectedIndex:l,theme:o,colorKey:f,isSecondary:p})=>e.jsx("div",{style:{marginTop:p?0:"16px",display:"flex",backgroundColor:s.get("panel",o),padding:"4px",borderRadius:"16px",gap:"4px",justifyContent:"center",boxShadow:"inset 0 2px 5px rgba(0,0,0,0.05)"},children:t.map((i,r)=>{const c=g===r,d=s.get(f+r,o);return e.jsxs("div",{onClick:()=>l(r),style:{position:"relative",padding:p?"6px 14px":"8px 20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:[c&&e.jsx(v.div,{layoutId:p?"diff-bg":"cat-bg",style:{position:"absolute",inset:0,backgroundColor:s.get("simplePanel",o),borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:-1},transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx("div",{size:p?18:22,style:{transition:"color 0.3s ease"},children:typeof i=="string"?i:e.jsx(i,{size:p?18:22,style:{color:c?d:s.get("subText",o)}})})]},r)})}),Y=({theme:t,fSize:g,isUser:l,rank:o,name:f,score:p,index:i})=>{const r=t==="dark",c={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{delay:i*.05,type:"spring",stiffness:300,damping:24}},exit:{opacity:0,scale:.9}};let d=null,u=s.get("mainText",t);return o===1?(d=N,u=s.get("barsColorWeight",t)):o===2?(d=F,u=s.get("icons",t)):o===3&&(d=F,u=s.get("difficulty5",t)),e.jsxs(v.div,{layout:!0,variants:c,initial:"hidden",animate:"visible",exit:"exit",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderRadius:"16px",backgroundColor:l?r?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)":r?"rgba(30, 30, 30, 0.4)":"#FFFFFF",border:l?`1px solid ${s.get("done",t)}`:"none",backdropFilter:"blur(10px)",boxShadow:r?"0 4px 6px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.05)",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:r?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",fontWeight:"bold",color:u,fontSize:"14px"},children:d?e.jsx(d,{size:16}):o}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:g===0?"15px":"17px",fontWeight:l?"bold":"normal",color:s.get("mainText",t)},children:[f,l&&e.jsx($,{size:10,color:s.get("light",t)})]})})]}),e.jsx("div",{style:{fontSize:g===0?"16px":"18px",fontWeight:"bold",color:s.get("done",t),fontFamily:"monospace",letterSpacing:"-0.5px"},children:p})]})},m=(t,g)=>({container:{backgroundColor:s.get("background",t),display:"flex",flexDirection:"column",alignItems:"center",width:"100vw",height:"92vh",marginTop:"110px",fontFamily:"Segoe UI"},controlsWrapper:{width:"90%",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginBottom:"20px",zIndex:10},listContainer:{flex:1,width:"94%",overflowY:"scroll",padding:"0 5px",display:"flex",flexDirection:"column",scrollbarWidth:"none",msOverflowStyle:"none"},loadingText:{textAlign:"center",marginTop:"40px",color:s.get("subText",t),fontSize:"14px"}});export{Q as default};
