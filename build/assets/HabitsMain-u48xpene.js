import{A as p,t as We,f as Le,ac as Oe,l as Te,C as l,j as e,M as xe,a2 as Ce,b as He,ab as he,m as ee,ad as Ue,d as Ve,U as Ye,q as qe,p as Xe,ae as Ke,g as de,af as _e,o as Fe,ag as ve,a6 as Je,ah as Qe,s as Ze}from"./index-CYhWx1br.js";import{R as ye,r as c}from"./recharts-k8ghPecL.js";import{I as te,u as et,a as tt,b as me}from"./Icons-DW9vZHo3.js";import{F as Se}from"./index-3dGc10Mw.js";import{T as st}from"./index-B72AVNoZ.js";import{T as nt,a as ot}from"./TimerOffTwoTone-Ccqm1L4R.js";import{H as it}from"./HoverInfoButton-Dp-gVZgw.js";import{S as at}from"./Slider-BT8ABtKP.js";const je=new Date().toISOString().split("T")[0],ze=new Audio("Audio/Click.wav"),rt=new Audio("Audio/Skip.wav"),Ie=new Audio("Audio/IsDone.wav");let lt,ct,It;const j=(t,n=0)=>{const x=t==="light"||t==="speciallight",u=x?"#F2F4F6":l.get("background",t),m=x?"#FFFFFF":l.get("simplePanel",t),S=x?"rgba(0,0,0,0.0)":`1px solid ${l.get("border",t)}`,d=x?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:u,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:S,backgroundColor:m,boxShadow:d,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:m,borderRadius:"24px",border:S,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:d},mainText:{fontSize:"17px",fontWeight:"600",color:l.get("mainText",t),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:l.get("subText",t),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:x?"#E5E5EA":"rgba(255,255,255,0.1)",color:x?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:l.get("icons",t),fontSize:"24px"}}},ke=t=>({Здоровье:["Здоровье","Health"],Health:["Здоровье","Health"],Развитие:["Развитие","Growth"],Growth:["Развитие","Growth"],Продуктивность:["Продуктивность","Productivity"],Productivity:["Продуктивность","Productivity"],"Отношения и отдых":["Отношения и отдых","Relationships & recreation"],"Relationships & recreation":["Отношения и отдых","Relationships & recreation"],"Отказ от вредного":["Отказ от вредного","Bad habits to quit"],"Bad habits to quit":["Отказ от вредного","Bad habits to quit"]})[t]||["Здоровье","Health"],kt=()=>{const[t,n]=ye.useState("dark"),[x,u]=ye.useState([]),[m,S]=ye.useState([]),[d,H]=c.useState(p.prefs[0]),[g,I]=c.useState(0),[y,C]=c.useState(p.choosenHabits.length>0),[z,Y]=c.useState(0),[w,B]=c.useState(0),[i,h]=c.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[E,N]=c.useState(""),[T,$]=c.useState(""),[D,A]=c.useState(""),[W,se]=c.useState(""),[ne,q]=c.useState(!1),[P,X]=c.useState("Здоровье"),[fe,K]=c.useState(null),[_,L]=c.useState(""),[J,k]=c.useState(!1);c.useEffect(()=>{if(i.type===0&&($(M().find(s=>s.id===i.hId)?.name[d]||""),A(M().find(s=>s.id===i.hId)?.description[d]||""),se(M().find(s=>s.id===i.hId)?.iconName||""),X(M().find(s=>s.id===i.hId)?.category[0]||"Здоровье")),i.type===4){if(i.gId<=0)return;i.setGoals(s=>{const b=[...s];return[b[i.gId-1],b[i.gId]]=[b[i.gId],b[i.gId-1]],p.choosenHabitsGoals[i.hId]=b,b})}else i.type===5&&i.setGoals(s=>{if(i.gId>=s.length-1)return s;const b=[...s];return[b[i.gId],b[i.gId+1]]=[b[i.gId+1],b[i.gId]],p.choosenHabitsGoals[i.hId]=b,b})},[i]),c.useEffect(()=>{const s=We.subscribe(n),b=Le.subscribe(I),r=Oe.subscribe(k);return()=>{s.unsubscribe(),b.unsubscribe(),r.unsubscribe()}},[]),c.useEffect(()=>{const s=Te.subscribe(b=>{H(b==="ru"?0:1)});return()=>s.unsubscribe()},[]),c.useEffect(()=>{u(p.choosenHabits)},[]),c.useEffect(()=>{if(x.length>0){const s=new Set;x.forEach(b=>{const r=M().find(a=>a.id===b);r&&!s.has(r.category[0])&&s.add(r.category[0])}),S(Array.from(s))}},[x]);const ge=(s,b,r,a,F)=>{u(R=>{const V=new Set(R);return V.has(s)?R:(p.addHabit(s,b,r,a,F),[...V,s])}),C(p.choosenHabits.length>0)},O=s=>{if(x.includes(s)){p.removeHabit(s),u(F=>F.filter(R=>R!==s)),B(F=>F+1),C(p.choosenHabits.length>0);const r=M().find(F=>F.id===s)?.name?.[d]||(d===0?"Привычка":"Habit"),a=d===0?`Привычка: '${r}' удалена`:`Habit: '${r}' deleted`;he(a,2e3,!0)}},G=()=>{switch(i.type){case 0:p.CustomHabits||(p.CustomHabits=[]);const s=p.CustomHabits.findIndex(r=>r.id===i.hId),b=ke(P);if(s!==-1)p.CustomHabits=p.CustomHabits.map((r,a)=>a===s?{...r,name:[T.trim(),T.trim()],description:[D.trim(),D.trim()],iconName:W,category:b}:r);else{const r=He.find(a=>a.id===i.hId);if(r){const a={...r,name:[T.trim(),T.trim()],description:[D.trim(),D.trim()],iconName:W,category:b,isCustom:!0};p.CustomHabits=[...p.CustomHabits,a]}}u(r=>[...r]),h(r=>({...r,show:!1})),i.hInfo&&i.hInfo({name:[T,T],descr:[D,D],icon:W}),B(r=>r+1);break;case 1:E.length>0?(i.setGoals(r=>[...r,{text:E,isDone:!1}]),p.addHabitGoal(i.hId,{text:E,isDone:!1}),h(r=>({...r,show:!1}))):he(d===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:E.length>0?(i.setGoals(r=>r.map((a,F)=>F===i.gId?{...a,text:E.trim()}:a)),p.choosenHabitsGoals[i.hId][i.gId].text=E,h(r=>({...r,show:!1}))):he(d===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:i.setGoals(r=>r.filter((a,F)=>F!==i.gId)),p.choosenHabitsGoals[i.hId].splice(i.gId,1),h(r=>({...r,show:!1}));break}};lt=O,ct=ge;const Q=t==="light"||t==="speciallight",Z=Q?"#F2F4F6":l.get("background",t);return e.jsxs("div",{style:{...j(t).container,backgroundColor:Z},children:[e.jsx(it,{tab:"HabitsMain"}),J&&e.jsx("div",{style:j(t).confirmContainer,children:e.jsxs("div",{style:j(t).cP,children:[e.jsx("div",{style:j(t,g).mainText,children:_}),e.jsxs("div",{style:j(t).buttonsRow,children:[e.jsxs("button",{style:j(t).btnCancel,onClick:()=>k(!1),children:[e.jsx(xe,{size:20,style:{marginRight:5}})," ",d===0?"Нет":"No"]}),e.jsxs("button",{style:{...j(t).btnSave,backgroundColor:"#FF453A"},onClick:()=>{O(fe),k(!1)},children:[e.jsx(Ce,{size:20,style:{marginRight:5}})," ",d===0?"Да":"Yes"]})]})]})}),!y&&e.jsx("div",{style:{...j(t).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:e.jsx("p",{style:{...j(t).subText,fontSize:g===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:l.get("subText",t)},children:ft(d)})}),y&&e.jsxs("div",{style:j(t).scrollView,children:[dt({theme:t,habitsCards:x,categories:m,setCP:h,setCurrentId:Y,fSize:g,setNeedConfirmation:k,setConfirmMessage:L,setHabitToDelete:K}),e.jsx("div",{style:{marginBottom:"150px"}})]},w),i.show&&e.jsx("div",{style:j(t).confirmContainer,children:e.jsxs("div",{style:{...j(t).cP,width:"90%"},children:[e.jsxs("div",{style:j(t).mainText,children:[i.type===1&&(d===0?"Новая цель":"New goal"),i.type===2&&(d===0?"Изменить цель":"Edit goal"),i.type===3&&(d===0?"Удалить цель?":"Delete goal?"),i.type===0&&(d===0?"Настройки привычки":"Edit habit")]}),i.type===1&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:d===0?"Название цели...":"Goal title...",value:E,onChange:s=>N(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),i.type===2&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:d===0?"Название цели...":"Goal title...",value:E,onChange:s=>N(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),i.type===0&&e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("div",{style:{overflowX:"auto",display:"flex",gap:"8px",paddingBottom:"5px",scrollbarWidth:"none"},children:["Здоровье","Развитие","Продуктивность","Отношения и отдых","Отказ от вредного"].map(s=>e.jsx("div",{onClick:()=>X(s),style:{padding:"8px 14px",borderRadius:"12px",whiteSpace:"nowrap",cursor:"pointer",backgroundColor:P===s?l.get("scrollFont",t):Q?"#F2F2F7":"rgba(255,255,255,0.05)",color:P===s?"#FFF":l.get("subText",t),fontSize:"12px",fontWeight:"700",transition:"0.2s all"},children:d===0?s:ke(s)[1]},s))}),e.jsx("input",{type:"text",placeholder:d===0?"Название":"Name",value:T,onChange:s=>$(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsx("input",{type:"text",placeholder:d===0?"Описание (опц.)":"Description (opt.)",value:D,onChange:s=>A(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:l.get("mainText",t),outline:`solid 1px ${l.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>q(!ne),children:[e.jsx("span",{style:{fontSize:"14px",color:l.get("subText",t)},children:d===0?"Иконка":"Icon"}),e.jsx("div",{style:{color:l.get("habitIcon",t)},children:te.getIcon(W,{size:28})})]})]}),e.jsxs("div",{style:j(t).buttonsRow,children:[e.jsxs("button",{style:j(t).btnCancel,onClick:()=>h(s=>({...s,show:!1})),children:[e.jsx(xe,{size:22,style:{marginRight:"6px"}})," ",d===0?"Отмена":"Cancel"]}),e.jsxs("button",{style:{...j(t).btnSave,backgroundColor:i.type===3?"#FF453A":"#007AFF"},onClick:()=>{G()},children:[e.jsx(Ce,{size:22,style:{marginRight:"6px"}})," ",i.type===3?d===0?"Удалить":"Delete":d===0?"Готово":"Save"]})]})]})}),ne&&e.jsx("div",{style:j(t).confirmContainer,onClick:()=>q(!1),children:e.jsxs("div",{style:{...j(t).selectPanel},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:l.get("subText",t),fontSize:"13px",fontWeight:"600"},children:d===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(te.ic).map(([s])=>e.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{se(s),q(!1)},children:te.getIcon(s,{size:30,style:{color:l.get("habitIcon",t)}})},s))]})})]})};function M(){const t=p.CustomHabits||[];return t.concat(He.filter(n=>!t.some(x=>x.id===n.id)))}function dt({theme:t,habitsCards:n,categories:x,setCP:u,setCurrentId:m,fSize:S,setNeedConfirmation:d,setConfirmMessage:H,setHabitToDelete:g}){return x.map(I=>{const y=n.map(C=>M().find(z=>z.id===C)).filter(C=>C&&C.category[0]===I);return y.length===0?null:e.jsx(xt,{text:y[0].category,theme:t,isNegative:I==="Отказ от вредного",children:y.map(C=>e.jsx(pt,{id:C.id,theme:t,setCP:u,setCurrentId:m,fSize:S,setConfirmMessage:H,setNeedConfirmation:d,setHabitToDelete:g},C.id))},I)})}function pt({id:t=0,theme:n,setCP:x,setCurrentId:u,fSize:m,setNeedConfirmation:S,setConfirmMessage:d,setHabitToDelete:H}){const[g,I]=c.useState(p.habitsByDate[je]?.[t]),[y,C]=c.useState(p.prefs[0]),[z,Y]=c.useState(Ye.hasPremium),w=M().find(o=>o.id===t);if(!w)return null;const[B,i]=c.useState({name:w?.name||["",""],descr:w?.description||["",""],icon:w?.iconName||"default"}),h=w.category[0]==="Отказ от вредного",E=qe(t),N=120,T=-N,[$,D]=c.useState(!0),[A,W]=c.useState(!1),[se,ne]=c.useState(!1),[q,P]=c.useState(p.choosenHabitsGoals[t]),[X,fe]=c.useState(0),[K,_]=c.useState(!1),[L,J]=c.useState(!!h),[k,ge]=c.useState(h?864e5:6e4),[O,G]=c.useState(h?Math.round(Date.now()-new Date(p.choosenHabitsLastSkip[t])):6e4),[Q,Z]=c.useState(0),[s,b]=c.useState(0),r=h?"#FF3B30":w.color||"#32D74B",a=n==="light"||n==="speciallight";let F=a?"#FFFFFF":l.get("simplePanel",n)+"99",R=a?"#1D1D1F":l.get("mainText",n),V=a?"#8E8E93":l.get("subText",n),oe=a?"#FFFFFF":"rgba(70, 70, 70, 0.2)",ue=r,ie=a?"transparent":`1px solid ${l.get("border",n)}80`,Ee=a?"0 12px 24px -6px rgba(0,0,0,0.08), 0 4px 8px -3px rgba(0,0,0,0.04)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";h&&(F=a?"#FFF5F5":"rgba(255, 59, 48, 0.08)",ie=a?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",oe="rgba(255, 59, 48, 0.15)"),g===1?(F=a?"#E8F5E9":"rgba(20, 60, 30, 0.85)",R=a?"#1E5E25":"#ffffff",V=a?"#2E7D32":"rgba(255,255,255,0.7)",oe=a?"#FFFFFF":"rgba(255,255,255,0.2)",ue=a?"#2E7D32":"#ffffff",ie="transparent"):g===-1&&(F=a?"#FFEBEE":"rgba(60, 20, 20, 0.85)",R=a?"#B71C1C":"#ffffff",V=a?"#C62828":"rgba(255,255,255,0.7)",oe=a?"#FFFFFF":"rgba(255,255,255,0.2)",ue=a?"#C62828":"#ffffff",ie="transparent");const be=Array.from(Object.values(p.habitsByDate));c.useEffect(()=>{if(t>-1){let o=0;const f=new Date().toISOString().split("T")[0];for(let v=be.length-2;v>=0;v--)if(t in be[v])if(be[v][t]>0)o++;else break;p.habitsByDate[f]?.[t]>0&&o++,b(o)}},[t,p.habitsByDate,g]),c.useEffect(()=>{const o=Xe.subscribe(Y);return()=>o.unsubscribe()},[]),c.useEffect(()=>{if(L){let o=0;const f=setInterval(()=>{o+=50;const v=(O+o)/k*100;Z(v),o===1e3&&G(le=>{const U=le+1e3;return o=0,!h&&U>=k?(Ie.play(),clearInterval(f),I(1),G(0),J(!1),Z(0)):U>=k&&g<1&&I(1),U})},50);return()=>clearInterval(f)}},[O,L,k]),c.useEffect(()=>{const o=Te.subscribe(f=>C(f==="ru"?0:1));return()=>o.unsubscribe()},[]),c.useEffect(()=>{p.changeStatus(je,t,g)},[g]);const Ae=()=>w.isCustom&&w.iconName?te.getIcon(w.iconName,{size:22}):te.getHabitIcon(w.name?w.name[0]:"default",{size:22}),Re=et(0),ae=tt(Re,[-1,1],[T,N]),Be=(o,f)=>{h?f.offset.x<T&&$&&(re(!1),me(ae,0,{type:"tween",duration:.2}),D(!1)):Math.abs(f.offset.x)>N&&$&&((g<1&&f.offset.x>0||g>-1&&f.offset.x<0)&&re(f.offset.x>0),me(ae,0,{type:"tween",duration:.2}),D(!1))},Pe=()=>{$&&me(ae,0,{type:"tween",duration:.2}),D(!0)},re=o=>{let f=0;o?f=1:g===0?(f=-1,b(0)):g===1?(f=h?-1:0,b(0),h&&(G(0),p.choosenHabitsLastSkip[t]=Date.now())):g===-1&&(f=-1,h&&(G(0),p.choosenHabitsLastSkip[t]=Date.now())),p.habitsByDate[je][t]=f,f===1?pe(Ie):f===-1&&pe(rt),I(f)},we=()=>{u(t),pe(ze);const o=!A;W(o),Ze(o?t:null)};c.useEffect(()=>{const o=Ke.subscribe(f=>W(f===t));return()=>o.unsubscribe()},[t]),c.useEffect(()=>{D(!K)},[K]);const Ge=()=>{g<1&&!h&&(J(!0),G(0))},Me=()=>{h||(J(!1),Z(0),G(0))},Ne=o=>{H(o),S(!0),d(p.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return e.jsxs(ee.div,{id:t,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:F,backdropFilter:a?"none":"blur(40px)",border:a?"none":ie,boxShadow:Ee,x:ae},onClick:o=>{const f=document.getElementById(t);(f.clientHeight<80||o.nativeEvent.pageY-(f.getBoundingClientRect().top+window.scrollY)<80)&&we()},drag:$?"x":!1,dragConstraints:{left:T,right:g>0||h?0:N},onDrag:Be,onDragEnd:Pe,whileTap:{scale:.99},animate:{height:A?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:oe,color:g===1?"#fff":ue,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:A?"5px":"0"},children:Ae()}),e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:R,whiteSpace:A?"normal":"nowrap",overflow:A?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:B.name[y]}),e.jsxs("div",{style:{display:"flex",gap:"5px",marginTop:"16px",justifyContent:"center"},children:[e.jsx(ce,{theme:n,icon:e.jsx(xe,{size:9}),text:ht(t),color:n==="dark"?"#e33131":"#9800008f"}),!h&&s>0&&e.jsx(ce,{theme:n,icon:e.jsx(de,{size:9}),text:bt(y,s),color:n==="dark"?"#31e355":"#1e98008f"}),!h&&L&&e.jsx(ce,{theme:n,icon:e.jsx(_e,{size:9}),text:De(O,k,y,!1),color:n==="dark"?"#31c8e3":"#0086988f"}),h&&e.jsx(ce,{theme:n,icon:e.jsx(de,{size:9}),text:De(O,k,y,h),color:n==="dark"?"#31e355":"#1e98008f"})]})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!h&&e.jsxs(e.Fragment,{children:[!L&&g===0&&e.jsx(nt,{onClick:o=>{o.stopPropagation(),_(!0)},style:{color:l.get("icons",n),opacity:.4,fontSize:"24px",marginRight:"15px"}}),L&&e.jsx(ot,{onClick:o=>{o.stopPropagation(),Me()},style:{color:r,fontSize:"24px",marginRight:"15px"}}),e.jsx("div",{onClick:o=>{o.stopPropagation(),re(!0)},style:{width:"30px",height:"30px",borderRadius:"50%",border:g!==0?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:g===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:g===1&&e.jsx(Se,{size:16,color:"#FFF"})})]}),h&&e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(de,{size:16,color:"#FF453A"})})]})]}),A&&e.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[e.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:a?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),B.descr[y]&&e.jsx("div",{style:{color:V,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:B.descr[y]}),z?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:q?.map((o,f)=>e.jsxs(ee.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"90%",padding:"14px 16px",borderRadius:"16px",backgroundColor:a?"#FFFFFF":"rgba(255,255,255,0.05)",border:a?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:a?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[e.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:o.isDone?a?"#AEAEB2":"#636366":R,textDecoration:o.isDone?"line-through":"none"},children:o.text}),se&&X===f&&e.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[e.jsx(Fe,{onClick:()=>x(v=>({...v,show:!0,type:2,hId:t,gId:f,setGoals:P})),style:{fontSize:"14px",margin:"0 6px",color:l.get("icons",n),opacity:.7}}),e.jsx(ve,{onClick:()=>x(v=>({...v,show:!0,type:3,hId:t,gId:f,setGoals:P})),style:{fontSize:"14px",margin:"0 6px",color:l.get("icons",n),opacity:.7}})]}),e.jsx("div",{onClick:()=>{ne(v=>!(v&&X===f)),fe(f),u(t)},children:e.jsx(st,{style:{fontSize:"16px",color:l.get("icons",n),opacity:.4,marginRight:"12px"}})}),e.jsx("div",{onClick:()=>P(v=>{const le=v.map((U,$e)=>$e===f?{...U,isDone:!U.isDone}:U);return p.choosenHabitsGoals[t]=le,le}),style:{width:"24px",height:"24px",borderRadius:"8px",border:o.isDone?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:o.isDone?r:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:o.isDone&&e.jsx(Se,{size:12,color:"#FFF"})})]},f))}),e.jsxs("div",{onClick:()=>x({show:!0,type:1,hId:t,gId:0,setGoals:P}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${r}66`,backgroundColor:`${r}10`},children:[e.jsx(Je,{style:{fontSize:"12px",color:r}}),e.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:r,fontWeight:"600"},children:y===0?"Добавить цель":"Add goal"})]}),e.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:l.get("subText",n),textTransform:"uppercase",letterSpacing:"0.5px"},children:y===0?"Достижения":"Achievements"}),p.choosenHabitsAchievements[t]?.map((o,f)=>e.jsx(ut,{index:f,milestone:o,id:t,isNegative:h,percent:E,theme:n,fSize:m,langIndex:y},f))]}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",marginBottom:"15px",fontSize:"12px",fontWeight:"600",color:l.get("subText",n),border:`2px dashed ${l.get("subText",n)}66`,padding:"12px",borderRadius:"16px"},children:y===0?"Микро цели и достижения с премиум":"Micro goals and achievements with premium"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"20px"},children:[e.jsx(Fe,{onClick:()=>x(o=>({...o,show:!0,type:0,hId:t,gId:0,hInfo:i})),style:{fontSize:"18px",color:l.get("icons",n),opacity:.7}}),e.jsx(ve,{onClick:()=>Ne(t),style:{fontSize:"18px",color:l.get("icons",n),opacity:.7}}),e.jsx(Qe,{style:{fontSize:"18px",color:l.get("icons",n),opacity:.7},onClick:()=>{we()}}),!h&&e.jsx("div",{onClick:()=>re(!0),style:{width:"18px",height:"18px",borderRadius:"50%",border:g!==0?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:g===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:g===1&&e.jsx(Se,{size:16,color:"#FFF"})})]})]}),K&&e.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:a?"#FFF":l.get("background",n)},onClick:o=>o.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[e.jsx("div",{style:{color:l.get("mainText",n),fontWeight:"bold"},children:gt(k)}),e.jsx(at,{style:{width:"50%",color:n==="dark"?"#3abfe4":"#14868878"},min:1,max:59,value:k/6e4,valueLabelDisplay:"off",onChange:o=>{ge(o.target.value*6e4),o.stopPropagation()}}),e.jsx(xe,{onClick:o=>{o.stopPropagation(),_(!1)},style:{cursor:"pointer",color:l.get("icons",n),fontSize:"24px"}}),e.jsx(Ce,{onClick:o=>{o.stopPropagation(),Ge(),_(!1)},style:{cursor:"pointer",color:r,fontSize:"24px"}})]})}),"s"]})}function xt({text:t=["Имя","Name"],children:n,theme:x}){const[u,m]=c.useState(!0),S=x==="light"||x==="speciallight",d=p.prefs[0];return e.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[e.jsxs("div",{onClick:()=>{m(!u),pe(ze)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:S?"#1D1D1F":l.get("mainText",x)},children:t[d]}),e.jsx(ee.div,{animate:{rotate:u?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(Ue,{size:14,color:S?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(Ve,{initial:!1,children:u&&e.jsx(ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:n})})})]})}function ft(t){return t===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function pe(t){p.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),p.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function De(t,n,x,u){const m=u?t:n-t,S=Math.floor(m/1e3),d=Math.floor(S/86400),H=Math.floor(S%86400/3600),g=Math.floor(S%3600/60),I=S%60;if(d>0)if(x===0){let y="";const C=d%10,z=d%100;return z>=11&&z<=14?y="дней":C===1?y="день":C>=2&&C<=4?y="дня":y="дней",d+" "+y}else return d+(d===1?" day":" days");return H>0?H.toString().padStart(2,"0")+":"+g.toString().padStart(2,"0"):g.toString().padStart(2,"0")+":"+I.toString().padStart(2,"0")}function gt(t){return Math.floor(t/6e4)+"m"}const ut=({milestone:t,index:n,id:x,theme:u,langIndex:m})=>{const S=p.choosenHabits.indexOf(x),d=p.choosenHabitsLastSkip[x],H=p.choosenHabitsStartDates[S],g=d||H,I=1440*60*1e3,y=g?Math.floor((Date.now()-g)/I):0,z=[30,50,100][n]||30,Y=y<z,w=z-y,B=m===0?`${w} days left to unlock`:`Осталось ${w} дн. до открытия`;return e.jsx("div",{style:{fontSize:"13px",color:l.get("subText",u),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:Y?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",opacity:.6},children:[e.jsx("div",{style:{width:"12px",height:"12px",border:`1px solid ${l.get("subText",u)}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"bold"},children:"i"}),e.jsx("span",{style:{fontSize:"11px"},children:B})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{size:12,color:l.get("icons",u),style:{opacity:.8}}),t[m]]})})},bt=(t,n)=>{if(t===0){let x="";const u=n%10,m=n%100;return m>=11&&m<=14?x="дней":u===1?x="день":u>=2&&u<=4?x="дня":x="дней",n+" "+x}else return n+(n===1?" day":" days")},ce=({icon:t,text:n,color:x,theme:u})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:l.get("background",u)+"75",color:x,fontSize:"10px",fontWeight:"700",whiteSpace:"nowrap"},children:[t,n&&e.jsx("span",{children:n})]});function ht(t){let n=0;for(const x in p.habitsByDate){const u=p.habitsByDate[x];u&&t in u&&u[t]===1&&n++}return n}export{ct as addHabitFn,It as currentId,kt as default,gt as parsedTimeSimple,lt as removeHabitFn};
