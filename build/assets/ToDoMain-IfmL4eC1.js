import{b_ as be,A as S,y as O,j as e,a as W,m,a0 as je,C as a,af as me,b$ as Ce,c0 as ve,b6 as pe,c1 as xe,aU as Z,bZ as ge,c2 as we,c3 as ue,bw as te,a6 as fe,a3 as Se,c4 as Te,ab as Fe,t as De,l as Ie,f as ke,a5 as ie,c5 as Be,c6 as Le,c7 as ye,c8 as Re,c9 as ze,ad as Ae,g as Ee,n as Pe}from"./index-CYHiL5QJ.js";import{r as u}from"./recharts-k8ghPecL.js";import{S as J}from"./ScrollPicker-BJbReXgC.js";import $e from"./ToDoMetrics-DTgk4-pk.js";import"./MyAreaChart-CVimot_1.js";import"./MyBarChart-BxlLeBM6.js";const D=new be(null);async function We(i,n,t,s,d,x,o,c,h,w,v){const b=Date.now();S.todoList.push({id:b,name:i,description:n,difficulty:t,priority:s,category:d,icon:x,color:o,isDone:!1,startDate:c,deadLine:h,goals:w||[],note:v}),await O(),D&&D.next({type:"UPDATE_LIST"})}async function Oe(i,n,t,s,d,x,o,c,h,w,v){const b=S.todoList.find(T=>T.id===i);b&&(b.name=n,b.description=t,b.difficulty=s,b.priority=d,b.category=x,b.icon=o,b.color=c,b.startDate=h,b.deadLine=w,b.note=v,await O(),D&&D.next({type:"UPDATE_LIST"}))}async function Ne(i){S.todoList=S.todoList.filter(n=>n.id!==i),await O(),D&&D.next({type:"UPDATE_LIST"})}async function Ue(i){const n=S.todoList.find(t=>t.id===i);n&&(n.isDone=!n.isDone,await O(),D&&D.next({type:"UPDATE_LIST"}))}async function Ge(i,n){const t=S.todoList.find(s=>s.id===i);t&&(t.goals||(t.goals=[]),t.goals.push({text:n,isDone:!1}),await O(),D&&D.next({type:"UPDATE_LIST"}))}async function _e(i,n){const t=S.todoList.find(s=>s.id===i);t&&t.goals&&(t.goals.splice(n,1),await O(),D&&D.next({type:"UPDATE_LIST"}))}async function He(i,n){const t=S.todoList.find(s=>s.id===i);t&&t.goals&&t.goals[n]&&(t.goals[n].isDone=!t.goals[n].isDone,await O(),D&&D.next({type:"UPDATE_LIST"}))}const ne=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],oe=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],Ye=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],Me=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],Ve=({show:i,setShow:n,theme:t,lang:s,fSize:d,task:x})=>{const[o,c]=u.useState(x||{}),[h,w]=u.useState(!1),[v,b]=u.useState(""),[T,L]=u.useState(null);u.useEffect(()=>{x&&c(x)},[x]);const z=o.goals?.length||0,B=o.goals?.filter(r=>r.isDone).length||0,I=z===0?o.isDone?100:0:Math.round(B/z*100),l=M(t,d,o.color),F=async()=>{if(T==="main")await Ne(o.id),n(!1);else if(typeof T=="number"){const r=T,j=o.goals.filter((R,G)=>G!==r);c(R=>({...R,goals:j})),await _e(o.id,r)}L(null)},A=async()=>{await Oe(o.id,o.name,o.description,o.difficulty,o.priority,o.category,o.icon,o.color,o.startDate,o.deadLine,o.note),w(!1)},k=async r=>{if(!o.goals)return;const j=[...o.goals];j[r]={...j[r],isDone:!j[r].isDone},c(R=>({...R,goals:j})),await He(o.id,r)},$=async()=>{if(!v.trim())return;const r={text:v,isDone:!1};c(j=>({...j,goals:[...j.goals||[],r]})),await Ge(o.id,v),b("")};return e.jsx(W,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),style:l.backdrop}),e.jsxs(m.div,{initial:{y:"100%"},animate:{y:"0%"},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:l.modalContainer,children:[e.jsx(W,{children:T!==null&&e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:l.warningOverlay,children:e.jsxs("div",{style:l.warningBox,children:[e.jsx(je,{size:40,color:"#F44336",style:{marginBottom:15}}),e.jsx("h3",{style:{color:a.get("mainText",t),margin:"0 0 10px 0"},children:s===0?"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹?":"Are you sure?"}),e.jsx("p",{style:{color:a.get("subText",t),textAlign:"center",marginBottom:20},children:s===0?"Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ.":"This action cannot be undone."}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%"},children:[e.jsx("button",{onClick:()=>L(null),style:l.cancelBtn,children:s===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("button",{onClick:F,style:l.confirmDeleteBtn,children:s===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ":"Delete"})]})]})})}),e.jsx("div",{style:l.dragArea,onClick:()=>n(!1),children:e.jsx("div",{style:l.dragHandle})}),e.jsxs("div",{style:l.toolbar,children:[e.jsx(m.div,{whileTap:{scale:.9},onClick:()=>L("main"),style:l.iconBtnRed,children:e.jsx(me,{size:16})}),e.jsx("div",{style:l.toolbarRight,children:h?e.jsxs(m.div,{whileTap:{scale:.9},onClick:A,style:l.saveBtn,children:[e.jsx(Ce,{style:{marginRight:6}})," ",s===0?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ":"Save"]}):e.jsx(m.div,{whileTap:{scale:.9},onClick:()=>w(!0),style:l.iconBtn,children:e.jsx(ve,{size:16})})})]}),e.jsxs("div",{style:{overflowY:"scroll",overflowX:"hidden"},className:"no-scrollbar",children:[e.jsxs("div",{style:l.headerWrapper,children:[e.jsxs("div",{style:l.headerTopRow,children:[e.jsx("div",{style:l.iconBadge,children:o.icon}),e.jsx(m.button,{whileTap:{scale:.95},onClick:async()=>{c(r=>({...r,isDone:!r.isDone})),await Ue(o.id)},style:l.statusBadge(o.isDone),children:o.isDone?s===0?"Ð’Ð«ÐŸÐžÐ›ÐÐ•ÐÐž":"COMPLETED":s===0?"Ð’ ÐŸÐ ÐžÐ¦Ð•Ð¡Ð¡Ð•":"IN PROGRESS"})]}),h?e.jsx("input",{type:"text",placeholder:langIndex===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Name",value:o.name,onChange:r=>c({...o,name:r.target.value}),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",t),marginLeft:"8px",outline:"none"}}):e.jsx("h2",{style:l.title,children:o.name}),e.jsxs("div",{style:l.progressContainer,children:[e.jsxs("span",{style:l.progressText,children:[I,"%"]}),e.jsx("div",{style:l.progressBarBg,children:e.jsx(m.div,{initial:{width:0},animate:{width:`${I}%`},style:l.progressBarFill})})]})]}),e.jsxs("div",{style:l.bodyPadding,children:[e.jsx("div",{style:l.gridTwo,children:h?e.jsxs(e.Fragment,{children:[e.jsx("select",{style:l.selectInput,value:o.priority,onChange:r=>c({...o,priority:parseInt(r.target.value)}),children:ne.map((r,j)=>e.jsx("option",{value:j,children:r[s]},j))}),e.jsx("select",{style:l.selectInput,value:o.difficulty,onChange:r=>c({...o,difficulty:parseInt(r.target.value)}),children:oe.map((r,j)=>e.jsx("option",{value:j,children:r[s]},j))})]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{icon:e.jsx(pe,{}),label:s===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority",value:ne[o.priority][s],color:Ye[o.priority],theme:t}),e.jsx(se,{icon:e.jsx(xe,{}),label:s===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",value:oe[o.difficulty][s],color:Me[o.difficulty],theme:t})]})}),e.jsx("div",{style:l.sectionBox,children:h?e.jsx("input",{type:"text",placeholder:langIndex===0?"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ":"Description",value:o.description,onChange:r=>c({...o,description:r.target.value}),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",t),marginLeft:"8px",outline:"none"}}):e.jsx("p",{style:l.description,children:o.description||(s===0?"ÐÐµÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ":"No description")})}),e.jsxs("div",{style:l.dateRow,children:[e.jsx(ae,{label:s===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start",value:o.startDate,icon:e.jsx(Z,{}),isEditing:h,theme:t,onChange:r=>c({...o,startDate:r})}),e.jsx(ae,{label:s===0?"Ð¡Ñ€Ð¾Ðº":"Deadline",value:o.deadLine,icon:e.jsx(ge,{}),isEditing:h,theme:t,onChange:r=>c({...o,deadLine:r})})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsxs("div",{style:l.sectionHeader,children:[e.jsx(we,{style:{marginRight:"8px",color:o.color}}),s===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist",e.jsxs("span",{style:l.counterBadge,children:[B,"/",z]})]}),e.jsxs("div",{style:l.goalsContainer,children:[e.jsx(W,{children:o.goals?.map((r,j)=>e.jsxs(m.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},style:l.goalRow,children:[e.jsx("div",{onClick:()=>k(j),style:l.checkbox(r.isDone),children:r.isDone&&e.jsx(ue,{size:10,color:"#fff"})}),e.jsx("div",{style:l.goalText(r.isDone),onClick:()=>k(j),children:r.text}),e.jsx("div",{onClick:()=>L(j),style:l.deleteSubBtn,children:e.jsx(te,{})})]},j))}),e.jsxs("div",{style:l.addSubRow,children:[e.jsx(fe,{style:{color:a.get("subText",t),marginRight:10}}),e.jsx("input",{type:"text",placeholder:langIndex===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Add item...",value:v,onChange:r=>b(r.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",t),marginLeft:"8px",outline:"none"}}),v.length>0&&e.jsx("button",{onClick:$,style:l.addSubBtn,children:"OK"})]})]})]}),e.jsx("div",{style:{marginBottom:"260px"}})]})]})]})]})})},se=({icon:i,label:n,value:t,color:s,theme:d})=>e.jsxs("div",{style:{...M(d).modernBadge,backgroundColor:`${s}15`,border:`1px solid ${s}30`},children:[e.jsxs("div",{style:M(d).badgeLabel,children:[i," ",e.jsx("span",{style:{marginLeft:6},children:n})]}),e.jsx("div",{style:{...M(d).badgeValue,color:s},children:t})]}),ae=({label:i,value:n,icon:t,isEditing:s,theme:d,onChange:x})=>{const o=M(d);return e.jsxs("div",{style:o.dateItem,children:[e.jsx("div",{style:{color:a.get("subText",d),marginRight:10},children:t}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:o.label,children:i}),s?e.jsx("input",{type:"date",style:o.dateInput,value:n||"",onChange:c=>x(c.target.value)}):e.jsx("span",{style:o.dateValue,children:n||"-"})]})]})},M=(i,n,t)=>{const s=a.get("background",i),d=a.get("simplePanel",i),x=a.get("mainText",i),o=a.get("subText",i),c=a.get("border",i);return{backdrop:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",zIndex:1999},modalContainer:{position:"fixed",bottom:0,left:0,right:0,height:"90vh",backgroundColor:s,borderTopLeftRadius:"32px",borderTopRightRadius:"32px",zIndex:2e3,display:"flex",flexDirection:"column",boxShadow:"0 -10px 40px rgba(0,0,0,0.5)",overflow:"hidden"},warningOverlay:{position:"absolute",inset:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},warningBox:{backgroundColor:d,borderRadius:24,padding:25,width:"100%",maxWidth:320,display:"flex",flexDirection:"column",alignItems:"center",border:`1px solid ${c}`},cancelBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:c,color:x,fontWeight:"bold"},confirmDeleteBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:"#F44336",color:"#fff",fontWeight:"bold"},dragArea:{width:"100%",padding:"15px 0",display:"flex",justifyContent:"center"},dragHandle:{width:"40px",height:"5px",backgroundColor:c,borderRadius:"10px"},toolbar:{display:"flex",justifyContent:"space-between",padding:"0 24px 15px 24px"},iconBtn:{background:d,border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:x},iconBtnRed:{background:"rgba(244, 67, 54, 0.1)",border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:"#F44336"},saveBtn:{background:a.get("done",i),color:"#fff",border:"none",borderRadius:"12px",padding:"0 20px",fontWeight:"bold",display:"flex",alignItems:"center"},headerWrapper:{padding:"10px 24px 25px 24px",borderBottom:`1px solid ${c}`},headerTopRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},iconBadge:{width:64,height:64,borderRadius:20,fontSize:32,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${t}20`,border:`1px solid ${t}40`},statusBadge:h=>({padding:"10px 16px",borderRadius:14,fontSize:10,fontWeight:900,border:"none",backgroundColor:h?a.get("done",i):d,color:h?"#fff":o}),title:{fontSize:28,fontWeight:900,color:x,margin:0},progressContainer:{marginTop:20},progressText:{fontSize:12,fontWeight:800,color:t},progressBarBg:{width:"100%",height:8,backgroundColor:c,borderRadius:10,marginTop:6,overflow:"hidden"},progressBarFill:{height:"100%",backgroundColor:t},bodyPadding:{padding:24},gridTwo:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},modernBadge:{borderRadius:20,padding:15,display:"flex",flexDirection:"column",alignItems:"center"},badgeLabel:{display:"flex",alignItems:"center",fontSize:10,color:o,textTransform:"uppercase",letterSpacing:1},badgeValue:{fontSize:14,fontWeight:800,marginTop:4},dateRow:{display:"flex",gap:12,marginBottom:24},dateItem:{flex:1,display:"flex",alignItems:"center",backgroundColor:d,padding:12,borderRadius:16},dateInput:{background:"transparent",border:"none",color:x,fontSize:13,width:"100%",outline:"none"},label:{fontSize:9,color:o,textTransform:"uppercase"},dateValue:{fontSize:13,fontWeight:700,color:x},sectionHeader:{display:"flex",alignItems:"center",fontSize:17,fontWeight:800,color:x,marginBottom:15},counterBadge:{marginLeft:"auto",fontSize:11,backgroundColor:d,padding:"4px 10px",borderRadius:8,color:o},goalRow:{display:"flex",alignItems:"center",padding:14,backgroundColor:d,borderRadius:16,marginBottom:8},checkbox:h=>({width:24,height:24,borderRadius:8,border:`2px solid ${h?t:c}`,backgroundColor:h?t:"transparent",display:"flex",alignItems:"center",justifyContent:"center"}),goalText:h=>({flex:1,fontSize:15,color:x,opacity:h?.5:1,textDecoration:h?"line-through":"none",marginLeft:12}),deleteSubBtn:{color:o,padding:5},addSubRow:{display:"flex",alignItems:"center",padding:"5px 15px",border:`2px dashed ${c}`,borderRadius:16},addSubBtn:{background:t,color:"#fff",border:"none",borderRadius:8,padding:"6px 12px",fontWeight:"bold",marginLeft:10},description:{fontSize:16,lineHeight:1.6,color:x,margin:0,opacity:.9},selectInput:{width:"100%",padding:12,borderRadius:12,border:`1px solid ${c}`,backgroundColor:d,color:x}}},V=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],Q=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],X=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],re=["ðŸ“","ðŸ’¼","ðŸ ","ðŸ’ª","ðŸ›’","ðŸŽ“","âœˆï¸","ðŸ’°","ðŸŽ¨","ðŸ’»"],Qe=({theme:i,lang:n,fSize:t})=>{const[s,d]=u.useState(!1),[x,o]=u.useState(""),[c,h]=u.useState(""),[w,v]=u.useState(V[1][n]),[b,T]=u.useState(Q[2][n]),[L,z]=u.useState(X[1][n]),[B,I]=u.useState(re[0]),[l,F]=u.useState(new Date().toISOString().split("T")[0]),[A,k]=u.useState(""),[$,r]=u.useState([]),[j,R]=u.useState("");u.useRef(null),u.useEffect(()=>{const y=Se.subscribe(g=>d(g==="ToDoNew"));return()=>y.unsubscribe()},[]);const G=async()=>{if(!x.trim()){Fe(langIndex===0?"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Enter name",2e3,!1);return}const y=V.findIndex(f=>f.includes(w)),g=Q.findIndex(f=>f.includes(b));X.findIndex(f=>f.includes(L)),await We(x,c,g,y,"General",B,a.get("areaChart",i),l,A,$,""),_()},_=()=>{Te(null),setTimeout(()=>{o(""),h(""),r([]),R(""),v(V[1][n]),T(Q[2][n]),z(X[1][n]),F(new Date().toISOString().split("T")[0]),k("")},300)},H=()=>{j.trim()&&(r([...$,{text:j,isDone:!1}]),R(""))},p=Xe(i);return e.jsx(W,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:_,style:p.backdrop}),e.jsxs(m.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:250},style:p.container,children:[e.jsx("div",{style:p.handleContainer,children:e.jsx("div",{style:p.handle})}),e.jsxs("div",{style:p.header,children:[e.jsx(m.button,{whileTap:{scale:.9},onClick:_,style:p.textBtn,children:n===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("span",{style:p.headerTitle,children:n===0?"ÐÐ¾Ð²Ð°Ñ Ñ†ÐµÐ»ÑŒ":"New Goal"}),e.jsx(m.button,{whileTap:{scale:.9},onClick:G,style:{...p.textBtn,color:a.get("done",i),fontWeight:"700"},children:n===0?"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ":"Create"})]}),e.jsxs("div",{style:p.scrollContent,className:"no-scrollbar",children:[e.jsx("div",{style:p.section,children:e.jsxs("div",{style:p.mainInputWrapper,children:[e.jsx("span",{style:{fontSize:"2rem",marginRight:"10px"},children:B}),e.jsx("div",{style:{flex:1},children:e.jsx("input",{type:"text",placeholder:langIndex===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ†ÐµÐ»Ð¸...":"Goal Title...",value:x,onChange:y=>o(y.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",i),marginLeft:"8px",outline:"none"}})})]})}),e.jsx("div",{style:p.iconScrollContainer,children:re.map((y,g)=>e.jsx(m.div,{whileTap:{scale:.8},onClick:()=>I(y),style:{...p.iconChip,backgroundColor:y===B?a.get("iconsHighlited",i):"transparent",border:y===B?"none":`1px solid ${a.get("border",i)}`},children:e.jsx("span",{style:{fontSize:"1.2rem",filter:y===B?"grayscale(0)":"grayscale(100%) opacity(0.7)"},children:y})},g))}),e.jsx("div",{style:p.card,children:e.jsxs("div",{style:p.pickerRow,children:[e.jsxs("div",{style:p.pickerCol,children:[e.jsx("label",{style:p.label,children:n===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority"}),e.jsx(J,{items:V.map(y=>y[n]),value:w,onChange:v,theme:i,width:"100%"})]}),e.jsx("div",{style:p.divider}),e.jsxs("div",{style:p.pickerCol,children:[e.jsx("label",{style:p.label,children:n===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty"}),e.jsx(J,{items:Q.map(y=>y[n]),value:b,onChange:T,theme:i,width:"100%"})]}),e.jsx("div",{style:p.divider}),e.jsxs("div",{style:p.pickerCol,children:[e.jsx("label",{style:p.label,children:n===0?"Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ":"Urgency"}),e.jsx(J,{items:X.map(y=>y[n]),value:L,onChange:z,theme:i,width:"100%"})]})]})}),e.jsxs("div",{style:p.dateSection,children:[e.jsx("div",{style:p.dateCard,children:e.jsxs("div",{style:p.dateRow,children:[e.jsx(Z,{style:{marginRight:10,color:a.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:p.label,children:n===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start"}),e.jsx("input",{type:"date",style:p.dateInput,value:l,onChange:y=>F(y.target.value)})]})]})}),e.jsx("div",{style:p.dateCard,children:e.jsxs("div",{style:p.dateRow,children:[e.jsx(ge,{style:{marginRight:10,color:a.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:p.label,children:n===0?"Ð¡Ñ€Ð¾Ðº":"Deadline"}),e.jsx("input",{type:"date",style:p.dateInput,value:A,onChange:y=>k(y.target.value)})]})]})})]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx("input",{type:"text",placeholder:langIndex===0?"Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ / ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ...":"Notes / Description...",value:c,onChange:y=>h(y.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",i),marginLeft:"8px",outline:"none"}})}),e.jsxs("div",{style:p.subTaskContainer,children:[e.jsx("label",{style:p.sectionTitle,children:n===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist"}),e.jsxs("div",{style:p.addSubRow,children:[e.jsx("div",{style:{flex:1},children:e.jsx("input",{type:"text",placeholder:langIndex===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑˆÐ°Ð³...":"Add a step...",value:j,onChange:y=>R(y.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",i),marginLeft:"8px",outline:"none"}})}),e.jsx(m.div,{whileTap:{scale:.9},onClick:H,style:p.addBtn,children:e.jsx(fe,{style:{width:"100%",color:a.get("mainText",i)}})})]}),e.jsx("div",{style:p.subList,children:e.jsx(W,{children:$.map((y,g)=>e.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0,padding:0},style:p.subItem,children:[e.jsx("div",{style:p.subDot}),e.jsx("span",{style:p.subText,children:y.text}),e.jsx("div",{onClick:()=>r($.filter((f,C)=>C!==g)),children:e.jsx(te,{style:{width:"100%",color:a.get("subText",i)}})})]},g))})})]}),e.jsx("div",{style:{marginBottom:"300px"}})]})]})]})})},Xe=i=>{const n=a.get("background",i),t=a.get("simplePanel",i),s=a.get("mainText",i),d=a.get("subText",i),x=a.get("border",i);return{backdrop:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.4)",backdropFilter:"blur(4px)",zIndex:998},container:{position:"fixed",bottom:0,left:0,right:0,height:"85vh",backgroundColor:n,borderRadius:"24px 24px 0 0",boxShadow:"0 -10px 40px rgba(0,0,0,0.1)",zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden"},handleContainer:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"12px",paddingBottom:"8px"},handle:{width:"40px",height:"5px",borderRadius:"3px",backgroundColor:a.get("border",i)},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px 15px 20px",borderBottom:`1px solid ${a.get("svgColor",i)}`},textBtn:{background:"none",border:"none",fontSize:"16px",color:d,cursor:"pointer",padding:"10px"},headerTitle:{fontSize:"18px",fontWeight:"700",color:s},scrollContent:{flex:1,overflowY:"auto",padding:"20px"},section:{marginBottom:"20px"},mainInputWrapper:{display:"flex",alignItems:"center"},iconScrollContainer:{display:"flex",gap:"12px",overflowX:"auto",padding:"5px 5px 15px 5px",scrollbarWidth:"none"},iconChip:{width:"45px",height:"45px",minWidth:"45px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},card:{backgroundColor:t,borderRadius:"20px",padding:"15px",boxShadow:a.get("shadow",i),marginBottom:"20px"},pickerRow:{display:"flex",justifyContent:"space-between",alignItems:"center"},pickerCol:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},divider:{width:"1px",height:"60px",backgroundColor:x,margin:"0 5px"},label:{fontSize:"11px",color:d,fontWeight:"700",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},dateSection:{display:"flex",gap:"12px",marginBottom:"20px"},dateCard:{flex:1,backgroundColor:t,borderRadius:"16px",padding:"12px",border:`1px solid ${x}`,display:"flex",alignItems:"center"},dateRow:{display:"flex",alignItems:"center",width:"100%"},dateInput:{background:"transparent",border:"none",color:s,fontSize:"14px",width:"100%",outline:"none",fontFamily:"inherit",fontWeight:"600"},subTaskContainer:{marginTop:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"700",color:s,marginLeft:"5px",marginBottom:"10px",display:"block"},addSubRow:{display:"flex",alignItems:"center",gap:"10px"},addBtn:{width:"46px",height:"46px",borderRadius:"14px",backgroundColor:a.get("done",i),display:"flex",alignItems:"center",justifyContent:"center",border:"none",marginTop:"10px",cursor:"pointer",boxShadow:`0 4px 12px ${a.get("habitCardDone",i)}`},subList:{marginTop:"15px",display:"flex",flexDirection:"column",gap:"8px"},subItem:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:t,borderRadius:"12px"},subDot:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:a.get("subText",i),marginRight:"12px"},subText:{flex:1,fontSize:"15px",color:s}}},E=new Audio("Audio/Click.wav"),qe=new Audio("Audio/IsDone.wav"),Ke=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],Ze=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],Je=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],le=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],de=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],ce=["#81C784","#64B5F6","#FFD54F","#FF8A65","#E57373"],xt=()=>{const[i,n]=u.useState("dark"),[t,s]=u.useState(S.prefs[0]),[d,x]=u.useState(S.prefs[4]),[o,c]=u.useState(!1),[h,w]=u.useState(!1),[v,b]=u.useState(0),[T,L]=u.useState(S.todoList||[]),[z,B]=u.useState(0),[I,l]=u.useState(0),[F,A]=u.useState(1),[k,$]=u.useState(""),[r,j]=u.useState("none"),R=u.useRef(null);u.useEffect(()=>{const g=De.subscribe(n),f=Ie.subscribe(N=>s(N==="ru"?0:1)),C=ke.subscribe(x),Y=D.subscribe(N=>{N&&(B(he=>he+1),N.type==="OPEN_STATS"&&(w(!0),c(!1)),N.type==="OPEN_ADD"&&(w(!1),b(-1),c(!0)),N.type==="CLOSE_ALL"&&(w(!1),c(!1)))});return()=>{g.unsubscribe(),f.unsubscribe(),C.unsubscribe(),Y.unsubscribe()}},[]),u.useEffect(()=>{G()},[I,F,k,z]),u.useEffect(()=>{r==="search"&&R.current&&setTimeout(()=>R.current.focus(),300)},[r]);function G(){let g=S.todoList?[...S.todoList]:[];if(k.trim()){const f=k.toLowerCase();g=g.filter(C=>C.name&&C.name.toLowerCase().includes(f)||C.category&&C.category.toLowerCase().includes(f))}I===1&&(g=g.filter(f=>f.isDone)),I===2&&(g=g.filter(f=>!f.isDone)),F===0?g.sort((f,C)=>(C.difficulty||0)-(f.difficulty||0)):F===1?g.sort((f,C)=>(C.priority||0)-(f.priority||0)):F===2&&g.sort((f,C)=>K(f.deadLine)-K(C.deadLine)),L(g)}const _=(g,f)=>{g.stopPropagation(),f.isDone=!f.isDone,B(C=>C+1),P(f.isDone?qe:E)},H=g=>{P(E),j(r===g?"none":g)},p=u.useMemo(()=>{const g={};return T.forEach(f=>{const C=f.category||(t===0?"Ð”Ñ€ÑƒÐ³Ð¾Ðµ":"Other");g[C]||(g[C]=[]),g[C].push(f)}),g},[T,t]),y=it(i);return e.jsxs("div",{style:y.container,children:[e.jsxs("div",{style:{width:"92%",marginTop:"14vh",display:"flex",flexDirection:"column",gap:"10px",zIndex:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"800",color:a.get("mainText",i),fontFamily:"Segoe UI",letterSpacing:"-0.5px"},children:t===0?"Ð—Ð°Ð´Ð°Ñ‡Ð¸":"Tasks"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(ee,{icon:e.jsx(ie,{size:16}),isActive:r==="search"||k.length>0,onClick:()=>H("search"),theme:i}),e.jsx(ee,{icon:e.jsx(Be,{size:16}),isActive:r==="sort"||F!==1,onClick:()=>H("sort"),theme:i}),e.jsx(ee,{icon:e.jsx(Le,{size:14}),isActive:r==="filter"||I!==0,onClick:()=>H("filter"),theme:i})]})]}),e.jsxs(W,{mode:"wait",children:[r==="search"&&e.jsx(m.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden"},children:e.jsxs("div",{style:y.inputContainer,children:[e.jsx(ie,{size:14,color:a.get("subText",i),style:{marginLeft:"16px",opacity:.6}}),e.jsx("input",{type:"text",placeholder:t===0?"ÐÐ°Ð¹Ñ‚Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Search tasks...",value:k,onChange:g=>$(g.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",i),marginLeft:"8px",outline:"none"}}),k.length>0&&e.jsx(m.div,{initial:{scale:0},animate:{scale:1},onClick:()=>$(""),style:y.clearBtn,children:e.jsx(te,{size:10,color:"#fff"})})]})},"search"),r==="sort"&&e.jsxs(m.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(U,{label:t===0?"Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Priority",icon:e.jsx(ye,{size:10}),isActive:F===1,onClick:()=>{A(1),P(E)},theme:i}),e.jsx(U,{label:t===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",icon:e.jsx(Re,{size:12}),isActive:F===0,onClick:()=>{A(0),P(E)},theme:i}),e.jsx(U,{label:t===0?"Ð”ÐµÐ´Ð»Ð°Ð¹Ð½":"Deadline",icon:e.jsx(Z,{size:12}),isActive:F===2,onClick:()=>{A(2),P(E)},theme:i})]},"sort"),r==="filter"&&e.jsxs(m.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(U,{label:t===0?"Ð’ÑÐµ":"All",isActive:I===0,onClick:()=>{l(0),P(E)},theme:i}),e.jsx(U,{label:t===0?"Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ":"Active",isActive:I===2,onClick:()=>{l(2),P(E)},theme:i}),e.jsx(U,{label:t===0?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"Done",isActive:I===1,onClick:()=>{l(1),P(E)},theme:i})]},"filter")]})]}),e.jsxs("div",{style:y.panel,className:"no-scrollbar",children:[e.jsx(W,{mode:"popLayout",children:T.length===0?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},style:y.emptyState,children:[e.jsx(ze,{size:40,style:{marginBottom:10,opacity:.5}}),e.jsx("span",{children:t===0?"Ð—Ð°Ð´Ð°Ñ‡ Ð½ÐµÑ‚":"No tasks found"})]}):Object.keys(p).map(g=>e.jsx(et,{title:g,theme:i,children:p[g].map((f,C)=>e.jsx(tt,{onClick:()=>{const Y=S.todoList.indexOf(f);b(Y),c(!0),P(E)},onCheck:Y=>_(Y,f),item:f,theme:i,lang:t,fSize:d},f.id||C+f.name))},g))}),e.jsx("div",{style:{height:"120px",width:"100%"}})]}),e.jsx(Ve,{show:o,setShow:c,theme:i,lang:t,fSize:d,task:S.todoList[v]||{}}),h&&e.jsx($e,{theme:i,lang:t,onClose:()=>w(!1)}),e.jsx(Qe,{theme:i,lang:t,fSize:d})]})},ee=({icon:i,isActive:n,onClick:t,theme:s})=>{const d=s==="dark",x=a.get("accent",s),o=n?x:d?"rgba(255,255,255,0.1)":"#FFFFFF",c=n?"#FFFFFF":a.get("mainText",s);return e.jsx(m.div,{whileTap:{scale:.92},onClick:t,style:{width:"40px",height:"40px",borderRadius:"14px",backgroundColor:o,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:n?`0 4px 12px ${x}60`:d?"none":"0 2px 8px rgba(0,0,0,0.05)",color:c,transition:"all 0.3s ease"},children:i})},U=({label:i,icon:n,isActive:t,onClick:s,theme:d})=>{const x=d==="dark",o=a.get("accent",d);return e.jsxs(m.div,{whileTap:{scale:.95},onClick:s,style:{padding:"8px 16px",borderRadius:"12px",backgroundColor:t?o:x?"rgba(255,255,255,0.08)":"#FFFFFF",color:t?"#FFFFFF":a.get("subText",d),fontSize:"13px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",border:t?"none":`1px solid ${x?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}`,boxShadow:t?`0 4px 12px ${o}40`:"none",transition:"all 0.2s ease"},children:[n,i]})},et=({title:i,children:n,theme:t})=>{const[s,d]=u.useState(!0),x=t==="light"||t==="speciallight";return e.jsxs("div",{style:{width:"100%",marginBottom:"6px"},children:[e.jsxs("div",{onClick:()=>{d(!s),P(E)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"8px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"800",fontFamily:"Segoe UI",color:x?"#1D1D1F":a.get("mainText",t),opacity:.8},children:i}),e.jsx(m.div,{animate:{rotate:s?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(Ae,{size:12,color:x?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(W,{initial:!1,children:s&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:n})})]})},tt=({onClick:i,onCheck:n,item:t,theme:s,lang:d,fSize:x})=>{const o=ot(t.deadLine)&&!t.isDone,c=s==="light"||s==="speciallight",h=t.goals?t.goals.length:0,w=t.goals?t.goals.filter(k=>k.isDone).length:0;let v=t.color||a.get("accent",s);v&&v.length>7&&v.startsWith("#")&&(v=v.substring(0,7));const b=v;let T=c?"#FFFFFF":a.get("simplePanel",s)+"CC",L=c?"transparent":`1px solid ${a.get("border",s)}80`,z=c?"0 4px 12px rgba(0,0,0,0.05)":"0 4px 12px rgba(0,0,0,0.2)";const B=t.isDone?`${b}15`:`${b}25`,I=t.isDone?"transparent":`${b}40`,l=le[t.priority]||le[0],F=de[t.difficulty]||de[0],A=ce[t.urgency||0]||ce[0];return e.jsxs(m.div,{layout:!0,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,transition:{duration:.2}},whileTap:{scale:.98},onClick:i,style:{width:"88%",minHeight:"80px",borderRadius:"20px",marginBottom:"8px",padding:"10px 12px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",overflow:"hidden",cursor:"pointer",backgroundColor:T,backdropFilter:c?"none":"blur(20px)",border:L,boxShadow:z,opacity:t.isDone?.6:1},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:B,color:b,fontSize:"20px",marginRight:"14px",flexShrink:0,border:`1px solid ${I}`},children:t.icon||"ðŸ“"}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",justifyContent:"center",alignItems:"center",gap:"6px",marginRight:"14px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginBottom:"2px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.5px",color:a.get("subText",s),opacity:.7},children:t.category||(d===0?"ÐžÐ±Ñ‰ÐµÐµ":"General")}),(o||t.priority>=3)&&!t.isDone&&e.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",backgroundColor:"#FF453A"}})]}),e.jsx("div",{style:{fontSize:x===0?"16px":"17px",fontWeight:"700",color:t.isDone?a.get("subText",s):a.get("mainText",s),textDecoration:t.isDone?"line-through":"none",lineHeight:"1.2",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},children:t.name})]}),!t.isDone&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",alignItems:"center",justifyContent:"center"},children:[e.jsx(q,{icon:e.jsx(pe,{size:8}),text:Ke[t.priority]?.[d],color:l}),e.jsx(q,{icon:e.jsx(xe,{size:8}),text:Ze[t.difficulty]?.[d],color:F}),e.jsx(q,{icon:e.jsx(ye,{size:8}),text:Je[t.urgency||0]?.[d],color:A}),t.deadLine&&e.jsx(q,{icon:o?e.jsx(Ee,{size:8}):e.jsx(Z,{size:8}),text:st(t.deadLine,d),color:o?"#FF453A":a.get("subText",s)}),h>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"10px",fontWeight:"700",color:a.get("subText",s),marginLeft:"4px"},children:[e.jsx(Pe,{size:10,style:{opacity:.7}}),e.jsxs("span",{children:[w,"/",h]})]})]})]}),e.jsx("div",{onClick:n,style:{width:"26px",height:"26px",borderRadius:"9px",border:t.isDone?"none":`2px solid ${a.get("border",s)}`,backgroundColor:t.isDone?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},children:t.isDone&&e.jsx(ue,{size:12,color:"#FFF"})}),!t.isDone&&h>0&&e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"3px",backgroundColor:c?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)"},children:e.jsx(m.div,{initial:{width:0},animate:{width:`${w/h*100}%`},style:{height:"100%",backgroundColor:b}})})]})},q=({icon:i,text:n,color:t})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:`${t}15`,border:`1px solid ${t}30`,color:t,fontSize:"9px",fontWeight:"700",whiteSpace:"nowrap"},children:[i,n&&e.jsx("span",{children:n})]}),it=(i,n)=>{const t=i==="light"||i==="speciallight",s=t?"#F2F4F6":a.get("background",i);a.get("mainText",i);const d=a.get("subText",i);return{container:{backgroundColor:s,display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflowY:"hidden"},panel:{display:"flex",flexDirection:"column",width:"100%",flex:1,alignItems:"center",justifyContent:"start",overflowY:"scroll",paddingTop:"2px"},emptyState:{marginTop:"50px",display:"flex",flexDirection:"column",alignItems:"center",color:d,fontSize:"16px",fontWeight:"600"},inputContainer:{width:"100%",height:"44px",backgroundColor:t?"#FFFFFF":"rgba(255,255,255,0.08)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"space-around",border:t?"none":`1px solid ${a.get("border",i)}60`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)",position:"relative"},input:{flex:1,height:"100%",border:"none",outline:"none",backgroundColor:"transparent",padding:"0 12px",fontSize:"15px",fontWeight:"600",fontFamily:"Segoe UI",color:a.get("mainText",i)},clearBtn:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"rgba(128,128,128,0.4)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",cursor:"pointer"}}};function P(i){S.prefs[2]===0&&i&&(i.paused||(i.pause(),i.currentTime=0),i.volume=.5,i.play().catch(n=>console.log("Audio play failed",n))),S.prefs[3]===0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function nt(i){if(!i)return null;if(i.includes("-"))return new Date(i);if(i.includes(".")){const n=i.split(".");return new Date(n[2],n[1]-1,n[0])}return new Date(i)}function K(i){const n=nt(i);if(!n)return 9999;const t=new Date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),Math.ceil((n-t)/(1e3*60*60*24))}function ot(i){return K(i)<0}function st(i,n){if(!i)return"";const t=K(i);return n===0?t===0?"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ":t===1?"Ð—Ð°Ð²Ñ‚Ñ€Ð°":t<0?`${Math.abs(t)} Ð´Ð½. Ð½Ð°Ð·Ð°Ð´`:`${t} Ð´Ð½.`:t===0?"Today":t===1?"Tmrw":t<0?`${Math.abs(t)}d ago`:`${t}d left`}export{xt as default};
