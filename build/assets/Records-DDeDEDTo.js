import{A as f,t as w,l as D,f as k,j as e,C as o,U as b,N as G,bs as F,bt as B,bp as L,bq as R,by as T,bx as z,bB as A}from"./index-DVvzoHFo.js";import{r as c}from"./recharts-DVuIdjrD.js";import{b as E,c as M,G as U,a as N}from"./index-DBZ9A9RU.js";const $=[["Быстрый счет","quick math"],["Память","memory"],["Логика","logic"],["Фокус","focus"]],q=[["легкий","easy"],["средний","medium"],["тяжелый","hard"],["безумный","insane"],["бесконечный","endless"]],Y=[F,B,E,M],h=[L,R,U,N,T],H=(t,s)=>{const a=["cold","skipped","done","medium"];return o.get(a[s],t)},W=(t,s)=>{const a=["light","medium","heavy","hot","cold"];return o.get(a[s],t)},J=({theme:t,categoryIndex:s,setCategoryIndex:a,difficultyIndex:r,setDifficultyIndex:l})=>e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px",padding:"2px",backgroundColor:o.get("panel",t),borderRadius:"12px"},children:Y.map((d,n)=>e.jsx("span",{onClick:()=>{a(n),r>3&&l(3)},style:{padding:"2px 18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:s===n?H(t,n):o.get("subText",t),opacity:s===n?1:.7,transition:"all 0.2s ease"},"aria-label":$[n]?.[0]||"Category",children:e.jsx(d,{size:s===n?30:20})},n))}),K=({theme:t,categoryIndex:s,setCategoryIndex:a,difficultyIndex:r,setDifficultyIndex:l})=>{const d=s>0?h.slice(0,-1):h;return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"8px 0"},children:d.map((n,i)=>e.jsx("span",{onClick:()=>l(i),style:{padding:"2px 18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:r===i?W(t,i):o.get("subText",t),opacity:r===i?1:.8,transition:"all 0.2s ease"},"aria-label":q[i]?.[0]||"Difficulty",children:e.jsx(n,{size:r===i?30:20})},i))})},Z=()=>{const[t,s]=c.useState("dark"),[a,r]=c.useState(f.prefs[0]),[l,d]=c.useState(f.prefs[4]),[n,i]=c.useState(0),[x,y]=c.useState(0),[j,m]=c.useState(null),[C,v]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const u=await G.getMentalRecordsGlobal()||[{name:b?.name,data:f.mentalRecords}];m(u)}catch{m([{name:b?.name,data:f.mentalRecords}])}finally{v(!1)}})()},[]),c.useEffect(()=>{const p=w.subscribe(s),u=D.subscribe(S=>r(S==="ru"?0:1)),I=k.subscribe(d);return()=>{p.unsubscribe(),u.unsubscribe(),I.unsubscribe()}},[]),e.jsxs("div",{style:g(t).container,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[e.jsx(J,{theme:t,langIndex:a,fSize:l,categoryIndex:n,difficultyIndex:x,setCategoryIndex:i,setDifficultyIndex:y}),e.jsx(K,{categoryIndex:n,theme:t,langIndex:a,fSize:l,difficultyIndex:x,setDifficultyIndex:y})]}),e.jsx("div",{style:g(t).list,children:C?e.jsx("div",{children:a===0?"Загрузка...":"Loading..."}):j?.map((p,u)=>e.jsx(P,{theme:t,fSize:l,isUser:p.name===b.name,index:u,data:p,categoryIndex:n,difficultyIndex:x}))})]})},g=(t,s)=>({container:{backgroundColor:o.get("background",t),display:"flex",position:"absolute",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",top:"14vh",width:"100vw",fontFamily:"Segoe UI"},list:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"12px",width:"90%",overflowY:"scroll",height:"80%",borderBottom:"1px solid "+o.get("border",t),borderTop:"1px solid "+o.get("border",t)},listItem:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",height:"30px",borderBottom:"1px solid "+o.get("border",t)},text:{fontSize:s===0?"14px":"16px",color:o.get("mainText",t),marginRight:"15px"},avatar:{width:"25px",height:"25px",borderRadius:"50%",border:"1px solid "+o.get("border",t),overflow:"hidden"}}),O=(t,s)=>{const a=["barsColorWeight","difficultyAdd","hold"];return o.get(a[s],t)},P=({theme:t,fSize:s,isUser:a,index:r,data:l,categoryIndex:d,difficultyIndex:n})=>e.jsxs("div",{style:{...g(t).listItem,borderBottomColor:a?o.get("light",t):o.get("border",t)},children:[e.jsxs("div",{style:{...g(t).listItem,width:"40%",justifyContent:"start",borderBottom:"none"},children:[e.jsx("div",{style:g(t,s).text,children:r+1}),e.jsx("div",{style:{...g(t,s).text,marginLeft:"15px"},children:l.name}),r<3&&e.jsx(z,{size:20,color:O(t,r)}),a&&e.jsx(A,{size:15,color:o.get("light",t)})]}),e.jsx("div",{style:{...g(t,s).text,color:o.get("light",t)},children:l.data[d][n]})]});export{Z as default};
