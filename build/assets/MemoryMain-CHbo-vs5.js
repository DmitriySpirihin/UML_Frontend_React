import{A as k,t as Re,l as ze,f as ke,C as a,j as e,a as Te,m as T,b$ as Me,bM as Ke,c0 as Je,br as re,g as Qe,B as Xe,c1 as Ze,U as et,p as tt,bL as nt,F as st,bq as ot,E as rt,bO as it,bU as at}from"./index-Btfw6WMf.js";import{r as l}from"./recharts-Bg6K2Pzo.js";import{G as lt}from"./index-DloNIftu.js";import{m as j,s as ct}from"./MentalHelper-D31rMZFr.js";import{B as dt}from"./BreathAudio-BrJNN4AB.js";import{M as pt}from"./MentalInput-DS7xf5g_.js";function ut(t,r,s){if(t!==1)return["","",!1];const o=j[r]||j[0],{sequence:n}=bt(r,s),x=St(n),i=n.join(""),d=!!(o.reverseEnabled&&s>=11);return[x,i,d]}const Fe=["1","2","3","4","5","6","7","8","9","0"],xt=["‚Üê","‚Üë","‚Üí","‚Üì"],gt=[...xt,...Fe],mt=(t,r)=>(t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1))+t),ht=(t,r,s)=>Math.max(r,Math.min(s,t)),ft=(t,r,s)=>t+(r-t)*s;function yt(t,r){const s=Math.max(0,Math.min(3,t??0)),o=j[s],n=ht((r-1)/19,0,1),x=o.elementsRange[0],i=o.elementsRange[1],d=Math.round(ft(x,i,n)),y=o.charShowMs||600,I=o.retentionDelayMs||2e3;return{sequenceLength:d,charShowMs:y,retentionDelayMs:I,memorizeTimeMs:Math.max(1e3,(o.memorizeTimeSecRange?.[0]||5)*1e3)}}function bt(t,r){const{sequenceLength:s,charShowMs:o,retentionDelayMs:n}=yt(t,r),x=t===0?Fe:gt,i=[];for(let d=0;d<s;d++){let y;do y=x[mt(0,x.length-1)];while(d>0&&y===i[d-1]);i.push(y)}return{sequence:i,charShowMs:o,retentionDelayMs:n}}function St(t){return Array.isArray(t)?t.join(" "):""}const De=(t,r)=>{if(!t)return 1;const s=String(t),o=String(r||""),n=s.length;let x=0;for(let i=0;i<n;i++)o[i]===s[i]&&(x+=1);return 1-x/n};function jt(t,r,s,o,n,x,i){if(t!==1)return 0;const y=[140,200,260,330][r]||140,S=1-De(n,x),g=Math.min(1+s*.02,1.3),u=Math.min(o/6e3,2),w=S===1?Math.max(1.3-(u-1)*.3,1):1,M=i>=5&&S===1?Math.min(1+.1*Math.min(i/10,4),1.5):1;return Math.round(y*S*g*w*M)}function vt(t,r,s){return t!==1?!1:String(s||"")===String(r||"")}function wt(t,r,s){return t!==1?1:De(r,s)}const Ct=3e3,Tt=({show:t,type:r,difficulty:s,setShow:o})=>{const[n,x]=l.useState("dark"),[i,d]=l.useState(k.prefs[0]),[y,I]=l.useState(k.prefs[4]),[S,g]=l.useState(600),[u,w]=l.useState(2e3),[M,R]=l.useState(""),[b,m]=l.useState(""),[z,F]=l.useState(!1),[E,J]=l.useState(!1),[H,ie]=l.useState(!1),[$,Q]=l.useState("memorize"),[ae,Be]=l.useState(0),[D,q]=l.useState(!1),[Dt,le]=l.useState(!1),[We,ce]=l.useState(0),[de,pe]=l.useState(!1),[X,Ee]=l.useState(1),{initAudio:Pe,playRight:Ge,playWrong:Ae}=dt(k.prefs[2]===0),[Bt,ue]=l.useState(0),[B,xe]=l.useState(!1),[W,Y]=l.useState(0),[N,V]=l.useState(1),[ge,Z]=l.useState(0),[C,Le]=l.useState(""),[me,He]=l.useState(!1),[_,he]=l.useState(0),[fe,G]=l.useState(""),[ye,qe]=l.useState(""),[A,ee]=l.useState(0),[be,U]=l.useState(0),[L,Ye]=l.useState(k.mentalRecords[r]?.[s]||0),[Se,je]=l.useState(0),[ve,te]=l.useState(0);l.useEffect(()=>{if(!E||D||$!=="recall"){R("");return}M==="CC"?m(c=>c.length>0?c.slice(0,-1):""):M===">>>"?we():M.length===1&&m(c=>c.length<C.length?c+M:c),R("")},[M,E,D,$,C.length]),l.useEffect(()=>{!E||D||B||$!=="recall"||b.length===C.length&&we()},[b,C.length,$,E,D,B]),l.useEffect(()=>{let c=null;return z&&(c=setInterval(()=>je(h=>h+100),100)),()=>clearInterval(c)},[z]),l.useEffect(()=>{if($!=="memorize"||!C||C.length===0)return;const c=C.length,h=S,f=u;if(_<c){const v=setTimeout(()=>he(P=>P+1),h);return()=>clearTimeout(v)}else{const v=setTimeout(()=>{Q("recall"),Be(Date.now())},f);return()=>clearTimeout(v)}},[$,C,_,S,u]),l.useEffect(()=>{const c=Re.subscribe(x),h=ze.subscribe(v=>d(v==="ru"?0:1)),f=ke.subscribe(I);return()=>{c.unsubscribe(),h.unsubscribe(),f.unsubscribe()}},[]),l.useEffect(()=>{if(!H){te(0);return}const c=Math.ceil(Ct/1e3);te(c);const h=setInterval(()=>{te(f=>f<=1?(clearInterval(h),Ne(),ie(!1),0):f-1)},1e3);return()=>clearInterval(h)},[H]),l.useEffect(()=>{if(!B)return;const c=setInterval(()=>{ue(h=>{if(h>=900){clearInterval(c),xe(!1),ue(0);const f=W+A;return Y(f),ee(0),m(""),de?Ce(f):(V(X),ne(X)),0}return h+100})},100);return()=>clearInterval(c)},[B,W,A,de,X]);const Ne=()=>{Pe(),Y(0),V(1),U(0),Z(0),m(""),G(""),ne(1),J(!0),F(!0),le(!1),je(0),ce(Date.now())},ne=(c=N)=>{const[h,f,v]=ut(r,s,c);Le(f||""),He(v),he(0),Q("memorize"),g(j[s].charShowMs),w(j[s].retentionDelayMs),m(""),G(""),Ee(c+1),pe(!1)},we=()=>{if($!=="recall")return;const c=me?C.split("").reverse().join(""):C,h=ae>0?Date.now()-ae:0,f=jt(r,s,N,h,c,b,ge),v=wt(r,c,b);$t(v===0?"light":"medium");let P="";v===0?(P=Rt(i),U(se=>se+1)):v<.15?P=zt(i):P=(i===0?"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ":"Correct answer: ")+c;const Oe=v===0?a.get("maxValColor",n):v<.15?a.get("difficulty2",n):a.get("minValColor",n);qe(Oe),G(P),ee(f),Z(se=>vt(r,c,b)?se+1:0),v===0?Ge():Ae(),pe(N>=20),Q("feedback"),xe(!0)},Ve=()=>{Y(0),V(1),U(0),Z(0),m(""),G(""),ne(1),ce(Date.now()),J(!0),F(!0),le(!1),q(!1)},Ce=(c=W)=>{_e(c);const h=c>L,f=It(!1,i,c,be,20,h,!1);F(!1),G(f),q(!0),J(!1)},_e=c=>{c>L&&(Ye(c),k.mentalRecords[r][s]=c);const h=Date.now(),f=Math.round((h-We)/1e3);ct(f,c>L,r,s,c),Y(0),ee(0),V(1),U(0)},Ue={hidden:{y:"100%"},visible:{y:0,transition:{type:"spring",damping:25,stiffness:200}},exit:{y:"100%"}},O={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3}},exit:{opacity:0,scale:.95,transition:{duration:.2}}};return e.jsx(Te,{children:t&&e.jsx(T.div,{variants:Ue,initial:"hidden",animate:"visible",exit:"exit",style:p(n).container,children:e.jsxs(Te,{mode:"wait",children:[!E&&!H&&!D&&e.jsxs(T.div,{variants:O,initial:"hidden",animate:"visible",exit:"exit",style:p(n).contentWrapper,children:[e.jsxs("div",{style:p(n).header,children:[e.jsx(Me,{onClick:()=>{o(!1),q(!1)},style:p(n).iconButton}),e.jsx("h2",{style:p(n,y).title,children:j[s].level[i]}),e.jsx("div",{style:{width:40}})]}),e.jsxs("div",{style:p(n).card,children:[e.jsx("div",{style:{...p(n).title,textAlign:"center",fontSize:"16px",marginBottom:10},children:j[s].title[i]}),e.jsx("p",{style:p(n).description,children:j[s].description[i]}),e.jsxs("div",{style:p(n).statsGrid,children:[e.jsx(K,{theme:n,label:i===0?"–î–ª–∏–Ω–∞":"Length",value:`${j[s].elementsRange[0]}‚Äì${j[s].elementsRange[1]}`}),e.jsx(K,{theme:n,label:i===0?"–¢–∏–ø":"Mode",value:j[s].reverse?i===0?"–û–±—Ä–∞—Ç–Ω—ã–π":"Reverse":i===0?"–ü—Ä—è–º–æ–π":"Direct",highlight:j[s].reverse}),e.jsx(K,{theme:n,label:i===0?"–ü–æ–∫–∞–∑":"Flash Time",value:`${j[s].charShowMs}ms`}),e.jsx(K,{theme:n,label:i===0?"–ó–∞–¥–µ—Ä–∂–∫–∞":"Recall Delay",value:`${j[s].retentionDelayMs}ms`})]}),e.jsx("p",{style:p(n).disclaimer,children:Mt(i)})]}),e.jsx("div",{style:p(n).playButtonContainer,children:e.jsxs(T.button,{whileTap:{scale:.9},onClick:()=>ie(!0),style:p(n).playButton,children:[e.jsx(Ke,{style:{marginRight:10}})," ",i===0?"–ù–∞—á–∞—Ç—å":"Start"]})})]},"start-screen"),!D&&H&&e.jsxs(T.div,{variants:O,initial:"hidden",animate:"visible",exit:"exit",style:p(n).centeredFull,children:[e.jsx(T.div,{initial:{scale:.5,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:2,opacity:0},style:{fontSize:"8rem",fontWeight:"bold",color:a.get("icons",n)},children:ve},ve),e.jsx("p",{style:{color:a.get("subText",n),marginTop:20,fontSize:"1.5rem"},children:i===0?"–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å!":"Get ready!"})]},"countdown"),!D&&E&&e.jsxs(T.div,{variants:O,initial:"hidden",animate:"visible",exit:"exit",style:p(n).gameContainer,children:[e.jsxs("div",{style:p(n).gameHeader,children:[e.jsx(Me,{onClick:()=>Ce(W+A),style:p(n).iconButtonSmall}),e.jsxs("div",{style:p(n).gameStat,children:[e.jsx(Je,{style:{marginRight:6}})," ",Ie(Se)]}),e.jsxs("div",{style:{...p(n).gameStat,color:a.get("maxValColor",n)},children:[e.jsx(re,{style:{marginRight:6}})," ",W]})]}),e.jsxs("div",{style:p(n).subStatsBar,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:a.get("minValColor",n)},children:[e.jsx(Qe,{})," ",ge]}),e.jsx("div",{style:{color:a.get("difficulty",n),fontWeight:"bold"},children:`${N} / 20`})]}),e.jsxs("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(T.div,{style:{...p(n).problemCard,backgroundColor:B?ye||a.get("simplePanel",n):a.get("simplePanel",n),borderColor:B?ye:"transparent"},animate:B?{scale:[1,1.05,1]}:{scale:1},children:B?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#fff"},children:A>0?`+${A}`:i===0?"–û—à–∏–±–∫–∞":"Wrong"}),e.jsx("div",{style:{fontSize:"16px",color:"rgba(255,255,255,0.9)",marginTop:5},children:fe})]}):e.jsxs("div",{style:{fontSize:"48px",fontWeight:"bold",color:a.get("mainText",n),textAlign:"center"},children:[$==="memorize"&&(_<C.length?C[_]:"‚è≥"),$==="recall"&&e.jsx("span",{style:{fontSize:"24px",color:a.get("subText",n)},children:me?i===0?"–í–≤–æ–¥–∏ –∑–∞–¥–æ–º –Ω–∞–ø–µ—Ä–µ–¥":"Type Reverse":i===0?"–ü–æ–≤—Ç–æ—Ä–∏":"Repeat"})]})}),e.jsx("div",{style:p(n).inputDisplay,children:b||e.jsx("span",{style:{opacity:.1},children:"_"})}),e.jsx("div",{style:{flex:1,width:"100%"},children:$==="recall"&&e.jsx(pt,{setInput:R,type:r})})]})]},"game-screen"),D&&e.jsxs(T.div,{variants:O,initial:"hidden",animate:"visible",exit:"exit",style:p(n).contentWrapper,children:[e.jsxs("div",{style:p(n).header,children:[e.jsx("div",{}),e.jsx("h2",{style:p(n,y).title,children:i===0?"–†–µ–∑—É–ª—å—Ç–∞—Ç":"Result"}),e.jsx("div",{})]}),e.jsxs("div",{style:{...p(n).card,alignItems:"center",gap:20,paddingTop:30},children:[e.jsx(re,{size:60,color:a.get("maxValColor",n)}),e.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:a.get("mainText",n)},children:W}),e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:10},children:[e.jsx(oe,{theme:n,label:i===0?"–í—Ä–µ–º—è":"Time",value:Ie(Se)}),e.jsx(oe,{theme:n,label:i===0?"–ü—Ä–∞–≤–∏–ª—å–Ω–æ":"Correct",value:`${be} / 20`}),W>L?e.jsxs("div",{style:p(n).recordBox,children:[e.jsx(Xe,{color:"#FFD700"})," ",i===0?"–ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥!":"New Record!"]}):e.jsx(oe,{theme:n,label:i===0?"–õ—É—á—à–∏–π":"Best",value:L})]}),e.jsx("p",{style:{textAlign:"center",fontSize:"14px",color:a.get("subText",n),marginTop:10},children:fe})]}),e.jsxs("div",{style:p(n).controlsRow,children:[e.jsx(T.button,{whileTap:{scale:.9},onClick:Ve,style:p(n).secondaryButton,children:e.jsx(Ze,{size:20})}),e.jsx(T.button,{whileTap:{scale:.9},onClick:()=>{o(!1),q(!1)},style:p(n).primaryButton,children:i===0?"–ó–∞–≤–µ—Ä—à–∏—Ç—å":"Finish"})]})]},"result-screen")]})},"modal-container")})},K=({theme:t,label:r,value:s,highlight:o})=>e.jsxs("div",{style:{backgroundColor:a.get("background",t),padding:"10px",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",border:o?`1px solid ${a.get("maxValColor",t)}`:"none"},children:[e.jsx("span",{style:{fontSize:"12px",color:a.get("subText",t)},children:r}),e.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:o?a.get("maxValColor",t):a.get("mainText",t)},children:s})]}),oe=({theme:t,label:r,value:s})=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"5px 0",borderBottom:`1px solid ${a.get("border",t)}30`},children:[e.jsx("span",{style:{color:a.get("subText",t)},children:r}),e.jsx("span",{style:{color:a.get("mainText",t),fontWeight:"bold"},children:s})]}),p=(t,r=14)=>({container:{backgroundColor:a.get("background",t),position:"fixed",top:0,left:0,height:"100vh",width:"100vw",zIndex:2e3,display:"flex",flexDirection:"column",fontFamily:"Segoe UI"},contentWrapper:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",width:"100%",boxSizing:"border-box"},centeredFull:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},header:{width:"90%",marginTop:"65px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},title:{fontSize:"20px",fontWeight:"bold",color:a.get("mainText",t),margin:0},card:{width:"100%",maxWidth:"400px",backgroundColor:a.get("simplePanel",t)+"80",backdropFilter:"blur(10px)",borderRadius:"24px",padding:"20px",boxSizing:"border-box",display:"flex",flexDirection:"column",border:`1px solid ${a.get("border",t)}40`},description:{fontSize:"15px",color:a.get("subText",t),textAlign:"center",marginBottom:"20px",lineHeight:1.4},statsGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",width:"100%",marginBottom:"20px"},disclaimer:{fontSize:"12px",color:a.get("subText",t),textAlign:"center",opacity:.7,marginTop:10},iconButton:{fontSize:"32px",color:a.get("skipped",t),cursor:"pointer"},iconButtonSmall:{fontSize:"28px",color:a.get("skipped",t),cursor:"pointer"},playButtonContainer:{marginTop:"auto",width:"100%",display:"flex",justifyContent:"center",paddingBottom:"40px"},playButton:{backgroundColor:a.get("barsColorMeasures",t),color:"#fff",border:"none",borderRadius:"16px",padding:"16px 40px",fontSize:"18px",fontWeight:"bold",display:"flex",alignItems:"center",cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},gameContainer:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},gameHeader:{width:"90%",marginTop:"75px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 0"},gameStat:{display:"flex",alignItems:"center",fontSize:"18px",fontWeight:"bold",color:a.get("mainText",t)},subStatsBar:{width:"90%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},problemCard:{width:"90%",height:"160px",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",marginBottom:"20px",marginTop:"20px",border:"2px solid transparent",padding:"10px"},inputDisplay:{fontSize:"38px",fontWeight:"bold",color:a.get("mainText",t),height:"50px",marginBottom:"20px",fontFamily:"monospace",letterSpacing:"4px",textAlign:"center"},recordBox:{backgroundColor:"rgba(255, 215, 0, 0.15)",color:"#FFD700",padding:"10px",borderRadius:"12px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontWeight:"bold",fontSize:"14px"},controlsRow:{display:"flex",gap:"20px",marginTop:"auto",marginBottom:"40px"},primaryButton:{backgroundColor:a.get("difficulty5",t),color:a.get("mainText",t),border:"none",borderRadius:"16px",padding:"14px 30px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},secondaryButton:{backgroundColor:a.get("background",t),color:a.get("subText",t),border:`1px solid ${a.get("border",t)}`,borderRadius:"16px",padding:"14px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}}),Mt=t=>t===0?"–û—Ç–≤–µ—á–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º—É–º –æ—á–∫–æ–≤. –ö–∞–∂–¥–∞—è –æ—à–∏–±–∫–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –º–Ω–æ–∂–∏—Ç–µ–ª—å –ø–æ–¥—Ä—è–¥ –∏–¥—É—â–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤. –ó–∞ –∫–∞–∂–¥—ã–µ 5 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥ –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ä–∞—Å—Ç—ë—Ç (–º–∞–∫—Å. √ó1.5). –ù–∞ —Å–ª–æ–∂–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω—É–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ ‚Äî —Ç—Ä–µ–Ω–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—á—É—é –ø–∞–º—è—Ç—å!":"Answer correctly and quickly to maximize your score. Every mistake resets your streak multiplier. For every 5 correct answers in a row, the multiplier increases (up to √ó1.5). On harder levels, repeat the sequence in reverse ‚Äî train your working memory under pressure!",It=(t,r,s,o,n,x,i=!1)=>{const d=Math.round(o/n*100),y=d>=80,I=d>=50&&!y,S={ru:{high:[`üéâ –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! ${o}/${n} (${d}%) ‚Äî –º–æ–ª–æ–¥–µ—Ü!`,`‚ú® –ü–æ—Ç—Ä—è—Å–∞—é—â–µ! –¢—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è –Ω–∞ ${d}%.`,`üî• –¢—ã –Ω–∞–±—Ä–∞–ª(–∞) ${s} –æ—á–∫–æ–≤ ‚Äî —ç—Ç–æ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç!`,`üöÄ –í–∞—É! ${o}/${n} ‚Äî —Ç—ã –≤ —É–¥–∞—Ä–µ!`,`üíØ –ò–¥–µ–∞–ª—å–Ω–æ! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! (${d}%)`],moderate:[`üôÇ –•–æ—Ä–æ—à–∞—è –ø–æ–ø—ã—Ç–∫–∞! ${o}/${n} (${d}%).`,"üå± –¢—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ.",`üìà –ù–∞–±—Ä–∞–Ω–æ ${s} –æ—á–∫–æ–≤. –£–∂–µ –ª—É—á—à–µ!`,`üëç –ü–æ–ª–æ–≤–∏–Ω–∞ –∏ –±–æ–ª—å—à–µ ‚Äî —ç—Ç–æ –ø—Ä–æ–≥—Ä–µ—Å—Å! (${d}%)`,"üí™ –ù–µ–ø–ª–æ—Ö–æ! –° –∫–∞–∂–¥—ã–º —Ä–∞–∑–æ–º –±—É–¥–µ—Ç –ª—É—á—à–µ."],low:["ü§ó –¢—ã —Å—Ç–∞—Ä–∞–ª—Å—è(–ª–∞—Å—å) ‚Äî —ç—Ç–æ –≥–ª–∞–≤–Ω–æ–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!","üå± –ù–µ —Å–¥–∞–≤–∞–π—Å—è! –ö–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ ‚Äî —à–∞–≥ –≤–ø–µ—Ä—ë–¥.","üå§Ô∏è –°–µ–≥–æ–¥–Ω—è –Ω–µ —Ç–≤–æ–π –¥–µ–Ω—å, –Ω–æ –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç –ª—É—á—à–µ!",`üéØ –¢—ã –Ω–∞–±—Ä–∞–ª(–∞) ${s} –æ—á–∫–æ–≤. –ü—Ä–æ–¥–æ–ª–∂–∞–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è!`,`üå± –î–∞–∂–µ ${o} –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª–æ!`],record:[`üèÜüî• –ù–û–í–´–ô –†–ï–ö–û–†–î! ${s} –æ—á–∫–æ–≤ ‚Äî –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!`,`üéâ‚ú® –¢—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª(–∞) –ª–∏—á–Ω—ã–π —Ä–µ–∫–æ—Ä–¥: ${o}/${n} (${d}%)!`,"üåüüí• –î–∞–∂–µ –µ—Å–ª–∏ –±—ã–ª–æ —Ç—Ä—É–¥–Ω–æ ‚Äî —Ç—ã –ø–æ–±–∏–ª(–∞) —Ä–µ–∫–æ—Ä–¥! –ú–æ–ª–æ–¥–µ—Ü!"],relax_any:["üßò‚Äç‚ôÄÔ∏è –û—Ç–ª–∏—á–Ω–æ –ø–æ—Ä–∞–±–æ—Ç–∞–ª(–∞) –≤ —Å–ø–æ–∫–æ–π–Ω–æ–º —Ä–µ–∂–∏–º–µ!",`üåº –¢—ã —Ä–µ—à–∏–ª(–∞) ${n} –∑–∞–¥–∞—á ‚Äî –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞!`,"‚ú® –°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ –≤–Ω–∏–º–∞–Ω–∏–µ ‚Äî –∑–∞–ª–æ–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞. –ú–æ–ª–æ–¥–µ—Ü!",`üå± ${o} –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî —Ä–æ—Å—Ç –Ω–∞–ª–∏—Ü–æ!`,"üå§Ô∏è –•–æ—Ä–æ—à–∏–π —Ç–µ–º–ø, –±–µ–∑ —Å–ø–µ—à–∫–∏. –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!"],relax_record:["üåü –ù–æ–≤—ã–π –ª–∏—á–Ω—ã–π –º–∞–∫—Å–∏–º—É–º ‚Äî –¥–∞–∂–µ –≤ —Å–ø–æ–∫–æ–π–Ω–æ–º —Ä–µ–∂–∏–º–µ!",`üßò‚Äç‚ôÇÔ∏èüèÜ –¢—ã –Ω–∞–±—Ä–∞–ª(–∞) ${s} –æ—á–∫–æ–≤ –≤ Relax-—Ä–µ–∂–∏–º–µ ‚Äî –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!`,"üí´ –î–∞–∂–µ –±–µ–∑ —Ç–∞–π–º–µ—Ä–∞ ‚Äî —Ç—ã —É–ª—É—á—à–∏–ª(–∞) —Å–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –†–µ—Å–ø–µ–∫—Ç!"]},en:{high:[`üéâ Awesome! ${o}/${n} (${d}%) ‚Äî well done!`,`‚ú® Outstanding! You scored ${d}%.`,`üî• You got ${s} points ‚Äî impressive!`,`üöÄ Wow! ${o}/${n} ‚Äî you‚Äôre on fire!`,`üíØ Perfect! Keep it up! (${d}%)`],moderate:[`üôÇ Good effort! ${o}/${n} (${d}%).`,"üå± You're making progress! Keep going.",`üìà You scored ${s} points. Getting better!`,`üëç More than half right ‚Äî that‚Äôs growth! (${d}%)`,"üí™ Nice try! You‚Äôll do even better next time."],low:["ü§ó You gave it your best ‚Äî that matters most. Try again!","üå± Don‚Äôt give up! Every attempt brings you closer.","üå§Ô∏è Not your best round, but tomorrow‚Äôs a new chance!",`üéØ You earned ${s} points. Keep practicing!`,`üå± Even ${o} correct answers is a start!`],record:[`üèÜüî• NEW RECORD! ${s} points ‚Äî congratulations!`,`üéâ‚ú® You set a personal best: ${o}/${n} (${d}%)!`,"üåüüí• Even on a tough day ‚Äî you broke your record! Amazing!"],relax_any:["üßò‚Äç‚ôÄÔ∏è Great job practicing in Relax Mode!",`üåº You solved ${n} problems ‚Äî wonderful focus!`,"‚ú® Calm and steady wins the race. Well done!",`üå± ${o} correct answers ‚Äî you're growing!`,"üå§Ô∏è A peaceful pace, great accuracy. Keep it up!"],relax_record:["üåü New personal best ‚Äî even in Relax Mode!",`üßò‚Äç‚ôÇÔ∏èüèÜ You scored ${s} points in Relax Mode ‚Äî congrats!`,"üí´ No timer, no stress ‚Äî and still a new record! Amazing!"]}},g=r===0?S.ru:S.en;let u=[];if(i?x?u=[...g.relax_record]:u=[...g.relax_any]:x?u=[...g.record]:y?u=[...g.high]:I?u=[...g.moderate]:u=[...g.low],u.length===0)return r===0?"–•–æ—Ä–æ—à–æ! üòä":"Good job! üòä";const w=Math.floor(Math.random()*u.length);return u[w]};function $t(t){k.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred(t)}function Rt(t){const o=t===0?["–û—Ç–ª–∏—á–Ω–æ!","–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ!","–í–µ—Ä–Ω–æ!","–¢–æ—á–Ω–æ!","–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ!","–ò–¥–µ–∞–ª—å–Ω–æ!","–ü—Ä–∞–≤–∏–ª—å–Ω–æ!","–ú–æ–ª–æ–¥–µ—Ü!","–¢–æ—á–Ω–æ –≤ —Ü–µ–ª—å!","–ë–µ–∑ –æ—à–∏–±–æ–∫!"]:["Great!","Perfect!","Yes!","Exactly!","Awesome!","Brilliant!","Spot on!","Well done!","Nailed it!","Correct!"];return o[Math.floor(Math.random()*o.length)]}function zt(t){const o=t===0?["–†—è–¥–æ–º!","–ü–æ—á—Ç–∏!","–ï—â–µ —á—É—Ç—å-—á—É—Ç—å!","–ü—Ä–æ–¥–æ–ª–∂–∞–π!","–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ!","–û—á–µ–Ω—å –±–ª–∏–∑–∫–æ!","–•–æ—Ä–æ—à–∞—è –ø–æ–ø—ã—Ç–∫–∞!","–ù–µ —Å–æ–≤—Å–µ–º‚Ä¶","–ü–æ—á—Ç–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å!","–¢—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏!"]:["Close!","Almost!","Nearly!","Keep going!","Try again!","So close!","Good attempt!","Not quite!","One more try!","You're getting there!"];return o[Math.floor(Math.random()*o.length)]}function Ie(t){const r=Math.floor(t/1e3),s=Math.floor(r/60),o=r%60;return`${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`}const Ht=()=>{const[t,r]=l.useState("dark"),[s,o]=l.useState(k.prefs[0]),[n,x]=l.useState(k.prefs[4]),[i,d]=l.useState(!1),[y,I]=l.useState(0),[S,g]=l.useState(et.hasPremium);l.useEffect(()=>{const b=tt.subscribe(g);return()=>b.unsubscribe()},[]),l.useEffect(()=>{const b=Re.subscribe(r),m=ze.subscribe(F=>o(F==="ru"?0:1)),z=ke.subscribe(x);return()=>{b.unsubscribe(),m.unsubscribe(),z.unsubscribe()}},[]);const u=b=>k.mentalRecords?.[1]?.[b]||0,w={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},M={hidden:{opacity:0,y:10,scale:.98},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:25}}},R={emoji:"üß†",ru:"–ü–∞–º—è—Ç—å",en:"Memory"};return e.jsxs("div",{style:$e(t).container,children:[e.jsxs("div",{style:$e(t).scrollView,children:[e.jsx("div",{style:{height:"3vh"}}),e.jsxs("div",{style:{width:"92%",marginBottom:"20px",display:"flex",flexDirection:"column",gap:"5px",marginTop:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"28px"},children:R.emoji}),e.jsx("h1",{style:{margin:0,color:a.get("mainText",t),fontSize:"26px",fontFamily:"Segoe UI",fontWeight:"800"},children:s===0?R.ru:R.en})]}),e.jsx("span",{style:{fontSize:"14px",color:a.get("subText",t),opacity:.7,marginLeft:"4px"},children:s===0?"–ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏":"Sequence memorization"})]}),e.jsx(T.div,{variants:w,initial:"hidden",animate:"show",style:{width:"94%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",paddingBottom:"30px"},children:j.map((b,m)=>{const z=m>1&&!S,F=m===4;return e.jsx("div",{style:F?{gridColumn:"1 / -1",width:"100%"}:{},children:e.jsx(Ft,{variants:M,index:m,difficulty:m,protocol:b,theme:t,lang:s,fSize:n,needBlur:z,hasPremium:S,record:u(m),isFullWidth:F,onClick:()=>{z||(I(m),d(!0))}})},m)})}),e.jsx("div",{style:{height:"10vh",width:"100%"}})," "]}),i&&e.jsx(Tt,{type:1,difficulty:y,show:i,setShow:d})]})},kt=t=>{switch(t){case 0:return{accent:"#4DFF88",bgGlow:"radial-gradient(circle at 100% 0%, rgba(77, 255, 136, 0.15) 0%, transparent 50%)",icon:e.jsx(at,{})};case 1:return{accent:"#00E5FF",bgGlow:"radial-gradient(circle at 100% 0%, rgba(0, 229, 255, 0.15) 0%, transparent 50%)",icon:e.jsx(it,{})};case 2:return{accent:"#A64DFF",bgGlow:"radial-gradient(circle at 100% 0%, rgba(166, 77, 255, 0.15) 0%, transparent 50%)",icon:e.jsx(rt,{})};case 3:return{accent:"#FFD700",bgGlow:"radial-gradient(circle at 100% 0%, rgba(255, 215, 0, 0.15) 0%, transparent 50%)",icon:e.jsx(lt,{})};case 4:return{accent:"#FF4D4D",bgGlow:"radial-gradient(circle at 100% 0%, rgba(255, 77, 77, 0.15) 0%, transparent 50%)",icon:e.jsx(ot,{})};default:return{accent:"#8E8E93",bgGlow:"none",icon:e.jsx(re,{})}}};function Ft({protocol:t,difficulty:r,onClick:s,theme:o,lang:n,fSize:x,variants:i,needBlur:d,hasPremium:y,record:I,isFullWidth:S}){const g=o==="dark",u=d,{accent:w,bgGlow:M,icon:R}=kt(r),b={position:"relative",width:"100%",height:S?"120px":"185px",display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"22px",overflow:"hidden",cursor:u?"default":"pointer",backgroundColor:a.get("simplePanel",o),boxShadow:g?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 15px rgba(0,0,0,0.05)",border:g?"1px solid rgba(255,255,255,0.05)":"1px solid rgba(0,0,0,0.02)",padding:"16px",boxSizing:"border-box"},m={width:"36px",height:"36px",borderRadius:"12px",backgroundColor:g?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)",display:"flex",alignItems:"center",justifyContent:"center",color:w,fontSize:"16px"};return e.jsxs(T.div,{variants:i,whileTap:u?{}:{scale:.96},whileHover:u?{}:{y:-2},onClick:s,style:b,children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,background:M,pointerEvents:"none"}}),u&&e.jsxs("div",{onClick:z=>{z.stopPropagation()},style:{position:"absolute",inset:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:g?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.6)",backdropFilter:"blur(8px)"},children:[e.jsx(nt,{size:18,color:w,style:{marginBottom:"8px"}}),e.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:a.get("mainText",o),marginBottom:"8px"},children:"PREMIUM"})]}),e.jsxs("div",{style:{zIndex:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsx("div",{style:m,children:R}),e.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:w,textTransform:"uppercase",letterSpacing:"0.5px",marginTop:"4px"},children:t.level[n]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("div",{style:{fontSize:S?"17px":x===0?"16px":"18px",fontWeight:"700",color:a.get("mainText",o),lineHeight:"1.2"},children:t.title[n]}),e.jsx("div",{style:{fontSize:"12px",color:a.get("subText",o),opacity:.8,lineHeight:"1.3"},children:t.difficulty?t.difficulty[n]:n===0?"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–∞–º—è—Ç–∏":"Memory training"})]})]}),!u&&e.jsxs("div",{style:{zIndex:2,marginTop:"auto",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:g?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",padding:"4px 10px",borderRadius:"8px"},children:[e.jsx(st,{size:10,color:w}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:a.get("mainText",o),opacity:.9},children:I})]}),e.jsx("span",{style:{fontSize:"10px",color:a.get("subText",o),opacity:.5},children:n===0?"—Ä–µ–∫–æ—Ä–¥":"best"})]})]})}const $e=t=>({container:{backgroundColor:a.get("background",t),display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center",height:"90vh",marginTop:"110px",width:"100vw",fontFamily:"Segoe UI, sans-serif",overflow:"hidden"},scrollView:{height:"100%",width:"100%",overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"}});export{Ht as default};
