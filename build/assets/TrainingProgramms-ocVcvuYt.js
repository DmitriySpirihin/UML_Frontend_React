import{r,A as w,t as ke,l as De,J as ze,f as Ie,j as e,C as d,az as Pe,S as oe,g as ae,_ as U,aA as Ae,aB as Le,aC as re,aD as Re,i as O,k as I,aE as Te,aF as Ee,O as Me,aG as $e,aH as Fe,aI as Be,aJ as Ne,aK as Ge,aL as He,aM as Ue}from"./index-Cdh1cmL_.js";import{b as S,c as b}from"./index-D9AlMsa3.js";import{T as le,a as ce,M as J}from"./MyInput-B-mkr9Sn.js";import Oe from"./TrainingExercise-M5Lfuf8B.js";const Ve=()=>{const[i,P]=r.useState(w.programs),g=()=>{P(w.programs)},[t,de]=r.useState("dark"),[l,xe]=r.useState(w.prefs[0]),[f,fe]=r.useState(w.prefs[1]),[pe,A]=r.useState(!1),[u,q]=r.useState(!1),[c,K]=r.useState(-1),[x,v]=r.useState(-1),[L,R]=r.useState(""),[T,E]=r.useState(""),[V,Y]=r.useState(3),[h,_]=r.useState(4),[M,$]=r.useState(6),[y,F]=r.useState(0),[Q,X]=r.useState(1),[B,k]=r.useState(l===0?"День 1":"Day 1"),[ue,D]=r.useState(!1),[ge,Z]=r.useState(!1),[ye,N]=r.useState(!1),[me,ee]=r.useState(!1),[he,je]=r.useState(""),[te,ne]=r.useState(0);r.useEffect(()=>{h>M-2&&$(n=>n+1)},[h]),r.useEffect(()=>{const n=ke.subscribe(de),a=De.subscribe(o=>{xe(o==="ru"?0:1)});return()=>{a.unsubscribe(),n.unsubscribe()}},[]),r.useEffect(()=>{const n=ze.subscribe(o=>A(o==="AddProgrammPanel")),a=Ie.subscribe(fe);return()=>{n.unsubscribe(),a.unsubscribe()}},[]),r.useEffect(()=>{if(c===-1)return;const a=i[c].schedule.length;X(a),k(l===0?`День ${a+1}`:`Day ${a+1}`)},[c,l]);function j(){g(),q(!1),D(!1),N(!1),Me("")}function Ce(){Be(W(L),W(T)),R(""),E(""),j()}function we(){Ne(c,W(B)),X(n=>n+1),k(l===0?"День "+(Q+2):"Day "+(Q+2)),j()}function Se(){Ge(c,x,y,V+"x"+h+"-"+M),ee(!1),g()}function G(n){ne(n);let a="";switch(n){case 0:const o=i[c].name,p=Array.isArray(o)?o[l]:o;a=l===0?"Вы уверены, что хотите удалить программу : "+p+" ?":"Are you sure you want to delete the program : "+p+" ?";break;case 1:const C=i[c]?.schedule[x]?.name;a=l===0?"Вы уверены, что хотите удалить тренировочный день : "+C[l]+" ?":"Are you sure you want to delete the training day : "+C[l]+" ?";break;case 2:const H=i[c].schedule[x]?.exercises[y]?.exId;Te(c,x,H),g();break}je(a),N(n<2)}function be(){switch(te){case 0:Ue(c),K(-1);break;case 1:He(c,x),v(n=>n-1);break}j()}function se(n){switch(q(!0),ne(n),n){case 0:const a=Array.isArray(i[c].name);R(a?i[c].name[l]:i[c].name),E(a?i[c].description[l]:i[c].description),A(!0);break;case 1:const o=i[c].schedule[x].name,p=Array.isArray(o)?o[l]:o;k(p),D(!0);break}}function ie(){switch(te){case 0:Fe(c,L,T);break;case 1:$e(c,x,B);break}j()}function z(n,a){if(Ee(c,n,a,x,y),n===0){let o=x;a===1?o=x-1:a===0&&(o=x+1),o>=0&&v(o)}else{let o=y;a===1?o=y-1:a===0&&(o=y+1),o>=0&&F(o)}g()}function ve(n){F(n),Z(!1),ee(!0)}return e.jsxs("div",{style:s(t).container,children:[Object.entries(i).map(([n,a])=>({id:Number(n),...a})).filter(n=>n.show).sort((n,a)=>n.id-a.id).map(n=>e.jsxs("div",{style:s(t).panel,children:[e.jsxs("div",{style:s(t,c===n.id,!1).groupPanel,onClick:()=>{K(a=>a===n.id?-1:n.id),v(-1)},children:[c===n.id?e.jsx(S,{style:s(t).icon}):e.jsx(b,{style:s(t).icon}),e.jsx(Pe,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"16px"}}),e.jsx("p",{style:s(t,!1,!1,f).text,children:Array.isArray(n.name)?n.name[l]:n.name}),e.jsx("p",{style:{...s(t,!1,!1,f).subtext,marginRight:"5px",marginLeft:"auto"},children:n.creationDate})]}),c===n.id&&e.jsxs("div",{style:{...s(t).panel},children:[e.jsx("div",{style:{...s(t,!1,!1,f).subtext,marginRight:"15px",marginLeft:"15px"},children:x===-1&&(Array.isArray(n.description)?n.description[l]:n.description)}),e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center"},children:x===-1&&e.jsxs("div",{style:{...s(t,!1,!1,f).dayPanel,width:"98%",justifyContent:"space-around",flexDirection:"row"},children:[e.jsx(oe,{onClick:()=>D(!0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(ae,{onClick:()=>se(0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(U,{onClick:()=>G(0),style:{...s(t).icon,fontSize:"14px"}})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:n.schedule.map((a,o)=>e.jsxs("div",{children:[e.jsxs("div",{style:{...s(t,!1,x===o).dayPanel,width:"98%",flexDirection:"row"},onClick:()=>v(p=>p===o?-1:o),children:[x===o?e.jsx(S,{style:{...s(t).icon,marginLeft:"2%",width:"10px",marginTop:"7px"}}):e.jsx(b,{style:{...s(t).icon,marginLeft:"2%",width:"10px",marginTop:"7px"}}),e.jsx(Ae,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:s(t,!1,!1,f).text,children:l===0?`${o+1}-день : ${a.name[0]}`:`${o+1}-day : ${a.name[1]}`}),x===o&&e.jsxs("div",{onClick:p=>p.stopPropagation(),style:{display:"flex",flexDirection:"row",justifyContent:"center",marginLeft:"auto"},children:[e.jsx(Le,{onClick:()=>Z(!0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(le,{onClick:()=>z(0,0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(ce,{onClick:()=>z(0,1),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(ae,{onClick:()=>se(1),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(U,{onClick:()=>G(1),style:{...s(t).icon,fontSize:"14px",marginRight:"8px"}})]})]}),x===o&&e.jsx("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:a.exercises.map((p,m)=>{const C=w.exercises[p.exId];return C?e.jsxs("div",{onClick:()=>F(m),style:{display:"flex",flexDirection:"row",width:"95%",marginLeft:"6px",marginRight:"5%",justifyContent:"flex-start",alignItems:"center"},children:[e.jsxs("p",{style:s(t,!1,!1,f).text,children:[m+1,"."]}),e.jsx(re,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:s(t,!1,!1,f).text,children:C.name[l]}),e.jsx("p",{style:{...s(t,!1,!1,f).subtext,marginLeft:"auto"},children:p.sets}),y===m&&e.jsxs("div",{onClick:H=>H.stopPropagation(),style:{display:"flex",flexDirection:"row",justifyContent:"center",marginLeft:"auto"},children:[e.jsx(le,{onClick:()=>z(1,0),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(ce,{onClick:()=>z(1,1),style:{...s(t).icon,fontSize:"14px"}}),e.jsx(U,{onClick:()=>G(2),style:{...s(t).icon,fontSize:"14px",marginRight:"8px"}})]})]},m):e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"95%",marginLeft:"6px",marginRight:"5%",justifyContent:"flex-start",alignItems:"center"},children:[e.jsxs("p",{style:s(t,!1,!1,f).text,children:[m+1,"."]}),e.jsx(re,{style:{...s(t).icon,marginRight:"5px",marginLeft:"5px",fontSize:"14px"}}),e.jsx("p",{style:{...s(t,!1,!1,f).text,color:"#ff6b6b"},children:l===0?"Упражнение удалено":"Exercise deleted"})]},m)})})]},o))}),e.jsx(Re,{programmId:n.id,theme:t,langIndex:l,programs:i})]})]},n.id)),c===-1&&e.jsx("div",{onClick:()=>A(!0),style:{...s(t).groupPanel,height:"5%",justifyContent:"center"},children:e.jsx(oe,{style:{...s(t).icon,fontSize:"24px"}})}),pe&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{...s(t).additionalPanel,height:"40%"},children:[e.jsx("p",{style:s(t,!1,!1,f).text,children:l===0?u?"Редактировать программу":"Новая программа":u?"Redact programm":"New programm"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:d.get("background",t),height:"82%",width:"100%",alignItems:"center"},children:[e.jsx(J,{maxL:30,w:"80%",h:"18%",value:u?L:"",theme:t,onChange:n=>R(n),placeHolder:l===0?"Название программы":"Programm name"}),e.jsx(J,{maxL:100,w:"80%",h:"44%",value:u?T:"",theme:t,onChange:n=>E(n),placeHolder:l===0?"Описание программы":"Programm description"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(O,{onClick:()=>j(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(I,{onClick:()=>{u?ie():Ce()},style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),ue&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{...s(t).additionalPanel,height:"40%"},children:[e.jsx("p",{style:s(t,!1,!1,f).text,children:l===0?u?"Редактировать тренировочный день":"Добавь тренировочный день":u?"Redact training day":"Add training day"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",backgroundColor:d.get("background",t),height:"80%",width:"100%",alignItems:"center"},children:e.jsx(J,{maxL:30,w:"90%",h:"40%",theme:t,value:B,onChange:n=>k(n),placeHolder:l===0?"День":"Day"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(O,{onClick:()=>D(!1),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(I,{onClick:()=>{u?ie():we()},style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),ge&&e.jsx("div",{style:{...s(t).addContainer},children:e.jsx(Oe,{needToAdd:!0,setEx:ve})}),me&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{position:"fixed",top:"30vh",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"80vw",height:"80vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${d.get("border",t)}`,backgroundColor:d.get("background",t),zIndex:"7000"},children:[e.jsx("p",{style:{...s(t,!1,!1,f).text,padding:"20px",marginLeft:"10%",marginRight:"5%"},children:l===0?"Установите стратегию выполнения":"Set performing strategy"}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",height:"50%",width:"60%",justifyContent:"space-around"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(S,{onClick:()=>Y(n=>n+1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...s(t).text,fontSize:"24px"},children:V}),e.jsx(b,{onClick:()=>Y(n=>n-1>0?n-1:1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}})]}),e.jsx("p",{style:{...s(t).text,fontSize:"24px",marginTop:"30%"},children:"x"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(S,{onClick:()=>_(n=>n+1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...s(t).text,fontSize:"24px"},children:h}),e.jsx(b,{onClick:()=>_(n=>n-1>0?n-1:1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}})]}),e.jsx("p",{style:{...s(t).text,fontSize:"24px",marginTop:"30%"},children:"-"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(S,{onClick:()=>$(n=>n+1),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}}),e.jsx("div",{style:{...s(t).text,fontSize:"24px"},children:M}),e.jsx(b,{onClick:()=>$(n=>n-1>h+2?n-1:h+2),style:{...s(t).icon,marginLeft:"1px",fontSize:"24px"}})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"center"},children:e.jsx(I,{onClick:()=>Se(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})})]})}),ye&&e.jsx("div",{style:s(t).addContainer,children:e.jsxs("div",{style:{position:"fixed",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85vw",height:"40vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${d.get("border",t)}`,backgroundColor:d.get("background",t),zIndex:"7000"},children:[e.jsx("p",{style:{...s(t,!1,!1,f).text,textAlign:"center",padding:"20px",marginLeft:"10%",marginRight:"5%"},children:he}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[e.jsx(O,{onClick:()=>N(!1),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}}),e.jsx(I,{onClick:()=>be(),style:{...s(t).icon,fontSize:"32px",marginBottom:"8px"}})]})]})})]})},s=(i,P,g,t)=>({container:{backgroundColor:d.get("background",i),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI"},groupPanel:{display:"flex",flexDirection:"row",width:"100%",height:"6vh",backgroundColor:P?d.get("trainingGroupSelected",i):d.get("trainingGroup",i),borderTop:`1px solid ${d.get("border",i)}`,alignItems:"center",justifyContent:"left",alignContent:"center"},dayPanel:{display:"flex",flexDirection:"column",width:"100vW",height:"4vh",backgroundColor:g?d.get("trainingGroupSelected",i):d.get("background",i),borderBottom:`1px solid ${d.get("border",i)}`,alignItems:"center",justifyContent:"left"},panel:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyItems:"center"},text:{textAlign:"left",fontSize:t===0?"13px":"15px",color:d.get("mainText",i),marginBottom:"12px"},subtext:{textAlign:"left",fontSize:t===0?"11px":"13px",color:d.get("subText",i),marginBottom:"12px"},icon:{fontSize:"20px",color:d.get("icons",i),marginLeft:"20px"},addContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"10px"},additionalPanel:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",borderRadius:"24px",border:`1px solid ${d.get("border",i)}`,backgroundColor:d.get("simplePanel",i),boxShadow:`4px 4px 6px ${d.get("shadow",i)}`,width:"100%",height:"100vw"},exercisePanel:{display:"flex",flexDirection:"column",width:"90vW",height:"5vh",backgroundColor:g?d.get("trainingGroupSelected",i):d.get("background",i),alignItems:"center",justifyContent:"left"}}),W=i=>i&&i.charAt(0).toUpperCase()+i.slice(1);export{Ve as default};
