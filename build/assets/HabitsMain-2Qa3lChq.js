import{R as te,G as Ie,c as je,j as t,r as d,A as g,t as $e,f as Fe,l as xe,C as s,i as ge,k as ue,T as Ne,V as Oe,a as he,Y as le,n as Be,Z as Ye,m as Ve,M as Ue,g as be,_ as me,S as We,$ as Xe,a0 as qe,a1 as Ke}from"./index-DrfZRza2.js";import{M as ce,T as Ze,a as Je,b as Qe}from"./MyInput-MGxqXzw6.js";import{u as et,a as tt,b as de}from"./index-DxhPgiIw.js";import{S as ot}from"./Slider-DM7S3vqA.js";class W{static ic={default:"üôÇ",star:"‚≠ê",clock:"‚è∞",calendar:"üìÖ",search:"üîç",settings:"‚öôÔ∏è",tools:"üõ†Ô∏è",gift:"üéÅ",shopping:"üõçÔ∏è",store:"üè™",box:"üì¶",boxes:"üóÉÔ∏è",package:"üì¶",transport:"üöö",travel:"‚úàÔ∏è",bike:"üö≤",car:"üöó",bus:"üöå",train:"üöÜ",subway:"üöá",ship:"üö¢",taxi:"üöï",motorcycle:"üèçÔ∏è",hiking:"ü•æ",swimming:"üèä",mountain:"‚õ∞Ô∏è",beach:"üèñÔ∏è",puzzle:"üß©",game:"üéÆ",camera:"üì∑",video:"üé•",palette:"üé®",design:"üñåÔ∏è",music:"üéµ",guitar:"üé∏",language:"üåê",graduation:"üéì",code:"üíª",mobile:"üì±",laptop:"üíª",book:"üìö",bookOpen:"üìñ",users:"üë•",friends:"üë´",share:"üì§",phone:"üìû",comment:"üí¨",heart:"‚ù§Ô∏è",money:"üí∞",savings:"ü™ô",chart:"üìà",pieChart:"üìä",shoppingCart:"üõí",basket:"üß∫",clean:"üßπ",clothes:"üëï",utensils:"üç¥",spoon:"ü•Ñ",seedling:"üå±",helping:"ü§ù",wine:"üç∑",health:"üí™",heart:"‚ù§Ô∏è",meditation:"üßò",workout:"üèãÔ∏è",running:"üèÉ",exercise:"üèÉ‚Äç‚ôÇÔ∏è",stretching:"üßò‚Äç‚ôÄÔ∏è",walking:"üö∂",food:"üçé",fruit:"üçá",meal:"üç≤",cooking:"üç≥",water:"üíß",coffee:"‚òï",reading:"üìñ",learning:"üß†",journaling:"üìì",planning:"üóìÔ∏è",goals:"üéØ",idea:"üí°",sleep:"üò¥",wakeup:"üåÖ",bedtime:"üåô",alarm:"‚è∞",morning:"‚òÄÔ∏è",night:"üåô",work:"üíº",study:"üìö",coding:"üíª",meeting:"üìÖ",pet:"üêï",creativity:"‚ú®",hobby:"üé®",sport:"‚öΩ",habit:"‚úÖ",task:"üìÖ",checklist:"üìã",reminder:"üîî",tracker:"üìä",family:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶",social:"üì≤",date:"‚ù§Ô∏è",budget:"üìâ",investment:"üíπ",cleaning:"üßΩ",laundry:"üëö",grocery:"üõí",garden:"üåø",bed:"üõèÔ∏è",mindfulness:"üß†",gratitude:"üôè",therapy:"üí¨",breathing:"üå¨Ô∏è",journal:"üìì",school:"üè´",onlineCourse:"üñ•Ô∏è",research:"üîç",app:"üì±",photo:"üì∏",art:"üé®",write:"‚úçÔ∏è",dance:"üíÉ",craft:"‚úÇÔ∏è",prayer:"üôè",yoga:"üßò",meditation:"üïâÔ∏è",reflection:"üåô",focus:"üéØ",time:"‚è≥",routine:"üìã",plan:"üìù",weather_sunny:"‚òÄÔ∏è",weather_cloudy:"‚òÅÔ∏è",weather_rain:"üåßÔ∏è",weather_storm:"‚õàÔ∏è",weather_snow:"‚ùÑÔ∏è",weather_windy:"üí®",weather_fog:"üå´Ô∏è",temperature:"üå°Ô∏è",bath:"üõÅ",shower:"üöø",toilet:"üöΩ",toilet_paper:"üßª",soap:"üßº",hands_wash:"üßΩ",thumbs_up:"üëç",thumbs_down:"üëé",hand_peace:"‚úåÔ∏è",hand_point_up:"üëÜ",hand_point_right:"üëâ",hand_point_left:"üëà",hand_point_down:"üëá",skull:"üíÄ"};static getHabitIcon(o,u){const f={"–ü–∏—Ç—å –≤–æ–¥—É":"water","–•–æ—Ä–æ—à–∏–π —Å–æ–Ω":"sleep","–î–≤–∏–≥–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å":"exercise","–ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ":"food","–£—Ö–æ–¥ –∑–∞ —Ç–µ–ª–æ–º":"health","–°–∏–ª–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞":"workout",–ë–µ–≥:"running",–•–æ–¥—å–±–∞:"walking","–†–∞—Å—Ç—è–∂–∫–∞ –∏–ª–∏ –π–æ–≥–∞":"yoga","–ú–µ–¥–∏—Ç–∞—Ü–∏—è –∏ –¥—ã—Ö–∞–Ω–∏–µ":"meditation",–ß—Ç–µ–Ω–∏–µ:"book","–û–±—É—á–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–∞–º":"learning","–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫":"language","–í–µ–¥–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–∏–∫–∞":"journaling",–†–µ—Ñ–ª–µ–∫—Å–∏—è:"reflection","–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–Ω—è":"planning","–ì–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –¥–Ω—è":"goal","–†–∞–±–æ—Ç–∞ –ø–æ —Ç–∞–π–º–µ—Ä—É":"focus","–†–∞–∑–±–æ—Ä –≤—Ö–æ–¥—è—â–∏—Ö":"inbox","–í–µ—á–µ—Ä–Ω–∏–π –æ–±–∑–æ—Ä":"planning","–ö–æ–Ω—Ç–∞–∫—Ç —Å –±–ª–∏–∑–∫–∏–º–∏":"phone","–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ":"friends",–ü–æ–¥–¥–µ—Ä–∂–∫–∞:"helping","–ê–∫—Ç–∏–≤–Ω–æ–µ —Å–ª—É—à–∞–Ω–∏–µ":"friends",–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å:"gratitude",–•–æ–±–±–∏:"hobby",–ü—Ä–æ–≥—É–ª–∫–∞:"walking","–°–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π –æ—Ç–¥—ã—Ö":"meditation",–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ:"creativity","–¶–∏—Ñ—Ä–æ–≤–æ–π –¥–µ—Ç–æ–∫—Å":"focus","–°–ª–∞–¥–∫–æ–µ –∏ —Ñ–∞—Å—Ç—Ñ—É–¥":"food","–ü–æ–∑–¥–Ω–∏–π –æ—Ç—Ö–æ–¥ –∫–æ —Å–Ω—É":"bedtime",–ü—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è:"focus","–õ–∏—à–Ω–∏–π —ç–∫—Ä–∞–Ω":"mobile","–ù–µ–∑–¥–æ—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–∫—É—Å—ã":"food","–ò–≥—Ä—ã —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ":"game",–ü–æ—Ä–Ω–æ:"skull",–ö—É—Ä–µ–Ω–∏–µ:"skull",–ê–ª–∫–æ–≥–æ–ª—å:"wine"}[o]||"default";return this.getIcon(f,u)}static getIcon(o,u={}){const b=this.ic[o]||this.ic.default,{style:f={},...a}=u;return te.createElement("span",{style:{fontSize:"1.5rem",lineHeight:1,display:"inline-block",filter:"drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5))",color:f.color||"currentColor",...f},...a},b)}}function ye(e){return Ie({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"},child:[]}]})(e)}function we(e){return Ie({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M384 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l320 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"},child:[]}]})(e)}const st=je([t.jsx("path",{d:"M12 6c-3.87 0-7 3.13-7 7s3.13 7 7 7 7-3.13 7-7-3.13-7-7-7m1 8h-2V8h2z",opacity:".3"},"0"),t.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"},"1"),t.jsx("path",{d:"M11 8h2v6h-2z"},"2")]),nt=je([t.jsx("path",{d:"M12 20c1.47 0 2.83-.45 3.95-1.22L6.22 9.05C5.45 10.17 5 11.53 5 13c0 3.87 3.13 7 7 7m0-14c-.94 0-1.83.19-2.65.52L11 8.17V8h2v2.17l5.48 5.48c.33-.82.52-1.71.52-2.65 0-3.87-3.13-7-7-7",opacity:".3"},"0"),t.jsx("path",{d:"M9 1h6v2H9zm3 5c3.87 0 7 3.13 7 7 0 .94-.19 1.83-.52 2.65l1.5 1.5C20.63 15.91 21 14.5 21 13c0-2.12-.74-4.07-1.97-5.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-1.5 0-2.91.37-4.15 1.02l1.5 1.5C10.17 6.19 11.06 6 12 6"},"1"),t.jsx("path",{d:"M11 8v.17l2 2V8zM2.81 2.81 1.39 4.22l3.4 3.4C3.67 9.12 3 10.98 3 13c0 4.97 4.02 9 9 9 2.02 0 3.88-.67 5.38-1.79l2.4 2.4 1.41-1.41zM12 20c-3.87 0-7-3.13-7-7 0-1.47.45-2.83 1.22-3.95l9.73 9.73C14.83 19.55 13.47 20 12 20"},"2")]),ee=new Date().toISOString().split("T")[0],at=new Audio("Audio/Click.wav"),it=new Audio("Audio/Skip.wav"),Ce=new Audio("Audio/IsDone.wav");let ve,ke,fe;const rt=()=>{const[e,o]=te.useState("dark"),[u,b]=te.useState([]),[f,a]=te.useState([]),[p,w]=d.useState(g.prefs[0]),[x,C]=d.useState(0),[S,M]=d.useState(g.choosenHabits.length>0),[m,R]=d.useState(0),[T,X]=d.useState(0),[r,v]=d.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[H,q]=d.useState(""),[$,B]=d.useState(""),[F,K]=d.useState(""),[L,N]=d.useState(""),[Y,oe]=d.useState(!1),[He,G]=d.useState("default");d.useEffect(()=>{if(r.type===0&&(B(k()[r.hId].name[p]),K(k()[r.hId].description[p]),N(k()[r.hId].iconName)),r.type===4){if(r.gId<=0)return;r.setGoals(c=>{const l=[...c];return[l[r.gId-1],l[r.gId]]=[l[r.gId],l[r.gId-1]],g.choosenHabitsGoals[r.hId]=l,l})}else r.type===5&&r.setGoals(c=>{if(r.gId>=c.length-1)return c;const l=[...c];return[l[r.gId],l[r.gId+1]]=[l[r.gId+1],l[r.gId]],g.choosenHabitsGoals[r.hId]=l,l})},[r]),d.useEffect(()=>{const c=$e.subscribe(o),l=Fe.subscribe(C);return()=>{c.unsubscribe(),l.unsubscribe()}},[]),d.useEffect(()=>{const c=xe.subscribe(l=>{w(l==="ru"?0:1)});return()=>c.unsubscribe()},[]),d.useEffect(()=>{b(g.choosenHabits)},[]),d.useEffect(()=>{if(u.length>0){const c=new Set;u.forEach(l=>{const I=k().find(j=>j.id===l);I&&!c.has(I.category[0])&&c.add(I.category[0])}),a(Array.from(c))}},[u]);const A=(c,l,I,j,D)=>{b(P=>{const _=new Set(P);return _.has(c)?P:(g.addHabit(c,l,I,j,D),[..._,c])}),M(g.choosenHabits.length>0)},O=c=>{if(u.includes(c)){g.removeHabit(c),b(P=>P.filter(_=>_!==c));const j=(k().find(P=>P.id===c)?.name||["",""])[p]||(p===0?"–ü—Ä–∏–≤—ã—á–∫–∞":"Habit"),D=p===0?`–ü—Ä–∏–≤—ã—á–∫–∞: '${j}' —É–¥–∞–ª–µ–Ω–∞`:`Habit: '${j}' deleted`;le(D,2e3,!0),M(g.choosenHabits.length>0)}},V=()=>{switch(r.type){case 0:const c=g.CustomHabits.findIndex(l=>l.id===r.hId);g.CustomHabits=g.CustomHabits.map((l,I)=>I===c?{...l,name:[$.trim(),$.trim()],description:[F.trim(),F.trim()],iconName:L}:l),b(l=>[...l]),v(l=>({...l,show:!1})),r.hInfo({name:[$,$],description:[F,F],iconName:L}),X(l=>l+1);break;case 1:H.length>0?(r.setGoals(l=>[...l,{text:H,isDone:!1}]),g.addHabitGoal(r.hId,{text:H,isDone:!1}),v(l=>({...l,show:!1}))):le(p===0?"–í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª—å":"Enter goal",2e3,!1);break;case 2:H.length>0?(r.setGoals(l=>l.map((I,j)=>j===r.gId?{...I,text:H.trim()}:I)),g.choosenHabitsGoals[r.hId][r.gId].text=H,v(l=>({...l,show:!1}))):le(p===0?"–í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª—å":"Enter goal",2e3,!1);break;case 3:r.setGoals(l=>l.filter((I,j)=>j!==r.gId)),g.choosenHabitsGoals[r.hId].splice(r.gId),v(l=>({...l,show:!1}));break}};return ve=O,ke=A,t.jsxs("div",{style:y(e).container,children:[!S&&t.jsx("div",{style:{...y(e).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:t.jsx("p",{style:{...y(e).subText,fontSize:x===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:s.get("subText",e)},children:pt(p)})}),S&&t.jsx("div",{style:y(e).scrollView,children:lt({theme:e,habitsCards:u,categories:f,setCP:v,setCurrentId:R,fSize:x})},T),r.show&&r.type>0&&r.type<4&&t.jsx("div",{style:y(e).confirmContainer,children:t.jsxs("div",{style:y(e).cP,children:[r.type===1&&t.jsx("p",{style:{...y(e).subText,fontSize:x===0?"11px":"13px",marginTop:"5%",color:s.get("subText",e)},children:p===0?"–í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª—å":"Enter goal"}),r.type===2&&t.jsx("p",{style:{...y(e).subText,fontSize:x===0?"11px":"13px",marginTop:"5%",color:s.get("subText",e)},children:p===0?"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è":"Enter new name"}),r.type===3&&t.jsx("p",{style:{...y(e).subText,fontSize:x===0?"11px":"13px",marginTop:"5%",color:s.get("subText",e)},children:p===0?"–£–¥–∞–ª–∏—Ç—å —Ü–µ–ª—å?":"Delete goal?"}),r.type!==3&&t.jsx(ce,{w:"80%",h:"20%",maxL:70,value:r.type===2?g.choosenHabitsGoals[r.hId][r.gId]?.text:"",onChange:c=>q(c),placeholder:p===0?"–í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª—å":"Enter goal",theme:e}),t.jsxs("div",{style:y(e).simplePanelRow,children:[t.jsx(ge,{style:{fontSize:"28px",color:s.get("icons",e)},onClick:()=>v(c=>({...c,show:!1}))}),t.jsx(ue,{style:{fontSize:"28px",color:s.get("icons",e)},onClick:()=>{V()}})]})]})}),r.show&&r.type===0&&r.type<4&&t.jsx("div",{style:y(e).confirmContainer,children:t.jsxs("div",{style:{...y(e).cP,height:"50vh"},children:[t.jsx("p",{style:{...y(e).subText,fontSize:x===0?"13px":"15px",marginTop:"5%",color:s.get("subText",e)},children:p===0?"–ò–∑–º–µ–Ω–∏ –ø—Ä–∏–≤—ã—á–∫—É":"Change habit"}),t.jsx(ce,{w:"80%",h:"10%",maxL:30,value:k().find(c=>c.id===r.hId).name[p],onChange:c=>B(c),placeholder:p===0?"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è":"Enter new name",theme:e}),t.jsx(ce,{w:"80%",h:"20%",maxL:200,value:k().find(c=>c.id===r.hId).description[p],onChange:c=>K(c),placeholder:p===0?"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ":"Enter new description",theme:e}),t.jsx("div",{style:{...y(e).subText,fontSize:x===0?"13px":"15px",color:s.get("subText",e)},children:p===0?"–∏–∑–º–µ–Ω–∏ –∏–∫–æ–Ω–∫—É":"cange icon"}),t.jsxs("div",{style:{display:"flex",alignContent:"space-between",justifyContent:"center",width:"50%"},children:[t.jsx("div",{style:{width:"80%",padding:"5px"},children:t.jsxs("div",{onClick:()=>oe(!Y),children:[!Y&&t.jsx(Ne,{style:{fontSize:"24px",marginTop:"15px",color:s.get("icons",e)}}),Y&&t.jsx(Oe,{style:{fontSize:"24px",marginTop:"15px",color:s.get("icons",e)}})]})}),t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"20%",height:"100%",padding:"8px"},children:W.getIcon(L,{size:48,style:{fontSize:"30px",marginBottom:"20px",color:s.get("habitIcon",e),filter:"drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5))"}})})]}),t.jsxs("div",{style:y(e).simplePanelRow,children:[t.jsx(ge,{style:{fontSize:"28px",color:s.get("icons",e)},onClick:()=>v(c=>({...c,show:!1}))}),t.jsx(ue,{style:{fontSize:"28px",color:s.get("icons",e)},onClick:()=>{V()}})]})]})}),Y&&t.jsx("div",{style:y(e).selectPanel,children:Object.entries(W.ic).map(([c])=>t.jsx("div",{style:{width:"15%",padding:"12px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",borderRadius:"8px",transition:"background-color 0.2s",":hover":{backgroundColor:s.get("highlitedPanel",e)}},onClick:()=>{N(c),oe(!1)},children:W.getIcon(c,{size:32,style:{color:s.get("habitIcon",e),filter:"drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5))"}})},c))})]})};function k(){return he.concat((g.CustomHabits||[]).filter(e=>!he.some(o=>o.id===e.id)))}function lt({theme:e,habitsCards:o,categories:u,setCP:b,setCurrentId:f,fSize:a}){return u.map(p=>{const w=o.map(x=>k().find(C=>C.id===x)).filter(x=>x&&x.category[0]===p);return t.jsx(dt,{text:k().find(x=>x.category[0]===p)?.category,theme:e,isNegative:p==="–û—Ç–∫–∞–∑ –æ—Ç –≤—Ä–µ–¥–Ω–æ–≥–æ",children:w.map(x=>t.jsx(ct,{id:x.id,theme:e,setCP:b,setCurrentId:f,fSize:a},x.id))},p)})}function ct({id:e=0,theme:o,setCP:u,setCurrentId:b,fSize:f}){const[a,p]=d.useState(g.habitsByDate[ee]?.[e]),[w,x]=d.useState(g.prefs[0]),C=k().find(i=>i.id===e);if(!C)return null;const[S,M]=d.useState({name:C?.name||["",""],descr:C?.description||["",""],icon:C?.iconName||"default"}),m=C.category[0]==="–û—Ç–∫–∞–∑ –æ—Ç –≤—Ä–µ–¥–Ω–æ–≥–æ",R=Be(e),T=120,X=-T,[r,v]=d.useState(!0);let H=a===0?"rgba(0,0,0,0.1)":s.get(a===1?"habitCardDone":"habitCardSkipped",o),q=a===1?"rgba(0,0,0,0.1)":s.get("habitCardSkipped",o),$=a===-1?"rgba(0,0,0,0.1)":s.get("habitCardDone",o);const[B,F]=d.useState(!1),[K,L]=d.useState(H),[N,Y]=d.useState(!1),[oe,He]=d.useState(!1),[G,A]=d.useState(g.choosenHabitsGoals[e]),[O,V]=d.useState(0),[c,l]=d.useState(!1),[I,j]=d.useState(!!m),[D,P]=d.useState(m?864e5:6e4),[_,U]=d.useState(m?Math.round(Date.now()-new Date(g.choosenHabitsLastSkip[e])):6e4),[xt,ht]=d.useState(m?Date.now():0),[Te,se]=d.useState(0);d.useEffect(()=>{if(I){let i=0;const n=setInterval(()=>{i+=50;const h=(_+i)/D*100;se(h),i===1e3&&U(E=>{const z=E+1e3;return i=0,m||(z>=D?(Ce.play(),clearInterval(n),p(1),U(0),j(!1),se(0)):a<1&&p(1)),z})},50);return()=>clearInterval(n)}},[_,I,D]),d.useEffect(()=>{const i=xe.subscribe(n=>{x(n==="ru"?0:1)});return()=>i.unsubscribe()},[]),d.useEffect(()=>{g.changeStatus(ee,e,a)},[a]);const De=()=>{const i=k().find(n=>n.id===e);if(!i||!i.name||!Array.isArray(i.name)||i.name.length===0)return W.getIcon("default",{style:{color:s.get("habitIcon",o)}});if(i.isCustom&&i.iconName)return W.getIcon(i.iconName,{style:{color:s.get("habitIcon",o)}});{const n=i.name[0]||"default";return W.getHabitIcon(n,{style:{color:s.get("habitIcon",o)}})}};d.useEffect(()=>{L(a===0?"rgba(0,0,0,0.1)":s.get(a===1?"habitCardDone":"habitCardSkipped",o))},[o,a]);const ze=et(0),Z=tt(ze,[-1,1],[X,T]),Me=()=>{H=a===0?"rgba(0,0,0,0.1)":s.get(a===1?"habitCardDone":"habitCardSkipped",o),q=a===1?"rgba(0,0,0,0.1)":s.get("habitCardSkipped",o),$=a===-1?"rgba(0,0,0,0.1)":s.get("habitCardDone",o)},Le=(i,n)=>{a===1&&n.offset.x<0&&L(Se(H,q,Math.abs(n.offset.x)/T)),m?n.offset.x<X&&r&&(J(!1),de(Z,0,{type:"tween",duration:.2}),v(!1)):((a===1&&n.offset.x<0||a!==1)&&L(Se(H,n.offset.x>0?$:q,Math.abs(n.offset.x)/T)),Math.abs(n.offset.x)>T&&r&&((a<1&&n.offset.x>0||a>-1&&n.offset.x<0)&&J(n.offset.x>0),de(Z,0,{type:"tween",duration:.2}),v(!1)))},Ae=()=>{r&&de(Z,0,{type:"tween",duration:.2}),L(a===0?"rgba(0,0,0,0.1)":s.get(a===1?"habitCardDone":"habitCardSkipped",o)),v(!0)},J=i=>{let n=0;i?(a===0?n=1:a===-1?n=0:n=1,g.habitsByDate[ee][e]=n):(a===0?n=-1:a===1?(n=m?-1:0,m&&(U(Math.round(0)),g.choosenHabitsLastSkip[e]=Date.now())):a===-1&&(n=-1,fe=e,m&&(U(Math.round(0)),g.choosenHabitsLastSkip[e]=Date.now())),g.habitsByDate[ee][e]=n),n===1?pe(Ce):n===-1&&pe(it),L(a===0?"rgba(0,0,0,0.2)":s.get(a===1?"habitCardDone":"habitCardSkipped",o)),p(n)},ne=()=>{b(e),pe(at);const i=!B;F(i),Ke(i?e:null)};d.useEffect(()=>{const i=Ye.subscribe(n=>{F(n===e)});return()=>i.unsubscribe()},[e]);const Ee={display:"flex",flexDirection:"column",width:"95%",borderRadius:"24px",margin:"5px",overflow:"hidden",position:"relative",backgroundColor:a<2?K:s.get("habitCardEnded",o),border:"2px solid "+s.get("border",o),x:Z},Ge={position:"absolute",top:0,left:0,height:"2px",width:`${Te}%`,backgroundColor:"green",borderRadius:"24px 0 0 0"},ae={fontSize:f===0?"13px":"15px",color:s.get("mainText",o),marginLeft:"20px"},Q={textAlign:"left",fontSize:f===0?"11px":"13px",color:s.get("subText",o),padding:"3px"};let ie=f===0?"220px":"238px";if(G?.length>0){let i=f===0?220:238;for(let n=0;n<G.length;n++)i+=f===0?36:42;ie=i+"px"}d.useEffect(()=>{if(G?.length>0){let i=f===0?220:238;for(let n=0;n<G.length;n++)i+=f===0?36:42;ie=i+"px"}},[G,f]),d.useEffect(()=>{v(!c)},[c]);const Pe=()=>{a<1&&!m&&(j(!0),U(0))},_e=()=>{m||(j(!1),se(0),U(0))},Re=()=>{fe=e;const i=g.prefs[0]===0?`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É: '${S.name[0]}' ?`:`Are you sure you want to delete '${S.name[1]}' habit?`;qe(i)};return t.jsxs(Ve.div,{id:e,style:Ee,onClick:i=>{const n=i.nativeEvent.pageY,h=document.getElementById(e),E=h.getBoundingClientRect().top+window.scrollY,z=n-E;(h.clientHeight<.06*window.innerHeight||z<h.clientHeight*.2)&&ne()},drag:r?"x":!1,dragConstraints:{left:X,right:a>0||m?0:T},onDragStart:Me,dragElastic:0,onDrag:Le,onDragEnd:Ae,animate:{height:B?ie:"40px"},transition:{type:"tween",duration:.4,ease:"easeInOut"},children:[t.jsx("div",{style:Ge}),c&&t.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"4.5vh",zIndex:1001,backgroundColor:s.get("background",o)},onClick:i=>i.stopPropagation(),children:t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"95%",margin:"8px auto 0"},children:[t.jsx("div",{style:y(o).mainText,children:ut(D)}),t.jsx(ot,{style:y(o).slider,min:1,max:59,value:D/6e4,valueLabelDisplay:"off",onChange:i=>{P(i.target.value*6e4),i.stopPropagation()}}),t.jsx(ge,{onClick:i=>{i.stopPropagation(),l(!1)},style:{cursor:"pointer",color:s.get("icons",o),fontSize:"24px"}}),t.jsx(ue,{onClick:i=>{i.stopPropagation(),Pe(),l(!1)},style:{cursor:"pointer",color:s.get("icons",o),fontSize:"24px"}})]})}),t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",maxHeight:"40px",paddingBottom:"5px"},children:[t.jsx("div",{style:{marginLeft:"15px",marginTop:"8px"},children:De()}),t.jsx("h2",{style:ae,children:S.name[w]}),a<2&&t.jsxs("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[I&&t.jsx("h2",{style:ae,children:gt(_,D,m)}),!I&&t.jsx(nt,{onClick:i=>{i.stopPropagation(),m||l(!0)},style:{...y(o).icon,color:s.get("icons",o),opacity:.5,fontSize:"24px",marginTop:"10px",marginRight:"15px"}}),I&&t.jsx(st,{onClick:i=>{i.stopPropagation(),_e()},style:{...y(o).icon,color:s.get("icons",o),fontSize:"24px",marginRight:"10px"}})]}),a>1&&t.jsx(Ue,{style:{...y(o).icon,color:"#d8e363ff",fontSize:"24px",marginRight:"20px",marginTop:"10px",marginLeft:"auto"}})]}),B&&t.jsxs("div",{style:{marginLeft:"15px",width:"90%",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-around"},children:[t.jsx("div",{style:Q,children:S.descr[w]}),t.jsx("div",{style:Q,children:w===0?"–¶–µ–ª–∏ : ":"Goals : "}),G?.map((i,n)=>t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",borderBottom:`1px solid ${s.get("border",o)}`,marginBottom:"5px",marginLeft:"5px"},children:[t.jsx("div",{style:{...ae,fontSize:f===0?"11px":"13px",display:"flex",textAlign:"left",overflowX:"scroll",marginLeft:"1px"},children:n+1+": "+i.text}),t.jsxs("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[N&&O===n&&n<g.choosenHabitsGoals[e].length-1&&t.jsx(Ze,{onClick:()=>{u(h=>({...h,show:!0,type:5,hId:e,gId:n,setGoals:A})),V(h=>h+1)},style:{fontSize:"18px",marginRight:"8px",color:s.get("icons",o)}}),N&&O===n&&n>0&&t.jsx(Je,{onClick:()=>{u(h=>({...h,show:!0,type:4,hId:e,gId:n,setGoals:A})),V(h=>h-1)},style:{fontSize:"18px",marginRight:"8px",color:s.get("icons",o)}}),N&&O===n&&t.jsx(be,{onClick:()=>u(h=>({...h,show:!0,type:2,hId:e,gId:n,setGoals:A})),style:{fontSize:"18px",marginRight:"8px",color:s.get("icons",o)}}),N&&O===n&&t.jsx(me,{onClick:()=>u(h=>({...h,show:!0,type:3,hId:e,gId:n,setGoals:A})),style:{fontSize:"18px",marginRight:"8px",color:s.get("icons",o)}}),G[n].isDone?t.jsx(ye,{style:{fontSize:"24px",color:s.get("done",o)},onClick:()=>A(h=>{const E=h.map((z,re)=>re===n?{...z,isDone:!1}:z);return g.choosenHabitsGoals[e]=E,E})}):t.jsx(we,{style:{fontSize:"24px",color:s.get("icons",o)},onClick:()=>A(h=>{const E=h.map((z,re)=>re===n?{...z,isDone:!0}:z);return g.choosenHabitsGoals[e]=E,E})}),t.jsx(Qe,{style:{fontSize:"18px",color:s.get("icons",o),marginLeft:"8px"},onClick:()=>{Y(h=>!(h&&O===n)),V(n),b(e)}})]})]},n)),t.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},children:[t.jsx(We,{onClick:()=>u({show:!0,type:1,hId:e,gId:0,setGoals:A}),style:{fontSize:"24px",color:s.get("icons",o)}}),t.jsx("div",{style:{...Q,marginLeft:"15px"},children:w===0?"–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å":"Add goal"})]}),t.jsx("div",{style:Q,children:w===0?"–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è üèÜ":"Achievements üèÜ"}),g.choosenHabitsAchievements[e]?.map((i,n)=>t.jsx(ft,{index:n,milestone:i,habitId:e,isNegative:m,percent:R,theme:o,fSize:f,langIndex:w},n)),t.jsxs("div",{style:{display:"flex",marginLeft:"auto",flexDirection:"row",alignItems:"center"},children:[k().find(i=>i.id===e).isCustom&&t.jsx(be,{onClick:()=>u(i=>({...i,show:!0,type:0,hId:e,gId:0,hInfo:M})),style:{fontSize:"18px",marginRight:"21px",color:s.get("icons",o)}}),t.jsx(me,{onClick:Re,style:{fontSize:"18px",marginLeft:"21px",color:s.get("icons",o)}}),t.jsx(Xe,{style:{fontSize:"18px",color:s.get("icons",o),marginLeft:"21px"},onClick:()=>{ne()}}),!m&&a<1&&t.jsx(we,{onClick:()=>J(!0),style:{fontSize:"24px",marginLeft:"21px",color:s.get("skipped",o)}}),!m&&a>0&&t.jsx(ye,{onClick:()=>J(!1),style:{fontSize:"24px",marginLeft:"21px",color:s.get("done",o)}})]})]})]})}function dt({text:e=["–ò–º—è","Name"],children:o,theme:u,fSize:b,isNegative:f}){const[a,p]=d.useState(g.prefs[0]);return d.useEffect(()=>{const w=xe.subscribe(x=>{p(x==="ru"?0:1)});return()=>w.unsubscribe()},[]),t.jsxs("div",{style:y(u,b,f).categoryPanel,children:[e[a],o]})}const y=(e,o,u)=>({container:{backgroundColor:s.get("background",e),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI"},categoryPanel:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"24px",border:u?`1px solid ${s.get("categoryNegative",e)}`:`1px solid ${s.get("categoryPositive",e)}`,borderTop:u?`5px solid ${s.get("categoryNegative",e)}`:`5px solid ${s.get("categoryPositive",e)}`,margin:"4px",background:s.get("panelGradient",e),boxShadow:`4px 4px 6px ${s.get("shadow",e)}`,fontFamily:"Segoe UI",color:s.get("subText",e)},text:{textAlign:"left",fontSize:o===0?"11px":"13px",color:s.get("subText",e),marginLeft:"30px",marginBottom:"12px"},scrollView:{padding:"5px",width:"98vw",height:"80vh",overflowY:"auto",marginTop:"12vh",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",borderRadius:"24px",backgroundColor:"rgba(0,0,0,0.1)"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",borderRadius:"24px",border:`1px solid ${s.get("border",e)}`,margin:"5px",marginBottom:"35vw",backgroundColor:s.get("simplePanel",e),boxShadow:`4px 4px 6px ${s.get("shadow",e)}`,width:"100%",height:"45vw"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2900,padding:"20px"},simplePanelRow:{width:"75vw",display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"space-around"},slider:{width:"60%",userSelect:"none",touchAction:"none",color:s.get("icons",e)},selectPanel:{backgroundColor:s.get("habitCard",e),borderRadius:"24px",border:`1px solid ${s.get("border",e)}`,position:"absolute",top:"30%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"77vw",maxHeight:"42vh",overflowY:"auto",padding:"16px",gap:"8px",justifyContent:"center",zIndex:6e3}});function Se(e,o,u){u=Math.max(0,Math.min(1,u));const b=S=>{const[M,m,R,T=1]=S.replace(/\s+/g,"").replace(/[^0-9.,]/g,"").split(",").map(Number);return{r:M,g:m,b:R,a:T}},f=b(e),a=b(o),p=Math.round(f.r+(a.r-f.r)*u),w=Math.round(f.g+(a.g-f.g)*u),x=Math.round(f.b+(a.b-f.b)*u),C=f.a+(a.a-f.a)*u;return`rgba(${p},${w},${x},${C})`}function pt(e){return e===0?`–í—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–π –ø—Ä–∏–≤—ã—á–∫–∏

 –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ—é –ø—Ä–∏–≤—ã—á–∫—É.

–í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –µ—Å–ª–∏ –≤—ã –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –¥–µ–Ω—å, –ø—Ä–∏–≤—ã—á–∫–∞ –±—É–¥–µ—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ –¥–Ω—è.

–í—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–≤–æ—é –ø—Ä–∏–≤—ã—á–∫—É –∏ –∑–∞—Ç–µ–º —Å–≤–∞–π–ø–Ω—É—Ç—å –≤–ø—Ä–∞–≤–æ, —á—Ç–æ–±—ã –æ—Ç–º–µ—Ç–∏—Ç—å –µ—ë –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é.

–ß—Ç–æ–±—ã —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤—ã—á–∫—É, –≤–∞–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–µ 66 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥.

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤–∞—à–∏—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –≤ –ø–∞–Ω–µ–ª–∏ –º–µ—Ç—Ä–∏–∫ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ.


 * –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "+" –Ω–∏–∂–µ`:`You have not added any habits yet

 You can choose from the list or add your own habit.

Choosen habits will update automatically every day, if you skip a day, the habit will be skipped for that day.

You need to perform your habit and then swipe right to mark it as done.

To form a habit you need to perform it for 66 days in a row.

You can view a progress of your habits in the metrics panel and calendar.


 * To get started tap the "+" button below`}function pe(e){g.prefs[2]==0&&e!==null&&(e.paused||(e.pause(),e.currentTime=0),e.volume=.5,e.play()),g.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function gt(e,o,u){const b=u?e:o-e,f=Math.floor(b/864e5),a=Math.floor(b%864e5/36e5),p=Math.floor(b%36e5/6e4),w=Math.floor(b%6e4/1e3),x=[["–¥","d"],["—á","h"],["–º","m"]],C=g.prefs[0];return f>0?f+x[0][C]:a>0?a+x[1][C]:p>0?u?p+x[2][C]:p+":"+w.toString().padStart(2,"0"):w.toString().padStart(2,"0")}function ut(e){return Math.floor(e/6e4)+"m"}const ft=({milestone:e,index:o,habitId:u,isNegative:b,percent:f,theme:a,fSize:p,langIndex:w})=>{const x=g.choosenHabits.indexOf(u),C=g.choosenHabitsDaysToForm[x];let S;b?o===0?S=7:o===1?S=30:S=90:o===0?S=Math.ceil(C/3):o===1?S=Math.ceil(C/2):S=C-1;const M=Math.floor(f/100*C),m=M>=S,R=Math.max(0,S-M);return t.jsxs("div",{style:{fontSize:p===0?"12px":"14px",color:m?s.get("mainText",a):s.get("subText",a),marginLeft:"2px"},children:[o+1,": ",m?e[w]:t.jsxs(t.Fragment,{children:[w===0?"–î–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å—Ç–∞–ª–æ—Å—å: ":"Time to complete left: ",R,w===0?" –¥–Ω.":" d."]})]},o)},Ct=Object.freeze(Object.defineProperty({__proto__:null,get addHabitFn(){return ke},get currentId(){return fe},default:rt,get removeHabitFn(){return ve}},Symbol.toStringTag,{value:"Module"}));export{Ct as H,W as I,ke as a,fe as c,ve as r};
