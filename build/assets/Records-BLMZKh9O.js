import{A as f,t as w,l as D,f as k,j as e,C as o,U as b,N as F,bz as G,bA as L,br as R,bs as T,bF as z,bE as B,bI as A}from"./index-CTGIyoo4.js";import{r as c}from"./recharts-Bg6K2Pzo.js";import{b as E,c as M,G as U,a as N}from"./index-Ct51vCYW.js";const $=[["Быстрый счет","quick math"],["Память","memory"],["Логика","logic"],["Фокус","focus"]],Y=[["легкий","easy"],["средний","medium"],["тяжелый","hard"],["безумный","insane"],["бесконечный","endless"]],q=[G,L,E,M],h=[R,T,U,N,z],H=(t,s)=>{const a=["cold","skipped","done","medium"];return o.get(a[s],t)},W=(t,s)=>{const a=["light","medium","heavy","hot","cold"];return o.get(a[s],t)},J=({theme:t,categoryIndex:s,setCategoryIndex:a,difficultyIndex:n,setDifficultyIndex:l})=>e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px",padding:"2px",backgroundColor:o.get("panel",t),borderRadius:"12px"},children:q.map((d,r)=>e.jsx("span",{onClick:()=>{a(r),n>3&&l(3)},style:{padding:"2px 18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:s===r?H(t,r):o.get("subText",t),opacity:s===r?1:.7,transition:"all 0.2s ease"},"aria-label":$[r]?.[0]||"Category",children:e.jsx(d,{size:s===r?30:20})},r))}),K=({theme:t,categoryIndex:s,setCategoryIndex:a,difficultyIndex:n,setDifficultyIndex:l})=>{const d=s>0?h.slice(0,-1):h;return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"8px 0"},children:d.map((r,i)=>e.jsx("span",{onClick:()=>l(i),style:{padding:"2px 18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:n===i?W(t,i):o.get("subText",t),opacity:n===i?1:.8,transition:"all 0.2s ease"},"aria-label":Y[i]?.[0]||"Difficulty",children:e.jsx(r,{size:n===i?30:20})},i))})},Z=()=>{const[t,s]=c.useState("dark"),[a,n]=c.useState(f.prefs[0]),[l,d]=c.useState(f.prefs[4]),[r,i]=c.useState(0),[x,y]=c.useState(0),[j,m]=c.useState(null),[C,I]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const u=await F.getMentalRecordsGlobal()||[{name:b?.name,data:f.mentalRecords}];m(u)}catch{m([{name:b?.name,data:f.mentalRecords}])}finally{I(!1)}})()},[]),c.useEffect(()=>{const p=w.subscribe(s),u=D.subscribe(S=>n(S==="ru"?0:1)),v=k.subscribe(d);return()=>{p.unsubscribe(),u.unsubscribe(),v.unsubscribe()}},[]),e.jsxs("div",{style:g(t).container,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[e.jsx(J,{theme:t,langIndex:a,fSize:l,categoryIndex:r,difficultyIndex:x,setCategoryIndex:i,setDifficultyIndex:y}),e.jsx(K,{categoryIndex:r,theme:t,langIndex:a,fSize:l,difficultyIndex:x,setDifficultyIndex:y})]}),e.jsx("div",{style:g(t).list,children:C?e.jsx("div",{children:a===0?"Загрузка...":"Loading..."}):j?.map((p,u)=>e.jsx(P,{theme:t,fSize:l,isUser:p.name===b.name,index:u,data:p,categoryIndex:r,difficultyIndex:x}))})]})},g=(t,s)=>({container:{backgroundColor:o.get("background",t),display:"flex",position:"absolute",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",top:"14vh",width:"100vw",fontFamily:"Segoe UI"},list:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"12px",width:"90%",overflowY:"scroll",height:"80%",borderBottom:"1px solid "+o.get("border",t),borderTop:"1px solid "+o.get("border",t)},listItem:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",height:"30px",borderBottom:"1px solid "+o.get("border",t)},text:{fontSize:s===0?"14px":"16px",color:o.get("mainText",t),marginRight:"15px"},avatar:{width:"25px",height:"25px",borderRadius:"50%",border:"1px solid "+o.get("border",t),overflow:"hidden"}}),O=(t,s)=>{const a=["barsColorWeight","difficultyAdd","hold"];return o.get(a[s],t)},P=({theme:t,fSize:s,isUser:a,index:n,data:l,categoryIndex:d,difficultyIndex:r})=>e.jsxs("div",{style:{...g(t).listItem,borderBottomColor:a?o.get("light",t):o.get("border",t)},children:[e.jsxs("div",{style:{...g(t).listItem,width:"40%",justifyContent:"start",borderBottom:"none"},children:[e.jsx("div",{style:g(t,s).text,children:n+1}),e.jsx("div",{style:{...g(t,s).text,marginLeft:"15px"},children:l.name}),n<3&&e.jsx(B,{size:20,color:O(t,n)}),a&&e.jsx(A,{size:15,color:o.get("light",t)})]}),e.jsx("div",{style:{...g(t,s).text,color:o.get("light",t)},children:l.data[d][r]})]});export{Z as default};
