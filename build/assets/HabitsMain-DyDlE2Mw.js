import{A as x,t as Ge,f as Be,ac as Me,l as Fe,C as p,j as e,M as ue,a2 as he,d as ye,ab as pe,m as J,ad as $e,a as Ne,U as Le,q as We,p as Oe,ae as Ue,g as Ie,o as Se,af as je,a6 as Ve,ag as Ye,s as Xe}from"./index-KzOPGCEI.js";import{R as xe,r}from"./recharts-k8ghPecL.js";import{I as Q,u as qe,a as Ke,b as fe}from"./Icons-D0oRlVpC.js";import{F as we}from"./index--pVIemI6.js";import{T as _e}from"./index-DaMQ66j0.js";import{T as Je,a as Qe}from"./TimerOffTwoTone-Cr8XHv2b.js";import{M as ae}from"./MyInput-Dj_htFlt.js";import{S as Ze}from"./Slider-CIKEwRd6.js";const ge=new Date().toISOString().split("T")[0],ve=new Audio("Audio/Click.wav"),et=new Audio("Audio/Skip.wav"),Ce=new Audio("Audio/IsDone.wav");let tt,st,mt;const S=(t,d=0)=>{const g=t==="light"||t==="speciallight",b=g?"#F2F4F6":p.get("background",t),w=g?"#FFFFFF":p.get("simplePanel",t),y=g?"rgba(0,0,0,0.0)":`1px solid ${p.get("border",t)}`,l=g?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:b,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:y,backgroundColor:w,boxShadow:l,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:w,borderRadius:"24px",border:y,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:l},mainText:{fontSize:"17px",fontWeight:"600",color:p.get("mainText",t),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:p.get("subText",t),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:g?"#E5E5EA":"rgba(255,255,255,0.1)",color:g?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:p.get("icons",t),fontSize:"24px"}}},yt=()=>{const[t,d]=xe.useState("dark"),[g,b]=xe.useState([]),[w,y]=xe.useState([]),[l,v]=r.useState(x.prefs[0]),[f,C]=r.useState(0),[m,F]=r.useState(x.choosenHabits.length>0),[B,Y]=r.useState(0),[j,M]=r.useState(0),[n,h]=r.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[k,$]=r.useState(""),[z,N]=r.useState(""),[D,E]=r.useState(""),[U,Z]=r.useState(""),[ee,X]=r.useState(!1),[V,te]=r.useState(null),[le,q]=r.useState(""),[K,T]=r.useState(!1);r.useEffect(()=>{if(n.type===0&&(N(O().find(i=>i.id===n.hId)?.name[l]||""),E(O().find(i=>i.id===n.hId)?.description[l]||""),Z(O().find(i=>i.id===n.hId)?.iconName||"")),n.type===4){if(n.gId<=0)return;n.setGoals(i=>{const s=[...i];return[s[n.gId-1],s[n.gId]]=[s[n.gId],s[n.gId-1]],x.choosenHabitsGoals[n.hId]=s,s})}else n.type===5&&n.setGoals(i=>{if(n.gId>=i.length-1)return i;const s=[...i];return[s[n.gId],s[n.gId+1]]=[s[n.gId+1],s[n.gId]],x.choosenHabitsGoals[n.hId]=s,s})},[n]),r.useEffect(()=>{const i=Ge.subscribe(d),s=Be.subscribe(C),u=Me.subscribe(T);return()=>{i.unsubscribe(),s.unsubscribe(),u.unsubscribe()}},[]),r.useEffect(()=>{const i=Fe.subscribe(s=>{v(s==="ru"?0:1)});return()=>i.unsubscribe()},[]),r.useEffect(()=>{b(x.choosenHabits)},[]),r.useEffect(()=>{if(g.length>0){const i=new Set;g.forEach(s=>{const u=O().find(a=>a.id===s);u&&!i.has(u.category[0])&&i.add(u.category[0])}),y(Array.from(i))}},[g]);const _=(i,s,u,a,P)=>{b(I=>{const G=new Set(I);return G.has(i)?I:(x.addHabit(i,s,u,a,P),[...G,i])}),F(x.choosenHabits.length>0)},H=i=>{if(g.includes(i)){x.removeHabit(i),b(I=>I.filter(G=>G!==i));const a=(O().find(I=>I.id===i)?.name||["",""])[l]||(l===0?"Привычка":"Habit"),P=l===0?`Привычка: '${a}' удалена`:`Habit: '${a}' deleted`;pe(P,2e3,!0),F(x.choosenHabits.length>0)}},ce=()=>{switch(n.type){case 0:const i=x.CustomHabits.findIndex(s=>s.id===n.hId);i!==-1&&(x.CustomHabits=x.CustomHabits.map((s,u)=>u===i?{...s,name:[z.trim(),z.trim()],description:[D.trim(),D.trim()],iconName:U}:s)),b(s=>[...s]),h(s=>({...s,show:!1})),n.hInfo&&n.hInfo({name:[z,z],descr:[D,D],icon:U}),M(s=>s+1);break;case 1:k.length>0?(n.setGoals(s=>[...s,{text:k,isDone:!1}]),x.addHabitGoal(n.hId,{text:k,isDone:!1}),h(s=>({...s,show:!1}))):pe(l===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:k.length>0?(n.setGoals(s=>s.map((u,a)=>a===n.gId?{...u,text:k.trim()}:u)),x.choosenHabitsGoals[n.hId][n.gId].text=k,h(s=>({...s,show:!1}))):pe(l===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:n.setGoals(s=>s.filter((u,a)=>a!==n.gId)),x.choosenHabitsGoals[n.hId].splice(n.gId,1),h(s=>({...s,show:!1}));break}};tt=H,st=_;const L=t==="light"||t==="speciallight",R=L?"#F2F4F6":p.get("background",t);return e.jsxs("div",{style:{...S(t).container,backgroundColor:R},children:[K&&e.jsx("div",{style:S(t).confirmContainer,children:e.jsxs("div",{style:S(t).cP,children:[e.jsx("div",{style:S(t,f).mainText,children:le}),e.jsxs("div",{style:S(t).buttonsRow,children:[e.jsxs("button",{style:S(t).btnCancel,onClick:()=>T(!1),children:[e.jsx(ue,{size:20,style:{marginRight:5}})," ",l===0?"Нет":"No"]}),e.jsxs("button",{style:{...S(t).btnSave,backgroundColor:"#FF453A"},onClick:()=>{H(V),T(!1)},children:[e.jsx(he,{size:20,style:{marginRight:5}})," ",l===0?"Да":"Yes"]})]})]})}),!m&&e.jsx("div",{style:{...S(t).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:e.jsx("p",{style:{...S(t).subText,fontSize:f===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:p.get("subText",t)},children:at(l)})}),m&&e.jsxs("div",{style:S(t).scrollView,children:[nt({theme:t,habitsCards:g,categories:w,setCP:h,setCurrentId:Y,fSize:f,setNeedConfirmation:T,setConfirmMessage:q,setHabitToDelete:te}),e.jsx("div",{style:{height:"100px"}})]},j),n.show&&e.jsx("div",{style:S(t).confirmContainer,children:e.jsxs("div",{style:{...S(t).cP,width:"90%"},children:[e.jsxs("div",{style:S(t).mainText,children:[n.type===1&&(l===0?"Новая цель":"New goal"),n.type===2&&(l===0?"Изменить цель":"Edit goal"),n.type===3&&(l===0?"Удалить цель?":"Delete goal?"),n.type===0&&(l===0?"Настройки привычки":"Edit habit")]}),n.type===1&&e.jsx(ae,{w:"100%",h:"50px",value:k,onChange:$,placeholder:l===0?"Название цели...":"Goal title...",theme:t}),n.type===2&&e.jsx(ae,{w:"100%",h:"50px",value:k,onChange:$,placeholder:l===0?"Название цели...":"Goal title...",theme:t}),n.type===0&&e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx(ae,{w:"100%",h:"50px",value:z,onChange:N,placeholder:l===0?"Название":"Name",theme:t}),e.jsx(ae,{w:"100%",h:"50px",value:D,onChange:E,placeholder:l===0?"Описание (опц.)":"Description (opt.)",theme:t}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:L?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>X(!ee),children:[e.jsx("span",{style:{fontSize:"14px",color:p.get("subText",t)},children:l===0?"Иконка":"Icon"}),e.jsx("div",{style:{color:p.get("habitIcon",t)},children:Q.getIcon(U,{size:28})})]})]}),e.jsxs("div",{style:S(t).buttonsRow,children:[e.jsxs("button",{style:S(t).btnCancel,onClick:()=>h(i=>({...i,show:!1})),children:[e.jsx(ue,{size:22,style:{marginRight:"6px"}})," ",l===0?"Отмена":"Cancel"]}),e.jsxs("button",{style:{...S(t).btnSave,backgroundColor:n.type===3?"#FF453A":"#007AFF"},onClick:()=>{ce()},children:[e.jsx(he,{size:22,style:{marginRight:"6px"}})," ",n.type===3?l===0?"Удалить":"Delete":l===0?"Готово":"Save"]})]})]})}),ee&&e.jsx("div",{style:S(t).confirmContainer,onClick:()=>X(!1),children:e.jsxs("div",{style:{...S(t).selectPanel},onClick:i=>i.stopPropagation(),children:[e.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:p.get("subText",t),fontSize:"13px",fontWeight:"600"},children:l===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(Q.ic).map(([i])=>e.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:L?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{Z(i),X(!1)},children:Q.getIcon(i,{size:30,style:{color:p.get("habitIcon",t)}})},i))]})})]})};function O(){return ye.concat((x.CustomHabits||[]).filter(t=>!ye.some(d=>d.id===t.id)))}function nt({theme:t,habitsCards:d,categories:g,setCP:b,setCurrentId:w,fSize:y,setNeedConfirmation:l,setConfirmMessage:v,setHabitToDelete:f}){return g.map(C=>{const m=d.map(F=>O().find(B=>B.id===F)).filter(F=>F&&F.category[0]===C);return m.length===0?null:e.jsx(it,{text:m[0].category,theme:t,isNegative:C==="Отказ от вредного",children:m.map(F=>e.jsx(ot,{id:F.id,theme:t,setCP:b,setCurrentId:w,fSize:y,setConfirmMessage:v,setNeedConfirmation:l,setHabitToDelete:f},F.id))},C)})}function ot({id:t=0,theme:d,setCP:g,setCurrentId:b,fSize:w,setNeedConfirmation:y,setConfirmMessage:l,setHabitToDelete:v}){const[f,C]=r.useState(x.habitsByDate[ge]?.[t]),[m,F]=r.useState(x.prefs[0]),[B,Y]=r.useState(Le.hasPremium),j=O().find(o=>o.id===t);if(!j)return null;const[M,n]=r.useState({name:j?.name||["",""],descr:j?.description||["",""],icon:j?.iconName||"default"}),h=j.category[0]==="Отказ от вредного",k=We(t),$=120,z=-$,[N,D]=r.useState(!0),[E,U]=r.useState(!1),[Z,ee]=r.useState(!1),[X,V]=r.useState(x.choosenHabitsGoals[t]),[te,le]=r.useState(0),[q,K]=r.useState(!1),[T,_]=r.useState(!!h),[H,ce]=r.useState(h?864e5:6e4),[L,R]=r.useState(h?Math.round(Date.now()-new Date(x.choosenHabitsLastSkip[t])):6e4),[i,s]=r.useState(0),u=h?"#FF3B30":j.color||"#32D74B",a=d==="light"||d==="speciallight";let P=a?"#FFFFFF":p.get("simplePanel",d)+"99",I=a?"#1D1D1F":p.get("mainText",d),G=a?"#8E8E93":p.get("subText",d),se=a?`${u}15`:`${u}20`,de=u,ne=a?"transparent":`1px solid ${p.get("border",d)}80`,ke=a?"0 12px 24px -6px rgba(0,0,0,0.08), 0 4px 8px -3px rgba(0,0,0,0.04)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";h&&(P=a?"#FFF5F5":"rgba(255, 59, 48, 0.08)",ne=a?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",se="rgba(255, 59, 48, 0.15)"),f===1?(P=a?"#E8F5E9":"rgba(20, 60, 30, 0.85)",I=a?"#1E5E25":"#ffffff",G=a?"#2E7D32":"rgba(255,255,255,0.7)",se=a?"#FFFFFF":"rgba(255,255,255,0.2)",de=a?"#2E7D32":"#ffffff",ne="transparent"):f===-1&&(P=a?"#FFEBEE":"rgba(60, 20, 20, 0.85)",I=a?"#B71C1C":"#ffffff",G=a?"#C62828":"rgba(255,255,255,0.7)",se=a?"#FFFFFF":"rgba(255,255,255,0.2)",de=a?"#C62828":"#ffffff",ne="transparent"),r.useEffect(()=>{const o=Oe.subscribe(Y);return()=>o.unsubscribe()},[]),r.useEffect(()=>{if(T){let o=0;const c=setInterval(()=>{o+=50;const A=(L+o)/H*100;s(A),o===1e3&&R(ie=>{const W=ie+1e3;return o=0,!h&&W>=H?(Ce.play(),clearInterval(c),C(1),R(0),_(!1),s(0)):W>=H&&f<1&&C(1),W})},50);return()=>clearInterval(c)}},[L,T,H]),r.useEffect(()=>{const o=Fe.subscribe(c=>F(c==="ru"?0:1));return()=>o.unsubscribe()},[]),r.useEffect(()=>{x.changeStatus(ge,t,f)},[f]);const De=()=>j.isCustom&&j.iconName?Q.getIcon(j.iconName,{size:22}):Q.getHabitIcon(j.name?j.name[0]:"default",{size:22}),Te=qe(0),oe=Ke(Te,[-1,1],[z,$]),He=(o,c)=>{h?c.offset.x<z&&N&&(be(!1),fe(oe,0,{type:"tween",duration:.2}),D(!1)):Math.abs(c.offset.x)>$&&N&&((f<1&&c.offset.x>0||f>-1&&c.offset.x<0)&&be(c.offset.x>0),fe(oe,0,{type:"tween",duration:.2}),D(!1))},ze=()=>{N&&fe(oe,0,{type:"tween",duration:.2}),D(!0)},be=o=>{let c=0;o?c=1:f===0?c=-1:f===1?(c=h?-1:0,h&&(R(0),x.choosenHabitsLastSkip[t]=Date.now())):f===-1&&(c=-1,h&&(R(0),x.choosenHabitsLastSkip[t]=Date.now())),x.habitsByDate[ge][t]=c,c===1?re(Ce):c===-1&&re(et),C(c)},me=()=>{b(t),re(ve);const o=!E;U(o),Xe(o?t:null)};r.useEffect(()=>{const o=Ue.subscribe(c=>U(c===t));return()=>o.unsubscribe()},[t]),r.useEffect(()=>{D(!q)},[q]);const Ee=()=>{f<1&&!h&&(_(!0),R(0))},Ae=()=>{h||(_(!1),s(0),R(0))},Re=o=>{v(o),y(!0),l(x.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return e.jsxs(J.div,{id:t,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:P,backdropFilter:a?"none":"blur(40px)",border:a?"none":ne,boxShadow:ke,x:oe},onClick:o=>{const c=document.getElementById(t);(c.clientHeight<80||o.nativeEvent.pageY-(c.getBoundingClientRect().top+window.scrollY)<80)&&me()},drag:N?"x":!1,dragConstraints:{left:z,right:f>0||h?0:$},onDrag:He,onDragEnd:ze,whileTap:{scale:.99},animate:{height:E?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,height:"3px",width:`${i}%`,backgroundColor:u,borderRadius:"24px 0 0 0"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:se,color:f===1?"#fff":de,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:E?"5px":"0"},children:De()}),e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:"700",letterSpacing:"0.5px",color:I,opacity:.5,marginBottom:"4px"},children:j.category[m]}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:I,whiteSpace:E?"normal":"nowrap",overflow:E?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:M.name[m]}),T&&e.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:f===1?a?"#2E7D32":"#FFF":u,marginTop:"4px",opacity:.9},children:rt(L,H,m,h)})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!h&&e.jsxs(e.Fragment,{children:[!T&&f===0&&e.jsx(Je,{onClick:o=>{o.stopPropagation(),K(!0)},style:{color:p.get("icons",d),opacity:.4,fontSize:"24px",marginRight:"15px"}}),T&&e.jsx(Qe,{onClick:o=>{o.stopPropagation(),Ae()},style:{color:u,fontSize:"24px",marginRight:"15px"}}),e.jsx("div",{style:{width:"30px",height:"30px",borderRadius:"50%",border:f!==0?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:f===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:f===1&&e.jsx(we,{size:16,color:"#FFF"})})]}),h&&e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ie,{size:16,color:"#FF453A"})})]})]}),E&&e.jsxs(J.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[e.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:a?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),M.descr[m]&&e.jsx("div",{style:{color:G,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:M.descr[m]}),B?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:X?.map((o,c)=>e.jsxs(J.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"90%",padding:"14px 16px",borderRadius:"16px",backgroundColor:a?"#FFFFFF":"rgba(255,255,255,0.05)",border:a?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:a?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[e.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:o.isDone?a?"#AEAEB2":"#636366":I,textDecoration:o.isDone?"line-through":"none"},children:o.text}),Z&&te===c&&e.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[e.jsx(Se,{onClick:()=>g(A=>({...A,show:!0,type:2,hId:t,gId:c,setGoals:V})),style:{fontSize:"14px",margin:"0 6px",color:p.get("icons",d),opacity:.7}}),e.jsx(je,{onClick:()=>g(A=>({...A,show:!0,type:3,hId:t,gId:c,setGoals:V})),style:{fontSize:"14px",margin:"0 6px",color:p.get("icons",d),opacity:.7}})]}),e.jsx("div",{onClick:()=>{ee(A=>!(A&&te===c)),le(c),b(t)},children:e.jsx(_e,{style:{fontSize:"16px",color:p.get("icons",d),opacity:.4,marginRight:"12px"}})}),e.jsx("div",{onClick:()=>V(A=>{const ie=A.map((W,Pe)=>Pe===c?{...W,isDone:!W.isDone}:W);return x.choosenHabitsGoals[t]=ie,ie}),style:{width:"24px",height:"24px",borderRadius:"8px",border:o.isDone?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:o.isDone?u:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:o.isDone&&e.jsx(we,{size:12,color:"#FFF"})})]},c))}),e.jsxs("div",{onClick:()=>g({show:!0,type:1,hId:t,gId:0,setGoals:V}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${u}66`,backgroundColor:`${u}10`},children:[e.jsx(Ve,{style:{fontSize:"12px",color:u}}),e.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:u,fontWeight:"600"},children:m===0?"Добавить цель":"Add goal"})]}),e.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:p.get("subText",d),textTransform:"uppercase",letterSpacing:"0.5px"},children:m===0?"Достижения":"Achievements"}),x.choosenHabitsAchievements[t]?.map((o,c)=>e.jsx(ct,{index:c,milestone:o,habitId:t,isNegative:h,percent:k,theme:d,fSize:w,langIndex:m},c))]}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",marginBottom:"15px",fontSize:"12px",fontWeight:"600",color:p.get("subText",d),border:`2px dashed ${p.get("subText",d)}66`,padding:"12px",borderRadius:"16px"},children:m===0?"Микро цели и достижения с премиум":"Micro goals and achievements with premium"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"20px"},children:[e.jsx(Se,{onClick:()=>g(o=>({...o,show:!0,type:0,hId:t,gId:0,hInfo:n})),style:{fontSize:"18px",color:p.get("icons",d),opacity:.7}}),e.jsx(je,{onClick:()=>Re(t),style:{fontSize:"18px",color:p.get("icons",d),opacity:.7}}),e.jsx(Ye,{style:{fontSize:"18px",color:p.get("icons",d),opacity:.7},onClick:()=>{me()}})]})]}),q&&e.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:a?"#FFF":p.get("background",d)},onClick:o=>o.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[e.jsx("div",{style:{color:p.get("mainText",d),fontWeight:"bold"},children:lt(H)}),e.jsx(Ze,{style:{width:"50%",color:u},min:1,max:59,value:H/6e4,valueLabelDisplay:"off",onChange:o=>{ce(o.target.value*6e4),o.stopPropagation()}}),e.jsx(ue,{onClick:o=>{o.stopPropagation(),K(!1)},style:{cursor:"pointer",color:p.get("icons",d),fontSize:"24px"}}),e.jsx(he,{onClick:o=>{o.stopPropagation(),Ee(),K(!1)},style:{cursor:"pointer",color:u,fontSize:"24px"}})]})})]})}function it({text:t=["Имя","Name"],children:d,theme:g}){const[b,w]=r.useState(!0),y=g==="light"||g==="speciallight",l=x.prefs[0];return e.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[e.jsxs("div",{onClick:()=>{w(!b),re(ve)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:y?"#1D1D1F":p.get("mainText",g)},children:t[l]}),e.jsx(J.div,{animate:{rotate:b?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx($e,{size:14,color:y?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(Ne,{initial:!1,children:b&&e.jsx(J.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:d})})})]})}function at(t){return t===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function re(t){x.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),x.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function rt(t,d,g,b){const w=b?t:d-t,y=Math.floor(w/1e3),l=Math.floor(y/86400),v=Math.floor(y%86400/3600),f=Math.floor(y%3600/60),C=y%60;return l>0?l+(g===0?"дн.":"d"):v>0?v.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0"):f.toString().padStart(2,"0")+":"+C.toString().padStart(2,"0")}function lt(t){return Math.floor(t/6e4)+"m"}const ct=({milestone:t,index:d,habitId:g,theme:b,langIndex:w})=>{const y=x.choosenHabits.indexOf(g),l=x.choosenHabitsLastSkip[g],v=x.choosenHabitsStartDates[y],f=l||v,C=1440*60*1e3,m=f?Math.floor((Date.now()-f)/C):0,B=[30,50,100][d]||30,Y=m<B,j=B-m,M=w===0?`${j} days left to unlock`:`Осталось ${j} дн. до открытия`;return e.jsx("div",{style:{fontSize:"13px",color:p.get("subText",b),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:Y?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",opacity:.6},children:[e.jsx("div",{style:{width:"12px",height:"12px",border:`1px solid ${p.get("subText",b)}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"bold"},children:"i"}),e.jsx("span",{style:{fontSize:"11px"},children:M})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:12,color:p.get("icons",b),style:{opacity:.8}}),t[w]]})})};export{st as addHabitFn,mt as currentId,yt as default,lt as parsedTimeSimple,tt as removeHabitFn};
