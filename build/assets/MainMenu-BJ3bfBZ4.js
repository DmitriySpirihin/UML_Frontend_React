import{A as p,U,p as te,u as ie,t as ne,l as se,f as oe,v as ae,w as re,j as e,b as S,N as le,a as T,m as c,C as r,x as ce,y as de,z as pe,B as xe,D as ge,E as ue,G as fe,n as he,H as be,I as ye,J as me,K as Fe,i as we,L as ve,O as je}from"./index-CO40VCHR.js";import{r as a,R as Se}from"./recharts-k8ghPecL.js";import{getCurrentCycleAnalysis as ke}from"./TrainingAnaliticsMain-CauqHTnf.js";import"./Premium-jgKyTZaN.js";import{s as Ce}from"./PaymentService-BoMdGYyp.js";import"./TrainingAnaliticsTabs-W325K8jD.js";import"./index-lXPPbmID.js";const Oe=()=>{const[t,n]=a.useState(p.prefs[1]===0?"dark":"light"),[s,l]=a.useState(p.prefs[0]),[x,m]=a.useState(0),[h,b]=a.useState(0),[g,y]=a.useState(0),[d,v]=a.useState(!1),[k,R]=a.useState(""),[F,B]=a.useState(""),[D,$]=a.useState(""),[M,_]=a.useState(!1),[G,z]=a.useState(!1),[A,P]=a.useState(!1),[O,L]=a.useState(U.hasPremium),[Ae,V]=a.useState(U.isValidation),[N,C]=a.useState(!1);a.useEffect(()=>{if(!(localStorage.getItem("uml_guide_banner_seen_v1")==="1")){const f=setTimeout(()=>C(!0),450);return()=>clearTimeout(f)}},[]);const W=()=>{localStorage.setItem("uml_guide_banner_seen_v1","1"),C(!1)},Q=()=>{localStorage.setItem("uml_guide_banner_seen_v1","1"),C(!1),S("InfoPanel")},[u,j]=a.useState(p.menuCardsStates||{}),E=[{id:"MainCard",icon:null,title:"",subtitle:"",color:"#00ff6600"},{id:"HabitsMain",icon:e.jsx(pe,{}),title:s===0?"–ü—Ä–∏–≤—ã—á–∫–∏":"Habits",subtitle:s===0?"–¢—Ä–µ–∫–µ—Ä –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã":"Discipline tracker",color:"#FFD700"},{id:"TrainingMain",icon:e.jsx(xe,{}),title:s===0?"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏":"Workout",subtitle:s===0?"–î–Ω–µ–≤–Ω–∏–∫ —Å–∏–ª—ã":"Gym diary",color:"#FF4D4D"},{id:"MentalMain",icon:e.jsx(ge,{}),title:s===0?"–ú–æ–∑–≥":"Brain",subtitle:s===0?"–†–∞–∑–≤–∏—Ç–∏–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞":"Intelligence",color:"#4DA6FF"},{id:"RecoveryMain",icon:e.jsx(ue,{}),title:s===0?"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ":"Recovery",subtitle:s===0?"–ú–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏ –æ—Ç–¥—ã—Ö":"Meditation & Rest",color:"#4DFF88"},{id:"SleepMain",icon:e.jsx(fe,{}),title:s===0?"–°–æ–Ω":"Sleep",subtitle:s===0?"–ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞":"Quality analysis",color:"#A64DFF"},{id:"ToDoMain",icon:e.jsx(he,{}),title:s===0?"–ó–∞–¥–∞—á–∏":"To-Do",subtitle:s===0?"–°–ø–∏—Å–æ–∫ –¥–µ–ª":"Task list",color:"#FFA64D"}];a.useEffect(()=>{p.menuCardsStates&&Object.keys(p.menuCardsStates).length>0&&j(p.menuCardsStates)},[]),a.useEffect(()=>{Object.keys(u).length>0&&(p.menuCardsStates=u,(async()=>{try{await de(),console.log("Menu states saved successfully")}catch(o){console.error("Failed to save menu states",o)}})())},[u]),a.useEffect(()=>{const i=te.subscribe(L),o=ie.subscribe(V);return()=>{i.unsubscribe(),o.unsubscribe()}},[]),a.useEffect(()=>{const i=ne.subscribe(n),o=se.subscribe(I=>{l(I==="ru"?0:1)}),f=oe.subscribe(m);return()=>{i.unsubscribe(),o.unsubscribe(),f.unsubscribe()}},[]),a.useEffect(()=>{const i=ae.subscribe(R),o=re.subscribe(_);return()=>{i.unsubscribe(),o.unsubscribe()}},[]),a.useEffect(()=>{M&&(z(!1),v(!0))},[M]);const H=i=>{i?y(g+1):b(h+1),h===8&&g===4&&(z(!0),b(0),y(0))},Y=i=>{i.length===16&&me(i)},J=i=>{j(o=>({...o,[i]:{...o[i],pinned:!o[i]?.pinned,hidden:o[i]?.hidden||!1}}))},K=i=>{j(o=>({...o,[i]:{...o[i],hidden:!0,pinned:!1}}))},X=()=>{j(i=>{const o={...i};return Object.keys(o).forEach(f=>{o[f]={...o[f],hidden:!1}}),o})},q=(()=>{let i=[...E];return i=i.filter(o=>!u[o.id]?.hidden),i.sort((o,f)=>{const I=u[o.id]?.pinned?1:0;return(u[f.id]?.pinned?1:0)-I}),i})(),Z=E.some(i=>u[i.id]?.hidden),ee={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.09}}};return e.jsxs(e.Fragment,{children:[d&&e.jsxs("div",{style:{position:"absolute",display:"flex",alignItems:"center",flexDirection:"column",top:"10vh",left:"0",width:"100vw",height:"40vh",backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e4},children:[e.jsx("div",{style:{display:"flex",overflowY:"scroll",borderRadius:"12px",width:"85vw",height:"15vh",fontSize:"12px",fontFamily:"Segoe UI",border:"1px solid #333",color:"white",padding:"10px"},children:k}),e.jsx("textarea",{style:{borderRadius:"12px",width:"85vw",height:"10vh",fontSize:"12px",background:"#111",color:"white",marginTop:"10px"},value:D,onChange:i=>$(i.target.value)}),e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"10px"},children:[e.jsx("input",{style:{borderRadius:"12px",width:"50vw",height:"3vh",background:"#222",color:"white"},type:"text",onChange:i=>B(i.target.value)}),e.jsx("button",{onClick:()=>{F==="TrainingMain"?S("TrainingMain"):le.sendMessage(F,D)},children:"Submit"})]}),e.jsx("button",{onClick:()=>v(!1),style:{marginTop:"10px"},children:"Close"})]}),e.jsx(ze,{isOpen:A,onClose:()=>P(!1),onSend:Ce,theme:t,lang:s}),e.jsx(T,{children:N&&!d&&!A&&e.jsxs(e.Fragment,{children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:W,style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.62)",backdropFilter:"blur(6px)",zIndex:1500}}),e.jsxs(c.div,{initial:{y:40,opacity:0,scale:.98},animate:{y:0,opacity:1,scale:1},exit:{y:40,opacity:0,scale:.98},transition:{type:"spring",damping:22,stiffness:260},style:{position:"fixed",left:"5%",top:"18%",transform:"translateX(-50%)",width:"92%",maxWidth:"520px",borderRadius:"26px",overflow:"hidden",zIndex:1501,border:`1px solid ${r.get("border",t)}55`,background:t==="dark"?"rgba(20,20,20,0.82)":"rgba(255,255,255,0.88)",boxShadow:t==="dark"?"0 30px 80px rgba(0,0,0,0.65)":"0 25px 70px rgba(0,0,0,0.18)"},children:[e.jsx("div",{style:{position:"absolute",inset:"-120px -80px auto -80px",height:"260px",background:"radial-gradient(circle at 45% 45%, rgba(77,166,255,0.35), transparent 60%)",filter:"blur(2px)",pointerEvents:"none"}}),e.jsxs("div",{style:{position:"relative",padding:"18px 18px 16px 18px"},children:[e.jsxs("div",{style:{display:"flex",gap:"14px",alignItems:"center"},children:[e.jsx("img",{src:"images/bro.png",alt:"Guide",style:{width:92,height:92,objectFit:"contain",filter:t==="dark"?"drop-shadow(0 16px 22px rgba(0,0,0,0.55))":"drop-shadow(0 12px 18px rgba(0,0,0,0.16))"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontFamily:"Segoe UI",fontWeight:900,fontSize:18,color:r.get("mainText",t),letterSpacing:"0.2px",marginBottom:6},children:s===0?"–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç":"Quick start"}),e.jsx("div",{style:{fontFamily:"Segoe UI",fontWeight:700,fontSize:13,lineHeight:1.35,color:r.get("subText",t),opacity:t==="dark"?.85:.8},children:s===0?"–•–æ—á–µ—à—å –∑–∞ 30 —Å–µ–∫—É–Ω–¥ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç? –Ø –ø–æ–∫–∞–∂—É.":"Want to understand everything in 30 seconds? I‚Äôll show you."})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:14},children:[e.jsx(c.button,{whileTap:{scale:.97},onClick:Q,style:{flex:1,padding:"12px 14px",borderRadius:"16px",border:"none",cursor:"pointer",fontWeight:900,fontFamily:"Segoe UI",background:"#007AFF",color:"#fff"},children:s===0?"–û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é":"Open guide"}),e.jsx(c.button,{whileTap:{scale:.97},onClick:W,style:{padding:"12px 14px",borderRadius:"16px",border:`1px solid ${r.get("border",t)}55`,cursor:"pointer",fontWeight:800,fontFamily:"Segoe UI",background:"transparent",color:r.get("subText",t)},children:s===0?"–ü–æ–∑–∂–µ":"Later"})]})]})]})]})}),e.jsxs("div",{style:w(t).container,children:[e.jsx("div",{style:{height:"16vh"}}),G&&e.jsx("input",{style:{width:"85vw",height:"2vh",fontSize:"12px",borderRadius:"12px",zIndex:1001,marginBottom:"10px"},type:"password",onChange:i=>Y(i.target.value)}),e.jsxs("div",{style:w(t).scrollView,children:[e.jsx("div",{style:{height:"2vh",width:"100%"},onClick:()=>{H(!0)}}),e.jsx(c.div,{variants:ee,initial:"hidden",animate:"show",style:w(t).grid,children:e.jsx(T,{mode:"popLayout",children:q.map((i,o)=>e.jsx(Re,{item:i,theme:t,hasPremium:O,index:o,fSize:x,lang:s,isPinned:u[i.id]?.pinned,onPin:()=>J(i.id),onHide:()=>K(i.id),setShowReferralModal:P},i.id))})}),Z&&e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},onClick:X,style:{marginTop:"20px",padding:"10px 20px",display:"flex",alignItems:"center",gap:"8px",background:r.get("simplePanel",t),borderRadius:"20px",cursor:"pointer",fontSize:"12px",color:r.get("subText",t)},children:[e.jsx(ce,{})," ",s===0?"–í–µ—Ä–Ω—É—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã":"Restore hidden sections"]}),e.jsx("div",{style:{height:"10vh",width:"100%"},onClick:()=>{H(!1)}})]})]})]})};function Ie({theme:t,lang:n,onClick:s}){const l=t==="dark";return e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileTap:{scale:.96},onClick:s,style:{width:"88%",height:"78%",borderRadius:"16px",background:l?"rgba(0, 229, 255, 0.08)":"#FFFFFF",border:`1px solid ${l?"rgba(0, 229, 255, 0.3)":"rgba(0, 229, 255, 0.5)"}`,margin:"5px",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",position:"relative",overflow:"hidden"},children:[e.jsx(je,{size:18,color:"#00E5FF"}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"600",fontSize:"15px",color:l?"#E0F7FA":"#333",letterSpacing:"0.3px"},children:n===0?"AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç":"AI Assistant"})]})}function Te({theme:t,lang:n,onClick:s}){const l=t==="dark";return e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileTap:{scale:.96},onClick:s,style:{width:"88%",height:"78%",borderRadius:"16px",background:l?"rgba(242, 255, 0, 0.08)":"#FFFFFF",border:`1px solid ${l?"rgba(255, 238, 0, 0.3)":"rgba(255, 247, 0, 0.5)"}`,margin:"5px",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",position:"relative",overflow:"hidden"},children:[e.jsx(ve,{size:18,color:"#ffd500"}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"600",fontSize:"15px",color:l?"#E0F7FA":"#333",letterSpacing:"0.3px"},children:n===0?"–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞":"Invite a friend"})]})}function Re({item:t,theme:n,index:s,fSize:l,lang:x,isPinned:m,onPin:h,onHide:b,setShowReferralModal:g}){const y=Me(s-1),d=n==="dark",v={position:"relative",width:"100%",height:t.icon?"80px":"50px",display:"flex",alignItems:"center",padding:t.icon?"0 20px":"0px",boxSizing:"border-box",borderRadius:t.icon?"24px":"0px",overflow:"hidden",marginBottom:"12px",backgroundColor:t.icon?d?r.get("simplePanel",n)+"99":"#FFFFFF":"transparent",backdropFilter:t.icon&&d?"blur(40px)":"none",border:t.icon?m?`1px solid ${t.color}`:`1px solid ${d?r.get("border",n)+"30":"#E5E7EB"}`:"none",boxShadow:t.icon?d?"0 8px 20px 0 rgba(0, 0, 0, 0.4)":"0 4px 10px rgba(0, 0, 0, 0.04)":"none"},k={width:"48px",height:"48px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",flexShrink:0,backgroundColor:d?r.get("background",n)+"80":r.get("background",n),color:t.color,border:d?"1px solid rgba(255,255,255,0.05)":"1px solid rgba(0,0,0,0.03)"};return e.jsx(c.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,x:-100,height:0,marginBottom:0},whileTap:{scale:.97},drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(R,{offset:F})=>{F.x<-80&&(b(),window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")),F.x>80&&(h(),window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("medium"))},onClick:()=>{t.icon!==null&&(S(t.id),De(null))},style:v,children:t.icon?e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[e.jsx("div",{style:k,children:Se.cloneElement(t.icon,{size:22})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",flexGrow:1,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx("h4",{style:{...w(n,l).title,color:r.get("mainText",n),margin:0,fontWeight:d?"900":"700"},children:t.title}),m&&e.jsx(Fe,{size:12,color:t.color,style:{transform:"rotate(45deg)"}})]}),e.jsx("div",{style:{...w(n,l).subtitle,color:r.get("subText",n),opacity:d?.6:.8},children:t.subtitle})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",marginLeft:"8px"},children:[y!==""&&e.jsx("div",{style:{padding:"4px 10px",backgroundColor:d?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",borderRadius:"12px",fontSize:"13px",fontWeight:"700",color:r.get("mainText",n),marginRight:"8px"},children:y}),e.jsx(we,{size:14,color:r.get("subText",n),style:{opacity:.3}})]})]}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignContent:"center",justifyItems:"center"},children:[e.jsx(Te,{theme:n,lang:x,onClick:()=>g(!0)}),e.jsx(Ie,{theme:n,lang:x,onClick:()=>{S("RobotMain")}})]})})}const w=(t,n)=>({container:{backgroundColor:r.get("background",t),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflow:"hidden"},scrollView:{width:"100vw",maxHeight:"90vh",overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"},grid:{width:"92%",display:"flex",flexDirection:"column",gap:"4px",marginTop:"5px"},title:{fontFamily:"Segoe UI",fontSize:n===0?"19px":"21px",letterSpacing:"0.2px"},subtitle:{fontFamily:"Segoe UI",fontWeight:"500",fontSize:n===0?"12px":"14px",marginTop:"2px"},text:{fontFamily:"Segoe UI",fontSize:n===0?"10px":"12px",color:r.get("subText",t)},mainText:{fontFamily:"Segoe UI",fontSize:n===0?"14px":"16px",color:r.get("mainText",t)}});function De(t){p.prefs[2]==0,p.prefs[3]==0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function Me(t){if(t===0)return p.choosenHabits.length>0?p.choosenHabits.length:"";if(t===1){const n=ke().currentTonnage;return n>0?(n/1e3).toFixed(1)+(p.prefs[0]===0?"—Ç":"t"):""}return""}const ze=({isOpen:t,onClose:n,onSend:s,theme:l,lang:x})=>{const h=l==="dark"?r.get("simplePanel",l):"#FFFFFF",b=r.get("mainText",l),g=r.get("subText",l);return e.jsx(T,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:2e3}}),e.jsxs(c.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:h,borderTopLeftRadius:"32px",borderTopRightRadius:"32px",padding:"24px",zIndex:2001,boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"5px",borderRadius:"10px",backgroundColor:g,opacity:.3,marginBottom:"20px"}}),e.jsx(c.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",boxShadow:"0 10px 20px rgba(255, 215, 0, 0.3)"},children:e.jsx(be,{size:40,color:"#FFF"})}),e.jsx("h2",{style:{fontFamily:"Segoe UI",fontSize:"24px",fontWeight:"800",color:b,margin:"0 0 10px 0",textAlign:"center"},children:x===0?"–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞":"Invite a Friend"}),e.jsx("p",{style:{fontFamily:"Segoe UI",fontSize:"15px",fontWeight:"500",color:g,margin:"0 0 30px 0",textAlign:"center",lineHeight:"1.5",maxWidth:"90%"},children:x===0?"–û—Ç–ø—Ä–∞–≤—å —Å—Å—ã–ª–∫—É –¥—Ä—É–≥—É. –ö–æ–≥–¥–∞ –æ–Ω –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—Å—è, –≤—ã –æ–±–∞ –ø–æ–ª—É—á–∏—Ç–µ 1 –º–µ—Å—è—Ü Premium –±–µ—Å–ø–ª–∞—Ç–Ω–æ! –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥—Ä—É–≥ + 1 –º–µ—Å—è—Ü Premium –±–µ—Å–ø–ª–∞—Ç–Ω–æ! üéÅ":"Send a link to a friend. When they join, you both get 1 month of Premium for free! Each new friend + 1 month of Premium for free! üéÅ"}),e.jsxs("div",{style:{width:"100%",display:"flex",gap:"12px",flexDirection:"column"},children:[e.jsxs(c.button,{whileTap:{scale:.96},onClick:()=>{s(),n()},style:{width:"100%",padding:"16px",borderRadius:"16px",border:"none",background:"#007AFF",color:"#FFF",fontSize:"16px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(ye,{size:20}),x===0?"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ":"Send Invitation"]}),e.jsx(c.button,{whileTap:{scale:.96},onClick:n,style:{width:"100%",padding:"14px",borderRadius:"16px",border:"none",background:"transparent",color:g,fontSize:"15px",fontWeight:"600",cursor:"pointer"},children:x===0?"–ü–æ–∑–∂–µ":"Maybe later"})]})]})]})})};export{Oe as default};
