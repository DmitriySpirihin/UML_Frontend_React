import{V as se,W as re,X as oe,Y as J,r as B,Z as ie,$ as ue,a0 as ce,a1 as le,a2 as fe,a3 as me,a4 as P,a5 as pe,a6 as de,a7 as ye,a8 as ge,a9 as Q,aa as he,ab as Se,ac as Ve,ad as Ae,ae as Ee,af as ve,ag as be,ah as xe,ai as Me,aj as De,ak as F,al as Te,am as Ce,an as Ie,ao as Oe}from"./index-CWcUU8hV.js";function we(e,t=100,n){const a=n({...e,keyframes:[0,t]}),s=Math.min(se(a),re);return{type:"keyframes",ease:r=>a.next(s*r).value/t,duration:oe(s)}}function Ge(e){const t=J(()=>ue(e)),{isStatic:n}=B.useContext(ie);if(n){const[,a]=B.useState(e);B.useEffect(()=>t.on("change",a),[])}return t}function q(e,t){const n=Ge(t()),a=()=>n.set(t());return a(),ce(()=>{const s=()=>le.preRender(a,!1,!0),r=e.map(o=>o.on("change",s));return()=>{r.forEach(o=>o()),fe(a)}}),n}const Le=e=>e&&typeof e=="object"&&e.mix,je=e=>Le(e)?e.mix:void 0;function Fe(...e){const t=!Array.isArray(e[0]),n=t?0:-1,a=e[0+n],s=e[1+n],r=e[2+n],o=e[3+n],u=me(s,r,{mixer:je(r[0]),...o});return t?u(a):u}function Ke(e){P.current=[],e();const t=q(P.current,e);return P.current=void 0,t}function ot(e,t,n,a){if(typeof e=="function")return Ke(e);const s=typeof t=="function"?t:Fe(t,n,a);return Array.isArray(e)?X(e,s):X([e],([r])=>s(r))}function X(e,t){const n=J(()=>[]);return q(e,()=>{n.length=0;const a=e.length;for(let s=0;s<a;s++)n[s]=e[s].get();return t(n)})}const Ne=(e,t,n)=>{const a=t-e;return((n-e)%a+a)%a+e};function ee(e,t){return pe(e)?e[Ne(0,e.length,t)]:e}function R(e){return typeof e=="object"&&!Array.isArray(e)}function te(e,t,n,a){return typeof e=="string"&&R(t)?de(e,n,a):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function Be(e,t,n){return e*(t+1)}function Y(e,t,n,a){var s;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:(s=a.get(t))!==null&&s!==void 0?s:e}function Pe(e,t,n){for(let a=0;a<e.length;a++){const s=e[a];s.at>t&&s.at<n&&(ge(e,s),a--)}}function Re(e,t,n,a,s,r){Pe(e,s,r);for(let o=0;o<t.length;o++)e.push({value:t[o],at:ye(s,r,a[o]),easing:ee(n,o)})}function We(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function ke(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const ze="easeInOut";function _e(e,{defaultTransition:t={},...n}={},a,s){const r=t.duration||.3,o=new Map,u=new Map,E={},v=new Map;let M=0,c=0,w=0;for(let b=0;b<e.length;b++){const p=e[b];if(typeof p=="string"){v.set(p,c);continue}else if(!Array.isArray(p)){v.set(p.name,Y(c,p.at,M,v));continue}let[A,d,l={}]=p;l.at!==void 0&&(c=Y(c,l.at,M,v));let f=0;const x=(y,g,S,D=0,T=0)=>{const i=He(y),{delay:K=0,times:h=he(i),type:N="keyframes",repeat:G,repeatType:at,repeatDelay:st=0,...ae}=g;let{ease:V=t.ease||"easeOut",duration:m}=g;const W=typeof K=="function"?K(D,T):K,k=i.length,z=Ve(N)?N:s?.[N];if(k<=2&&z){let C=100;if(k===2&&Ye(i)){const I=i[1]-i[0];C=Math.abs(I)}const L={...ae};m!==void 0&&(L.duration=Ae(m));const j=we(L,C,z);V=j.ease,m=j.duration}m??(m=r);const _=c+W;h.length===1&&h[0]===0&&(h[1]=1);const H=h.length-i.length;if(H>0&&Se(h,H),i.length===1&&i.unshift(null),G){m=Be(m,G);const C=[...i],L=[...h];V=Array.isArray(V)?[...V]:[V];const j=[...V];for(let I=0;I<G;I++){i.push(...C);for(let O=0;O<C.length;O++)h.push(L[O]+(I+1)),V.push(O===0?"linear":ee(j,O-1))}We(h,G)}const U=_+m;Re(S,i,V,h,_,U),f=Math.max(W+m,f),w=Math.max(U,w)};if(Q(A)){const y=Z(A,u);x(d,l,$("default",y))}else{const y=te(A,d,a,E),g=y.length;for(let S=0;S<g;S++){d=d,l=l;const D=y[S],T=Z(D,u);for(const i in d)x(d[i],Ue(l,i),$(i,T),S,g)}}M=c,c+=f}return u.forEach((b,p)=>{for(const A in b){const d=b[A];d.sort(ke);const l=[],f=[],x=[];for(let g=0;g<d.length;g++){const{at:S,value:D,easing:T}=d[g];l.push(D),f.push(Ee(0,w,S)),x.push(T||"easeOut")}f[0]!==0&&(f.unshift(0),l.unshift(l[0]),x.unshift(ze)),f[f.length-1]!==1&&(f.push(1),l.push(null)),o.has(p)||o.set(p,{keyframes:{},transition:{}});const y=o.get(p);y.keyframes[A]=l,y.transition[A]={...t,duration:w,ease:x,times:f,...n}}}),o}function Z(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function $(e,t){return t[e]||(t[e]=[]),t[e]}function He(e){return Array.isArray(e)?e:[e]}function Ue(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const Xe=e=>typeof e=="number",Ye=e=>e.every(Xe);function Ze(e,t){return e in t}class $e extends ve{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(Ze(n,t)){const a=t[n];if(typeof a=="string"||typeof a=="number")return a}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return be()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function Je(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=xe(e)?new Me(t):new De(t);n.mount(e),F.set(e,n)}function Qe(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new $e(t);n.mount(e),F.set(e,n)}function qe(e,t){return Q(e)||typeof e=="number"||typeof e=="string"&&!R(t)}function ne(e,t,n,a){const s=[];if(qe(e,t))s.push(Te(e,R(t)&&t.default||t,n&&(n.default||n)));else{const r=te(e,t,a),o=r.length;for(let u=0;u<o;u++){const E=r[u],v=E instanceof Element?Je:Qe;F.has(E)||v(E);const M=F.get(E),c={...n};"delay"in c&&typeof c.delay=="function"&&(c.delay=c.delay(u,o)),s.push(...Ce(M,{...t,transition:c},{}))}}return s}function et(e,t,n){const a=[];return _e(e,t,n,{spring:Ie}).forEach(({keyframes:r,transition:o},u)=>{a.push(...ne(u,r,o))}),a}function tt(e){return Array.isArray(e)&&e.some(Array.isArray)}function nt(e){function t(n,a,s){let r=[];return tt(n)?r=et(n,a,e):r=ne(n,a,s,e),new Oe(r)}return t}const it=nt();export{ot as a,it as b,Ge as u};
