import{C as i,j as e,b7 as tt,M as X,b8 as nt,a2 as _,A as k,y as Lt,b9 as Ne,a6 as Oe,ba as Ue,t as we,l as Ht,f as Kt,aP as Nt,bb as Ot,o as Ut,ah as _e,bc as _t,bd as Yt,be as Vt,a as Gt,b6 as Xt,U as Ye}from"./index-DKaEAu_V.js";import{r as l,R as qt}from"./recharts-k8ghPecL.js";import{r as Jt,g as Qt,f as it,c as Zt,e as en,h as Ve,i as Ge,j as tn,k as nn,l as sn,m as on}from"./TrainingLogHelper-BIK1-pQg.js";import{b as rn,c as ln,d as Xe,e as an,f as qe,g as dn,h as cn,i as xn}from"./index-Bc7HJHqd.js";import{a as pn}from"./index-CnqHGQ9p.js";import{S as fe}from"./Slider-BrqKUli7.js";import gn from"./TrainingExercise-6Dqr9aMp.js";import{a as fn,T as hn}from"./TimerOffTwoTone-wCVkIj1n.js";import{S as W}from"./ScrollPicker-C4J6xhud.js";import"./index-BRoKao-L.js";const un=({theme:t,langIndex:d,setTime:s,setShowPanel:g})=>{const[o,m]=l.useState(0),[a,v]=l.useState(6e4),[c,b]=l.useState(0),[x,f]=l.useState(!1),[p,j]=l.useState(!1),C=185,P=15,S=C-P*2,A=S*2*Math.PI;l.useEffect(()=>{b(Math.min(o/a,1))},[o,a]),l.useEffect(()=>{if(!x)return;const D=setInterval(()=>{m(T=>T+100)},100);return()=>clearInterval(D)},[x]);const q=()=>{m(0),f(!1)},U=()=>{f(!1),s(o),g(!1)},$=()=>{f(!1),g(!1)},h=jn(t),y=bn(t,c);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:h.backdrop,onClick:$}),e.jsxs("div",{style:h.drawer,children:[e.jsxs("div",{style:h.header,children:[e.jsx("div",{style:h.headerBtn,onClick:p?()=>j(!1):$,children:p?e.jsx(tt,{}):e.jsx(X,{})}),e.jsx("div",{style:h.handleBar}),e.jsx("div",{style:h.headerBtn,onClick:()=>j(!p),children:e.jsx(nt,{style:{opacity:p?1:.6}})})]}),e.jsx("div",{style:h.contentContainer,children:p?e.jsxs("div",{style:h.settingsPanel,children:[e.jsx("div",{style:h.sectionTitle,children:d===0?"Настройки таймера":"Timer Settings"}),e.jsxs("div",{style:h.settingBox,children:[e.jsxs("div",{style:h.label,children:[e.jsx("span",{style:{opacity:.7,fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px"},children:d===0?"Цель":"Target Time"}),e.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",color:i.get("mainText",t),marginTop:"5px"},children:[Math.floor(a/6e4),":",Math.floor(a%6e4/1e3).toString().padStart(2,"0")]})]}),e.jsx(fe,{style:h.slider,min:30,max:3600,step:30,value:a/1e3,valueLabelDisplay:"off",onChange:(D,T)=>{v(T*1e3)}})]})]}):e.jsxs("div",{style:h.mainPanel,children:[e.jsxs("div",{style:h.circleContainer,children:[e.jsxs("svg",{height:C*2,width:C*2,style:{overflow:"visible"},children:[e.jsx("circle",{stroke:i.get("progressBar",t),strokeOpacity:"0.1",fill:"transparent",strokeWidth:P,strokeLinecap:"round",r:S,cx:C,cy:C}),e.jsx("circle",{stroke:y,fill:"transparent",strokeWidth:P,strokeLinecap:"round",strokeDasharray:A+" "+A,style:{strokeDashoffset:A-c*A,transition:"stroke-dashoffset 0.1s linear, stroke 0.5s ease",filter:`drop-shadow(0 0 15px ${y}) drop-shadow(0 0 5px ${y})`},r:S,cx:C,cy:C,transform:`rotate(-90 ${C} ${C})`})]}),e.jsxs("div",{style:h.centerTextContainer,children:[o>0&&e.jsx("div",{style:{...h.smallTimerText,color:y},children:mn(o,a)}),e.jsx("div",{style:{...h.bigTimerText,color:i.get("mainText",t),textShadow:`0 0 25px ${y}66`},children:yn(o)})]})]}),e.jsxs("div",{style:h.controlsContainer,children:[e.jsx("button",{onClick:q,style:{...h.iconButton,...h.secondaryBtn},children:e.jsx(pn,{style:{fontSize:"24px"}})}),e.jsx("button",{onClick:()=>f(!x),style:{...h.iconButton,...h.primaryBtn,backgroundColor:x?i.get("skipped",t):i.get("done",t),boxShadow:`0 0 20px ${x?i.get("skipped",t):i.get("done",t)}66`},children:x?e.jsx(rn,{style:{fontSize:"28px",color:"#fff"}}):e.jsx(ln,{style:{fontSize:"28px",color:"#fff",marginLeft:"4px"}})}),e.jsx("button",{onClick:U,style:{...h.iconButton,...h.secondaryBtn},children:e.jsx(_,{style:{fontSize:"28px",color:i.get("done",t)}})})]})]})})]})]})};function yn(t){t<0&&(t=0);const d=Math.floor(t/1e3),s=Math.floor(d/60),g=d%60;return`${s}:${g.toString().padStart(2,"0")}`}function mn(t,d){if(t<0&&(t=0),d<=0)return"";const s=d-t,g=Math.floor(Math.abs(s)/1e3),o=Math.floor(g/60),m=g%60,a=`${o}:${m.toString().padStart(2,"0")}`;return s>=0?`-${a}`:`+${a}`}const bn=(t,d)=>d<.5?i.get("skipped",t):d<.99?i.get("difficulty",t):i.get("done",t),jn=t=>({backdrop:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(3px)",zIndex:998},drawer:{position:"fixed",bottom:0,left:0,width:"100%",height:"85vh",backgroundColor:i.get("bottomPanel",t),borderTopLeftRadius:"30px",borderTopRightRadius:"30px",boxShadow:"0 -10px 40px rgba(0,0,0,0.5)",zIndex:999,display:"flex",flexDirection:"column",alignItems:"center"},header:{width:"100%",height:"60px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px",boxSizing:"border-box"},handleBar:{width:"50px",height:"5px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"3px"},headerBtn:{fontSize:"24px",color:i.get("icons",t),cursor:"pointer",padding:"10px"},contentContainer:{width:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"30px",overflowY:"auto"},mainPanel:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"40px"},circleContainer:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"-20px"},centerTextContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},smallTimerText:{fontSize:"18px",fontWeight:"600",marginBottom:"5px",opacity:.9},bigTimerText:{fontSize:"56px",fontWeight:"bold",fontFamily:"monospace",letterSpacing:"-2px"},controlsContainer:{display:"flex",alignItems:"center",gap:"30px"},iconButton:{borderRadius:"50%",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.1s ease"},primaryBtn:{width:"90px",height:"90px"},secondaryBtn:{width:"60px",height:"60px",backgroundColor:"rgba(255,255,255,0.05)",color:i.get("icons",t),border:"1px solid rgba(255,255,255,0.05)"},settingsPanel:{width:"90%",display:"flex",flexDirection:"column",gap:"20px",paddingTop:"20px"},sectionTitle:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"2px",color:i.get("icons",t),textAlign:"center",opacity:.6},settingBox:{backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"20px",padding:"25px",display:"flex",flexDirection:"column",alignItems:"center",gap:"15px"},label:{display:"flex",flexDirection:"column",alignItems:"center"},slider:{width:"100%",height:8,color:i.get("difficulty",t)}}),ee=[50,25,20,15,10,5,2.5,1.25],Sn=({theme:t,langIndex:d,fSize:s,setShowCalculator:g})=>{const[o,m]=l.useState(k.ownPlates),[a,v]=l.useState(k.platesAmount),[c,b]=l.useState(k.barWeight),[x,f]=l.useState(40),[p,j]=l.useState([]),[C,P]=l.useState(""),[S,A]=l.useState(!1),[q,U]=l.useState(!1),$=l.useMemo(()=>{const D=o.reduce((T,F,G)=>T+(F?a[G]*ee[G]:0),0);return c+D},[c,o,a]);l.useEffect(()=>{x>$&&f($)},[$,x]),l.useEffect(()=>{const D=(x-c)/2;if(D<0){j([]),P(d===0?"Вес меньше грифа":"Weight < Bar"),U(!0);return}let T=D;const F=[],G=ee.map((w,L)=>o[L]?a[L]/2:0);for(let w=0;w<ee.length;w++){const L=ee[w];for(;T>=L-.001&&G[w]>0;)F.push(L),T-=L,G[w]--}if(j(F),T>.01){const w=T.toFixed(2);P(d===0?`Не хватает: ${w} кг / сторона`:`Missing: ${w} kg / side`),U(!0)}else if(U(!1),F.length===0)P(d===0?"Пустой гриф":"Empty Bar");else{const w={};F.forEach(H=>{w[H]=(w[H]||0)+1});const L=Object.entries(w).sort((H,E)=>parseFloat(E[0])-parseFloat(H[0])).map(([H,E])=>E>1?`${E}x${H}`:`${H}`).join(" + ");P(`${L} / side`)}},[x,c,o,a,d]);const h=async()=>{k.ownPlates=o,k.platesAmount=a,k.barWeight=c,await Lt(),g(!1)},y=Tn(t,s,q);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:y.backdrop,onClick:h}),e.jsxs("div",{style:y.drawer,children:[e.jsxs("div",{style:y.header,children:[e.jsx("div",{style:y.headerBtn,onClick:S?()=>A(!1):h,children:S?e.jsx(tt,{}):e.jsx(X,{})}),e.jsx("div",{style:y.handleBar}),e.jsx("div",{style:y.headerBtn,onClick:()=>A(!S),children:e.jsx(nt,{style:{opacity:S?1:.6}})})]}),e.jsx("div",{style:y.contentContainer,children:S?e.jsx(wn,{theme:t,langIndex:d,barWeight:c,setBarWeight:b,ownPlates:o,setOwnPlates:m,platesAmount:a,setPlatesAmount:v,styles:y}):e.jsxs("div",{style:y.mainPanel,children:[e.jsxs("div",{style:y.visualizerSection,children:[e.jsx(Cn,{plates:p,barWeight:c,theme:t,styles:y}),e.jsx("div",{style:y.resultBadge,children:C})]}),e.jsxs("div",{style:y.pickerSection,children:[e.jsx(vn,{theme:t,value:x,min:c,max:$,step:2.5,onChange:f,styles:y}),e.jsxs("div",{style:y.maxWeightLabel,children:["MAX: ",$," kg"]})]}),e.jsx("div",{style:y.footerAction,children:e.jsx("button",{style:y.doneBtn,onClick:h,children:e.jsx(_,{size:28})})})]})})]})]})},vn=({theme:t,value:d,min:s,max:g,step:o,onChange:m,styles:a})=>{const v=l.useRef(null),c=50,b=l.useMemo(()=>{const f=[];for(let p=s;p<=g+.01;p+=o)f.push(Math.round(p*100)/100);return f},[s,g,o]),x=f=>{const p=f.target.scrollTop,j=Math.round(p/c);b[j]!==void 0&&b[j]!==d&&m(b[j])};return l.useEffect(()=>{if(v.current){const f=b.indexOf(d);if(f!==-1){const p=v.current.scrollTop,j=f*c;Math.abs(p-j)>c&&v.current.scrollTo({top:j,behavior:"smooth"})}}},[d,b]),e.jsxs("div",{style:a.drumContainer,children:[e.jsx("div",{style:a.drumHighlight}),e.jsxs("div",{ref:v,style:a.drumScrollArea,onScroll:x,children:[e.jsx("div",{style:{height:`${c*2}px`}}),b.map(f=>{const p=f===d;return e.jsxs("div",{style:{...a.drumItem,height:`${c}px`,color:p?i.get("mainText",t):i.get("icons",t),opacity:p?1:.3,transform:p?"scale(1.1)":"scale(0.9)",fontWeight:p?"bold":"normal"},children:[f," ",e.jsx("span",{style:{fontSize:"12px",marginLeft:"2px"},children:"kg"})]},f)}),e.jsx("div",{style:{height:`${c*2}px`}})]})]})},Cn=({plates:t,barWeight:d,theme:s,styles:g})=>e.jsxs("div",{style:g.barContainer,children:[e.jsx("div",{style:g.barShaft,children:e.jsx("div",{style:g.barWeightText,children:d})}),e.jsxs("div",{style:g.barSleeveContainer,children:[e.jsx("div",{style:g.barSleeveBase}),t.map((o,m)=>e.jsx("div",{style:kn(o,m),children:e.jsx("span",{style:g.plateText,children:o})},m)),e.jsx("div",{style:g.barClip})]})]}),wn=({theme:t,langIndex:d,barWeight:s,setBarWeight:g,ownPlates:o,setOwnPlates:m,platesAmount:a,setPlatesAmount:v,styles:c})=>e.jsxs("div",{style:c.settingsPanel,children:[e.jsx("div",{style:c.settingHeader,children:d===0?"Гриф":"Bar Weight"}),e.jsxs("div",{style:c.stepperRow,children:[e.jsx("div",{style:c.stepperBtn,onClick:()=>g(Math.max(0,s-2.5)),children:e.jsx(Ne,{})}),e.jsxs("span",{style:c.stepperValue,children:[s," ",e.jsx("small",{children:"kg"})]}),e.jsx("div",{style:c.stepperBtn,onClick:()=>g(s+2.5),children:e.jsx(Oe,{})})]}),e.jsx("div",{style:c.settingDivider}),e.jsx("div",{style:c.settingHeader,children:d===0?"Ваши блины":"Available Plates"}),e.jsx("div",{style:c.platesGrid,children:a.map((b,x)=>e.jsxs("div",{style:c.plateConfigItem,children:[e.jsx("div",{onClick:()=>m(f=>{const p=[...f];return p[x]=!p[x],p}),style:{...c.plateConfigCircle,backgroundColor:o[x]?st(ee[x]):"transparent",border:o[x]?"none":`2px solid ${i.get("icons",t)}`,opacity:o[x]?1:.4},children:ee[x]}),o[x]&&e.jsxs("div",{style:c.plateCountControls,children:[e.jsx(Ne,{size:10,onClick:()=>v(f=>{const p=[...f];return p[x]=Math.max(2,p[x]-2),p})}),e.jsx("span",{children:b}),e.jsx(Oe,{size:10,onClick:()=>v(f=>{const p=[...f];return p[x]=Math.min(30,p[x]+2),p})})]})]},x))})]}),st=t=>{switch(parseFloat(t)){case 50:return"#1ea035";case 25:return"#a42b2b";case 20:return"#173894";case 15:return"#f6b93b";case 10:return"#14aa87";case 5:return"#2496c4";case 2.5:return"#8f24c4";case 1.25:return"#c83131";default:return"#555"}},kn=(t,d,s)=>{const g=st(t),o={50:120,25:120,20:110,15:100,10:85,5:70,2.5:60,1.25:50},m={50:35,25:35,20:30,15:28,10:25,5:20,2.5:18,1.25:15};return{height:`${o[t]}px`,width:`${m[t]}px`,backgroundColor:g,borderRadius:"4px",marginRight:"2px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 0 8px rgba(0,0,0,0.3), 2px 2px 5px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",zIndex:10+d,position:"relative"}},Tn=(t,d,s)=>({backdrop:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(3px)",zIndex:998},drawer:{position:"fixed",bottom:0,left:0,width:"100%",maxHeight:"90vh",backgroundColor:i.get("bottomPanel",t),borderTopLeftRadius:"25px",borderTopRightRadius:"25px",boxShadow:"0 -10px 40px rgba(0,0,0,0.4)",zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden"},header:{height:"60px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px",borderBottom:"1px solid rgba(255,255,255,0.05)"},headerBtn:{padding:"10px",fontSize:"24px",color:i.get("icons",t),cursor:"pointer"},handleBar:{width:"40px",height:"4px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"2px"},contentContainer:{width:"100%",paddingBottom:"30px",flex:1,overflowY:"auto"},mainPanel:{display:"flex",flexDirection:"column",height:"100%",gap:"10px"},visualizerSection:{flex:1,minHeight:"180px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},barContainer:{display:"flex",alignItems:"center",padding:"0 20px"},barShaft:{width:"60px",height:"25px",backgroundColor:"#555",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},barWeightText:{color:"#fff",fontSize:"10px",opacity:.8},barSleeveContainer:{display:"flex",alignItems:"center"},barSleeveBase:{width:"5px",height:"35px",backgroundColor:"#777",borderRadius:"2px",marginRight:"1px"},barClip:{width:"5px",height:"25px",backgroundColor:"#444",marginLeft:"1px",borderRadius:"2px"},plateText:{fontSize:"9px",fontWeight:"bold",color:"rgba(255,255,255,0.9)",transform:"rotate(-90deg)",whiteSpace:"nowrap"},resultBadge:{marginTop:"15px",padding:"8px 16px",borderRadius:"20px",backgroundColor:s?"rgba(231, 76, 60, 0.2)":"rgba(255,255,255,0.08)",border:s?"1px solid #e74c3c":"none",color:s?"#e74c3c":i.get("mainText",t),fontSize:"14px",fontWeight:"600",transition:"all 0.3s ease"},pickerSection:{height:"250px",position:"relative",width:"100%",borderTop:"1px solid rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.05)",backgroundColor:"rgba(0,0,0,0.1)"},drumContainer:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},drumHighlight:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"50px",borderRadius:"12px",backgroundColor:"rgba(255,255,255,0.05)",borderTop:`1px solid ${i.get("done",t)}`,borderBottom:`1px solid ${i.get("done",t)}`,pointerEvents:"none",zIndex:10},drumScrollArea:{width:"100%",height:"100%",overflowY:"scroll",scrollSnapType:"y mandatory",scrollbarWidth:"none",msOverflowStyle:"none","::-webkit-scrollbar":{display:"none"}},drumItem:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",transition:"all 0.2s ease",scrollSnapAlign:"center",cursor:"pointer"},maxWeightLabel:{position:"absolute",bottom:"10px",right:"20px",fontSize:"10px",color:i.get("icons",t),opacity:.5,fontWeight:"bold",letterSpacing:"1px"},footerAction:{display:"flex",justifyContent:"center",padding:"10px"},doneBtn:{width:"60px",height:"60px",borderRadius:"50%",border:"none",backgroundColor:i.get("done",t),color:"#fff",boxShadow:"0 4px 15px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},settingsPanel:{padding:"20px"},settingHeader:{fontSize:"12px",textTransform:"uppercase",color:i.get("icons",t),marginBottom:"10px",letterSpacing:"1px"},stepperRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:"20px",backgroundColor:"rgba(255,255,255,0.03)",padding:"15px",borderRadius:"16px"},stepperBtn:{width:"40px",height:"40px",borderRadius:"50%",border:"none",backgroundColor:"rgba(255,255,255,0.1)",color:i.get("mainText",t),cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},stepperValue:{fontSize:"20px",fontWeight:"bold",color:i.get("mainText",t),minWidth:"80px",textAlign:"center"},settingDivider:{height:"1px",backgroundColor:"rgba(255,255,255,0.05)",margin:"20px 0"},platesGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"15px"},plateConfigItem:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},plateConfigCircle:{width:"75px",height:"75px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"12px",color:"#fff",cursor:"pointer",transition:"transform 0.1s"},plateCountControls:{display:"flex",alignItems:"center",gap:"8px",color:i.get("mainText",t),fontSize:"16px",backgroundColor:"rgba(255,255,255,0.05)",padding:"2px 5px",borderRadius:"10px",marginBottom:"30px"}}),zn=new Audio("Audio/Timer.wav"),Bn=Array.from({length:20},(t,d)=>d+1),xe=Array.from({length:102},(t,d)=>d+1),Je=Array.from({length:500},(t,d)=>d),Qe=[0,.25,.5,.75],Ze=Array.from({length:60},(t,d)=>d),et=Array.from({length:12},(t,d)=>d*5),Nn=()=>{const[t,d]=qt.useState("dark"),[s,g]=l.useState(k.prefs[0]),[o,m]=l.useState(k.prefs[4]),[a,v]=l.useState(Ue),[c,b]=l.useState({}),[x,f]=l.useState(!1),[p,j]=l.useState(null),[C,P]=l.useState(null),[S,A]=l.useState(!1),[q,U]=l.useState(0),[$,h]=l.useState(0),[y,D]=l.useState(5),[T,F]=l.useState(""),[G,w]=l.useState(!1),[L,H]=l.useState(3),[E,he]=l.useState("3"),[oe,ue]=l.useState(10),[K,te]=l.useState(0),[N,J]=l.useState(0),[Y,ne]=l.useState(!0),[ze,ot]=l.useState([]),[rt,re]=l.useState(!1),[lt,ie]=l.useState(!1),[at,dt]=l.useState(!1),[ct,ye]=l.useState(!1),[xt,Be]=l.useState(!1),[pt,me]=l.useState(!1),[gt,Re]=l.useState(!1),[ft,be]=l.useState(!1),[ht,Ie]=l.useState(!1),[ut,yt]=l.useState(null),[mt,We]=l.useState(!1),[bt,le]=l.useState(!1),[jt,Pe]=l.useState(!1),[De,St]=l.useState(0),[Ee,vt]=l.useState(3),[Q,Me]=l.useState(4),[Z,Ae]=l.useState(6),[ae,$e]=l.useState(0),[je,Fe]=l.useState(!1),[de,ce]=l.useState(!1),[V,Ct]=l.useState(12e4),[Se,ve]=l.useState(0),[Le,wt]=l.useState(Date.now()),[kt,Ce]=l.useState(0),[Tt,He]=l.useState(0);l.useEffect(()=>{const r=we.subscribe(d),u=Ht.subscribe(I=>{g(I==="ru"?0:1)}),B=Kt.subscribe(I=>{m(I)}),M=Ue.subscribe(I=>{const R=k.trainingLog?.[I.dayKey]?.[I.dInd]||null;j(k.programs[R.programId]||null),P(R.dayIndex),U(R.tonnage),b(R),v(I),A(R.completed),F(R.note!==void 0?R.note:""),D(R.RPE!==void 0?R.RPE:5),wt(R.startTime),He(Date.now()-R.startTime)});return()=>{r.unsubscribe(),u.unsubscribe(),B.unsubscribe(),M.unsubscribe()}},[]),l.useEffect(()=>{Q>Z&&Ae(Q)},[Q]),l.useEffect(()=>{Z<Q&&Me(Z)},[Z]),l.useEffect(()=>{if(S)return;const r=setInterval(()=>{He(Date.now()-Le)},500);return()=>clearInterval(r)},[Le]),l.useEffect(()=>{if(!de||S)return;const r=Date.now()-Se,u=setInterval(()=>{const B=Date.now()-r,M=Math.min(B,V);ve(M),Ce(M/V*100),M>=V&&(ce(!1),zn.play(),ve(0),Ce(0))},50);return()=>clearInterval(u)},[de,S,V,Se]);function zt(r){Ye.hasPremium?f(r):Ie(!0)}const Bt=(r,u)=>{he(r,u),H(u),me(!0)},Rt=()=>{en(a.dayKey,a.dInd,E,oe,K,N,Y),me(!1),U(Ve(a.dayKey,a.dInd)),h(Ge(a.dayKey,a.dInd)),ce(je)},It=(r,u)=>{he(r,u),H(u);const B=k.trainingLog[a.dayKey][a.dInd].exercises[r].sets[u];ue(B.reps),te(B.weight),J(B.time),ne(B.type===0),ye(!0)},Wt=()=>{nn(a.dayKey,a.dInd,E,L,oe,K,N,Y),ye(!1),U(Ve(a.dayKey,a.dInd)),h(Ge(a.dayKey,a.dInd))},Pt=r=>{Zt(a.dayKey,a.dInd,r)},Dt=()=>{re(!1),w(!0)},Et=async()=>{try{const r=await tn(a.dayKey,a.dInd,y,T);w(!1),A(!0),ot(r),dt(!0)}catch(r){console.error("Failed to finish session:",r)}},Mt=r=>{St(r),le(!0),Be(!1)},At=r=>{yt(r),ie(!0)},$t=()=>{sn(a.dayKey,a.dInd,ut),ie(!1)};function Ke(r){if(on(a.dayKey,a.dInd,De),ie(!1),le(!1),!r)return null;let u=s===0?"время":"time";ae===0&&(u=Ee+"x"+Q+"-"+Z),Xt(c.programId,a.dInd,De,u),Pe(!1),ie(!1),le(!1)}return e.jsxs("div",{style:n(t).container,children:[e.jsxs("div",{style:n(t).panel,children:[e.jsxs("div",{style:n(t).headerCard,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{...n(t,o).text,fontWeight:"bold",fontSize:"18px",marginBottom:0},children:Array.isArray(p?.name)?p?.name[s]:p?.name}),e.jsx("div",{style:{...n(t,o).subtext,opacity:.7,marginTop:"4px"},children:(a.mode==="new"?"⏳ ":"✅ ")+p?.schedule[C].name[s]})]}),e.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.2)",padding:"5px 12px",borderRadius:"20px"},children:e.jsx("div",{style:{...n(t,o).subtext,fontSize:"16px",fontWeight:"600",color:i.get("mainText",t)},children:se(S?c.duration:Tt)})})]}),e.jsx("div",{style:{width:"100%",height:"6px",position:"relative",borderRadius:"3px",overflow:"hidden",backgroundColor:"rgba(255,255,255,0.1)",marginBottom:"12px"},children:e.jsx("div",{style:{width:`${kt}%`,height:"100%",backgroundColor:i.get("skipped",t),transition:"width 0.5s linear"}})}),e.jsxs("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Nt,{style:{color:i.get("icons",t)}}),e.jsx("div",{style:{...n(t,o).subtext,fontWeight:"bold",fontSize:"14px"},children:(q*.001).toFixed(2)+(s===0?" т":" t")})]}),!S&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx(In,{time:Se,maxTime:V,theme:t}),e.jsx("div",{style:n(t).toolIconWrapper,onClick:()=>{de?(ce(!1),ve(0),Ce(0)):ce(!0)},children:de?e.jsx(fn,{style:n(t).headerIcon}):e.jsx(hn,{style:n(t).headerIcon})}),e.jsx("div",{style:n(t).toolIconWrapper,onClick:()=>{be(!0)},children:e.jsx(Xe,{style:n(t).headerIcon})}),e.jsx("div",{style:n(t).toolIconWrapper,onClick:()=>{We(!0)},children:e.jsx(an,{style:n(t).headerIcon})}),e.jsx("div",{style:{...n(t).toolIconWrapper,backgroundColor:i.get("done",t)},onClick:()=>{re(!0)},children:e.jsx(Ot,{style:{fontSize:"18px",color:"#fff"}})})]})]})]}),e.jsx("div",{style:n(t).scrollView,children:c?.exercises&&c.exerciseOrder?.length>0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"97%",gap:"12px",paddingBottom:"20px"},children:[c.exerciseOrder.map(r=>{const u=c.exercises[r],B=k.exercises[r];if(!B||!u)return null;const M=B.name[s];let I="";const R=k.programs[c.programId];if(R&&c.dayIndex!=null){const z=R.schedule[c.dayIndex];if(z){const O=z.exercises.find(Ft=>Ft.exId===r);O&&(I=O.sets)}}return e.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:i.get("bottomPanel",t),borderRadius:"16px",padding:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:E===r?`1px solid ${i.get("iconsHighlited",t)}`:"none"},children:[e.jsxs("div",{onClick:()=>{he(z=>z===r?-1:r)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px",borderBottom:`1px solid ${i.get("border",t)}`,paddingBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{...n(t,o).text,fontWeight:"bold",fontSize:"16px",marginBottom:0,color:E===r?i.get("iconsHighlited",t):i.get("mainText",t)},children:M}),e.jsx("span",{style:{fontSize:"12px"},children:u.completed?"✅":""})]}),e.jsx("div",{style:{...n(t,o).subtext,backgroundColor:"rgba(0,0,0,0.1)",padding:"2px 8px",borderRadius:"8px"},children:I})]}),E===r&&e.jsxs("div",{style:{display:"flex",marginBottom:"6px",paddingLeft:"4px",opacity:.6},children:[e.jsx("div",{style:{...n(t,o).subtext,width:"10%"},children:"#"}),e.jsx("div",{style:{...n(t,o).subtext,width:"25%"},children:s===0?"Повт":"Reps"}),e.jsx("div",{style:{...n(t,o).subtext,width:"25%"},children:s===0?"Вес":"Kg"}),e.jsx("div",{style:{...n(t,o).subtext,width:"25%"},children:s===0?"Время":"Time"})]}),E===r&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[u.sets.map((z,O)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",backgroundColor:O%2===0?"rgba(255,255,255,0.03)":"transparent",borderRadius:"8px"},children:[e.jsx("div",{style:{...pe(t,z.type),width:"10%",border:"none"},children:O+1}),e.jsxs("div",{style:{...pe(t,z.type),border:"none"},children:[z.reps,x&&e.jsx(ke,{exId:r,setIndex:O,beforeDate:new Date(a.dayKey),value:z.reps,isReps:!0,theme:t})]}),e.jsxs("div",{style:{...pe(t,z.type),border:"none"},children:[z.weight,x&&e.jsx(ke,{exId:r,setIndex:O,beforeDate:new Date(a.dayKey),value:z.weight,isReps:!1,theme:t})]}),e.jsxs("div",{style:{...pe(t,z.type),border:"none"},children:[se(z.time),x&&e.jsx(ke,{exId:r,setIndex:O,beforeDate:new Date(a.dayKey),value:z.time,isReps:!1,theme:t,isTime:!0})]}),e.jsx("div",{style:{marginLeft:"auto"},children:e.jsx("div",{onClick:()=>{It(r,O)},style:{padding:"6px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.05)"},children:e.jsx(Ut,{style:{fontSize:"12px",color:i.get("icons",t)}})})})]},O)),x&&e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",borderTop:`1px dashed ${i.get("border",t)}`,opacity:.7},children:[e.jsx("div",{style:{...ge(t),width:"10%",border:"none"},children:u.sets.length+1}),e.jsx("div",{style:{...ge(t),border:"none"},children:Te(r,u.sets.length,new Date(a.dayKey),!0)}),e.jsx("div",{style:{...ge(t),border:"none"},children:Te(r,u.sets.length,new Date(a.dayKey),!1)}),e.jsx("div",{style:{...ge(t),border:"none"},children:Te(r,u.sets.length,new Date(a.dayKey),!1,!0)})]}),e.jsxs("div",{style:{display:"flex",marginTop:"12px",paddingTop:"8px",borderTop:`1px solid ${i.get("border",t)}`,justifyContent:"space-around"},children:[e.jsx("button",{style:n(t).actionBtnSmall,onClick:()=>{At(r)},children:e.jsx(_e,{style:{fontSize:"14px",color:i.get("skipped",t)}})}),e.jsxs("button",{style:{...n(t).actionBtnSmall,width:"40%",backgroundColor:i.get("iconsHighlited",t)},onClick:()=>{Bt(r,u.sets.length)},children:[e.jsx(qe,{style:{fontSize:"16px",color:i.get("background",t)}})," ",e.jsx("span",{style:{marginLeft:"5px",color:i.get("background",t),fontWeight:"bold"},children:s===0?"Сет":"Set"})]}),!S&&!u.completed&&e.jsx("button",{style:n(t).actionBtnSmall,onClick:()=>{Pt(r)},children:e.jsx(_t,{style:{fontSize:"14px",color:i.get("done",t)}})})]})]})]},r)}),S&&e.jsxs("div",{style:{backgroundColor:i.get("background",t),borderRadius:"24px",padding:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{...n(t).inputCard,width:"80vw",height:"auto",padding:"20px",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"14px",fontWeight:"bold"},children:s===0?"Уровень нагрузки (RPE)":"Effort Level (RPE)"}),e.jsxs("div",{style:{...n(t,o).text,fontSize:"24px",fontWeight:"bold",color:i.get("iconsHighlited",t)},children:[y,"/10"]})]}),e.jsx(fe,{style:{width:"100%",alignSelf:"center",color:i.get("difficulty",t)},min:1,max:10,step:1,value:y,valueLabelDisplay:"off",onChange:(r,u)=>D(u)}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"11px",color:i.get("subText",t)},children:[e.jsx("span",{children:s===0?"Легко":"Easy"}),e.jsx("span",{children:s===0?"Умеренно":"Moderate"}),e.jsx("span",{children:s===0?"Тяжело":"Hard"}),e.jsx("span",{children:s===0?"Максимум":"Max"})]})]}),e.jsxs("div",{style:{...n(t).inputCard,width:"80vw",height:"auto",padding:"15px",marginBottom:"20px"},children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:s===0?"Заметки о тренировке":"Training Notes"}),e.jsx("textarea",{value:T,onChange:r=>F(r.target.value),placeholder:s===0?"Как прошла тренировка? Что удалось/не удалось? Погода, самочувствие...":"How was the session? What worked/didn't work? Weather, mood...",style:{width:"100%",height:"100px",backgroundColor:"rgba(0,0,0,0.2)",border:`1px solid ${i.get("border",t)}`,borderRadius:"12px",padding:"12px",color:i.get("mainText",t),fontSize:"14px",fontFamily:"Segoe UI",resize:"none",outline:"none"}})]}),e.jsx("div",{style:{display:"flex",gap:"15px",width:"100%"},children:e.jsxs("button",{onClick:()=>Jt(a.dayKey,a.dInd,y,T),style:{...n(t).primaryBtn,flex:2,padding:"14px"},children:[e.jsx(_,{style:{fontSize:"24px",marginRight:"8px"}}),s===0?"Сохранить":"Save"]})})]}),e.jsxs("div",{style:n(t).floatingMenu,children:[e.jsx("div",{onClick:()=>{Re(!0)},style:n(t).menuIconBtn,children:e.jsx(Yt,{style:{fontSize:"20px",color:i.get("icons",t)}})}),e.jsxs("div",{onClick:()=>{Be(!0)},style:n(t).menuPillBtn,children:[e.jsx(qe,{style:{fontSize:"14px",marginRight:"6px"}}),s===0?"Упражнение":"Exercise"]}),!S&&e.jsxs("div",{onClick:()=>{zt(r=>!r)},style:{...n(t).menuPillBtn,backgroundColor:x?i.get("barsColorMeasures",t):t==="dark"?"rgba(28, 28, 28, 0.85)":"rgba(235, 235, 235, 0.46)",color:x?i.get("background",t):i.get("subText",t),border:x?"none":`1px solid ${i.get("border",t)}`},children:[e.jsx(Vt,{style:{fontSize:"16px",marginRight:"6px"}}),s===0?"История":"History"]})]}),e.jsx("div",{style:{width:"100vw",height:"20vh"}})]})})]}),gt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto",padding:"25px"},children:[e.jsx("div",{style:{...n(t,o).subtext,textAlign:"left",whiteSpace:"pre-line",fontSize:"14px",lineHeight:"1.5"},children:Wn(s)}),e.jsx("button",{onClick:()=>Re(!1),style:n(t).primaryBtn,children:s===0?"Закрыть":"Close"})]})}),pt&&e.jsx("div",{style:{...n(t).confirmContainer},children:e.jsxs("div",{style:{...n(t).bottomSheet,height:"75vh",borderTop:`3px solid ${Y?i.get("difficulty2",t):i.get("difficulty5",t)}`},children:[e.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"2px",alignSelf:"center",marginBottom:"15px"}}),e.jsxs("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",margin:0},children:s===0?"Добавить сет":"Add Set"}),e.jsxs("div",{style:{display:"flex",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"20px",padding:"4px"},children:[e.jsx("div",{onClick:()=>ne(!0),style:{...n(t).segmentBtn,color:Y?i.get("difficulty2",t):i.get("subText",t)},children:s===0?"Разминка":"Warmup"}),e.jsx("div",{onClick:()=>ne(!1),style:{...n(t).segmentBtn,color:Y?i.get("subText",t):i.get("difficulty5",t)},children:s===0?"Рабочий":"Work"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px",width:"100%"},children:[e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,o).subtext,marginBottom:"10px",textAlign:"center"},children:s===0?"Повторы":"Reps"}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(W,{items:xe,value:oe,onChange:ue,theme:t,width:"60px"})})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,o).subtext,marginBottom:"10px",textAlign:"center"},children:s===0?"Вес (кг)":"Weight (kg)"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[e.jsx(W,{items:Je,value:Math.floor(K),onChange:r=>te(r+K%1),theme:t,width:"50px"}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:i.get("subText",t)},children:"."}),e.jsx(W,{items:Qe,value:K%1,onChange:r=>te(Math.floor(K)+r),theme:t,width:"40px",suffix:""})]})]})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",marginTop:"10px",padding:"15px 10px"},children:[e.jsxs("div",{style:{marginBottom:"10px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",width:"90%"},children:[e.jsx(Xe,{style:{color:i.get("difficulty",t),fontSize:"35px",marginRight:"auto"},onClick:()=>be(!0)}),e.jsxs("div",{style:{...n(t,o).mainText},children:[" ",s===0?"Время выполнения":"Exercise time"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(W,{items:Ze,value:Math.floor(N/6e4),onChange:r=>J(r*6e4+N%6e4),theme:t,width:"50px",suffix:"m"})}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:i.get("subText",t)},children:":"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(W,{items:et,value:Math.floor(N%6e4/1e3),onChange:r=>J(Math.floor(N/6e4)*6e4+r*1e3),theme:t,width:"50px",suffix:"s"})})]})]}),!S&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"15px auto",padding:"0 10px"},children:[e.jsx("div",{style:{...n(t,o).text,fontSize:"16px"},children:s===0?"Запустить таймер?":"Start timer?"}),je?e.jsx(dn,{style:{fontSize:"28px",color:i.get("done",t),cursor:"pointer"},onClick:()=>{Fe(!1)}}):e.jsx(cn,{style:{fontSize:"28px",color:i.get("icons",t),cursor:"pointer"},onClick:()=>{Fe(!0)}})]}),!S&&je&&e.jsxs("div",{style:n.topSection,children:[e.jsxs("div",{style:n.label,children:[e.jsx("span",{style:{opacity:.7,fontSize:"14px",textTransform:"uppercase",letterSpacing:"1px"},children:s===0?"отдых: ":"rest: "}),e.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",marginTop:"4px"},children:[Math.floor(V/6e4),":",Math.floor(V%6e4/1e3).toString().padStart(2,"0")]})]}),e.jsx(fe,{style:n(t).slider,min:10,max:600,step:10,value:V/1e3,valueLabelDisplay:"off",onChange:(r,u)=>{Ct(u*1e3)}})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"auto",marginBottom:"10px"},children:[e.jsx("button",{onClick:()=>me(!1),style:{...n(t).secondaryBtn,flex:1},children:e.jsx(X,{style:{fontSize:"24px"}})}),e.jsx("button",{onClick:()=>{Rt()},style:{...n(t).primaryBtn,flex:3},children:e.jsx(_,{style:{fontSize:"24px"}})})]})]})}),G&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto",padding:"25px",maxWidth:"450px",width:"90%"},children:[e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",marginBottom:"20px",textAlign:"center"},children:s===0?"Завершение тренировки":"Finish Session"}),e.jsxs("div",{style:{...n(t).inputCard,width:"80vw",height:"auto",padding:"20px",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"14px",fontWeight:"bold"},children:s===0?"Уровень нагрузки (RPE)":"Effort Level (RPE)"}),e.jsxs("div",{style:{...n(t,o).text,fontSize:"24px",fontWeight:"bold",color:i.get("iconsHighlited",t)},children:[y,"/10"]})]}),e.jsx(fe,{style:{width:"100%",alignSelf:"center",color:i.get("difficulty",t)},min:1,max:10,step:1,value:y,valueLabelDisplay:"off",onChange:(r,u)=>D(u)}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"11px",color:i.get("subText",t)},children:[e.jsx("span",{children:s===0?"Легко":"Easy"}),e.jsx("span",{children:s===0?"Умеренно":"Moderate"}),e.jsx("span",{children:s===0?"Тяжело":"Hard"}),e.jsx("span",{children:s===0?"Максимум":"Max"})]})]}),e.jsxs("div",{style:{...n(t).inputCard,width:"80vw",height:"auto",padding:"15px",marginBottom:"20px"},children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"14px",fontWeight:"bold",marginBottom:"10px"},children:s===0?"Заметки о тренировке":"Training Notes"}),e.jsx("textarea",{value:T,onChange:r=>F(r.target.value),placeholder:s===0?"Как прошла тренировка? Что удалось/не удалось? Погода, самочувствие...":"How was the session? What worked/didn't work? Weather, mood...",style:{width:"100%",height:"100px",backgroundColor:"rgba(0,0,0,0.2)",border:`1px solid ${i.get("border",t)}`,borderRadius:"12px",padding:"12px",color:i.get("mainText",t),fontSize:"14px",fontFamily:"Segoe UI",resize:"none",outline:"none"}})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",width:"100%"},children:[e.jsxs("button",{onClick:()=>{w(!1),re(!0)},style:{...n(t).secondaryBtn,flex:1,padding:"14px"},children:[e.jsx(X,{style:{fontSize:"24px",marginRight:"8px"}}),s===0?"Назад":"Back"]}),e.jsxs("button",{onClick:Et,style:{...n(t).primaryBtn,flex:2,padding:"14px"},children:[e.jsx(_,{style:{fontSize:"24px",marginRight:"8px"}}),s===0?"Сохранить":"Save"]})]})]})}),ct&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).bottomSheet,borderTop:`3px solid ${Y?i.get("difficulty2",t):i.get("difficulty5",t)}`},children:[e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",marginBottom:"20px",textAlign:"center"},children:s===0?"Изменить сет":"Edit Set"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px",width:"100%"},children:[e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,o).subtext,marginBottom:"10px",textAlign:"center"},children:s===0?"Повторы":"Reps"}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(W,{items:xe,value:oe,onChange:ue,theme:t,width:"60px"})})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsx("div",{style:{...n(t,o).subtext,marginBottom:"10px",textAlign:"center"},children:s===0?"Вес (кг)":"Weight"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"5px"},children:[e.jsx(W,{items:Je,value:Math.floor(K),onChange:r=>te(r+K%1),theme:t,width:"50px"}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:i.get("subText",t)},children:"."}),e.jsx(W,{items:Qe,value:K%1,onChange:r=>te(Math.floor(K)+r),theme:t,width:"40px"})]})]})]}),e.jsxs("div",{style:{display:"flex",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"12px",padding:"4px",margin:"20px 0"},children:[e.jsx("div",{onClick:()=>{ne(!0)},style:{...n(t).segmentBtn,color:Y?i.get("difficulty2",t):i.get("subText",t)},children:s===0?"Разминка":"Warmup"}),e.jsx("div",{onClick:()=>{ne(!1)},style:{...n(t).segmentBtn,color:Y?i.get("subText",t):i.get("difficulty5",t)},children:s===0?"Рабочий":"Work"})]}),e.jsxs("div",{style:{...n(t).inputCard,height:"auto",padding:"15px 10px"},children:[e.jsxs("div",{style:{...n(t,o).subtext,marginBottom:"10px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(xn,{})," ",s===0?"Время":"Time"]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:[e.jsx(W,{items:Ze,value:Math.floor(N/6e4),onChange:r=>J(r*6e4+N%6e4),theme:t,width:"50px",suffix:"m"}),e.jsx("div",{style:{paddingTop:"40px",fontSize:"20px",fontWeight:"bold",color:i.get("subText",t)},children:":"}),e.jsx(W,{items:et,value:Math.floor(N%6e4/1e3),onChange:r=>J(Math.floor(N/6e4)*6e4+r*1e3),theme:t,width:"50px",suffix:"s"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"20px"},children:[e.jsx("button",{onClick:()=>ye(!1),style:{...n(t).secondaryBtn,flex:1},children:e.jsx(X,{style:{fontSize:"24px"}})}),e.jsx("button",{onClick:()=>{Wt()},style:{...n(t).primaryBtn,flex:3},children:e.jsx(_,{style:{fontSize:"24px"}})})]})]})}),ft&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsx(un,{theme:t,langIndex:s,setTime:J,setShowPanel:be})}),mt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsx(Sn,{theme:t,langIndex:s,fSize:o,setShowCalculator:We})}),ht&&!Ye.hasPremium&&e.jsxs("div",{onClick:r=>r.stopPropagation(),style:{position:"absolute",inset:0,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:we.value==="dark"?"rgba(10, 10, 10, 0.85)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",textAlign:"center"},children:[e.jsx("div",{style:{color:we.value==="dark"?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:s===0?"ТОЛЬКО ДЛЯ ПРЕМИУМ":"PREMIUM USERS ONLY"}),e.jsx("button",{onClick:()=>{Ie(!1)},style:{...n(t,o).btn,margin:"10px"},children:s===0?"Закрыть":"Close"})]}),rt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto"},children:[e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",marginBottom:"25px"},children:s===0?"Завершить тренировку?":"Finish session?"}),e.jsxs("div",{style:{display:"flex",width:"80%",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>re(!1),style:n(t).secondaryBtn,children:e.jsx(X,{style:{fontSize:"28px"}})}),e.jsx("button",{onClick:()=>{Dt()},style:n(t).primaryBtn,children:e.jsx(_,{style:{fontSize:"28px"}})})]})]})}),lt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto"},children:[e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",marginBottom:"25px"},children:s===0?"Удалить упражнение?":"Delete exercise?"}),e.jsxs("div",{style:{display:"flex",width:"80%",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>ie(!1),style:n(t).secondaryBtn,children:e.jsx(X,{style:{fontSize:"28px"}})}),e.jsx("button",{onClick:()=>{$t()},style:{...n(t).primaryBtn,backgroundColor:i.get("skipped",t)},children:e.jsx(_e,{style:{fontSize:"20px"}})})]})]})}),at&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"85%",justifyContent:"flex-start",paddingTop:"10px"},children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"18px",fontWeight:"bold",marginTop:"17px",color:i.get("done",t)},children:s===0?"Результаты тренировки":"Session results"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",width:"100%",marginTop:"20px",paddingBottom:"20px",borderBottom:`1px solid ${i.get("border",t)}`},children:[e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"12px"},children:s===0?"Время":"Time"}),e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",margin:0},children:se(c.duration)})]}),e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"12px"},children:s===0?"Тоннаж":"Tonnage"}),e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",margin:0},children:(q*.001).toFixed(2)+(s===0?" т":" t")})]}),e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"12px"},children:s===0?"Повторения":"Reps"}),e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",margin:0},children:$})]}),e.jsxs("div",{style:n(t).statBox,children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"12px"},children:s===0?"Сеты":"Sets"}),e.jsx("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",margin:0},children:Qt(a.dayKey,a.dInd)})]})]}),e.jsxs("div",{style:{width:"100%",flex:1,overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{...n(t,o).subtext,fontSize:"16px",fontWeight:"bold",marginTop:"17px",marginBottom:"10px"},children:s===0?"Рекорды":"Records"}),e.jsx("img",{src:"images/Medal.png",style:{width:"100px",marginBottom:"10px"}}),ze.length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",width:"100%",padding:"0 10px"},children:ze.map(({exId:r,newRm:u,oldRm:B,improvement:M})=>{const I=k.exercises[r];return I?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"10px"},children:[e.jsx("div",{style:{...n(t,o).subtext,fontWeight:"bold",textAlign:"center",fontSize:"14px"},children:I.name[s]}),e.jsxs("div",{style:{...n(t,o).text,fontSize:"20px",fontWeight:"bold",marginTop:"6px",color:i.get("iconsHighlited",t)},children:[u," ",s===0?"кг":"kg"]}),e.jsxs("div",{style:{...n(t,o).subtext,fontSize:"11px",marginTop:"4px",opacity:.6},children:[s===0?"было":"was"," ",B>0?`${B} ${s===0?"кг":"kg"}`:"-"]}),e.jsx("div",{style:{...n(t,o).subtext,fontSize:"12px",fontWeight:"bold",color:i.get("done",t),marginTop:"4px"},children:M>0?s===0?`↑ +${M.toFixed(1)} кг`:`↑ +${M.toFixed(1)} kg`:""})]},r):null})}):e.jsx("div",{style:{...n(t,o).subtext,marginTop:"12px",fontStyle:"italic"},children:s===0?"Новых рекордов нет":"No new records"})]}),e.jsxs("button",{onClick:()=>{Gt("TrainingMain")},style:{...n(t).primaryBtn,width:"90%",marginTop:"15px"},children:[e.jsx(_,{style:{fontSize:"24px",marginRight:"10px"}}),s===0?"Завершить":"Finish"]})]})}),xt&&e.jsx("div",{style:{...n(t).confirmContainer},children:e.jsx(gn,{needToAdd:!0,setEx:Mt})}),jt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto",padding:"25px"},children:[e.jsx("p",{style:{...n(t,!1).text,textAlign:"center",fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:s===0?"Стратегия выполнения":"Set Strategy"}),e.jsxs("div",{style:{display:"flex",width:"100%",justifyContent:"center",marginBottom:"20px",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"12px",padding:"4px"},children:[e.jsx("div",{onClick:()=>{$e(0)},style:{...n(t).segmentBtn,width:"50%",backgroundColor:ae===0?i.get("difficulty",t):"transparent"},children:s===0?"Повторы":"Reps"}),e.jsx("div",{onClick:()=>{$e(1)},style:{...n(t).segmentBtn,width:"50%",backgroundColor:ae===1?i.get("difficulty",t):"transparent"},children:s===0?"Время":"Time"})]}),ae===0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",margin:"20px 0"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:i.get("subText",t),marginBottom:"5px"},children:"SETS"}),e.jsx(W,{items:Bn,value:Ee,onChange:vt,theme:t,width:"60px"})]}),e.jsx("span",{style:{fontSize:"20px",color:i.get("subText",t),marginTop:"15px"},children:"×"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:i.get("subText",t),marginBottom:"5px"},children:"MIN"}),e.jsx(W,{items:xe,value:Q,onChange:Me,theme:t,width:"60px"})]}),e.jsx("span",{style:{fontSize:"20px",color:i.get("subText",t),marginTop:"15px"},children:"-"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:i.get("subText",t),marginBottom:"5px"},children:"MAX"}),e.jsx(W,{items:xe,value:Z,onChange:Ae,theme:t,width:"60px"})]})]}),e.jsx("button",{onClick:()=>Ke(!0),style:n(t).primaryBtn,children:e.jsx(_,{style:{fontSize:"22px"}})})]})}),bt&&e.jsx("div",{style:n(t).confirmContainer,children:e.jsxs("div",{style:{...n(t).modalCard,height:"auto"},children:[e.jsx("div",{style:{...n(t,o).text,fontSize:"18px",textAlign:"center",marginBottom:"25px"},children:s===0?"Добавить упражнение также в программу?":"Add the exercise to the program too?"}),e.jsxs("div",{style:{display:"flex",width:"80%",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>Ke(!1),style:n(t).secondaryBtn,children:s===0?"Нет":"No"}),e.jsx("button",{onClick:()=>{Pe(!0),le(!1)},style:n(t).primaryBtn,children:s===0?"Да":"Yes"})]})]})})]})},pe=(t,d)=>({fontSize:"15px",fontWeight:"bold",color:d===0?i.get("difficulty2",t):i.get("difficulty5",t),width:"25%",textAlign:"left",paddingLeft:"4px"}),ge=t=>({fontSize:"13px",color:i.get("subText",t),width:"25%",textAlign:"left",paddingLeft:"4px",fontStyle:"italic"}),Rn=(t,d)=>({fontSize:"10px",position:"relative",top:"-4px",left:"2px",fontWeight:"bold",color:d?i.get("done",t):i.get("skipped",t)}),n=(t,d)=>({container:{backgroundColor:i.get("background",t),display:"flex",position:"absolute",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"92vh",top:"10vh",width:"100vw",fontFamily:"Segoe UI"},panel:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyContent:"start"},headerCard:{width:"95%",backgroundColor:i.get("bottomPanel",t),borderRadius:"20px",padding:"15px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",marginBottom:"15px",marginTop:"10px"},headerIcon:{fontSize:"20px",color:i.get("icons",t)},toolIconWrapper:{width:"36px",height:"36px",borderRadius:"12px",backgroundColor:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},scrollView:{display:"flex",flexDirection:"column",alignItems:"center",overflowY:"scroll",width:"100%",overflowX:"hidden",height:"66vh"},text:{textAlign:"left",fontSize:d===0?"13px":"15px",color:i.get("mainText",t),marginBottom:"5px"},subtext:{fontSize:d===0?"11px":"13px",color:i.get("subText",t)},icon:{fontSize:"18px",color:i.get("icons",t),cursor:"pointer"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.65)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2900},bottomSheet:{width:"90%",height:"60%",position:"absolute",bottom:0,backgroundColor:i.get("background",t),borderTopLeftRadius:"25px",borderTopRightRadius:"25px",padding:"15px 20px 30px 20px",display:"flex",flexDirection:"column",boxShadow:"0 -5px 20px rgba(0,0,0,0.3)"},modalCard:{width:"80%",backgroundColor:i.get("background",t),borderRadius:"24px",padding:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.3)"},inputCard:{flex:1,height:"80px",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"16px",fontSize:"16px",padding:"10px",display:"flex",flexDirection:"column",alignItems:"center"},circleBtn:{fontSize:"24px",color:i.get("icons",t),padding:"8px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.05)",cursor:"pointer"},circleBtnSmall:{fontSize:"18px",color:i.get("icons",t),padding:"8px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.05)",cursor:"pointer"},primaryBtn:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:i.get("done",t),color:"#fff",border:"none",borderRadius:"15px",padding:"12px 20px",fontSize:"16px",fontWeight:"bold",boxShadow:"0 4px 10px rgba(0,0,0,0.2)"},secondaryBtn:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:i.get("skipped",t),color:i.get("mainText",t),border:"none",borderRadius:"15px",padding:"12px 20px",fontSize:"16px"},segmentBtn:{flex:1,textAlign:"center",padding:"8px",borderRadius:"10px",fontSize:"14px",fontWeight:"600",transition:"all 0.2s"},slider:{width:"90%",alignSelf:"center",color:i.get("difficulty",t)},actionBtnSmall:{display:"flex",alignItems:"center",justifyContent:"center",border:"none",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"8px 16px",cursor:"pointer"},floatingMenu:{width:"88%",maxWidth:"400px",height:"40px",backgroundColor:t==="dark"?"rgba(15, 15, 15, 0.57)":"rgba(219, 219, 219, 0.46)",backdropFilter:"blur(10px)",borderRadius:"30px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 10px",boxShadow:"0 10px 25px rgba(0,0,0,0.4)",border:`1px solid ${i.get("border",t)}`},menuPillBtn:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 16px",borderRadius:"20px",backgroundColor:t==="dark"?"rgba(28, 28, 28, 0.85)":"rgba(235, 235, 235, 0.46)",color:i.get("mainText",t),fontSize:"14px",fontWeight:"600",cursor:"pointer",height:"20px"},menuIconBtn:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},statBox:{display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"rgba(255,255,255,0.03)",borderRadius:"12px",padding:"10px"},topSection:{width:"85%",display:"flex",flexDirection:"column",alignItems:"center",background:"rgba(0,0,0,0.05)",borderRadius:"16px",padding:"15px",marginTop:"10px"},label:{display:"flex",flexDirection:"column",alignItems:"center",color:i.get("mainText",t),marginBottom:"10px",fontFamily:"sans-serif"}});function ke({exId:t,setIndex:d,beforeDate:s,value:g,isReps:o,theme:m,isTime:a=!1}){const v=String(t),c=it(v,d,s,k.trainingLog);let b="",x=0;if(c!==null&&typeof g=="number"&&!isNaN(g))if(a){const f=c.time||0;x=g-f;const p=Math.round(x/1e3),j=Math.abs(p);if(j===0)b="";else if(j>=60){const C=Math.floor(j/60),P=j%60;b=`${p>0?"▴":"▾"}${C}:${P.toString().padStart(2,"0")}`}else b=`${p>0?"▴":""}${j}`}else{const f=o?c.reps:c.weight;x=g-f,x!==0&&(b=`${x>0?"▴":""}${x}`)}return e.jsx("span",{style:Rn(m,x>0),children:b})}function Te(t,d,s,g,o=!1){const m=t.toString(),a=it(m,d,s,k.trainingLog);return a?o?se(a.time):g?a.reps.toString():a.weight.toString():"-"}function In({time:t,maxTime:d,theme:s}){const g=d-t,o=Math.floor(g/6e4),m=Math.floor(g%6e4/1e3),a=g>0?`${o>0?o+":":""}${m.toString().padStart(2,"0")}`:"",v=l.useRef(m),[c,b]=l.useState(!1),x=d>0?t/d*100:0;if(l.useEffect(()=>{if(m!==v.current){b(!0),v.current=m;const C=setTimeout(()=>{b(!1)},200);return()=>clearTimeout(C)}},[m]),t<=0||g<=0)return null;const p=c?"21px":"18px",j=x<50&&x>30?i.get("trainingIsolatedFont",s):x<30?i.get("subText",s):i.get("trainingBaseFont",s);return e.jsx("div",{style:{color:j,fontSize:p,fontWeight:"bold",transition:"font-size 0.2s ease-out",lineHeight:1,fontFamily:"monospace"},children:a})}function se(t){if(t<=0)return"-";const d=Math.floor(t/1e3),s=Math.floor(d/60),g=d%60;return`${s}:${g.toString().padStart(2,"0")}`}function Wn(t){return t===0?`КАК ИСПОЛЬЗОВАТЬ:
1️⃣ ВЫБЕРИТЕ ДЕНЬ: Нажмите на дату в календаре.
2️⃣ СОЗДАЙТЕ ТРЕНИРОВКУ: Нажмите на значок открытой книги 📖, чтобы начать новую сессию.
3️⃣ ДОБАВЬТЕ УПРАЖНЕНИЯ: Используйте ➕, чтобы добавить упражнение из программы.
4️⃣ ЗАПОЛНИТЕ ПОДХОДЫ: Укажите повторения и вес. Тоннаж считается автоматически.
5️⃣ РЕДАКТИРУЙТЕ: Нажмите ✏️, чтобы изменить упражнение или подход.
6️⃣ ЗАВЕРШИТЕ: Нажмите 🏁, чтобы сохранить тренировку. Данные сохраняются мгновенно!`:`HOW TO USE:
1️⃣ SELECT A DAY: Tap a date in the calendar.
2️⃣ START TRAINING: Tap the open book icon 📖 to begin a new session.
3️⃣ ADD EXERCISES: Use ➕ to add exercises from your program.
4️⃣ LOG SETS: Enter reps and weight. Tonnage is calculated automatically.
5️⃣ EDIT: Tap ✏️ to modify an exercise or set.
6️⃣ FINISH: Tap 🏁 to complete and save your workout instantly!`}export{Nn as default};
