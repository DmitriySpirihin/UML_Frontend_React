import{A as j,U as p,t as C,l as G,f as U,p as W,j as e,C as n,cs as P,cc as B,ck as E,by as L,bx as $,m as D,a as H,N as K,cf as O,ct as Y,F as V,z as w}from"./index-DroVzu8w.js";import{r as l}from"./recharts-k8ghPecL.js";import{a as _,G as q}from"./index-nlZsJ8Yc.js";const J=[768852208,8484480648],Q=["âš¡","ðŸ§ ","ðŸ§©","ðŸŽ¯"],N=[E,L,_,q,$],se=()=>{const[t,g]=l.useState("dark"),[a,r]=l.useState(j.prefs[0]),[d,u]=l.useState(j.prefs[4]),[c,f]=l.useState(0),[o,b]=l.useState(0),[x,y]=l.useState(p.hasPremium),[v,m]=l.useState([]),[R,T]=l.useState(!0),[F,M]=l.useState(0);l.useEffect(()=>{(async()=>{try{const i=await K.getMentalRecordsGlobal()||[];!i||i.length===0?m([{uid:p.id,name:p?.name||"User",data:j.mentalRecords}]):m(i)}catch{m([{uid:p.id,name:p?.name||"User",data:j.mentalRecords}])}finally{T(!1)}})()},[]),l.useEffect(()=>{const s=C.subscribe(g),i=G.subscribe(A=>r(A==="ru"?0:1)),h=U.subscribe(u),S=W.subscribe(y);return()=>{s.unsubscribe(),i.unsubscribe(),h.unsubscribe(),S.unsubscribe()}},[]);const z=[...v].filter(s=>{if(F===0)return!0;const i=Number(s.uid)===Number(p.id),h=p.friends&&p.friends.some(S=>Number(S.uid)===Number(s.uid));return i||h}).sort((s,i)=>{const h=s.data?.[c]?.[o]||0;return(i.data?.[c]?.[o]||0)-h});return e.jsxs("div",{style:I(t).container,children:[e.jsxs("div",{style:I(t).controlsWrapper,children:[e.jsx(k,{items:[P,B],selectedIndex:F,setSelectedIndex:M,theme:t,colorKey:"difficulty",isSecondary:!0,isTop:!0}),e.jsx(k,{items:Q,selectedIndex:c,setSelectedIndex:s=>{f(s),o>3&&b(3)},theme:t,colorKey:"difficulty"}),e.jsx(k,{items:c>0?N.slice(0,-1):N,selectedIndex:o,setSelectedIndex:b,theme:t,colorKey:"difficulty",isSecondary:!0})]}),e.jsx("div",{style:I(t).listContainer,children:R?e.jsx("div",{style:I(t).loadingText,children:a===0?"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...":"Loading..."}):e.jsxs(D.div,{layout:!0,style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px",paddingBottom:"20px"},children:[e.jsx(H,{mode:"popLayout",children:z.map((s,i)=>e.jsx(X,{theme:t,fSize:d,isUser:Number(s.uid)===Number(p.id),isAdmin:s.uid&&J.includes(Number(s.uid)),rank:i+1,name:s.name,score:s.data?.[c]?.[o]||0,index:i},s.name+i))}),z.length===0&&e.jsx("div",{style:{textAlign:"center",color:n.get("subText",t),marginTop:20},children:F===1?a===0?"Ð”Ñ€ÑƒÐ·ÑŒÑ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹":"No friends found":a===0?"ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…":"No records yet"})]})}),!x&&e.jsx("div",{onClick:s=>s.stopPropagation(),style:{position:"absolute",inset:0,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:C.value==="dark"?"rgba(10, 10, 10, 0.85)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(5px)",textAlign:"center"},children:e.jsx("div",{style:{color:C.value==="dark"?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:a===0?"Ð¢ÐžÐ›Ð¬ÐšÐž Ð”Ð›Ð¯ ÐŸÐ Ð•ÐœÐ˜Ð£Ðœ":"PREMIUM USERS ONLY"})})]})},k=({items:t,selectedIndex:g,setSelectedIndex:a,theme:r,colorKey:d,isSecondary:u,isTop:c=!1})=>e.jsx("div",{style:{marginTop:c?"25px":0,display:"flex",backgroundColor:n.get("panel",r),padding:"2px",borderRadius:"16px",gap:"4px",justifyContent:"center",boxShadow:"inset 0 2px 5px rgba(0,0,0,0.05)"},children:t.map((f,o)=>{const b=g===o,x=n.get(d+o,r);return e.jsxs("div",{onClick:()=>a(o),style:{position:"relative",padding:u?"6px 14px":"8px 20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:[b&&e.jsx(D.div,{layoutId:u?"diff-bg":"cat-bg",style:{position:"absolute",inset:0,backgroundColor:n.get("simplePanel",r),borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:-1},transition:{type:"spring",bounce:.2,duration:.6}}),e.jsx("div",{size:u?18:22,style:{transition:"color 0.3s ease"},children:typeof f=="string"?f:e.jsx(f,{size:u?18:22,style:{color:b?c?n.get(d,r):x:n.get("subText",r)}})})]},o)})}),X=({theme:t,fSize:g,isUser:a,isAdmin:r,rank:d,name:u,score:c,index:f})=>{const o=t==="dark",b={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{delay:f*.05,type:"spring",stiffness:300,damping:24}},exit:{opacity:0,scale:.9}};let x=null,y=n.get("mainText",t);const v=a?n.get("done",t):r?n.get("accent",t):"none",m=a?o?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)":o?"rgba(30, 30, 30, 0.4)":"#FFFFFF";return d===1?(x=V,y=n.get("barsColorWeight",t)):d===2?(x=w,y=n.get("icons",t)):d===3&&(x=w,y=n.get("difficulty5",t)),e.jsxs(D.div,{layout:!0,variants:b,initial:"hidden",animate:"visible",exit:"exit",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderRadius:"16px",marginBottom:"8px",backdropFilter:"blur(10px)",boxShadow:o?"0 4px 6px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.05)",backgroundColor:m,border:a||r?`1px solid ${v}`:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:o?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",fontWeight:"bold",color:y,fontSize:"14px"},children:x?e.jsx(x,{size:16}):d}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:g===0?"15px":"17px",fontWeight:a||r?"bold":"normal",color:n.get("mainText",t)},children:[u,r&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 191, 255, 0.15)",borderRadius:"4px",padding:"2px 4px"},children:e.jsx(O,{size:12,color:"#00BFFF"})}),a&&e.jsx(Y,{size:11,color:n.get("done",t)})]})})]}),e.jsx("div",{style:{fontSize:g===0?"16px":"18px",fontWeight:"bold",color:n.get("done",t),fontFamily:"monospace",letterSpacing:"-0.5px"},children:c})]})},I=(t,g)=>({container:{backgroundColor:n.get("background",t),display:"flex",flexDirection:"column",alignItems:"center",width:"100vw",height:"92vh",marginTop:"110px",fontFamily:"Segoe UI"},controlsWrapper:{width:"90%",display:"flex",flexDirection:"column",alignItems:"center",gap:"5px",marginBottom:"20px",zIndex:10},listContainer:{flex:1,width:"94%",overflowY:"scroll",padding:"0 5px",display:"flex",flexDirection:"column",scrollbarWidth:"none",msOverflowStyle:"none"},loadingText:{textAlign:"center",marginTop:"40px",color:n.get("subText",t),fontSize:"14px"}});export{se as default};
