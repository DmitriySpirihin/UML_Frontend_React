import{ac as Le,A as l,t as We,f as Oe,ad as Ue,l as Te,C as c,j as t,M as xe,a2 as Ce,b as He,ab as be,m as te,ae as Ve,d as Ye,U as qe,q as Xe,p as Ke,af as _e,g as de,ag as Je,o as ve,ah as Ie,a6 as Qe,ai as Ze,s as et}from"./index-CpVNdywG.js";import{R as ye,r as d}from"./recharts-k8ghPecL.js";import{I as se,u as tt,a as st,b as me}from"./Icons-BXiaUo0I.js";import{F as je}from"./index-BR88Ph8F.js";import{T as nt}from"./index-DBRCr9U4.js";import{T as ot,a as it}from"./TimerOffTwoTone-BlLbJJpk.js";import{H as at}from"./HoverInfoButton-BegvxlPW.js";import{S as rt}from"./Slider-B-9QlkZQ.js";function lt(e){return Le({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}const Se=new Date().toISOString().split("T")[0],ze=new Audio("Audio/Click.wav"),ct=new Audio("Audio/Skip.wav"),Fe=new Audio("Audio/IsDone.wav");let dt,pt,Tt;const j=(e,n=0)=>{const f=e==="light"||e==="speciallight",u=f?"#F2F4F6":c.get("background",e),w=f?"#FFFFFF":c.get("simplePanel",e),m=f?"rgba(0,0,0,0.0)":`1px solid ${c.get("border",e)}`,p=f?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:u,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:m,backgroundColor:w,boxShadow:p,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:w,borderRadius:"24px",border:m,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:p},mainText:{fontSize:"17px",fontWeight:"600",color:c.get("mainText",e),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:c.get("subText",e),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:f?"#E5E5EA":"rgba(255,255,255,0.1)",color:f?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:c.get("icons",e),fontSize:"24px"}}},ke=e=>({Здоровье:["Здоровье","Health"],Health:["Здоровье","Health"],Развитие:["Развитие","Growth"],Growth:["Развитие","Growth"],Продуктивность:["Продуктивность","Productivity"],Productivity:["Продуктивность","Productivity"],"Отношения и отдых":["Отношения и отдых","Relationships & recreation"],"Relationships & recreation":["Отношения и отдых","Relationships & recreation"],"Отказ от вредного":["Отказ от вредного","Bad habits to quit"],"Bad habits to quit":["Отказ от вредного","Bad habits to quit"]})[e]||["Здоровье","Health"],Ht=()=>{const[e,n]=ye.useState("dark"),[f,u]=ye.useState([]),[w,m]=ye.useState([]),[p,H]=d.useState(l.prefs[0]),[g,I]=d.useState(0),[y,F]=d.useState(l.choosenHabits.length>0),[M,Y]=d.useState(0),[S,R]=d.useState(0),[i,b]=d.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[z,N]=d.useState(""),[T,$]=d.useState(""),[D,A]=d.useState(""),[L,ne]=d.useState(""),[oe,q]=d.useState(!1),[B,X]=d.useState("Здоровье"),[fe,K]=d.useState(null),[_,W]=d.useState(""),[J,k]=d.useState(!1);d.useEffect(()=>{if(i.type===0&&($(G().find(s=>s.id===i.hId)?.name[p]||""),A(G().find(s=>s.id===i.hId)?.description[p]||""),ne(G().find(s=>s.id===i.hId)?.iconName||""),X(G().find(s=>s.id===i.hId)?.category[0]||"Здоровье")),i.type===4){if(i.gId<=0)return;i.setGoals(s=>{const h=[...s];return[h[i.gId-1],h[i.gId]]=[h[i.gId],h[i.gId-1]],l.choosenHabitsGoals[i.hId]=h,h})}else i.type===5&&i.setGoals(s=>{if(i.gId>=s.length-1)return s;const h=[...s];return[h[i.gId],h[i.gId+1]]=[h[i.gId+1],h[i.gId]],l.choosenHabitsGoals[i.hId]=h,h})},[i]),d.useEffect(()=>{const s=We.subscribe(n),h=Oe.subscribe(I),r=Ue.subscribe(k);return()=>{s.unsubscribe(),h.unsubscribe(),r.unsubscribe()}},[]),d.useEffect(()=>{const s=Te.subscribe(h=>{H(h==="ru"?0:1)});return()=>s.unsubscribe()},[]),d.useEffect(()=>{u(l.choosenHabits)},[]),d.useEffect(()=>{if(f.length>0){const s=new Set;f.forEach(h=>{const r=G().find(a=>a.id===h);r&&!s.has(r.category[0])&&s.add(r.category[0])}),m(Array.from(s))}},[f]);const ge=(s,h,r,a,C)=>{u(E=>{const V=new Set(E);return V.has(s)?E:(l.addHabit(s,h,r,a,C),[...V,s])}),F(l.choosenHabits.length>0)},O=s=>{if(f.includes(s)){l.removeHabit(s),u(C=>C.filter(E=>E!==s)),R(C=>C+1),F(l.choosenHabits.length>0);const r=G().find(C=>C.id===s)?.name?.[p]||(p===0?"Привычка":"Habit"),a=p===0?`Привычка: '${r}' удалена`:`Habit: '${r}' deleted`;be(a,2e3,!0)}},P=()=>{switch(i.type){case 0:l.CustomHabits||(l.CustomHabits=[]);const s=l.CustomHabits.findIndex(r=>r.id===i.hId),h=ke(B);if(s!==-1)l.CustomHabits=l.CustomHabits.map((r,a)=>a===s?{...r,name:[T.trim(),T.trim()],description:[D.trim(),D.trim()],iconName:L,category:h}:r);else{const r=He.find(a=>a.id===i.hId);if(r){const a={...r,name:[T.trim(),T.trim()],description:[D.trim(),D.trim()],iconName:L,category:h,isCustom:!0};l.CustomHabits=[...l.CustomHabits,a]}}u(r=>[...r]),b(r=>({...r,show:!1})),i.hInfo&&i.hInfo({name:[T,T],descr:[D,D],icon:L}),R(r=>r+1);break;case 1:z.length>0?(i.setGoals(r=>[...r,{text:z,isDone:!1}]),l.addHabitGoal(i.hId,{text:z,isDone:!1}),b(r=>({...r,show:!1}))):be(p===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:z.length>0?(i.setGoals(r=>r.map((a,C)=>C===i.gId?{...a,text:z.trim()}:a)),l.choosenHabitsGoals[i.hId][i.gId].text=z,b(r=>({...r,show:!1}))):be(p===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:i.setGoals(r=>r.filter((a,C)=>C!==i.gId)),l.choosenHabitsGoals[i.hId].splice(i.gId,1),b(r=>({...r,show:!1}));break}};dt=O,pt=ge;const Q=e==="light"||e==="speciallight",Z=Q?"#F2F4F6":c.get("background",e);return t.jsxs("div",{style:{...j(e).container,backgroundColor:Z},children:[t.jsx(at,{tab:"HabitsMain"}),J&&t.jsx("div",{style:j(e).confirmContainer,children:t.jsxs("div",{style:j(e).cP,children:[t.jsx("div",{style:j(e,g).mainText,children:_}),t.jsxs("div",{style:j(e).buttonsRow,children:[t.jsxs("button",{style:j(e).btnCancel,onClick:()=>k(!1),children:[t.jsx(xe,{size:20,style:{marginRight:5}})," ",p===0?"Нет":"No"]}),t.jsxs("button",{style:{...j(e).btnSave,backgroundColor:"#FF453A"},onClick:()=>{O(fe),k(!1)},children:[t.jsx(Ce,{size:20,style:{marginRight:5}})," ",p===0?"Да":"Yes"]})]})]})}),!y&&t.jsx("div",{style:{...j(e).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:t.jsx("p",{style:{...j(e).subText,fontSize:g===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:c.get("subText",e)},children:ut(p)})}),y&&t.jsxs("div",{style:j(e).scrollView,children:[xt({theme:e,habitsCards:f,categories:w,setCP:b,setCurrentId:Y,fSize:g,setNeedConfirmation:k,setConfirmMessage:W,setHabitToDelete:K}),t.jsx("div",{style:{marginBottom:"150px"}})]},S),i.show&&t.jsx("div",{style:j(e).confirmContainer,children:t.jsxs("div",{style:{...j(e).cP,width:"90%"},children:[t.jsxs("div",{style:j(e).mainText,children:[i.type===1&&(p===0?"Новая цель":"New goal"),i.type===2&&(p===0?"Изменить цель":"Edit goal"),i.type===3&&(p===0?"Удалить цель?":"Delete goal?"),i.type===0&&(p===0?"Настройки привычки":"Edit habit")]}),i.type===1&&t.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:t.jsx("input",{type:"text",placeholder:p===0?"Название цели...":"Goal title...",value:z,onChange:s=>N(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:c.get("mainText",e),outline:`solid 1px ${c.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}})}),i.type===2&&t.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:t.jsx("input",{type:"text",placeholder:p===0?"Название цели...":"Goal title...",value:z,onChange:s=>N(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:c.get("mainText",e),outline:`solid 1px ${c.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}})}),i.type===0&&t.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[t.jsx("div",{style:{overflowX:"auto",display:"flex",gap:"8px",paddingBottom:"5px",scrollbarWidth:"none"},children:["Здоровье","Развитие","Продуктивность","Отношения и отдых","Отказ от вредного"].map(s=>t.jsx("div",{onClick:()=>X(s),style:{padding:"8px 14px",borderRadius:"12px",whiteSpace:"nowrap",cursor:"pointer",backgroundColor:B===s?c.get("scrollFont",e):Q?"#F2F2F7":"rgba(255,255,255,0.05)",color:B===s?"#FFF":c.get("subText",e),fontSize:"12px",fontWeight:"700",transition:"0.2s all"},children:p===0?s:ke(s)[1]},s))}),t.jsx("input",{type:"text",placeholder:p===0?"Название":"Name",value:T,onChange:s=>$(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:c.get("mainText",e),outline:`solid 1px ${c.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}}),t.jsx("input",{type:"text",placeholder:p===0?"Описание (опц.)":"Description (opt.)",value:D,onChange:s=>A(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"16px",color:c.get("mainText",e),outline:`solid 1px ${c.get("scrollFont",e)}`,borderRadius:"16px",padding:"12px"}}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>q(!oe),children:[t.jsx("span",{style:{fontSize:"14px",color:c.get("subText",e)},children:p===0?"Иконка":"Icon"}),t.jsx("div",{style:{color:c.get("habitIcon",e)},children:se.getIcon(L,{size:28})})]})]}),t.jsxs("div",{style:j(e).buttonsRow,children:[t.jsxs("button",{style:j(e).btnCancel,onClick:()=>b(s=>({...s,show:!1})),children:[t.jsx(xe,{size:22,style:{marginRight:"6px"}})," ",p===0?"Отмена":"Cancel"]}),t.jsxs("button",{style:{...j(e).btnSave,backgroundColor:i.type===3?"#FF453A":"#007AFF"},onClick:()=>{P()},children:[t.jsx(Ce,{size:22,style:{marginRight:"6px"}})," ",i.type===3?p===0?"Удалить":"Delete":p===0?"Готово":"Save"]})]})]})}),oe&&t.jsx("div",{style:j(e).confirmContainer,onClick:()=>q(!1),children:t.jsxs("div",{style:{...j(e).selectPanel},onClick:s=>s.stopPropagation(),children:[t.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:c.get("subText",e),fontSize:"13px",fontWeight:"600"},children:p===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(se.ic).map(([s])=>t.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:Q?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{ne(s),q(!1)},children:se.getIcon(s,{size:30,style:{color:c.get("habitIcon",e)}})},s))]})})]})};function G(){const e=l.CustomHabits||[];return e.concat(He.filter(n=>!e.some(f=>f.id===n.id)))}function xt({theme:e,habitsCards:n,categories:f,setCP:u,setCurrentId:w,fSize:m,setNeedConfirmation:p,setConfirmMessage:H,setHabitToDelete:g}){return f.map(I=>{const y=n.map(F=>G().find(M=>M.id===F)).filter(F=>F&&F.category[0]===I);return y.length===0?null:t.jsx(gt,{text:y[0].category,theme:e,isNegative:I==="Отказ от вредного",children:y.map(F=>t.jsx(ft,{id:F.id,theme:e,setCP:u,setCurrentId:w,fSize:m,setConfirmMessage:H,setNeedConfirmation:p,setHabitToDelete:g},F.id))},I)})}function ft({id:e=0,theme:n,setCP:f,setCurrentId:u,fSize:w,setNeedConfirmation:m,setConfirmMessage:p,setHabitToDelete:H}){const[g,I]=d.useState(l.habitsByDate[Se]?.[e]),[y,F]=d.useState(l.prefs[0]),[M,Y]=d.useState(qe.hasPremium),S=G().find(o=>o.id===e);if(!S)return null;const[R,i]=d.useState({name:S?.name||["",""],descr:S?.description||["",""],icon:S?.iconName||"default"}),b=S.category[0]==="Отказ от вредного",z=Xe(e),N=120,T=-N,[$,D]=d.useState(!0),[A,L]=d.useState(!1),[ne,oe]=d.useState(!1),[q,B]=d.useState(l.choosenHabitsGoals[e]),[X,fe]=d.useState(0),[K,_]=d.useState(!1),[W,J]=d.useState(!!b),[k,ge]=d.useState(b?864e5:6e4),[O,P]=d.useState(b?Math.round(Date.now()-new Date(l.choosenHabitsLastSkip[e])):6e4),[Q,Z]=d.useState(0),[s,h]=d.useState(0),r=b?"#FF3B30":S.color||"#32D74B",a=n==="light"||n==="speciallight";let C=a?"#FFFFFF":c.get("simplePanel",n)+"99",E=a?"#1D1D1F":c.get("mainText",n),V=a?"#8E8E93":c.get("subText",n),ie=a?"#FFFFFF":"rgba(70, 70, 70, 0.2)",ue=r,ae=a?"transparent":`1px solid ${c.get("border",n)}80`,Ae=a?"0 12px 24px -6px rgba(0, 0, 0, 0.27), 0 4px 8px -3px rgba(0, 0, 0, 0.06)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";b&&(C=a?"#9a4a4a":"rgba(255, 59, 48, 0.08)",ae=a?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",ie="rgba(255, 59, 48, 0.15)"),g===1?(C=a?"#32873961":"rgba(20, 60, 30, 0.85)",E=a?"#1E5E25":"#ffffff",V=a?"#2E7D32":"rgba(255,255,255,0.7)",ie=a?"#ffffff5c":"rgba(255,255,255,0.2)",ue=a?"#2E7D32":"#ffffff",ae="transparent"):g===-1&&(C=a?"#bc334868":"rgba(60, 20, 20, 0.85)",E=a?"#B71C1C":"#ffffff",V=a?"#C62828":"rgba(255,255,255,0.7)",ie=a?"#ffffff6e":"rgba(255,255,255,0.2)",ue=a?"#C62828":"#ffffff",ae="transparent");const he=Array.from(Object.values(l.habitsByDate));d.useEffect(()=>{if(e>-1){let o=0;const x=new Date().toISOString().split("T")[0];for(let v=he.length-2;v>=0;v--)if(e in he[v])if(he[v][e]>0)o++;else break;l.habitsByDate[x]?.[e]>0&&o++,h(o)}},[e,l.habitsByDate,g]),d.useEffect(()=>{const o=Ke.subscribe(Y);return()=>o.unsubscribe()},[]),d.useEffect(()=>{if(W){let o=0;const x=setInterval(()=>{o+=50;const v=(O+o)/k*100;Z(v),o===1e3&&P(ce=>{const U=ce+1e3;return o=0,!b&&U>=k?(Fe.play(),clearInterval(x),I(1),P(0),J(!1),Z(0)):U>=k&&g<1&&I(1),U})},50);return()=>clearInterval(x)}},[O,W,k]),d.useEffect(()=>{const o=Te.subscribe(x=>F(x==="ru"?0:1));return()=>o.unsubscribe()},[]),d.useEffect(()=>{l.changeStatus(Se,e,g)},[g]);const Ee=()=>S.isCustom&&S.iconName?se.getIcon(S.iconName,{size:22}):se.getHabitIcon(S.name?S.name[0]:"default",{size:22}),Re=tt(0),re=st(Re,[-1,1],[T,N]),Be=(o,x)=>{b?x.offset.x<T&&$&&(le(!1),me(re,0,{type:"tween",duration:.2}),D(!1)):Math.abs(x.offset.x)>N&&$&&((g<1&&x.offset.x>0||g>-1&&x.offset.x<0)&&le(x.offset.x>0),me(re,0,{type:"tween",duration:.2}),D(!1))},Pe=()=>{$&&me(re,0,{type:"tween",duration:.2}),D(!0)},le=o=>{let x=0;o?x=1:g===0?(x=-1,h(0)):g===1?(x=b?-1:0,h(0),b&&(P(0),l.choosenHabitsLastSkip[e]=Date.now())):g===-1&&(x=-1,b&&(P(0),l.choosenHabitsLastSkip[e]=Date.now())),l.habitsByDate[Se][e]=x,x===1?pe(Fe):x===-1&&pe(ct),I(x)},we=()=>{u(e),pe(ze);const o=!A;L(o),et(o?e:null)};d.useEffect(()=>{const o=_e.subscribe(x=>L(x===e));return()=>o.unsubscribe()},[e]),d.useEffect(()=>{D(!K)},[K]);const Ge=()=>{g<1&&!b&&(J(!0),P(0))},Me=()=>{b||(J(!1),Z(0),P(0))},Ne=o=>{H(o),m(!0),p(l.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return t.jsxs(te.div,{id:e,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:C,backdropFilter:a?"none":"blur(40px)",border:a?"none":ae,boxShadow:Ae,x:re},onClick:o=>{const x=document.getElementById(e);(x.clientHeight<80||o.nativeEvent.pageY-(x.getBoundingClientRect().top+window.scrollY)<80)&&we()},drag:$?"x":!1,dragConstraints:{left:T,right:g>0||b?0:N},onDrag:Be,onDragEnd:Pe,whileTap:{scale:.99},animate:{height:A?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[t.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ie,color:g===1?"#fff":ue,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:A?"5px":"0"},children:Ee()}),t.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[t.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:E,whiteSpace:A?"normal":"nowrap",overflow:A?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:R.name[y]}),t.jsxs("div",{style:{display:"flex",gap:"5px",marginTop:"16px",justifyContent:"center"},children:[t.jsx(ee,{theme:n,icon:t.jsx(lt,{size:9}),text:jt(e),color:n==="dark"?"#a5a5a5":"#1e1e1e8f"}),t.jsx(ee,{theme:n,icon:t.jsx(xe,{size:9}),text:mt(e),color:n==="dark"?"#e33131":"#9800008f"}),!b&&s>0&&t.jsx(ee,{theme:n,icon:t.jsx(de,{size:9}),text:yt(y,s),color:n==="dark"?"#31e355":"#1e98008f"}),!b&&W&&t.jsx(ee,{theme:n,icon:t.jsx(Je,{size:9}),text:De(O,k,y,!1),color:n==="dark"?"#31c8e3":"#0086988f"}),b&&t.jsx(ee,{theme:n,icon:t.jsx(de,{size:9}),text:De(O,k,y,b),color:n==="dark"?"#31e355":"#1e98008f"})]})]}),t.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!b&&t.jsxs(t.Fragment,{children:[!W&&g===0&&t.jsx(ot,{onClick:o=>{o.stopPropagation(),_(!0)},style:{color:c.get("icons",n),opacity:.4,fontSize:"24px",marginRight:"15px"}}),W&&t.jsx(it,{onClick:o=>{o.stopPropagation(),Me()},style:{color:r,fontSize:"24px",marginRight:"15px"}}),t.jsx("div",{onClick:o=>{o.stopPropagation(),le(!0)},style:{width:"30px",height:"30px",borderRadius:"50%",border:g!==0?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:g===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:g===1&&t.jsx(je,{size:16,color:"#FFF"})})]}),b&&t.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(de,{size:16,color:"#FF453A"})})]})]}),A&&t.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[t.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:a?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),R.descr[y]&&t.jsx("div",{style:{color:V,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:R.descr[y]}),M?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:q?.map((o,x)=>t.jsxs(te.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"90%",padding:"14px 16px",borderRadius:"16px",backgroundColor:a?"#FFFFFF":"rgba(255,255,255,0.05)",border:a?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:a?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[t.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:o.isDone?a?"#AEAEB2":"#636366":E,textDecoration:o.isDone?"line-through":"none"},children:o.text}),ne&&X===x&&t.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[t.jsx(ve,{onClick:()=>f(v=>({...v,show:!0,type:2,hId:e,gId:x,setGoals:B})),style:{fontSize:"14px",margin:"0 6px",color:c.get("icons",n),opacity:.7}}),t.jsx(Ie,{onClick:()=>f(v=>({...v,show:!0,type:3,hId:e,gId:x,setGoals:B})),style:{fontSize:"14px",margin:"0 6px",color:c.get("icons",n),opacity:.7}})]}),t.jsx("div",{onClick:()=>{oe(v=>!(v&&X===x)),fe(x),u(e)},children:t.jsx(nt,{style:{fontSize:"16px",color:c.get("icons",n),opacity:.4,marginRight:"12px"}})}),t.jsx("div",{onClick:()=>B(v=>{const ce=v.map((U,$e)=>$e===x?{...U,isDone:!U.isDone}:U);return l.choosenHabitsGoals[e]=ce,ce}),style:{width:"24px",height:"24px",borderRadius:"8px",border:o.isDone?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:o.isDone?r:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:o.isDone&&t.jsx(je,{size:12,color:"#FFF"})})]},x))}),t.jsxs("div",{onClick:()=>f({show:!0,type:1,hId:e,gId:0,setGoals:B}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${r}66`,backgroundColor:`${r}10`},children:[t.jsx(Qe,{style:{fontSize:"12px",color:r}}),t.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:r,fontWeight:"600"},children:y===0?"Добавить цель":"Add goal"})]}),t.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:c.get("subText",n),textTransform:"uppercase",letterSpacing:"0.5px"},children:y===0?"Достижения":"Achievements"}),l.choosenHabitsAchievements[e]?.map((o,x)=>t.jsx(bt,{index:x,milestone:o,id:e,isNegative:b,percent:z,theme:n,fSize:w,langIndex:y},x))]}):t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",marginBottom:"15px",fontSize:"12px",fontWeight:"600",color:c.get("subText",n),border:`2px dashed ${c.get("subText",n)}66`,padding:"12px",borderRadius:"16px"},children:y===0?"Микро цели и достижения с премиум":"Micro goals and achievements with premium"}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"35px"},children:[S.isCustom&&t.jsx(ve,{onClick:()=>f(o=>({...o,show:!0,type:0,hId:e,gId:0,hInfo:i})),style:{fontSize:"18px",color:c.get("icons",n),opacity:.7}}),t.jsx(Ie,{onClick:()=>Ne(e),style:{fontSize:"18px",color:c.get("icons",n),opacity:.7}}),t.jsx(Ze,{style:{fontSize:"18px",color:c.get("icons",n),opacity:.7},onClick:()=>{we()}}),!b&&t.jsx("div",{onClick:()=>le(!0),style:{width:"18px",height:"18px",borderRadius:"50%",border:g!==0?"none":`2px solid ${a?"#E5E5EA":"#3A3A3C"}`,backgroundColor:g===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:g===1&&t.jsx(je,{size:16,color:"#FFF"})})]})]}),K&&t.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:a?"#FFF":c.get("background",n)},onClick:o=>o.stopPropagation(),children:t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[t.jsx("div",{style:{color:c.get("mainText",n),fontWeight:"bold"},children:ht(k)}),t.jsx(rt,{style:{width:"50%",color:n==="dark"?"#3abfe4":"#14868878"},min:1,max:59,value:k/6e4,valueLabelDisplay:"off",onChange:o=>{ge(o.target.value*6e4),o.stopPropagation()}}),t.jsx(xe,{onClick:o=>{o.stopPropagation(),_(!1)},style:{cursor:"pointer",color:c.get("icons",n),fontSize:"24px"}}),t.jsx(Ce,{onClick:o=>{o.stopPropagation(),Ge(),_(!1)},style:{cursor:"pointer",color:r,fontSize:"24px"}})]})})]})}function gt({text:e=["Имя","Name"],children:n,theme:f}){const[u,w]=d.useState(!0),m=f==="light"||f==="speciallight",p=l.prefs[0];return t.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[t.jsxs("div",{onClick:()=>{w(!u),pe(ze)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[t.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:m?"#1D1D1F":c.get("mainText",f)},children:e[p]}),t.jsx(te.div,{animate:{rotate:u?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:t.jsx(Ve,{size:14,color:m?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),t.jsx(Ye,{initial:!1,children:u&&t.jsx(te.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:t.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:n})})})]})}function ut(e){return e===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function pe(e){l.prefs[2]==0&&e!==null&&(e.paused||(e.pause(),e.currentTime=0),e.volume=.5,e.play()),l.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function De(e,n,f,u){const w=u?e:n-e,m=Math.floor(w/1e3),p=Math.floor(m/86400),H=Math.floor(m%86400/3600),g=Math.floor(m%3600/60),I=m%60;return p>0?p:H>0?H.toString().padStart(2,"0")+":"+g.toString().padStart(2,"0"):g.toString().padStart(2,"0")+":"+I.toString().padStart(2,"0")}function ht(e){return Math.floor(e/6e4)+"m"}const bt=({milestone:e,index:n,id:f,theme:u,langIndex:w})=>{const m=l.choosenHabits.indexOf(f),p=l.choosenHabitsLastSkip[f],H=l.choosenHabitsStartDates[m],g=p||H,I=1440*60*1e3,y=g?Math.floor((Date.now()-g)/I):0,M=[30,50,100][n]||30,Y=y<M,S=M-y,R=w===0?`${S} days left to unlock`:`Осталось ${S} дн. до открытия`;return t.jsx("div",{style:{fontSize:"13px",color:c.get("subText",u),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:Y?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",opacity:.6},children:[t.jsx("div",{style:{width:"12px",height:"12px",border:`1px solid ${c.get("subText",u)}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"bold"},children:"i"}),t.jsx("span",{style:{fontSize:"11px"},children:R})]}):t.jsxs(t.Fragment,{children:[t.jsx(de,{size:12,color:c.get("icons",u),style:{opacity:.8}}),e[w]]})})},yt=(e,n)=>{if(e===0)return n},ee=({icon:e,text:n,color:f,theme:u})=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:c.get("background",u)+"75",color:f,fontSize:"10px",fontWeight:"700",whiteSpace:"nowrap"},children:[e,n&&t.jsx("span",{children:n})]});function mt(e){let n=0;for(const f in l.habitsByDate){const u=l.habitsByDate[f];u&&e in u&&u[e]===-1&&n++}return n}function jt(e){let n=0;for(const f in l.habitsByDate){const u=l.habitsByDate[f];u&&e in u&&u[e]&&n++}return n}export{pt as addHabitFn,Tt as currentId,Ht as default,ht as parsedTimeSimple,dt as removeHabitFn};
