import{bk as Ye,A as I,y as _,j as e,d as ie,m as b,a0 as Ve,C as r,ca as De,ai as Ke,cb as be,cc as xe,cd as We,ce as He,bd as Oe,cf as Ne,a$ as we,ah as je,cg as Qe,a6 as Ue,bK as de,b0 as qe,ae as _e,bp as Xe,a3 as Fe,ch as Je,ci as re,ab as Ze,t as et,l as tt,f as it,a5 as Re,cj as st,ck as nt,cl as Me,cm as ot,cn as at,co as Ie,cp as lt,K as Be,g as rt,n as dt,cq as ct,bO as pt}from"./index-BZVXE0o6.js";import{r as g}from"./recharts-k8ghPecL.js";import{S as Se}from"./ScrollPicker-Bz_uVKSf.js";import xt from"./ToDoMetrics-Dpe7BL4y.js";import{H as ut}from"./HoverInfoButton-Cv2LLN6h.js";import"./MyAreaChart-D6-rOis9.js";import"./index-B1p8FYNs.js";const v=new Ye(null);async function gt(i,s,t,n,a,p,o,x,w,y,k="",C=!1,S=!1,L=!1){const P=Date.now(),E=new Date,A=()=>(E.setFullYear(d.getFullYear()+1),d.toISOString().split("T")[0]);I.todoList.push({id:P,name:(i??"").trim()||"Untitled",description:(s??"").trim(),difficulty:Number.isFinite(t)?t:0,priority:Number.isFinite(n)?n:0,category:(a??"").trim()||"General",icon:p??"task",isDone:!1,startDate:o&&typeof o=="string"&&!isNaN(Date.parse(o))?o:E.toISOString().split("T")[0],deadLine:x&&typeof x=="string"&&!isNaN(Date.parse(x))?x:A(),goals:Array.isArray(w)?[...w]:[],urgency:Number.isFinite(y)?y:0,result:k,isPinned:C,isHidden:S,isPending:L}),await _(),v&&v.next({type:"UPDATE_LIST"})}async function ft(i,s,t){const n=I.todoList.find(a=>a.id===i);n&&n.goals&&n.goals[s]&&(n.goals[s].aim=t,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function ht(i,s,t){const n=I.todoList.find(a=>a.id===i);n&&n.goals&&n.goals[s]&&(n.goals[s].result=t,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function yt(i,s){const t=I.todoList.find(n=>n.id===i);t&&(t.result=s,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function bt(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isPinned=!s.isPinned,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function jt(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isHidden=!s.isHidden,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function mt(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isPending=!s.isPending,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function wt(i,s,t,n,a,p,o,x,w,y,k){const C=I.todoList.find(S=>S.id===i);C&&(C.name=s,C.description=t,C.difficulty=n,C.priority=a,C.category=p,C.icon=o,C.color=x,C.startDate=w,C.deadLine=y,C.note=k,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function Ct(i){I.todoList=I.todoList.filter(s=>s.id!==i),await _(),v&&v.next({type:"UPDATE_LIST"})}async function vt(i){const s=I.todoList.find(t=>t.id===i);s&&(s.isDone=!s.isDone,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function St(i,s){const t=I.todoList.find(n=>n.id===i);t&&(t.goals||(t.goals=[]),t.goals.push({text:s,isDone:!1}),await _(),v&&v.next({type:"UPDATE_LIST"}))}async function Tt(i,s,t){const n=I.todoList.find(a=>a.id===i);n&&n.goals&&n.goals[s]&&(n.goals[s].text=t,await _(),v&&v.next({type:"UPDATE_LIST"}))}async function kt(i,s){const t=I.todoList.find(n=>n.id===i);t&&t.goals&&(t.goals.splice(s,1),await _(),v&&v.next({type:"UPDATE_LIST"}))}async function Dt(i,s){const t=I.todoList.find(n=>n.id===i);t&&t.goals&&t.goals[s]&&(t.goals[s].isDone=!t.goals[s].isDone,await _(),v&&v.next({type:"UPDATE_LIST"}))}const ze=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],Le=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],Ft=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],It=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],Rt=({show:i,setShow:s,theme:t,lang:n,fSize:a,task:p})=>{const[o,x]=g.useState(p||{}),[w,y]=g.useState(!1),[k,C]=g.useState(""),[S,L]=g.useState(null),[P,E]=g.useState(!1),[A,N]=g.useState(""),[h,R]=g.useState({}),[B,m]=g.useState({}),[G,X]=g.useState(null),[M,Y]=g.useState(""),[W,se]=g.useState(!1),u=g.useRef(null),T=g.useRef(null),U=g.useRef(null);g.useEffect(()=>{p&&(x(p),N(p.result||"")),X(null),Y(""),R({}),m({})},[p]),g.useEffect(()=>{i||(X(null),Y(""),R({}),m({}),se(!1))},[i]),g.useEffect(()=>{P&&u.current&&setTimeout(()=>u.current.focus(),300)},[P]);const q=o.goals?.length||0,J=o.goals?.filter(l=>l.isDone).length||0,ne=q===0?o.isDone?100:0:Math.round(J/q*100),c=ce(t,a,o.color),Z=async()=>{const l=!o.isDone;l&&!o.result&&E(!0),x(f=>({...f,isDone:l})),await vt(o.id)},j=async()=>{(A.trim()||o.result)&&(await yt(o.id,A.trim()),x(l=>({...l,result:A.trim()}))),E(!1)},z=l=>{R(f=>({...f,[l]:!f[l]}))},V=(l,f,F)=>{m($=>({...$,[`${l}-${f}`]:!0})),f==="text"&&Y(F),f==="aim"&&Y(F),f==="result"&&Y(F)},te=async(l,f)=>{if(!o.goals)return;const F=M.trim(),$=o.goals[l],ee=[...o.goals];if(f==="text"){if(!F){window.confirm(n===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿ÑƒÑÑ‚ÑƒÑŽ Ð·Ð°Ð´Ð°Ñ‡Ñƒ?":"Delete empty item?")&&await K(l);return}ee[l]={...$,text:F},await Tt(o.id,l,F)}else f==="aim"?(ee[l]={...$,aim:F},await ft(o.id,l,F)):f==="result"&&(ee[l]={...$,result:F},await ht(o.id,l,F));x(ve=>({...ve,goals:ee})),m(ve=>({...ve,[`${l}-${f}`]:!1})),Y("")},oe=(l,f)=>{m(F=>({...F,[`${l}-${f}`]:!1})),Y("")},K=async l=>{const f=o.goals.filter((F,$)=>$!==l);x(F=>({...F,goals:f})),await kt(o.id,l),X(null),Y(""),R(F=>{const $={...F};return delete $[l],$}),m(F=>{const $={...F};return Object.keys($).forEach(ee=>{ee.startsWith(`${l}-`)&&delete $[ee]}),$})},pe=async()=>{S==="main"?(await Ct(o.id),s(!1)):typeof S=="number"&&await K(S),L(null)},Ce=async()=>{await wt(o.id,o.name,o.description,o.difficulty,o.priority,o.category,o.icon,o.color,o.startDate,o.deadLine,o.note),y(!1)},D=async l=>{if(!o.goals)return;const f=[...o.goals],$=!f[l].isDone;f[l]={...f[l],isDone:$},$&&!f[l].result&&R(ee=>({...ee,[l]:!0})),x(ee=>({...ee,goals:f})),await Dt(o.id,l)},Q=async()=>{if(!k.trim())return;const l={text:k,aim:"",result:"",isDone:!1};x(f=>({...f,goals:[...f.goals||[],l]})),await St(o.id,k),C("")},ae=(l,f,F)=>{l.key==="Enter"&&te(f,F),l.key==="Escape"&&oe(f,F)};return e.jsx(ie,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(!1),style:c.backdrop}),e.jsxs(b.div,{initial:{y:"100%"},animate:{y:"0%"},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},style:c.modalContainer,children:[e.jsx(ie,{children:S!==null&&e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:c.warningOverlay,children:e.jsxs("div",{style:c.warningBox,children:[e.jsx(Ve,{size:40,color:"#F44336",style:{marginBottom:15}}),e.jsx("h3",{style:{color:r.get("mainText",t),margin:"0 0 10px 0"},children:n===0?"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹?":"Are you sure?"}),e.jsx("p",{style:{color:r.get("subText",t),textAlign:"center",marginBottom:20},children:n===0?"Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ.":"This action cannot be undone."}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%"},children:[e.jsx("button",{onClick:()=>L(null),style:c.cancelBtn,children:n===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("button",{onClick:pe,style:c.confirmDeleteBtn,children:n===0?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ":"Delete"})]})]})})}),e.jsx(ie,{children:P&&e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:c.warningOverlay,children:e.jsxs("div",{style:c.resultModalBox,children:[e.jsxs("div",{style:c.resultModalHeader,children:[e.jsx(De,{size:32,color:o.color}),e.jsx("h3",{style:{color:r.get("mainText",t),margin:"10px 0 5px 0"},children:n===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Task Result"}),e.jsx("p",{style:{color:r.get("subText",t),fontSize:"14px",margin:0},children:n===0?"Ð§Ñ‚Ð¾ Ð²Ñ‹ ÑƒÐ·Ð½Ð°Ð»Ð¸ Ð¸Ð»Ð¸ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð»Ð¸?":"What did you learn or achieve?"})]}),e.jsx("textarea",{ref:u,value:A,onChange:l=>N(l.target.value),placeholder:n===0?"ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð´Ð°Ñ‡Ð¸...":"Describe the task completion result...",style:c.resultTextarea,rows:4}),e.jsxs("div",{style:{display:"flex",gap:10,width:"100%",marginTop:20},children:[e.jsx("button",{onClick:()=>{E(!1),N("")},style:c.skipBtn,children:n===0?"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ":"Skip"}),e.jsx("button",{onClick:j,style:c.saveResultBtn,children:n===0?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚":"Save Result"})]})]})})}),e.jsx("div",{style:c.dragArea,onClick:()=>s(!1),children:e.jsx("div",{style:c.dragHandle})}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"90vw",marginLeft:"5vw",justifyContent:"flex-end"},children:[!w&&e.jsx("div",{style:c.statusBadge(o.isDone),children:o.isDone?n===0?"Ð’Ð«ÐŸÐžÐ›ÐÐ•ÐÐž":"COMPLETED":n===0?"Ð’ ÐŸÐ ÐžÐ¦Ð•Ð¡Ð¡Ð•":"IN PROGRESS"}),W&&e.jsxs("div",{style:{...c.toolbar,width:"40vw"},children:[e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>L("main"),style:c.iconBtnRed,children:e.jsx(Ke,{size:16})}),e.jsx("div",{style:c.toolbarRight,children:w?e.jsx(b.div,{whileTap:{scale:.9},onClick:Ce,style:{...c.iconBtn,backgroundColor:"#09b038a2"},children:e.jsx(be,{size:16})}):e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>y(!0),style:c.iconBtn,children:e.jsx(xe,{size:16})})}),e.jsx(b.div,{whileTap:{scale:.9},onClick:Z,style:c.mainCheckbox(o.isDone),children:o.isDone&&e.jsx(We,{size:12,color:"#fff"})})]}),e.jsx("div",{style:c.toolbar,children:e.jsx(He,{onClick:()=>se(l=>!l)})})]}),e.jsxs("div",{style:{overflowY:"scroll",overflowX:"hidden"},className:"no-scrollbar",children:[e.jsxs("div",{style:c.headerWrapper,children:[e.jsxs("div",{style:c.fixedHeader,children:[e.jsx("div",{style:c.headerLeft,children:e.jsx("div",{style:c.iconBadge,children:o.icon})}),e.jsx("div",{style:c.headerCenter,children:w?e.jsx("input",{type:"text",placeholder:n===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Name",value:o.name,onChange:l=>x({...o,name:l.target.value}),style:c.titleInput}):e.jsx("h2",{style:c.title,children:o.name})})]}),e.jsx("div",{style:c.headerRight,children:e.jsxs("div",{style:c.progressContainer,children:[e.jsxs("span",{style:c.progressText,children:[ne,"%"]}),e.jsx("div",{style:c.progressBarBg,children:e.jsx(b.div,{initial:{width:0},animate:{width:`${ne}%`},style:c.progressBarFill})})]})}),o.isDone&&o.result&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:c.resultDisplayCard,children:[e.jsxs("div",{style:c.resultDisplayHeader,children:[e.jsx(De,{size:18,color:o.color}),e.jsx("span",{style:c.resultDisplayTitle,children:n===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Task Result"}),e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>{N(o.result),E(!0)},style:c.editResultBtn,children:e.jsx(xe,{size:12})})]}),e.jsx("p",{style:c.resultDisplayText,children:o.result})]})]}),e.jsxs("div",{style:c.bodyPadding,children:[e.jsx("div",{style:c.gridTwo,children:w?e.jsxs(e.Fragment,{children:[e.jsx("select",{style:c.selectInput,value:o.priority,onChange:l=>x({...o,priority:parseInt(l.target.value)}),children:ze.map((l,f)=>e.jsx("option",{value:f,children:l[n]},f))}),e.jsx("select",{style:c.selectInput,value:o.difficulty,onChange:l=>x({...o,difficulty:parseInt(l.target.value)}),children:Le.map((l,f)=>e.jsx("option",{value:f,children:l[n]},f))})]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{icon:e.jsx(Oe,{}),label:n===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority",value:ze[o?.priority][n],color:Ft[o?.priority],theme:t}),e.jsx(Pe,{icon:e.jsx(Ne,{}),label:n===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",value:Le[o?.difficulty][n],color:It[o?.difficulty],theme:t})]})}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:w?e.jsx("textarea",{placeholder:n===0?"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ":"Description",value:o.description,onChange:l=>x({...o,description:l.target.value}),style:c.descriptionInput,rows:3}):e.jsx("p",{style:c.description,children:o.description||(n===0?"ÐÐµÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ":"No description")})}),e.jsxs("div",{style:c.dateRow,children:[e.jsx(Ee,{label:n===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start",value:o.startDate,icon:e.jsx(we,{}),isEditing:w,theme:t,onChange:l=>x({...o,startDate:l})}),e.jsx(Ee,{label:n===0?"Ð¡Ñ€Ð¾Ðº":"Deadline",value:o.deadLine,icon:e.jsx(je,{}),isEditing:w,theme:t,onChange:l=>x({...o,deadLine:l})})]}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsxs("div",{style:c.sectionHeader,children:[e.jsx(Qe,{style:{marginRight:"8px",color:o.color}}),n===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist",e.jsxs("span",{style:c.counterBadge,children:[J,"/",q]})]}),e.jsxs("div",{style:c.goalsContainer,children:[e.jsx(ie,{children:o.goals?.map((l,f)=>e.jsx(b.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},style:{marginBottom:8},children:e.jsx(Bt,{goal:l,index:f,idx:f,isExpanded:h[f],onToggleExpand:z,onToggleComplete:D,onDelete:()=>L(f),task:o,theme:t,lang:n,editingFields:B,editingSubGoalText:M,onEditField:V,onSaveField:te,onCancelEdit:oe,onKeyDown:ae,aimInputRef:f===G&&B[`${f}-aim`]?T:null,subGoalTextInputRef:f===G&&B[`${f}-text`]?U:null})},`goal-${f}`))}),e.jsxs("div",{style:c.addSubRow,children:[e.jsx(Ue,{style:{color:r.get("subText",t),marginRight:10}}),e.jsx("input",{type:"text",placeholder:n===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Add item...",value:k,onChange:l=>C(l.target.value),onKeyDown:l=>l.key==="Enter"&&Q(),style:c.addSubInput}),k.length>0&&e.jsx("button",{onClick:Q,style:c.addSubBtn,children:"OK"})]})]})]}),e.jsx("div",{style:{marginBottom:"560px"}})]})]})]})]})})},Bt=({goal:i,index:s,idx:t,isExpanded:n,onToggleExpand:a,onToggleComplete:p,onDelete:o,task:x,theme:w,lang:y,editingFields:k,editingSubGoalText:C,onEditField:S,onSaveField:L,onCancelEdit:P,onKeyDown:E,aimInputRef:A,subGoalTextInputRef:N})=>{const h=ce(w,null,x.color);r.get("simplePanel",w);const R=r.get("border",w);r.get("mainText",w);const B=r.get("subText",w);return e.jsxs("div",{style:{...h.subGoalCard,border:i.isDone?"2px solid #2ed177":`1px solid ${R}30`},children:[e.jsxs("div",{style:h.subGoalMainRow,children:[e.jsx("div",{onClick:()=>p(s),style:h.checkbox(i.isDone),role:"checkbox","aria-checked":i.isDone,children:i.isDone&&e.jsx(We,{size:10,color:"#2ed177"})}),e.jsx("div",{style:h.subGoalContent,children:k[`${s}-text`]?e.jsx("input",{ref:N,type:"text",value:C,onChange:m=>{},onKeyDown:m=>E(m,s,"text"),style:h.inlineEditInput,autoFocus:!0}):e.jsx("div",{onClick:()=>a(s),style:h.subGoalText(i.isDone),children:i.text})}),e.jsx("div",{style:h.subGoalActions,children:k[`${s}-text`]?e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>L(s,"text"),style:h.actionBtn,children:e.jsx(be,{size:12,color:x.color})}),e.jsx("div",{onClick:()=>P(s,"text"),style:{...h.actionBtn,color:B},children:e.jsx(de,{size:12})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:m=>{m.stopPropagation(),S(s,"text",i.text)},style:h.actionBtn,children:e.jsx(xe,{size:12,color:B})}),e.jsx("div",{onClick:m=>{m.stopPropagation(),o()},style:h.actionBtn,children:e.jsx(de,{size:12,color:B})}),e.jsx("div",{onClick:m=>{m.stopPropagation(),a(s)},style:h.expandBtn,children:n?e.jsx(qe,{size:12,color:B}):e.jsx(_e,{size:12,color:B})})]})})]}),e.jsx(ie,{children:n&&e.jsxs(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:h.expandedContent,children:[e.jsxs("div",{style:h.expandedField,children:[e.jsxs("div",{style:h.fieldHeader,children:[e.jsx(Xe,{size:14,color:x.color}),e.jsx("span",{style:h.fieldTitle,children:y===0?"Ð¦ÐµÐ»ÑŒ Ð¿Ð¾Ð´Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Sub-goal Aim"})]}),k[`${s}-aim`]?e.jsxs("div",{style:h.editFieldRow,children:[e.jsx("input",{ref:A,type:"text",value:C,onChange:m=>{},onKeyDown:m=>E(m,s,"aim"),style:h.fieldEditInput,placeholder:y===0?"Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ñ‡ÑŒ?":"What needs to be achieved?",autoFocus:!0}),e.jsx("div",{onClick:()=>L(s,"aim"),style:h.saveFieldBtn,children:e.jsx(be,{size:12})}),e.jsx("div",{onClick:()=>P(s,"aim"),style:h.cancelFieldBtn,children:e.jsx(de,{size:12})})]}):e.jsxs("div",{style:h.fieldDisplay,children:[i.aim?e.jsx("p",{style:h.fieldValue,children:i.aim}):e.jsx("p",{style:h.fieldPlaceholder,children:y===0?"Ð¦ÐµÐ»ÑŒ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½Ð°":"No aim specified"}),e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>S(s,"aim",i.aim||""),style:h.editFieldBtn,children:e.jsx(xe,{size:12})})]})]}),i.isDone&&e.jsxs("div",{style:h.expandedField,children:[e.jsxs("div",{style:h.fieldHeader,children:[e.jsx(De,{size:14,color:"#2ed177"}),e.jsx("span",{style:{...h.fieldTitle,color:"#2ed177"},children:y===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚":"Result"})]}),k[`${s}-result`]?e.jsxs("div",{style:h.editFieldRow,children:[e.jsx("textarea",{value:C,onChange:m=>{},onKeyDown:m=>E(m,s,"result"),style:{...h.fieldEditInput,minHeight:"60px"},placeholder:y===0?"Ð§Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚Ð¾?":"What was achieved?",autoFocus:!0}),e.jsx("div",{onClick:()=>L(s,"result"),style:h.saveFieldBtn,children:e.jsx(be,{size:12})}),e.jsx("div",{onClick:()=>P(s,"result"),style:h.cancelFieldBtn,children:e.jsx(de,{size:12})})]}):e.jsxs("div",{style:h.fieldDisplay,children:[i.result?e.jsx("p",{style:h.fieldValue,children:i.result}):e.jsx("p",{style:h.fieldPlaceholder,children:y===0?"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½":"No result specified"}),e.jsx(b.div,{whileTap:{scale:.9},onClick:()=>S(s,"result",i.result||""),style:h.editFieldBtn,children:e.jsx(xe,{size:12})})]})]})]})})]})},Pe=({icon:i,label:s,value:t,color:n,theme:a})=>e.jsxs("div",{style:{...ce(a).modernBadge,backgroundColor:`${n}15`,border:`1px solid ${n}30`},children:[e.jsxs("div",{style:ce(a).badgeLabel,children:[i," ",e.jsx("span",{style:{marginLeft:6},children:s})]}),e.jsx("div",{style:{...ce(a).badgeValue,color:n},children:t})]}),Ee=({label:i,value:s,icon:t,isEditing:n,theme:a,onChange:p})=>{const o=ce(a);return e.jsxs("div",{style:o.dateItem,children:[e.jsx("div",{style:{color:r.get("subText",a),marginRight:10},children:t}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:o.label,children:i}),n?e.jsx("input",{type:"date",style:o.dateInput,value:s||"",onChange:x=>p(x.target.value)}):e.jsx("span",{style:o.dateValue,children:s||"-"})]})]})},ce=(i,s,t)=>{const n=r.get("background",i),a=r.get("simplePanel",i),p=r.get("mainText",i),o=r.get("subText",i),x=r.get("border",i),w=r.get("done",i);return{backdrop:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",zIndex:1e3},modalContainer:{position:"fixed",bottom:0,left:0,right:0,height:"90dvh",backgroundColor:n,borderTopLeftRadius:"32px",borderTopRightRadius:"32px",zIndex:2e3,display:"flex",flexDirection:"column",boxShadow:"0 -10px 40px rgba(0,0,0,0.5)",overflow:"hidden"},warningOverlay:{position:"absolute",inset:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:20},warningBox:{backgroundColor:a,borderRadius:24,padding:25,width:"100%",maxWidth:320,display:"flex",flexDirection:"column",alignItems:"center",border:`1px solid ${x}`},cancelBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:x,color:p,fontWeight:"bold"},confirmDeleteBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:"#F44336",color:"#fff",fontWeight:"bold"},resultModalBox:{backgroundColor:a,borderRadius:24,padding:25,width:"100%",maxWidth:400,display:"flex",flexDirection:"column",border:`1px solid ${x}`},resultModalHeader:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:15},resultTextarea:{width:"100%",padding:"12px",borderRadius:12,border:`1px solid ${x}`,backgroundColor:a,color:p,fontSize:"15px",resize:"vertical",fontFamily:"inherit"},skipBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:x,color:p,fontWeight:"bold"},saveResultBtn:{flex:1,padding:"12px",borderRadius:12,border:"none",backgroundColor:t,color:"#fff",fontWeight:"bold"},dragArea:{width:"100%",padding:"15px 0",display:"flex",justifyContent:"center"},dragHandle:{width:"40px",height:"5px",backgroundColor:x,borderRadius:"10px"},toolbar:{display:"flex",justifyContent:"space-between",padding:"0 24px 15px 24px",alignItems:"center"},iconBtn:{background:a,border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:p},iconBtnRed:{background:"rgba(244, 67, 54, 0.1)",border:"none",width:"40px",height:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",color:"#F44336"},saveBtn:{background:w,color:"#fff",border:"none",borderRadius:"12px",padding:"0 20px",fontWeight:"bold",display:"flex",alignItems:"center"},toolbarRight:{display:"flex",gap:8},headerWrapper:{padding:"0 24px 25px 24px",borderBottom:`1px solid ${x}`},fixedHeader:{display:"flex",alignItems:"center",padding:"20px 0",gap:20},headerLeft:{display:"flex",alignItems:"center",gap:12,flexShrink:0},mainCheckbox:y=>({width:32,height:32,borderRadius:8,border:`2px solid ${y?t:x}`,backgroundColor:y?t:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s ease"}),iconBadge:{width:56,height:56,borderRadius:16,fontSize:28,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${t}20`,border:`1px solid ${t}40`,flexShrink:0},headerCenter:{flex:1,display:"flex",flexDirection:"column",gap:8,minWidth:0},headerRight:{display:"flex",width:"100vw",alignItems:"center",flexShrink:0},title:{fontSize:24,fontWeight:900,color:p,margin:0,width:"70%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},titleInput:{width:"100%",border:"none",background:"transparent",fontSize:"24px",fontWeight:"900",color:p,outline:`solid 1px ${x}`,borderRadius:"12px",padding:"8px 12px"},statusBadge:y=>({padding:"8px 16px",borderRadius:12,fontSize:10,fontWeight:900,border:"none",backgroundColor:y?w:a,color:y?"#fff":o,width:"fit-content",marginRight:"auto"}),resultDisplayCard:{backgroundColor:`${t}10`,border:`1px solid ${t}30`,borderRadius:16,padding:"16px",marginTop:"16px"},resultDisplayHeader:{display:"flex",alignItems:"center",gap:8,marginBottom:8},resultDisplayTitle:{fontSize:"14px",fontWeight:"700",color:t,flex:1},editResultBtn:{width:24,height:24,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:o,":hover":{backgroundColor:`${x}30`}},resultDisplayText:{fontSize:"14px",color:p,lineHeight:1.5,margin:0,whiteSpace:"pre-wrap"},progressContainer:{width:"90vw"},progressText:{fontSize:11,fontWeight:800,color:t,textAlign:"center"},progressBarBg:{width:"100%",height:6,backgroundColor:x,borderRadius:10,marginTop:4,overflow:"hidden"},progressBarFill:{height:"100%",backgroundColor:t,borderRadius:10},bodyPadding:{padding:24},gridTwo:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},modernBadge:{borderRadius:20,padding:15,display:"flex",flexDirection:"column",alignItems:"center"},badgeLabel:{display:"flex",alignItems:"center",fontSize:10,color:o,textTransform:"uppercase",letterSpacing:1},badgeValue:{fontSize:14,fontWeight:800,marginTop:4},dateRow:{display:"flex",gap:12,marginBottom:24},dateItem:{flex:1,display:"flex",alignItems:"center",backgroundColor:a,padding:12,borderRadius:16},dateInput:{background:"transparent",border:"none",color:p,fontSize:13,width:"100%",outline:"none"},label:{fontSize:9,color:o,textTransform:"uppercase"},dateValue:{fontSize:13,fontWeight:700,color:p},sectionHeader:{display:"flex",alignItems:"center",fontSize:17,fontWeight:800,color:p,marginBottom:15},counterBadge:{marginLeft:"auto",fontSize:11,backgroundColor:a,padding:"4px 10px",borderRadius:8,color:o},subGoalCard:{backgroundColor:a,borderRadius:16,overflow:"hidden",transition:"all 0.2s ease"},subGoalMainRow:{display:"flex",alignItems:"center",padding:"12px 14px",gap:10},checkbox:y=>({width:22,height:22,borderRadius:6,border:`2px solid ${y?t:x}`,backgroundColor:y?t:"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer",transition:"all 0.2s ease"}),subGoalContent:{flex:1,minWidth:0},subGoalText:y=>({fontSize:15,color:p,opacity:y?.6:1,textDecoration:y?"line-through":"none",cursor:"pointer",wordBreak:"break-word",lineHeight:1.4}),subGoalActions:{display:"flex",alignItems:"center",gap:4,flexShrink:0},expandBtn:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,cursor:"pointer",color:o,transition:"all 0.2s ease"},actionBtn:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,cursor:"pointer",color:o,transition:"all 0.2s ease"},expandedContent:{padding:"0 14px 16px 14px",borderTop:`1px solid ${x}30`},expandedField:{marginBottom:16},fieldHeader:{display:"flex",alignItems:"center",gap:6,marginBottom:8},fieldTitle:{fontSize:12,fontWeight:"700",color:o,textTransform:"uppercase"},fieldDisplay:{display:"flex",alignItems:"flex-start",gap:8,padding:"10px 12px",backgroundColor:`${a}80`,borderRadius:12,minHeight:"40px"},fieldValue:{flex:1,fontSize:14,color:p,margin:0,lineHeight:1.4,wordBreak:"break-word"},fieldPlaceholder:{flex:1,fontSize:14,color:o,opacity:.6,fontStyle:"italic",margin:0},editFieldBtn:{width:24,height:24,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:o,flexShrink:0,transition:"all 0.2s ease"},editFieldRow:{display:"flex",alignItems:"flex-start",gap:8},fieldEditInput:{flex:1,background:"transparent",border:`1px solid ${x}`,borderRadius:8,padding:"8px 12px",color:p,fontSize:14,outline:"none",fontFamily:"inherit",resize:"vertical"},saveFieldBtn:{width:28,height:28,borderRadius:8,backgroundColor:t,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},cancelFieldBtn:{width:28,height:28,borderRadius:8,backgroundColor:x,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},inlineEditInput:{flex:1,background:"transparent",border:`1px solid ${x}`,borderRadius:8,padding:"6px 10px",color:p,fontSize:15,outline:"none",fontFamily:"inherit",minWidth:0},addSubRow:{display:"flex",alignItems:"center",padding:"16px 15px",border:`2px dashed ${x}`,borderRadius:16,marginTop:8},addSubInput:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:p,outline:"none",marginLeft:"10px"},addSubBtn:{background:t,color:"#fff",border:"none",borderRadius:8,padding:"6px 12px",fontWeight:"bold",marginLeft:10,flexShrink:0},description:{fontSize:15,lineHeight:1.6,color:p,margin:0,opacity:.9},descriptionInput:{width:"90%",padding:"12px",borderRadius:12,border:`1px solid ${x}`,backgroundColor:a,color:p,fontSize:"15px",fontFamily:"inherit",resize:"vertical"},selectInput:{width:"100%",padding:12,borderRadius:12,border:`1px solid ${x}`,backgroundColor:a,color:p,fontSize:"15px"}}},ue=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],ge=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],fe=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],Te=[{icon:"ðŸ“",label:["ÐžÐ±Ñ‰ÐµÐµ","General"]},{icon:"ðŸ’¼",label:["Ð Ð°Ð±Ð¾Ñ‚Ð°","Work"]},{icon:"ðŸ ",label:["Ð”Ð¾Ð¼","Home"]},{icon:"ðŸ’ª",label:["Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ","Health"]},{icon:"ðŸ›’",label:["ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ¸","Shopping"]},{icon:"ðŸŽ“",label:["Ð£Ñ‡ÐµÐ±Ð°","Study"]},{icon:"âœˆï¸",label:["ÐŸÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ","Trip"]},{icon:"ðŸ’°",label:["Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹","Finance"]},{icon:"ðŸŽ¨",label:["Ð¥Ð¾Ð±Ð±Ð¸","Hobby"]},{icon:"ðŸ’»",label:["ÐšÐ¾Ð´","Coding"]},{icon:"ðŸŽ®",label:["Ð˜Ð³Ñ€Ñ‹","Games"]},{icon:"ðŸŽµ",label:["ÐœÑƒÐ·Ñ‹ÐºÐ°","Music"]},{icon:"ðŸ“š",label:["Ð§Ñ‚ÐµÐ½Ð¸Ðµ","Reading"]},{icon:"ðŸƒ",label:["Ð¡Ð¿Ð¾Ñ€Ñ‚","Sports"]},{icon:"ðŸ½ï¸",label:["Ð•Ð´Ð°","Food"]}],zt=({theme:i,lang:s,fSize:t})=>{const[n,a]=g.useState(!1),[p,o]=g.useState(""),[x,w]=g.useState(""),[y,k]=g.useState(ue[1][s]),[C,S]=g.useState(ge[2][s]),[L,P]=g.useState(fe[1][s]),[E,A]=g.useState(0),[N,h]=g.useState(new Date().toISOString().split("T")[0]),[R,B]=g.useState(""),[m,G]=g.useState([]),[X,M]=g.useState("");g.useEffect(()=>{const T=Fe.subscribe(U=>a(U==="ToDoNew"));return()=>T.unsubscribe()},[]);const Y=async()=>{if(!p.trim()){Ze(s===0?"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Enter name",2e3,!1);return}const T=ue.findIndex(Z=>Z.includes(y)),U=ge.findIndex(Z=>Z.includes(C)),q=fe.findIndex(Z=>Z.includes(L)),J=Te[E],ne=J.label[1],c=J.icon;await gt(p,x,U,T,ne,c,N,R,m,q),W()},W=()=>{re(null),setTimeout(()=>{o(""),w(""),G([]),M(""),k(ue[1][s]),S(ge[2][s]),P(fe[1][s]),h(new Date().toISOString().split("T")[0]),B(""),A(0)},300)},se=()=>{X.trim()&&(G([...m,{text:X,isDone:!1}]),M(""))},u=Lt(i);return e.jsx(ie,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:W,style:u.backdrop}),e.jsxs(b.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:250},style:u.container,children:[e.jsx("div",{style:u.handleContainer,children:e.jsx("div",{style:u.handle})}),e.jsxs("div",{style:u.header,children:[e.jsx(b.button,{whileTap:{scale:.9},onClick:W,style:u.textBtn,children:s===0?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"}),e.jsx("span",{style:u.headerTitle,children:s===0?"ÐÐ¾Ð²Ð°Ñ Ñ†ÐµÐ»ÑŒ":"New Goal"}),e.jsx(b.button,{whileTap:{scale:.9},onClick:Y,style:{...u.textBtn,color:r.get("done",i),fontWeight:"700"},children:s===0?"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ":"Create"})]}),e.jsxs("div",{style:u.scrollContent,className:"no-scrollbar",children:[e.jsx("div",{style:u.section,children:e.jsxs("div",{style:u.mainInputWrapper,children:[e.jsx("div",{style:u.largeIconDisplay,children:Te[E].icon}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:e.jsx("input",{type:"text",placeholder:s===0?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ†ÐµÐ»Ð¸...":"Goal Title...",value:p,onChange:T=>o(T.target.value),style:u.mainInput})})]})}),e.jsxs("div",{style:u.categorySection,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8,paddingLeft:5},children:[e.jsx(Je,{size:12,color:r.get("subText",i),style:{marginRight:6}}),e.jsx("label",{style:u.label,children:s===0?"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ":"Category"})]}),e.jsx("div",{style:u.iconScrollContainer,children:Te.map((T,U)=>{const q=U===E;return e.jsxs(b.div,{whileTap:{scale:.9},onClick:()=>A(U),style:{...u.categoryChip,backgroundColor:q?r.get("highlitedPanel",i):"transparent",borderColor:q?"transparent":r.get("border",i)},children:[e.jsx("span",{style:{fontSize:"1.4rem"},children:T.icon}),q&&e.jsx(b.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},style:u.categoryLabel,children:T.label[s]})]},U)})})]}),e.jsx("div",{style:u.card,children:e.jsxs("div",{style:u.pickerRow,children:[e.jsxs("div",{style:u.pickerCol,children:[e.jsx("label",{style:u.label,children:s===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚":"Priority"}),e.jsx(Se,{items:ue.map(T=>T[s]),value:y,onChange:k,theme:i,width:"100%"})]}),e.jsx("div",{style:u.divider}),e.jsxs("div",{style:u.pickerCol,children:[e.jsx("label",{style:u.label,children:s===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty"}),e.jsx(Se,{items:ge.map(T=>T[s]),value:C,onChange:S,theme:i,width:"100%"})]}),e.jsx("div",{style:u.divider}),e.jsxs("div",{style:u.pickerCol,children:[e.jsx("label",{style:u.label,children:s===0?"Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ":"Urgency"}),e.jsx(Se,{items:fe.map(T=>T[s]),value:L,onChange:P,theme:i,width:"100%"})]})]})}),e.jsxs("div",{style:u.dateSection,children:[e.jsx("div",{style:u.dateCard,children:e.jsxs("div",{style:u.dateRow,children:[e.jsx(we,{style:{marginRight:10,color:r.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:u.label,children:s===0?"Ð¡Ñ‚Ð°Ñ€Ñ‚":"Start"}),e.jsx("input",{type:"date",style:u.dateInput,value:N,onChange:T=>h(T.target.value)})]})]})}),e.jsx("div",{style:u.dateCard,children:e.jsxs("div",{style:u.dateRow,children:[e.jsx(je,{style:{marginRight:10,color:r.get("subText",i)}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx("span",{style:u.label,children:s===0?"Ð¡Ñ€Ð¾Ðº":"Deadline"}),e.jsx("input",{type:"date",style:u.dateInput,value:R,onChange:T=>B(T.target.value)})]})]})})]}),e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:s===0?"Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ / ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ...":"Notes / Description...",value:x,onChange:T=>w(T.target.value),style:u.mainInput})}),e.jsxs("div",{style:u.subTaskContainer,children:[e.jsx("label",{style:u.sectionTitle,children:s===0?"Ð§ÐµÐº-Ð»Ð¸ÑÑ‚":"Checklist"}),e.jsxs("div",{style:u.addSubRow,children:[e.jsx("div",{style:u.subInputContainer,children:e.jsx("input",{type:"text",placeholder:s===0?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑˆÐ°Ð³...":"Add a step...",value:X,onChange:T=>M(T.target.value),style:u.subInput})}),e.jsx(b.div,{whileTap:{scale:.9},onClick:se,style:u.addBtn,children:e.jsx(Ue,{style:{width:"100%",color:"#fff"}})})]}),e.jsx("div",{style:u.subList,children:e.jsx(ie,{children:m.map((T,U)=>e.jsxs(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0,padding:0},style:u.subItem,children:[e.jsx("div",{style:u.subDot}),e.jsx("span",{style:u.subText,children:T.text}),e.jsx("div",{onClick:()=>G(m.filter((q,J)=>J!==U)),children:e.jsx(de,{style:{width:"100%",color:r.get("subText",i),cursor:"pointer"}})})]},U))})})]}),e.jsx("div",{style:{marginBottom:"100px"}})]})]})]})})},Lt=i=>{const s=r.get("background",i),t=r.get("simplePanel",i),n=r.get("mainText",i),a=r.get("subText",i),p=r.get("border",i);return{backdrop:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",zIndex:998},container:{position:"fixed",bottom:0,left:0,right:0,height:"90vh",backgroundColor:s,borderRadius:"24px 24px 0 0",boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",zIndex:999,display:"flex",flexDirection:"column",overflow:"hidden"},handleContainer:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"12px",paddingBottom:"8px"},handle:{width:"40px",height:"5px",borderRadius:"3px",backgroundColor:r.get("border",i)},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px 15px 20px",borderBottom:`1px solid ${r.get("svgColor",i)}`},textBtn:{background:"none",border:"none",fontSize:"16px",color:a,cursor:"pointer",padding:"10px"},headerTitle:{fontSize:"18px",fontWeight:"700",color:n},scrollContent:{flex:1,overflowY:"auto",padding:"20px"},section:{marginBottom:"20px"},mainInputWrapper:{display:"flex",alignItems:"center",gap:"15px"},largeIconDisplay:{fontSize:"2.5rem",width:"50px",textAlign:"center"},mainInput:{flex:1,border:"none",background:"transparent",fontSize:"16px",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",color:n,WebkitUserSelect:"auto",outline:`1px solid ${p}`,borderRadius:"16px",padding:"14px",width:"100%"},categorySection:{marginBottom:"20px"},iconScrollContainer:{display:"flex",gap:"10px",overflowX:"auto",padding:"2px 2px 10px 2px",scrollbarWidth:"none",msOverflowStyle:"none"},categoryChip:{padding:"8px 16px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",border:`1px solid ${p}`,minWidth:"60px",whiteSpace:"nowrap"},categoryLabel:{fontSize:"13px",fontWeight:"600",color:n,marginLeft:"4px"},card:{backgroundColor:t,borderRadius:"20px",padding:"15px",boxShadow:r.get("shadow",i),marginBottom:"20px"},pickerRow:{display:"flex",justifyContent:"space-between",alignItems:"center"},pickerCol:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},divider:{width:"1px",height:"60px",backgroundColor:p,margin:"0 5px"},label:{fontSize:"11px",color:a,fontWeight:"700",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},dateSection:{display:"flex",gap:"12px",marginBottom:"20px"},dateCard:{flex:1,backgroundColor:t,borderRadius:"16px",padding:"12px",border:`1px solid ${p}`,display:"flex",alignItems:"center"},dateRow:{display:"flex",alignItems:"center",width:"100%"},dateInput:{background:"transparent",border:"none",color:n,fontSize:"14px",width:"100%",outline:"none",fontFamily:"inherit",fontWeight:"600"},subTaskContainer:{marginTop:"30px"},sectionTitle:{fontSize:"16px",fontWeight:"700",color:n,marginLeft:"5px",marginBottom:"10px",display:"block"},addSubRow:{display:"flex",alignItems:"center",gap:"10px"},subInputContainer:{flex:1,display:"flex",flexDirection:"column",border:`2px dashed ${p}`,borderRadius:"16px",padding:"12px",marginTop:"10px"},subInput:{border:"none",background:"transparent",fontSize:"16px",color:n,outline:"none",width:"100%",textSizeAdjust:"100%",webkitTextSizeAdjust:"100%",WebkitUserSelect:"auto"},addBtn:{width:"46px",height:"46px",borderRadius:"14px",backgroundColor:r.get("done",i),display:"flex",alignItems:"center",justifyContent:"center",border:"none",marginTop:"10px",cursor:"pointer",boxShadow:`0 4px 12px ${r.get("habitCardDone",i)}`},subList:{marginTop:"15px",display:"flex",flexDirection:"column",gap:"8px"},subItem:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:t,borderRadius:"12px"},subDot:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:a,marginRight:"12px"},subText:{flex:1,fontSize:"15px",color:n}}},H=new Audio("Audio/Click.wav"),Pt=new Audio("Audio/IsDone.wav"),Et=[["ÐÐ¸Ð·ÐºÐ¸Ð¹","Low"],["ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹","Normal"],["Ð’Ð°Ð¶Ð½Ñ‹Ð¹","Important"],["Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹","High"],["ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹","Critical"]],At=[["ÐžÑ‡ÐµÐ½ÑŒ Ð»ÐµÐ³ÐºÐ¾","Very Easy"],["Ð›ÐµÐ³ÐºÐ¾","Easy"],["Ð¡Ñ€ÐµÐ´Ð½Ðµ","Medium"],["Ð¡Ð»Ð¾Ð¶Ð½Ð¾","Hard"],["ÐšÐ¾ÑˆÐ¼Ð°Ñ€","Nightmare"]],$t=[["ÐÐµ Ð³Ð¾Ñ€Ð¸Ñ‚","Not Urgent"],["ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ","Normal"],["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾","Urgent"],["ÐžÑ‡ÐµÐ½ÑŒ ÑÑ€Ð¾Ñ‡Ð½Ð¾","Very Urgent"],["ASAP","ASAP"]],Ae=["#B0BEC5","#29B6F6","#FFCA28","#FB8C00","#F44336"],$e=["#66BB6A","#9CCC65","#FFCA28","#FF7043","#D32F2F"],Ge=["#81C784","#64B5F6","#FFD54F","#FF8A65","#E57373"],Xt=()=>{const[i,s]=g.useState("dark"),[t,n]=g.useState(I.prefs[0]),[a,p]=g.useState(I.prefs[4]),[o,x]=g.useState(Fe.value==="ToDoPage"),[w,y]=g.useState(!1),[k,C]=g.useState(0),[S,L]=g.useState(!1),[P,E]=g.useState(0),[A,N]=g.useState(I.todoList||[]),[h,R]=g.useState(0),[B,m]=g.useState(0),[G,X]=g.useState(1),[M,Y]=g.useState(""),[W,se]=g.useState("none"),u=g.useRef(null);g.useEffect(()=>{const j=et.subscribe(s),z=tt.subscribe(K=>n(K==="ru"?0:1)),V=it.subscribe(p),te=Fe.subscribe(K=>x(K==="ToDoPage")),oe=v.subscribe(K=>{K&&(R(pe=>pe+1),K.type==="OPEN_STATS"&&(y(!0),re("")),K.type==="OPEN_ADD"&&(y(!1),C(-1),re("ToDoPage")),K.type==="CLOSE_ALL"&&(y(!1),re("")))});return()=>{j.unsubscribe(),z.unsubscribe(),V.unsubscribe(),oe.unsubscribe(),te.unsubscribe()}},[]),g.useEffect(()=>{T()},[B,G,M,h,S]);const T=()=>{let j=I.todoList?[...I.todoList]:[];if(M.trim()){const D=M.toLowerCase();j=j.filter(Q=>Q.name&&Q.name.toLowerCase().includes(D)||Q.category&&Q.category.toLowerCase().includes(D))}switch(B){case 1:j=j.filter(D=>D.isDone);break;case 2:j=j.filter(D=>!D.isDone&&!D.isPending);break;case 3:j=j.filter(D=>D.isPending);break}const z=j.filter(D=>D.isHidden).length;E(z),S||(j=j.filter(D=>!D.isHidden));const V=j.filter(D=>D.isPinned),te=j.filter(D=>!D.isPinned),oe=D=>G===0?D.sort((Q,ae)=>(ae.difficulty||0)-(Q.difficulty||0)):G===1?D.sort((Q,ae)=>(ae.priority||0)-(Q.priority||0)):G===2?D.sort((Q,ae)=>me(Q.deadLine)-me(ae.deadLine)):D,K=oe(V),pe=oe(te),Ce=[...K,...pe];N(Ce)};g.useEffect(()=>{W==="search"&&u.current&&setTimeout(()=>u.current.focus(),300)},[W]);const U=()=>{re("")},q=(j,z)=>{j.stopPropagation(),z.isDone=!z.isDone,z.isDone&&z.isPinned&&(z.isPinned=!1),R(V=>V+1),O(z.isDone?Pt:H)},J=j=>{O(H),se(W===j?"none":j)},ne=g.useMemo(()=>{const j={};return A.forEach(z=>{const V=z.category||(t===0?"Ð”Ñ€ÑƒÐ³Ð¾Ðµ":"Other");j[V]||(j[V]=[]),j[V].push(z)}),j},[A,t]),c=Ht(i),Z=i==="light"||i==="speciallight";return e.jsxs("div",{style:c.container,children:[e.jsx(ut,{tab:"ToDoMain"}),e.jsxs("div",{style:{width:"92%",marginTop:"14vh",display:"flex",flexDirection:"column",gap:"10px",zIndex:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"800",color:r.get("mainText",i),fontFamily:"Segoe UI",letterSpacing:"-0.5px"},children:t===0?"Ð—Ð°Ð´Ð°Ñ‡Ð¸":"Tasks"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(ke,{icon:e.jsx(Re,{size:16}),isActive:W==="search"||M.length>0,onClick:()=>J("search"),theme:i}),e.jsx(ke,{icon:e.jsx(st,{size:16}),isActive:W==="sort"||G!==1,onClick:()=>J("sort"),theme:i}),e.jsx(ke,{icon:e.jsx(nt,{size:14}),isActive:W==="filter"||B!==0,onClick:()=>J("filter"),theme:i})]})]}),e.jsxs(ie,{mode:"wait",children:[W==="search"&&e.jsx(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden"},children:e.jsxs("div",{style:c.inputContainer,children:[e.jsx(Re,{size:14,color:r.get("subText",i),style:{marginLeft:"16px",opacity:.6}}),e.jsx("input",{type:"text",placeholder:t===0?"ÐÐ°Ð¹Ñ‚Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ñƒ...":"Search tasks...",value:M,onChange:j=>Y(j.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:r.get("mainText",i),marginLeft:"8px",outline:"none"}}),M.length>0&&e.jsx(b.div,{initial:{scale:0},animate:{scale:1},onClick:()=>Y(""),style:c.clearBtn,children:e.jsx(de,{size:10,color:"#fff"})})]})},"search"),W==="sort"&&e.jsxs(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px"},children:[e.jsx(le,{label:t===0?"Ð’Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Priority",icon:e.jsx(Me,{size:10}),isActive:G===1,onClick:()=>{X(1),O(H)},theme:i}),e.jsx(le,{label:t===0?"Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ":"Difficulty",icon:e.jsx(ot,{size:12}),isActive:G===0,onClick:()=>{X(0),O(H)},theme:i}),e.jsx(le,{label:t===0?"Ð”ÐµÐ´Ð»Ð°Ð¹Ð½":"Deadline",icon:e.jsx(we,{size:12}),isActive:G===2,onClick:()=>{X(2),O(H)},theme:i})]},"sort"),W==="filter"&&e.jsxs(b.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:10},exit:{height:0,opacity:0,marginBottom:0},transition:{type:"spring",stiffness:300,damping:25},style:{overflow:"hidden",display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx(le,{label:t===0?"Ð’ÑÐµ":"All",isActive:B===0,onClick:()=>{m(0),O(H)},theme:i}),e.jsx(le,{label:t===0?"Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ":"Active",isActive:B===2,onClick:()=>{m(2),O(H)},theme:i}),e.jsx(le,{label:t===0?"ÐžÑ‚Ð»Ð¾Ð¶ÐµÐ½Ð¾":"Pending",isActive:B===3,onClick:()=>{m(3),O(H)},theme:i}),e.jsx(le,{label:t===0?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"Done",isActive:B===1,onClick:()=>{m(1),O(H)},theme:i})]},"filter")]})]}),e.jsxs("div",{style:c.panel,className:"no-scrollbar",children:[e.jsx(ie,{mode:"popLayout",children:A.length===0?e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},style:c.emptyState,children:[e.jsx(at,{size:40,style:{marginBottom:10,opacity:.5}}),e.jsx("span",{children:P>0&&!S?t===0?"Ð’ÑÐµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ ÑÐºÑ€Ñ‹Ñ‚Ñ‹":"All tasks hidden":t===0?"Ð—Ð°Ð´Ð°Ñ‡ Ð½ÐµÑ‚":"No tasks found"})]}):Object.keys(ne).map(j=>e.jsx(Gt,{title:j,theme:i,children:ne[j].map((z,V)=>e.jsx(Wt,{onClick:()=>{const te=I.todoList.indexOf(z);C(te),re("ToDoPage"),O(H)},onCheck:te=>q(te,z),item:z,theme:i,lang:t,fSize:a},z.id||V+z.name))},j))}),P>0&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{width:"88%",padding:"12px 0",display:"flex",justifyContent:"center",marginTop:"8px"},children:e.jsx("button",{onClick:()=>{L(!S),O(H)},style:{background:Z?"#FFFFFF":r.get("simplePanel",i),border:`1px solid ${Z?"#E0E0E0":r.get("border",i)}`,borderRadius:"16px",padding:"8px 20px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:r.get("mainText",i),fontWeight:"600",fontSize:"14px",boxShadow:Z?"0 2px 6px rgba(0,0,0,0.05)":"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},children:S?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:14}),t===0?"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸":"Hide hidden tasks"]}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{size:14}),t===0?`ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ${P} ÑÐºÑ€Ñ‹Ñ‚ÑƒÑŽ(Ñ‹Ðµ) Ð·Ð°Ð´Ð°Ñ‡Ñƒ(Ð¸)`:`Show ${P} hidden task(s)`]})})}),e.jsx("div",{style:{marginBottom:"120px",width:"100%"}})]}),e.jsx(Rt,{show:o,setShow:U,theme:i,lang:t,fSize:a,task:I.todoList[k]||{}}),w&&e.jsx(xt,{theme:i,lang:t,onClose:()=>y(!1)}),e.jsx(zt,{theme:i,lang:t,fSize:a})]})},ke=({icon:i,isActive:s,onClick:t,theme:n})=>{const a=n==="dark",p=r.get("accent",n),o=s?p:a?"rgba(255,255,255,0.1)":"#FFFFFF",x=s?"#FFFFFF":r.get("mainText",n);return e.jsx(b.div,{whileTap:{scale:.92},onClick:t,style:{width:"40px",height:"40px",borderRadius:"14px",backgroundColor:o,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:s?`0 4px 12px ${p}60`:a?"none":"0 2px 8px rgba(0,0,0,0.05)",color:x,transition:"all 0.3s ease"},children:i})},le=({label:i,icon:s,isActive:t,onClick:n,theme:a})=>{const p=a==="dark",o=r.get("accent",a);return e.jsxs(b.div,{whileTap:{scale:.95},onClick:n,style:{padding:"8px 16px",borderRadius:"12px",backgroundColor:t?o:p?"rgba(255,255,255,0.08)":"#FFFFFF",color:t?"#FFFFFF":r.get("subText",a),fontSize:"13px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",border:t?"none":`1px solid ${p?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}`,boxShadow:t?`0 4px 12px ${o}40`:"none",transition:"all 0.2s ease"},children:[s,i]})},Gt=({title:i,children:s,theme:t})=>{const[n,a]=g.useState(!0),p=t==="light"||t==="speciallight";return e.jsxs("div",{style:{width:"100%",marginBottom:"6px"},children:[e.jsxs("div",{onClick:()=>{a(!n),O(H)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"8px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"800",fontFamily:"Segoe UI",color:p?"#1D1D1F":r.get("mainText",t),opacity:.8},children:i}),e.jsx(b.div,{animate:{rotate:n?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(_e,{size:12,color:p?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(ie,{initial:!1,children:n&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:s})})]})},Wt=({onClick:i,onCheck:s,item:t,theme:n,lang:a,fSize:p})=>{const[o,x]=g.useState(!1),w=Nt(t.deadLine)&&!t.isDone,y=n==="light"||n==="speciallight",k=t.goals?t.goals.length:0,C=t.goals?t.goals.filter(R=>R.isDone).length:0;let S=t.color||r.get("accent",n);S&&S.length>7&&S.startsWith("#")&&(S=S.substring(0,7));const L=S,P=y?"#FFFFFF":r.get("simplePanel",n)+"CC",E=y?"0 4px 12px rgba(0,0,0,0.05)":"0 4px 12px rgba(0,0,0,0.2)",A=t.isPending||t.isHidden||t.isPinned,N=t.isPending?"#FF9E3D":t.isHidden?"#7E7E7E":"#02609e",h=t.isPending?a===0?"ÐžÑ‚Ð»Ð¾Ð¶ÐµÐ½Ð¾":"Pending":t.isHidden?a===0?"Ð¡ÐºÑ€Ñ‹Ñ‚Ð¾":"Hidden":a===0?"Ð—Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¾":"Pinned";return e.jsxs(b.div,{layout:!0,initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,transition:{duration:.2}},whileTap:{scale:.98},onClick:i,style:{width:"88%",minHeight:"80px",borderRadius:"20px",marginBottom:"8px",padding:"10px 12px",display:"flex",flexDirection:"row",alignItems:"flex-start",position:"relative",overflow:"hidden",cursor:"pointer",border:A?`2px solid ${N}`:"none",backgroundColor:P,backdropFilter:y?"none":"blur(20px)",boxShadow:E,opacity:t.isDone?.6:1},children:[A&&e.jsxs("div",{style:{position:"absolute",top:"-2px",left:"-2px",width:"24px",height:"24px",borderRadius:"0 0 20px 0",backgroundColor:N,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,title:h},children:[t.isPinned&&e.jsx(Be,{size:10,color:"#FFF"}),t.isPending&&e.jsx(je,{size:10,color:"#FFF"}),t.isHidden&&e.jsx(Ie,{size:10,color:"#FFF"})]}),e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t.isDone?`${L}15`:`${L}25`,color:L,fontSize:"20px",marginRight:"14px",flexShrink:0,border:`1px solid ${t.isDone?"transparent":`${L}40`}`,marginTop:"6px"},children:t.icon||"ðŸ“"}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"6px",marginRight:"14px"},children:[e.jsxs("div",{style:{fontSize:p===0?"16px":"17px",fontWeight:"700",color:t.isDone?r.get("subText",n):r.get("mainText",n),textDecoration:t.isDone?"line-through":"none",lineHeight:"1.2",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.name,t.isPending&&!t.isDone&&e.jsx("span",{style:{fontSize:"12px",color:"#FF9E3D",marginLeft:"6px",fontWeight:"500",backgroundColor:"rgba(255, 158, 61, 0.1)",padding:"0 4px",borderRadius:"4px"},children:a===0?"ÐžÑ‚Ð»Ð¾Ð¶ÐµÐ½Ð¾":"Pending"})]}),!t.isDone&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",justifyContent:"center"},children:[e.jsx(ye,{icon:e.jsx(Oe,{size:8}),text:Et[t.priority]?.[a],color:Ae[t.priority]||Ae[0]}),e.jsx(ye,{icon:e.jsx(Ne,{size:8}),text:At[t.difficulty]?.[a],color:$e[t.difficulty]||$e[0]}),e.jsx(ye,{icon:e.jsx(Me,{size:8}),text:$t[t.urgency||0]?.[a],color:Ge[t.urgency||0]||Ge[0]}),t.deadLine&&e.jsx(ye,{icon:w?e.jsx(rt,{size:8}):e.jsx(we,{size:8}),text:Ut(t.deadLine,a),color:w?"#FF453A":r.get("subText",n)}),k>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",fontSize:"10px",fontWeight:"700",color:r.get("subText",n)},children:[e.jsx(dt,{size:10,style:{opacity:.7}}),e.jsxs("span",{children:[C,"/",k]})]})]}),o&&e.jsxs(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},style:{display:"flex",flexDirection:"row",gap:"5px",width:"90%",marginRight:"25px",marginTop:"8px",paddingTop:"8px",borderTop:`1px dashed ${r.get("border",n)}60`},children:[e.jsxs("button",{onClick:R=>{R.stopPropagation(),bt(t.id),O(H)},style:he(n),children:[e.jsx(Be,{size:14,color:t.isPinned?"#02609e":r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:a===0?"Ð—Ð°ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑŒ":"Pin"})]}),e.jsxs("button",{onClick:R=>{R.stopPropagation(),jt(t.id),O(H)},style:he(n),children:[e.jsx(Ie,{size:14,color:t.isHidden?"#7E7E7E":r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:a===0?"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ":"Hide"})]}),e.jsxs("button",{onClick:R=>{R.stopPropagation(),mt(t.id),O(H)},style:he(n),children:[e.jsx(je,{size:14,color:t.isPending?"#FF9E3D":r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:a===0?"ÐžÑ‚Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ":"Snooze"})]}),e.jsxs("button",{onClick:s,style:he(n),children:[t.isDone?e.jsx(pt,{size:14,color:"#4CAF50"}):e.jsx(ct,{size:14,color:r.get("subText",n)}),e.jsx("span",{style:{marginTop:"2px"},children:a===0?"ÐžÑ‚Ð¼ÐµÑ‚Ð¸Ñ‚ÑŒ":"Check"})]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"8px",paddingTop:"6px"},children:e.jsx(He,{onClick:R=>{R.stopPropagation(),x(B=>!B)},size:16,style:{color:r.get("subText",n),cursor:"pointer"}})}),!t.isDone&&k>0&&e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"3px",backgroundColor:y?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)"},children:e.jsx(b.div,{initial:{width:0},animate:{width:`${C/k*100}%`},style:{height:"100%",backgroundColor:y?"rgba(94, 15, 133, 0.58)":"rgba(53, 111, 199, 0.94)"}})})]})},he=(i,s)=>({background:"none",border:"none",cursor:"pointer",color:r.get("subText",i),display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px",padding:"4px",borderRadius:"6px",transition:"all 0.2s","&:hover":{backgroundColor:i==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.08)"}}),ye=({icon:i,text:s,color:t})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px",padding:"2px 5px",borderRadius:"5px",backgroundColor:`${t}15`,border:`1px solid ${t}30`,color:t,fontSize:"9px",fontWeight:"700",whiteSpace:"nowrap"},children:[i,s&&e.jsx("span",{children:s})]}),Ht=(i,s)=>{const t=i==="light"||i==="speciallight",n=t?"#F2F4F6":r.get("background",i);r.get("mainText",i);const a=r.get("subText",i);return{container:{backgroundColor:n,display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflowY:"scroll"},panel:{display:"flex",flexDirection:"column",width:"100%",flex:1,alignItems:"center",justifyContent:"start",overflowY:"scroll",paddingTop:"2px"},emptyState:{marginTop:"50px",display:"flex",flexDirection:"column",alignItems:"center",color:a,fontSize:"16px",fontWeight:"600"},inputContainer:{width:"100%",height:"44px",backgroundColor:t?"#FFFFFF":"rgba(255,255,255,0.08)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"space-around",border:t?"none":`1px solid ${r.get("border",i)}60`,boxShadow:"0 4px 15px rgba(0,0,0,0.05)",position:"relative"},clearBtn:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"rgba(128,128,128,0.4)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",cursor:"pointer"}}};function O(i){I.prefs[2]===0&&i&&(i.paused||(i.pause(),i.currentTime=0),i.volume=.5,i.play().catch(s=>console.log("Audio play failed",s))),I.prefs[3]===0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function Ot(i){if(!i)return null;if(i.includes("-"))return new Date(i);if(i.includes(".")){const s=i.split(".");return new Date(s[2],s[1]-1,s[0])}return new Date(i)}function me(i){const s=Ot(i);if(!s)return 9999;const t=new Date;return t.setHours(0,0,0,0),s.setHours(0,0,0,0),Math.ceil((s-t)/(1e3*60*60*24))}function Nt(i){return me(i)<0}function Ut(i,s){if(!i)return"";const t=me(i);return s===0?t===0?"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ":t===1?"Ð—Ð°Ð²Ñ‚Ñ€Ð°":t<0?`${Math.abs(t)} Ð´Ð½. Ð½Ð°Ð·Ð°Ð´`:`${t} Ð´Ð½.`:t===0?"Today":t===1?"Tmrw":t<0?`${Math.abs(t)}d ago`:`${t}d left`}export{Xt as default};
