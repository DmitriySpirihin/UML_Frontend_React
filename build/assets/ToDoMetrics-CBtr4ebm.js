import{A as f,U as $,t as k,l as G,f as N,p as O,C as r,j as e,m as p}from"./index-CdRMHEVK.js";import{r as x}from"./recharts-k8ghPecL.js";import{M as V}from"./MyAreaChart-ZpF87Yzy.js";import{M as H}from"./MyBarChart-CRNicihZ.js";const Q=()=>{const[a,u]=x.useState("dark"),[s,y]=x.useState(f.prefs[0]),[z,j]=x.useState(f.prefs[4]),[S,B]=x.useState($.hasPremium);x.useEffect(()=>{const n=k.subscribe(u),c=G.subscribe(v=>y(v==="ru"?0:1)),h=N.subscribe(j),m=O.subscribe(B);return()=>{n.unsubscribe(),c.unsubscribe(),h.unsubscribe(),m.unsubscribe()}},[]);const l=x.useMemo(()=>{const n=f.todoList||[],c=n.filter(i=>i.isDone),h=n.length,m=c.length,v=h>0?Math.round(m/h*100):0,I=Array.from({length:28},(i,o)=>{const g=new Date;g.setDate(g.getDate()-o);const T=g.toISOString().split("T")[0],C=c.filter(U=>U.startDate===T).length;return{date:T,count:C}}).reverse(),L=s===0?["Ð’Ñ","ÐŸÐ½","Ð’Ñ‚","Ð¡Ñ€","Ð§Ñ‚","ÐŸÑ‚","Ð¡Ð±"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],D=[0,0,0,0,0,0,0];c.forEach(i=>{const o=new Date(i.startDate);isNaN(o)||D[o.getDay()]++});const M=Math.max(...D),F=D.indexOf(M),E=M>0?L[F]:"--";let R=0;const P=new Date;for(let i=0;i<30;i++){const o=new Date;o.setDate(P.getDate()-i);const g=o.toISOString().split("T")[0];if(c.some(C=>C.startDate===g))R++;else if(i>0)break}const W=I.slice(-7).map(i=>({label:i.date.split("-")[2],value:i.count})),b={};n.forEach(i=>{const o=i.category||(s===0?"ÐžÐ±Ñ‰ÐµÐµ":"General");b[o]=(b[o]||0)+1});const A=Object.keys(b).map(i=>({label:i,value:b[i]}));return{total:h,completedCount:m,rate:v,heatmapDays:I,bestDay:E,streak:R,areaData:W,barData:A}},[f.todoList,s]),t=q(a),d={hidden:{opacity:0,y:15},show:{opacity:1,y:0}};return e.jsxs("div",{style:t.container,children:[e.jsxs(p.div,{style:t.scrollContent,className:"no-scrollbar",initial:"hidden",animate:"show",variants:{show:{transition:{staggerChildren:.05}}},children:[e.jsxs(p.div,{variants:d,style:t.header,children:[e.jsx("h2",{style:t.pageTitle,children:s===0?"Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´":"Dashboard"}),e.jsx("span",{style:t.pageSubtitle,children:s===0?"Ð¢Ð²Ð¾Ð¸ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ":"Your achievements"})]}),e.jsxs(p.div,{variants:d,style:t.insightRow,children:[e.jsxs("div",{style:{...t.insightCard,background:"linear-gradient(135deg, #FF6B6B 0%, #EE5253 100%)"},children:[e.jsx("span",{style:t.insightIcon,children:"ðŸ”¥"}),e.jsxs("div",{style:t.insightText,children:[e.jsx("div",{style:t.insightVal,children:l.streak}),e.jsx("div",{style:t.insightLabel,children:s===0?"Ð”Ð½Ñ Ð¿Ð¾Ð´Ñ€ÑÐ´":"Day Streak"})]})]}),e.jsxs("div",{style:{...t.insightCard,background:"linear-gradient(135deg, #4834d4 0%, #686de0 100%)"},children:[e.jsx("span",{style:t.insightIcon,children:"â­"}),e.jsxs("div",{style:t.insightText,children:[e.jsx("div",{style:t.insightVal,children:l.bestDay}),e.jsx("div",{style:t.insightLabel,children:s===0?"ÐŸÐ¸Ðº Ñ„Ð¾Ñ€Ð¼Ñ‹":"Best Day"})]})]})]}),e.jsxs(p.div,{variants:d,style:t.chartBox,children:[e.jsxs("div",{style:t.chartHeaderRow,children:[e.jsx("h3",{style:t.chartTitle,children:s===0?"ÐšÐ°Ñ€Ñ‚Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸":"Activity Map"}),e.jsx("span",{style:t.chartBadge,children:"Last 28 days"})]}),e.jsx("div",{style:t.heatmapGrid,children:l.heatmapDays.map((n,c)=>e.jsx("div",{style:{...t.heatmapSquare,backgroundColor:r.get("areaChart",a),opacity:n.count===0?.1:Math.min(.2+n.count*.25,1)}},c))}),e.jsxs("div",{style:t.heatmapLegend,children:[e.jsx("span",{children:"Less"}),e.jsx("div",{style:{display:"flex",gap:"4px"},children:[.1,.4,.7,1].map(n=>e.jsx("div",{style:{...t.heatmapSquare,opacity:n,backgroundColor:r.get("areaChart",a)}},n))}),e.jsx("span",{children:"More"})]})]}),e.jsxs("div",{style:t.summaryGrid,children:[e.jsx(w,{label:s===0?"Ð’ÑÐµÐ³Ð¾":"Total",value:l.total,theme:a,variants:d,icon:"ðŸ“‹"}),e.jsx(w,{label:s===0?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"Done",value:l.completedCount,theme:a,color:r.get("done",a),variants:d,icon:"âœ”ï¸"}),e.jsx(w,{label:s===0?"Ð£ÑÐ¿ÐµÑ…":"Rate",value:l.rate+"%",theme:a,color:r.get("areaChart",a),variants:d,isHighlight:!0,icon:"âš¡"})]}),e.jsxs(p.div,{variants:d,style:t.chartBox,children:[e.jsx("h3",{style:t.chartTitle,children:s===0?"ÐÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÐ¼Ð¿":"Weekly Velocity"}),e.jsx(V,{data:l.areaData,color:r.get("areaChart",a),height:150})]}),e.jsxs(p.div,{variants:d,style:t.chartBox,children:[e.jsx("h3",{style:t.chartTitle,children:s===0?"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ñ‹":"Priorities"}),e.jsx(H,{data:l.barData,color:r.get("barsColorTonnage",a),height:150})]})]}),!S&&e.jsx("div",{onClick:n=>n.stopPropagation(),style:{position:"absolute",inset:0,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:k.value==="dark"?"rgba(10, 10, 10, 0.85)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(11px)",textAlign:"center"},children:e.jsx("div",{style:{color:k.value==="dark"?"#FFD700":"#D97706",fontSize:"11px",fontWeight:"bold",fontFamily:"Segoe UI"},children:s===0?"Ð¢ÐžÐ›Ð¬ÐšÐž Ð”Ð›Ð¯ ÐŸÐ Ð•ÐœÐ˜Ð£Ðœ":"PREMIUM USERS ONLY"})})]})},w=({label:a,value:u,theme:s,color:y,variants:z,icon:j,isHighlight:S})=>e.jsxs(p.div,{variants:z,style:{backgroundColor:r.get("simplePanel",s),borderRadius:"20px",padding:"15px",display:"flex",flexDirection:"column",flex:1,boxShadow:r.get("shadow",s),border:S?`1px solid ${y}44`:"1px solid transparent"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginBottom:"5px"},children:[e.jsx("span",{children:j}),e.jsx("span",{style:{fontSize:"10px",color:r.get("subText",s),fontWeight:"700",textTransform:"uppercase"},children:a})]}),e.jsx("span",{style:{fontSize:"22px",fontWeight:"800",color:y||r.get("mainText",s)},children:u})]}),q=(a,u)=>({container:{backgroundColor:r.get("background",a),height:"100%",width:"100vw",paddingTop:"100px",display:"flex",flexDirection:"column",fontFamily:"SF Pro Display, Segoe UI, sans-serif"},scrollContent:{flex:1,overflowY:"auto",padding:"10px 20px 120px 20px",display:"flex",flexDirection:"column",gap:"18px"},header:{marginBottom:"5px",marginTop:"15px"},pageTitle:{fontSize:"28px",fontWeight:"800",color:r.get("mainText",a),margin:0},pageSubtitle:{fontSize:"14px",color:r.get("subText",a)},insightRow:{display:"flex",gap:"12px"},insightCard:{flex:1,borderRadius:"24px",padding:"15px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 8px 20px rgba(0,0,0,0.15)",color:"#fff"},insightIcon:{fontSize:"24px"},insightVal:{fontSize:"20px",fontWeight:"800"},insightLabel:{fontSize:"10px",opacity:.8,fontWeight:"600",textTransform:"uppercase"},heatmapGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"6px",margin:"10px 0"},heatmapSquare:{aspectRatio:"1/1",borderRadius:"4px",width:"100%"},heatmapLegend:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"8px",fontSize:"10px",color:r.get("subText",a),marginTop:"8px"},summaryGrid:{display:"flex",gap:"10px"},chartBox:{backgroundColor:r.get("simplePanel",a),borderRadius:"24px",padding:"20px",boxShadow:r.get("shadow",a),border:`1px solid ${a==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)"}`},chartHeaderRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},chartTitle:{fontSize:"13px",fontWeight:"700",color:r.get("subText",a),margin:0,textTransform:"uppercase"},chartBadge:{fontSize:"9px",backgroundColor:"rgba(0,0,0,0.1)",padding:"2px 6px",borderRadius:"5px"}});export{Q as default};
