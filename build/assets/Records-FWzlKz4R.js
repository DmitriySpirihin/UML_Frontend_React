import{A as x,t as w,l as D,f as k,j as e,C as o,U as m,N as G,bs as F,bt as B,bp as L,bq as T,by as R,bx as z,bB as A}from"./index-ChdhxPTd.js";import{r as c}from"./recharts-DVuIdjrD.js";import{b as E,c as M,G as U,a as N}from"./index-Bp0PDSKG.js";const $=[["Быстрый счет","quick math"],["Память","memory"],["Логика","logic"],["Фокус","focus"]],q=[["легкий","easy"],["средний","medium"],["тяжелый","hard"],["безумный","insane"],["бесконечный","endless"]],Y=[F,B,E,M],h=[L,T,U,N,R],H=(t,s)=>{const a=["cold","skipped","done","medium"];return o.get(a[s],t)},W=(t,s)=>{const a=["light","medium","heavy","hot","cold"];return o.get(a[s],t)},J=({theme:t,categoryIndex:s,setCategoryIndex:a,difficultyIndex:n,setDifficultyIndex:i})=>e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px",padding:"2px",backgroundColor:o.get("panel",t),borderRadius:"12px"},children:Y.map((d,r)=>e.jsx("span",{onClick:()=>{a(r),n>3&&i(3)},style:{padding:"2px 18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:s===r?H(t,r):o.get("subText",t),opacity:s===r?1:.7,transition:"all 0.2s ease"},"aria-label":$[r]?.[0]||"Category",children:e.jsx(d,{size:s===r?30:20})},r))}),K=({theme:t,categoryIndex:s,setCategoryIndex:a,difficultyIndex:n,setDifficultyIndex:i})=>{const d=s>0?h.slice(0,-1):h;return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"8px 0"},children:d.map((r,l)=>e.jsx("span",{onClick:()=>i(l),style:{padding:"2px 18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:n===l?W(t,l):o.get("subText",t),opacity:n===l?1:.8,transition:"all 0.2s ease"},"aria-label":q[l]?.[0]||"Difficulty",children:e.jsx(r,{size:n===l?30:20})},l))})},Z=()=>{const[t,s]=c.useState("dark"),[a,n]=c.useState(x.prefs[0]),[i,d]=c.useState(x.prefs[4]),[r,l]=c.useState(0),[f,b]=c.useState(0),[j,y]=c.useState(null),[C,v]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const u=await G.getMentalRecordsGlobal();y(u)}catch{y([{name:m?.name,data:x.mentalRecords}])}finally{v(!1)}})()},[]),c.useEffect(()=>{const p=w.subscribe(s),u=D.subscribe(S=>n(S==="ru"?0:1)),I=k.subscribe(d);return()=>{p.unsubscribe(),u.unsubscribe(),I.unsubscribe()}},[]),e.jsxs("div",{style:g(t).container,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[e.jsx(J,{theme:t,langIndex:a,fSize:i,categoryIndex:r,difficultyIndex:f,setCategoryIndex:l,setDifficultyIndex:b}),e.jsx(K,{categoryIndex:r,theme:t,langIndex:a,fSize:i,difficultyIndex:f,setDifficultyIndex:b})]}),e.jsx("div",{style:g(t).list,children:C?e.jsx("div",{children:a===0?"Загрузка...":"Loading..."}):j?.map((p,u)=>e.jsx(P,{theme:t,fSize:i,isUser:p.name===m.name,index:u,data:p,categoryIndex:r,difficultyIndex:f}))})]})},g=(t,s)=>({container:{backgroundColor:o.get("background",t),display:"flex",position:"absolute",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",top:"14vh",width:"100vw",fontFamily:"Segoe UI"},list:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"12px",width:"90%",overflowY:"scroll",height:"80%",borderBottom:"1px solid "+o.get("border",t),borderTop:"1px solid "+o.get("border",t)},listItem:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",height:"30px",borderBottom:"1px solid "+o.get("border",t)},text:{fontSize:s===0?"14px":"16px",color:o.get("mainText",t),marginRight:"15px"},avatar:{width:"25px",height:"25px",borderRadius:"50%",border:"1px solid "+o.get("border",t),overflow:"hidden"}}),O=(t,s)=>{const a=["barsColorWeight","difficultyAdd","hold"];return o.get(a[s],t)},P=({theme:t,fSize:s,isUser:a,index:n,data:i,categoryIndex:d,difficultyIndex:r})=>e.jsxs("div",{style:{...g(t).listItem,borderBottomColor:a?o.get("light",t):o.get("border",t)},children:[e.jsxs("div",{style:{...g(t).listItem,width:"40%",justifyContent:"start",borderBottom:"none"},children:[e.jsx("div",{style:g(t,s).text,children:n+1}),e.jsx("div",{style:{...g(t,s).text,marginLeft:"15px"},children:i.name}),n<3&&e.jsx(z,{size:20,color:O(t,n)}),a&&e.jsx(A,{size:15,color:o.get("light",t)})]}),e.jsx("div",{style:{...g(t,s).text,color:o.get("light",t)},children:i.data[d][r]})]});export{Z as default};
