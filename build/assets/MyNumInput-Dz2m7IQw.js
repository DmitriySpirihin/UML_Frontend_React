import{b7 as P,b8 as M,j as l,C as d,b9 as N,ba as k}from"./index-BSwrlLUS.js";import{r as o}from"./recharts-DVuIdjrD.js";const v=({theme:u,fSize:p=24,h:E="90%",w:I="100%",value:f="",onChange:m=null,clear:b=!1,afterPointer:w="",placeholder:C=""})=>{const[c,g]=o.useState({myString:"",cursorPos:0}),[i,h]=o.useState(!1),[A,y]=o.useState(!0),j=999,S=s=>{let e=s.replace(/[^0-9.]/g,"");const n=e.split(".");n.length>2&&(e=n[0]+"."+n.slice(1).join("")),n[0].length>1&&(n[0]=n[0].replace(/^0+/,"")||"0"),e=n.join(".");const t=parseFloat(e);return isNaN(t)?"":t>j?j.toFixed(2):t.toFixed(2).replace(/\.?0+$/,"")};o.useEffect(()=>{const s=typeof f=="number"?f.toString():String(f),e=S(s);g({myString:e,cursorPos:e.length})},[f]),o.useEffect(()=>{const s=P.subscribe(e=>{i&&g(n=>{let t=n.myString,r=n.cursorPos;if(e==="bs")r>0&&(t=t.slice(0,r-1)+t.slice(r),r-=1);else if(/^\d$/.test(e)){const x=t.slice(0,r)+e+t.slice(r),a=S(x);a!==t&&(t=a,r=Math.min(r+1,t.length))}else if(e==="."&&!t.includes(".")){const x=t.slice(0,r)+"."+t.slice(r),a=S(x);a!==t&&(t=a,r=Math.min(r+1,t.length))}return{myString:t,cursorPos:r}})});return()=>s.unsubscribe()},[i]),o.useEffect(()=>{if(!i){y(!1);return}y(!0);const s=setInterval(()=>y(e=>!e),500);return()=>clearInterval(s)},[i]),o.useEffect(()=>{const s=M.subscribe(e=>{e.value===!1&&(h(!1),b&&g({myString:"",cursorPos:0}))});return()=>s.unsubscribe()},[b]),o.useEffect(()=>{if(m&&i){const s=parseFloat(c.myString)||0;m(s)}},[c,m,i]);const F=()=>{N(""),h(!0),k({type:2,value:!0});const s=parseInt(c.myString).toString();g(e=>({myString:s,cursorPos:s.length}))};return l.jsx("div",{style:{width:I,height:E,border:"3px solid rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"text"},onClick:F,children:l.jsx("div",{style:{display:"flex",fontSize:p+"px",paddingLeft:"8px",textAlign:"left",fontFamily:"Segoe UI",color:c.myString.length===0?d.get("icons",u):d.get("mainText",u)},children:c.myString.length>0||i?l.jsxs(l.Fragment,{children:[c.myString,l.jsx("span",{style:{display:"inline-block",width:"2px",color:A&&i?d.get("iconsHighlited",u):"transparent",fontSize:p,marginLeft:"2px",verticalAlign:"middle"},children:"|"}),l.jsx("span",{style:{fontSize:p,color:d.get("mainText",u),marginLeft:"4px"},children:w})]}):C})})};export{v as M};
