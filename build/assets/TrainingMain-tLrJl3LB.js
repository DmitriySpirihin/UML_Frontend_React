import{A as a,t as Je,l as _e,f as Qe,aP as qe,j as e,aQ as ye,B as ue,aR as me,aS as be,C as l,m as S,d as q,a as M,ai as Xe,M as X,a2 as Z,aT as Ze,ab as k,aU as ee}from"./index-BZVXE0o6.js";import{R as je,r as c}from"./recharts-k8ghPecL.js";import{a as et,d as tt,b as st}from"./TrainingLogHelper-CxxaY6kw.js";import{a as nt}from"./index-B1p8FYNs.js";import{I as it,a as ot}from"./index-DnA9pwQa.js";import{S as v}from"./ScrollPicker-Bz_uVKSf.js";import{H as rt}from"./HoverInfoButton-Cv2LLN6h.js";import{cardioType$ as te,trainInfo$ as Se}from"./TrainingCardio-B2b0pZ_2.js";import"./index-B9xXHnIa.js";const j=t=>{const o=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0");return`${o}-${n}-${d}`},lt=t=>(t.getDay()+6)%7,O=new Audio("Audio/Click.wav"),ve=Array.from({length:24},(t,o)=>o),Ce=Array.from({length:12},(t,o)=>o*5),at={enter:t=>({x:t>0?50:-50,opacity:0,scale:.95}),center:{zIndex:1,x:0,opacity:1,scale:1},exit:t=>({zIndex:0,x:t<0?50:-50,opacity:0,scale:.95})},ct={enter:t=>({y:t>0?-20:20,opacity:0}),center:{y:0,opacity:1},exit:t=>({y:t>0?20:-20,opacity:0})},dt={hidden:{y:"100%",opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:25,stiffness:300}},exit:{y:"100%",opacity:0}},Dt=()=>{const[t,o]=je.useState("dark"),[n,d]=c.useState(a.prefs[0]),[p,R]=c.useState(new Date),[h,F]=c.useState(p),K=c.useRef(h),[we,Te]=c.useState(0),[J,Ie]=c.useState(a.prefs[4]),[De,G]=c.useState(!1),[Me,W]=c.useState(!1),[ke,Y]=c.useState(!1),[ze,b]=c.useState(!1),[se,Ne]=c.useState("GYM"),[u,$e]=c.useState(a.getLastProgramId()),[N,ne]=c.useState(a.getLastTrainingDayIndex()||0),[C,ie]=c.useState(16*36e5),[w,oe]=c.useState(17*36e5),[re,Re]=c.useState({date:"",key:0}),[L,le]=c.useState(0),Fe=new Date().getDate(),Ge=new Date().getMonth();c.useEffect(()=>{const s=Je.subscribe(o),i=_e.subscribe(f=>{d(f==="ru"?0:1)}),r=Qe.subscribe(f=>{Ie(f)});return()=>{s.unsubscribe(),i.unsubscribe(),r.unsubscribe()}},[]);const We=new Date(p.getFullYear(),p.getMonth(),1),Ye=new Date(p.getFullYear(),p.getMonth()+1,0).getDate(),Le=(We.getDay()+6)%7,Pe=[["–ü–Ω","–í—Ç","–°—Ä","–ß—Ç","–ü—Ç","–°–±","–í—Å"],["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]],Be=[["–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫","–í—Ç–æ—Ä–Ω–∏–∫","–°—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä–≥","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞","–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ"],["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]],ae=[["–Ø–Ω–≤–∞—Ä—å","–§–µ–≤—Ä–∞–ª—å","–ú–∞—Ä—Ç","–ê–ø—Ä–µ–ª—å","–ú–∞–π","–ò—é–Ω—å","–ò—é–ª—å","–ê–≤–≥—É—Å—Ç","–°–µ–Ω—Ç—è–±—Ä—å","–û–∫—Ç—è–±—Ä—å","–ù–æ—è–±—Ä—å","–î–µ–∫–∞–±—Ä—å"],["January","February","March","April","May","June","July","August","September","October","November","December"]],P=[],ce=[];for(let s=0;s<Le;s++)P.push(null);for(let s=1;s<=Ye;s++)P.push(s);for(let s=0;s<P.length;s+=7)ce.push(P.slice(s,s+7));const Ae=()=>{le(-1),R(new Date(p.getFullYear(),p.getMonth()-1)),V(O)},Ee=()=>{le(1),R(new Date(p.getFullYear(),p.getMonth()+1)),V(O)};c.useEffect(()=>{K.current=h},[h]),c.useEffect(()=>{ne(0)},[u]),c.useEffect(()=>{const s=qe.subscribe(()=>{const i=new Date,r=K.current;if(r>i)return;const f=j(r),m=j(i);b(!0)});return()=>s.unsubscribe()},[]);const T=c.useMemo(()=>{const s=Object.entries(a.programs).filter(([,i])=>i.show!==!1).map(([i,r])=>({value:Number(i),label:Array.isArray(r?.name)?r?.name?.[n]:r?.name||`Program ${i}`}));return s.length>0?s:[{value:0,label:n===0?"–ù–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º":"No Programs"}]},[n]),I=c.useMemo(()=>{const s=a.programs[u];return!s||!s.schedule||s.schedule.length===0?[{value:0,label:n===0?"–î–µ–Ω—å 1":"Day 1"}]:s.schedule.map((i,r)=>({value:r,label:i.name?.[n]||(n===0?`–î–µ–Ω—å ${r+1}`:`Day ${r+1}`)}))},[u,n]),de=c.useMemo(()=>T.find(s=>s.value===u)?.label||T[0].label,[u,T]),pe=c.useMemo(()=>I.find(s=>s.value===N)?.label||I[0].label,[N,I]),xe=s=>{const i=T.find(r=>r.label===s);i&&$e(i.value)},ge=s=>{const i=I.find(r=>r.label===s);i&&ne(i.value)},B=(s,i,r,f)=>{const m=Math.floor(i/6e4);let D=Math.floor(m/60)%24,$=m%60;r==="h"&&(D=f),r==="m"&&($=f);const y=(D*60+$)*6e4;s(y)},A=c.useMemo(()=>[{value:"GYM",label:n===0?"–°–∏–ª–æ–≤–∞—è":"Strength",icon:e.jsx(ye,{size:20}),color:t==="dark"?"#f33b3b":"#861010c6"},{value:"RUNNING",label:n===0?"–ë–µ–≥":"Running",icon:e.jsx(ue,{size:20}),color:t==="dark"?"#f3da3b":"#867210c6"},{value:"CYCLING",label:n===0?"–í–µ–ª–æ—Å–∏–ø–µ–¥":"Cycling",icon:e.jsx(me,{size:20}),color:t==="dark"?"#5af33b":"#108614c6"},{value:"SWIMMING",label:n===0?"–ü–ª–∞–≤–∞–Ω–∏–µ":"Swimming",icon:e.jsx(be,{size:20}),color:t==="dark"?"#3bf3f0":"#10867ec6"}],[n,t]),_=s=>{const i=A.find(r=>r.value===s)||A[0];return{icon:i.icon,color:i.color}},E=s=>{switch(s){case"RUNNING":return t==="dark"?"#f3da3b":"#867210c6";case"CYCLING":return t==="dark"?"#5af33b":"#108614c6";case"SWIMMING":return t==="dark"?"#3bf3f0":"#10867ec6";default:return t==="dark"?"#f33b3b":"#861010c6"}},Oe=()=>{const i=j(new Date);if(!a.programs[u])return k(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞":"Error! The program not found",2e3,!1),null;if(a.programs[u].schedule.length===0)return k(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—É—Å—Ç–∞—è":"Error! The program is empty",2e3,!1),null;st(new Date,u,N),G(!1),b(!1),setTimeout(()=>{const r=a.trainingLog[i].length-1;ee({mode:"new",dayKey:i,dInd:r}),M("TrainingCurrent")},100)},Ue=(s,i)=>{Re({date:s,key:i})},He=()=>{tt(re.date,re.key),Y(!1),k(n===0?"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞":"Session deleted",2e3,!0)},Ve=(s,i)=>{Ne(s),b(!1);const r=new Date,f=j(K.current),m=j(r);s==="GYM"?f===m?G(!0):W(!0):(te.next(s),Se.next({mode:"new",dayKey:f,dInd:N}),M("TrainingCardio"))},Ke=(s,i,r)=>{V(O),s.type==="GYM"||!s.type?(ee({mode:s.completed?"redact":"new",dayKey:i,dInd:r}),M("TrainingCurrent")):(te.next(s.type),Se.next({mode:"edit",dayKey:i,dInd:r}),te.next(s.type),M("TrainingCardio"))};return e.jsxs("div",{style:x(t).container,children:[e.jsx(rt,{tab:"TrainingMain"}),e.jsxs("div",{style:x(t).panel,children:[e.jsxs("div",{style:x(t).calendarHead,children:[e.jsx(S.div,{whileTap:{scale:.9},onClick:Ae,style:x(t).navBtn,children:e.jsx(it,{size:22,color:l.get("mainText",t)})}),e.jsx("div",{style:x(t).headerWrapper,children:e.jsx(q,{mode:"popLayout",custom:L,children:e.jsxs(S.h1,{variants:ct,custom:L,initial:"enter",animate:"center",exit:"exit",transition:{duration:.25},style:x(t).header,children:[ae[n][p.getMonth()]," ",p.getFullYear()]},p.toISOString())})}),e.jsx(S.div,{whileTap:{scale:.9},onClick:Ee,style:x(t).navBtn,children:e.jsx(ot,{size:22,color:l.get("mainText",t)})})]}),e.jsx("div",{style:{width:"100%",paddingBottom:"20px",overflow:"hidden"},children:e.jsx(q,{mode:"wait",custom:L,children:e.jsx(S.div,{variants:at,custom:L,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",ease:"easeInOut",duration:.25},style:{width:"100%"},children:e.jsxs("table",{style:x(t).table,children:[e.jsx("thead",{children:e.jsx("tr",{children:Pe[n].map((s,i)=>e.jsx("th",{style:{paddingBottom:"10px"},children:e.jsx("p",{style:{textAlign:"center",fontSize:"13px",fontWeight:"600",opacity:.8,color:i>=5?"#ff5e5e":l.get("subText",t)},children:s})},s))})}),e.jsx("tbody",{children:ce.map((s,i)=>e.jsx("tr",{children:s.map((r,f)=>{const m=p.getMonth(),D=p.getFullYear(),$=r===h.getDate()&&m===h.getMonth()&&D===h.getFullYear(),y=j(new Date(D,m,r)),Q=y in a.trainingLog?a.trainingLog[y].length:0;Q>0&&a.trainingLog[y].forEach(g=>{g.completed,g.type});let he="transparent",fe=l.get("mainText",t);return $&&(he=l.get("currentDateBorder",t),fe="#ffffff"),e.jsx("td",{style:{padding:"3px"},children:r?e.jsxs("div",{style:{...x(t).cell,backgroundColor:he,color:fe,border:Fe===r&&Ge===m?`2px solid ${l.get("currentDateBorder",t)}`:"transparent",boxShadow:$?`0 4px 12px ${l.get("shadow",t)}`:"none"},onClick:()=>{F(new Date(Date.UTC(D,m,r))),Te(Q),V(O)},children:[r,Q>0&&e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px",marginTop:"6px",justifyContent:"center"},children:[a.trainingLog[y].filter(g=>g.type==="GYM").length>0&&e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",opacity:.9},title:`${n===0?"–°–∏–ª–æ–≤–∞—è":"Strength"}: ${a.trainingLog[y].filter(g=>g.type==="GYM").length}`,children:e.jsx(ye,{size:8,color:E("GYM")})}),a.trainingLog[y].filter(g=>g.type==="RUNNING").length>0&&e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",opacity:.9},title:`${n===0?"–ë–µ–≥":"Running"}: ${a.trainingLog[y].filter(g=>g.type==="RUNNING").length}`,children:e.jsx(ue,{size:8,color:E("RUNNING")})}),a.trainingLog[y].filter(g=>g.type==="CYCLING").length>0&&e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",opacity:.9},title:`${n===0?"–í–µ–ª–æ—Å–∏–ø–µ–¥":"Cycling"}: ${a.trainingLog[y].filter(g=>g.type==="CYCLING").length}`,children:e.jsx(me,{size:8,color:E("CYCLING")})}),a.trainingLog[y].filter(g=>g.type==="SWIMMING").length>0&&e.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",opacity:.9},title:`${n===0?"–ü–ª–∞–≤–∞–Ω–∏–µ":"Swimming"}: ${a.trainingLog[y].filter(g=>g.type==="SWIMMING").length}`,children:e.jsx(be,{size:8,color:E("SWIMMING")})})]})]}):e.jsx("div",{style:{...x(t).cell,pointerEvents:"none"}})},f)})},i))})]})},p.toISOString())})})]}),e.jsxs("div",{style:{flex:1,width:"100%",display:"flex",flexDirection:"column",backgroundColor:l.get("background",t)},children:[e.jsxs("div",{onClick:()=>M("TrainingList"),style:x(t).journalBtn,children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"15px"},children:n===0?"–ñ—É—Ä–Ω–∞–ª":"Journal"}),e.jsx(nt,{size:14})]}),e.jsxs("div",{style:{flex:1,overflowY:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"15px 20px 10px 20px"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"18px",color:l.get("mainText",t)},children:[h.getDate()," ",ae[n][h.getMonth()],", ",Be[n][lt(h)]]}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:l.get("subText",t)},children:pt(we,n)})]}),e.jsxs("div",{style:x(t).scrollView,children:[a.trainingLog[j(h)]?.map((s,i)=>e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},style:x(t).sessionCard,onClick:()=>Ke(s,j(new Date(h)),i),children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px",flex:1},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",backgroundColor:s.completed?_(s.type||"GYM").color:"rgba(128,128,128,0.3)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:s.completed?`0 4px 12px ${_(s.type||"GYM").color}60`:"none",flexShrink:0},children:s.completed?je.cloneElement(_(s.type||"GYM").icon,{size:20,color:"#ffffff"}):e.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:"‚è≥"})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("span",{style:{fontWeight:"bold",color:l.get("mainText",t),fontSize:J===0?"15px":"17px",lineHeight:1.3},children:s.type==="GYM"?Array.isArray(a.programs[s.programId]?.name)?a.programs[s.programId]?.name?.[n]:a.programs[s.programId]?.name:A.find(r=>r.value===s.type)?.label}),s.type==="GYM"||!s.type?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:J===0?"13px":"15px",color:l.get("mainText",t),lineHeight:1.4},children:(n===0?"–î–µ–Ω—å ":"Day ")+(s.dayIndex+1)+": "+(a.programs[s.programId]?.schedule?.[s.dayIndex]?.name?.[n]||(n===0?`–î–µ–Ω—å ${s.dayIndex+1}`:`Day ${s.dayIndex+1}`))}),s.completed&&e.jsx("div",{style:{fontSize:"12px",color:l.get("subText",t),lineHeight:1.4},children:`${Math.round(s.duration/6e4)}${n===0?" –º–∏–Ω":" min"}  ‚Ä¢  ${(s.tonnage*.001).toFixed(2)} ${n===0?" —Ç":" t"}${xt(s,n)}`})]}):e.jsxs("div",{style:{fontSize:J===0?"13px":"14px",color:l.get("mainText",t),lineHeight:1.5},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("span",{children:yt(s.distance,s.type,n)}),e.jsx("span",{style:{color:l.get("subText",t)},children:"‚Ä¢"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{color:l.get("subText",t),fontSize:"14px"},children:"‚è±Ô∏è"}),gt(s.duration,n)]}),(s.type==="RUNNING"||s.type==="CYCLING")&&s.distance>0&&s.duration>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",padding:"4px 8px",backgroundColor:t==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:"8px",width:"fit-content"},children:s.type==="RUNNING"?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:"14px",color:"#4CC9F0"},children:"üèÉ"}),e.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#4CC9F0"},children:[ht(s.distance,s.duration)," ",n===0?"–º–∏–Ω/–∫–º":"min/km"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:"14px",color:"#4361EE"},children:"üö¥"}),e.jsxs("span",{style:{fontSize:"13px",fontWeight:"600",color:"#4361EE"},children:[ft(s.distance,s.duration)," km/h"]})]})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",marginTop:"6px"},children:[s.avgHeartRate>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#FF6B9D"},children:[e.jsx("span",{style:{fontSize:"14px"},children:"‚ù§Ô∏è"}),e.jsxs("span",{style:{fontSize:"13px",fontWeight:"600"},children:[s.avgHeartRate," bpm"]})]}),s.avgCadence>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#4CC9F0"},children:[e.jsx("span",{style:{fontSize:"14px"},children:s.type==="RUNNING"?"üèÉ‚Äç‚ôÇÔ∏è":s.type==="CYCLING"?"üö¥‚Äç‚ôÇÔ∏è":"üèä‚Äç‚ôÇÔ∏è"}),e.jsxs("span",{style:{fontSize:"13px",fontWeight:"600"},children:[s.avgCadence," ",s.type==="RUNNING"?"spm":s.type==="CYCLING"?"rpm":"spm"]})]}),s.rpe&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#FFA500"},children:[e.jsx("span",{style:{fontSize:"14px"},children:"üî•"}),e.jsxs("span",{style:{fontSize:"13px",fontWeight:"600"},children:["RPE ",s.rpe,"/10"]})]})]}),s.notes&&e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"6px",marginTop:"8px",paddingTop:"8px",borderTop:`1px solid ${t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.08)"}`},children:[e.jsx("span",{style:{color:l.get("subText",t),fontSize:"14px",marginTop:"2px"},children:"üìù"}),e.jsx("span",{style:{fontSize:"12px",color:l.get("subText",t),fontStyle:"italic",lineHeight:1.4},children:s.notes.length>60?s.notes.substring(0,60)+"...":s.notes})]})]})]})]}),e.jsx(S.div,{whileTap:{scale:.9},onClick:r=>{r.stopPropagation(),Ue(j(new Date(h)),i),Y(!0)},style:{padding:"8px",cursor:"pointer",opacity:.7,alignSelf:"flex-start",marginTop:"4px"},children:e.jsx(Xe,{size:16,color:l.get("subText",t)})})]})},i)),e.jsx("div",{style:{display:"flex",height:"55px"}})]})]})]}),e.jsxs(q,{children:[ke&&e.jsxs(U,{theme:t,onClose:()=>Y(!1),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:x(t).modalTitle,children:n===0?"–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?":"Delete session?"}),e.jsx("p",{style:{color:l.get("subText",t),fontSize:"14px"},children:n===0?"–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å":"This action cannot be undone"})]}),e.jsxs("div",{style:{display:"flex",width:"100%",gap:"15px"},children:[e.jsx(H,{icon:e.jsx(X,{size:24}),label:n===0?"–ù–µ—Ç":"No",onClick:()=>Y(!1),theme:t}),e.jsx(H,{icon:e.jsx(Z,{size:24}),label:n===0?"–î–∞":"Yes",onClick:He,theme:t,isPrimary:!0,isDestructive:!0})]})]}),ze&&e.jsxs(U,{theme:t,onClose:()=>b(!1),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"25px"},children:[e.jsx("h3",{style:x(t).modalTitle,children:n===0?"–¢–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏":"Training Type"}),e.jsx("p",{style:{color:l.get("subText",t),fontSize:"14px"},children:n===0?"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è":"Select training type to add"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",width:"100%"},children:A.map(s=>e.jsxs(S.div,{whileTap:{scale:.98},onClick:()=>Ve(s.value),style:{height:"80px",borderRadius:"16px",backgroundColor:t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"8px",color:s.color,cursor:"pointer",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[s.icon,e.jsx("span",{style:{fontSize:"14px"},children:s.label})]},s.value))})]}),De&&se==="GYM"&&e.jsxs(U,{theme:t,onClose:()=>{G(!1),b(!0)},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("p",{style:x(t).modalTitle,children:n===0?"–ù–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞":"New Session"}),e.jsx("div",{onClick:()=>{G(!1),b(!0)},style:{padding:"5px",cursor:"pointer"},children:e.jsx(X,{size:24,color:l.get("subText",t)})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–ü—Ä–æ–≥—Ä–∞–º–º–∞":"Program",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(v,{items:T.map(s=>s.label),value:de,onChange:xe,theme:t,width:"100%"})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–î–µ–Ω—å":"Day",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(v,{items:I.map(s=>s.label),value:pe,onChange:ge,theme:t,width:"100%"})})]}),e.jsx("div",{style:{marginTop:"15px"},children:e.jsx(H,{icon:e.jsx(Z,{size:24}),label:n===0?"–ù–∞—á–∞—Ç—å":"Start",onClick:Oe,theme:t,isPrimary:!0})})]}),Me&&se==="GYM"&&e.jsxs(U,{theme:t,onClose:()=>{W(!1),b(!0)},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("p",{style:x(t).modalTitle,children:n===0?"–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—à–ª—É—é":"Log Previous"}),e.jsx("div",{onClick:()=>{W(!1),b(!0)},style:{padding:"5px",cursor:"pointer"},children:e.jsx(X,{size:24,color:l.get("subText",t)})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–ü—Ä–æ–≥—Ä–∞–º–º–∞":"Program",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(v,{items:T.map(s=>s.label),value:de,onChange:xe,theme:t,width:"100%"})})]}),e.jsxs("div",{style:{marginBottom:"20px",width:"100%"},children:[e.jsx(z,{label:n===0?"–î–µ–Ω—å":"Day",theme:t}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(v,{items:I.map(s=>s.label),value:pe,onChange:ge,theme:t,width:"100%"})})]}),e.jsxs("div",{style:{backgroundColor:t==="light"?"rgba(0,0,0,0.03)":"rgba(255,255,255,0.03)",borderRadius:"20px",padding:"15px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",opacity:.7},children:[e.jsx(Ze,{}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},children:n===0?"–í—Ä–µ–º—è":"Time"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(z,{label:n===0?"–ù–∞—á–∞–ª–æ":"Start",theme:t}),e.jsxs("div",{style:{display:"flex",gap:"5px",width:"100%",justifyContent:"center"},children:[e.jsx(v,{items:ve,value:Math.floor(C/36e5),onChange:s=>B(ie,C,"h",s),theme:t,width:"60px"}),e.jsx("span",{style:{paddingTop:"25%",fontWeight:"bold"},children:":"}),e.jsx(v,{items:Ce,value:C/6e4%60,onChange:s=>B(ie,C,"m",s),theme:t,width:"60px",suffix:""})]})]}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(z,{label:n===0?"–ö–æ–Ω–µ—Ü":"End",theme:t}),e.jsxs("div",{style:{display:"flex",gap:"5px",width:"100%",justifyContent:"center"},children:[e.jsx(v,{items:ve,value:Math.floor(w/36e5),onChange:s=>B(oe,w,"h",s),theme:t,width:"60px"}),e.jsx("span",{style:{paddingTop:"25%",fontWeight:"bold"},children:":"}),e.jsx(v,{items:Ce,value:w/6e4%60,onChange:s=>B(oe,w,"m",s),theme:t,width:"60px",suffix:""})]})]})]})]}),e.jsx(H,{icon:e.jsx(Z,{size:24}),label:n===0?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å":"Save",onClick:()=>{if(!a.programs[u]){k(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞":"Error! The program not found",2e3,!1);return}if(a.programs[u].schedule.length===0){k(n===0?"–û—à–∏–±–∫–∞! –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—É—Å—Ç–∞—è":"Error! The program is empty",2e3,!1);return}if(w<=C){k(n===0?"–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–∑–∂–µ –Ω–∞—á–∞–ª–∞":"End time must be after start time",2e3,!1);return}et(h,u,N,C,w),W(!1),b(!1);const s=j(h),i=a.trainingLog[s].length-1;ee({mode:"redact",dayKey:s,dInd:i}),M("TrainingCurrent")},theme:t,isPrimary:!0})]})]})]})},U=({children:t,theme:o,onClose:n})=>e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:x(o).backdrop,onClick:n,children:e.jsxs(S.div,{variants:dt,initial:"hidden",animate:"visible",exit:"exit",style:x(o).bottomSheet,onClick:d=>d.stopPropagation(),children:[e.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:l.get("subText",o),borderRadius:"2px",margin:"0 auto 20px auto",opacity:.3}}),t]})}),z=({label:t,theme:o})=>e.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:l.get("subText",o),textTransform:"uppercase",marginBottom:"8px",textAlign:"center"},children:t}),H=({icon:t,label:o,onClick:n,theme:d,isPrimary:p,isDestructive:R})=>{let h=d==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",F=l.get("mainText",d);return p&&(h=R?l.get("minValColor",d):l.get("maxValColor",d),F="#fff"),e.jsxs(S.div,{whileTap:{scale:.98},onClick:n,style:{flex:1,height:"56px",borderRadius:"16px",backgroundColor:h,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",color:F,cursor:"pointer",fontWeight:"600",fontSize:"16px",boxShadow:p?"0 4px 12px rgba(0,0,0,0.15)":"none"},children:[t,o&&e.jsx("span",{children:o})]})};function V(t){a.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),a.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}const pt=(t,o)=>t==0?o==0?"–ù–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫":"No trainings":t==1?o==0?"1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞":"1 training":t>1&&t<5?t+(o==0?" —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏":" trainings"):t+(o==0?" —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫":" trainings");function xt(t,o){if(!t?.exercises)return o===0?" ‚Ä¢ 0 —É–ø—Ä.":" ‚Ä¢ 0 ex.";let n=0,d=0;for(const p of Object.values(t.exercises))n++,Array.isArray(p.sets)&&(d+=p.sets.length);return o===0?` ‚Ä¢ ${n} —É–ø—Ä. / ${d} –ø–æ–¥—Ö.`:` ‚Ä¢ ${n} ex. / ${d} sets`}const gt=(t,o)=>{if(!t)return o===0?"0 –º–∏–Ω":"0 min";const n=Math.floor(t/60/6e4),d=Math.floor(t/6e4%60);return n>0?o===0?`${n} —á ${d} –º–∏–Ω`:`${n}h ${d.toString().padStart(2,"0")}m`:o===0?`${d} –º–∏–Ω`:`${d} min`},ht=(t,o)=>{if(!t||t<=0||!o||o<=0)return null;const n=o/6e4/t,d=Math.floor(n),p=Math.round((n-d)*60);return`${d}:${p.toString().padStart(2,"0")}`},ft=(t,o)=>{if(!t||t<=0||!o||o<=0)return null;const n=o/6e4/60;return(t/n).toFixed(1)},yt=(t,o,n)=>t?o==="SWIMMING"?`${(t*1e3).toFixed(0)}${n===0?" –º":" m"}`:`${t.toFixed(1)}${n===0?" –∫–º":" km"}`:n===0?"0 –∫–º":"0 km",x=(t,o)=>({container:{backgroundColor:l.get("background",t),display:"flex",flexDirection:"column",alignItems:"center",height:"90vh",marginTop:"100px",width:"100vw",fontFamily:"Segoe UI, Roboto, sans-serif",overflowY:"scroll",paddingTop:"10px"},panel:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"500px",alignItems:"center",justifyContent:"start",position:"relative",zIndex:1},calendarHead:{padding:"15px 20px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",boxSizing:"border-box",marginTop:"20px"},headerWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",minWidth:"150px"},header:{fontFamily:"Segoe UI",fontSize:"20px",margin:0,fontWeight:"700",color:l.get("mainText",t),textTransform:"capitalize",whiteSpace:"nowrap"},navBtn:{padding:"8px",borderRadius:"12px",cursor:"pointer",backgroundColor:t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},table:{width:"100%",borderCollapse:"collapse",textAlign:"center"},cell:{boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"13vw",height:"13vw",maxHeight:"50px",maxWidth:"50px",borderRadius:"14px",fontSize:"16px",fontWeight:"600",fontFamily:"Segoe UI",transition:"all 0.2s ease-in-out",cursor:"pointer",margin:"auto",position:"relative"},journalBtn:{alignSelf:"center",margin:"10px 0",backgroundColor:t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)",color:l.get("mainText",t),padding:"10px 20px",borderRadius:"20px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},scrollView:{flex:1,width:"100%",padding:"10px 20px 80px 20px"},sessionCard:{backgroundColor:t==="light"?"#fff":"rgba(255,255,255,0.05)",borderRadius:"16px",padding:"5px",marginBottom:"12px",marginRight:"35px",boxShadow:t==="light"?"0 2px 8px rgba(0,0,0,0.05)":"none",border:`1px solid ${t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.05)"}`},backdrop:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:3e3},bottomSheet:{width:"100%",maxWidth:"500px",backgroundColor:l.get("background",t),borderTopLeftRadius:"28px",borderTopRightRadius:"28px",padding:"20px 25px 40px 25px",boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",position:"relative",zIndex:3001,backdropFilter:"blur(20px)",borderTop:`1px solid ${t==="light"?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)"}`},modalTitle:{fontSize:"20px",fontWeight:"bold",color:l.get("mainText",t),margin:0}});export{Dt as default,xt as getTrainingSummary};
