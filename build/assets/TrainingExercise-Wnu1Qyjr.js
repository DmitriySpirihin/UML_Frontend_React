import{A as b,t as ie,l as ne,Q as oe,f as le,j as t,C as s,b1 as w,aF as re,g as ae,a2 as de,X as ce,i as M,k as L,a0 as G,b2 as xe,b3 as fe,b4 as pe}from"./index-BhjCPbji.js";import{r as x}from"./recharts-Bg6K2Pzo.js";import{b as W,c as U}from"./index-CI-Tb_Ph.js";import{b as ue}from"./index-Dnhqxhe_.js";import{M as B}from"./MyInput-DI8XlE-X.js";const je=({needToAdd:d,setEx:T})=>{const[e,v]=x.useState("dark"),[n,q]=x.useState(b.prefs[0]),[p,Q]=x.useState(b.prefs[1]),[V,z]=x.useState(""),[f,N]=x.useState(-1),[m,A]=x.useState(-1),[H,O]=x.useState(""),[X,$]=x.useState(!1),[E,Y]=x.useState(!1),[_,R]=x.useState(!1),[S,I]=x.useState(""),[C,k]=x.useState(""),[u,j]=x.useState(!0),[h,D]=x.useState([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]);x.useEffect(()=>{const o=ie.subscribe(v),l=ne.subscribe(a=>{q(a==="ru"?0:1)});return()=>{l.unsubscribe(),o.unsubscribe()}},[]),x.useEffect(()=>{const o=oe.subscribe(z),l=le.subscribe(Q);return()=>{o.unsubscribe(),l.unsubscribe()}},[]);function J(o){y(null),N(f==o?-1:o),f===-1&&A(-1)}function K(o){y(null),A(m==o?-1:o)}function F(){y(null),z(""),D([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),I(""),k(""),j(!0)}function Z(){if(S.length<3){G(n===0?"Введите название упражнения, не менее 3 символов":"Set exercise name, at least 3 characters",2e3,!1);return}if(f<0||f>13){G(n===0?"Выберите группу мышц для упражнения":"Please select a muscle group for the exercise",2e3,!1);return}const o=[];for(let r=0;r<h.length;r++)h[r]&&o.push(r);y(null);const l=P(S),a=C.length>3?P(C):"";xe(f,o,[n===0?l:"Custom exercise",n===1?l:"Своё упражнение"],[n===0?a||"Своё упражнение":"Custom exercise",n===1?a||"Custom exercise":"Своё упражнение"],u),F()}function ee(){const o=b.exercises[m];if(o){I(o.name[n]);const l=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];o.addMgIds.length>0&&o.addMgIds.forEach(a=>{l[a]=!0}),D(l),k(o.description[n]),N(o.mgId),j(o.isBase),R(!0)}else G(n===0?"Упражнение не найдено":"Exercise not found",2e3,!1)}function te(){y(null);const o=[];for(let c=0;c<h.length;c++)h[c]&&o.push(c);const l=b.exercises[m],a=[...l.name];a[n]=P(S);const r=[...l.description];C.length>3?r[n]=P(C):r[n]=n===0?"Своё упражнение":"Custom exercise",pe(m,f,o,a,r,u),R(!1)}function se(){y(null),fe(m),A(-1),$(!1),F()}return t.jsxs("div",{style:i(e).container,children:[Object.keys(w.muscleIconsSrc[0]).map(o=>{const l=Number(o);return t.jsxs("div",{style:i(e).panel,children:[t.jsxs("div",{style:i(e,f===l,!1).groupPanel,onClick:()=>J(a=>a===l?-1:l),children:[f===l?t.jsx(W,{style:i(e).icon}):t.jsx(U,{style:i(e).icon}),w.get(l,n,e)]}),f===l?t.jsxs("div",{style:i(e).panel,children:[Object.entries(b.exercises).filter(([a,r])=>r.mgId===l&&r.show).sort(([a],[r])=>Number(a)-Number(r)).map(([a,r])=>{const c=Number(a);return t.jsxs("div",{style:i(e).panel,children:[t.jsxs("div",{style:{...i(e,!1,m===c).exercisePanel,width:"100%",flexDirection:"row"},onClick:()=>K(g=>g===c?-1:c),children:[m===c?t.jsx(W,{style:{...i(e).icon,marginLeft:"5%",width:"10px",marginTop:"7px"}}):t.jsx(U,{style:{...i(e).icon,marginLeft:"7%",width:"10px",marginTop:"7px"}}),t.jsx("p",{style:{...i(e,!1,!1,p).text,marginLeft:"6px"},children:r.name[n]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",justifyContent:"center"},children:[t.jsx("p",{style:{...i(e,!1,!1,p).subtext,marginRight:"5px",color:r.isBase?s.get("trainingBaseFont",e):s.get("trainingIsolatedFont",e)},children:r.isBase?n===0?"Базовое":"Base":n===0?"Изолированное":"Isolated"}),d&&t.jsx(re,{onClick:g=>{g.stopPropagation(),T(c)},style:{...i(e).icon,fontSize:"20px",marginRight:"35px"}})]})]}),m===c?t.jsxs("div",{style:{...i(e).panel,flexDirection:"row",marginLeft:"6%",width:"86%"},children:[t.jsx("p",{style:i(e,!1,!1,p).subtext,children:r.description[n]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:"auto",justifyContent:"center"},children:[E&&t.jsx(ae,{onClick:g=>{g.stopPropagation(),O(r.name[n]),ee()},style:{...i(e).icon,fontSize:"18px"}}),E&&t.jsx(de,{onClick:g=>{g.stopPropagation(),O(r.name[n]),$(!0)},style:{...i(e).icon,fontSize:"18px"}}),t.jsx(ue,{onClick:g=>{g.stopPropagation(),Y(!E)},style:{...i(e).icon,fontSize:"18px"}})]})]}):null]},c)}).sort((a,r)=>a.key-r.key),t.jsx("div",{style:{...i(e).exercisePanel,width:"98%",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:t.jsx(ce,{onClick:()=>{y(null),z("AddExercisePanel")},style:{...i(e).icon,fontSize:"24px"}})})]}):null]},l)}),t.jsx("div",{style:{height:"10vh"},children:t.jsx("p",{style:i(e,!1,!1,p).text,children:"_"})}),V==="AddExercisePanel"&&t.jsx("div",{style:i(e).addContainer,children:t.jsxs("div",{style:{...i(e).additionalPanel,height:"75%"},children:[t.jsx("p",{style:i(e,!1,!1,p).text,children:n===0?"Добавь свое упражнение":"Add your exercise"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:s.get("background",e),height:"85%",width:"100%",alignItems:"center"},children:[t.jsx(B,{maxL:40,w:"80%",h:"10%",theme:e,onChange:o=>I(o),placeHolder:n===0?"Название упражнения":"Exercise name"}),t.jsx(B,{maxL:300,w:"80%",h:"20%",theme:e,onChange:o=>k(o),placeHolder:n===0?"Описание упражнения":"Exercise description"}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"80%",justifyContent:"space-around",alignItems:"center",marginTop:"5%"},children:[t.jsx("div",{onClick:()=>{j(!0)},style:{width:"40%",border:u?`2px solid ${s.get("trainingBaseFont",e)}`:`1px solid ${s.get("icons",e)}`,borderRadius:"16px",padding:"4px",fontSize:"16px",color:u?s.get("trainingBaseFont",e):s.get("subText",e)},children:n===0?"Базовое":"Base"}),t.jsx("div",{onClick:()=>{j(!1)},style:{width:"40%",border:u?`1px solid ${s.get("icons",e)}`:`2px solid ${s.get("trainingIsolatedFont",e)}`,borderRadius:"16px",padding:"4px",fontSize:"16px",color:u?s.get("subText",e):s.get("trainingIsolatedFont",e)},children:n===0?"Изолированое":"Isolated"})]}),t.jsxs("div",{style:{...i(e).text,display:"flex",flexDirection:"row",width:"90%",justifyContent:"space-around",alignItems:"center",marginTop:"5%",borderBottom:`1px solid ${s.get("border",e)}`},children:[n===0?"Основная мышца:":"Main muscle:",w.get(f,n,e,!1,"40%")]}),t.jsx("div",{style:i(e,!1,!1,p).text,children:n===0?"Дополнительные мышцы":"Additional muscles"}),t.jsx("div",{style:{display:"grid",alignContent:"center",justifyContent:"center",gridTemplateColumns:"1fr 1fr 1fr ",gridAutoRows:"2fr",gap:"2px",height:"33%",width:"90%",marginTop:"10px",borderBottom:`1px solid ${s.get("border",e)}`},children:w.names[n].map((o,l)=>f==l?null:t.jsx("div",{onClick:()=>{D(a=>a.map((r,c)=>c===l?!r:r))},style:{...i(e,!1,!1,p).subtext,width:"90%",border:`1px solid ${h[l]?s.get("medium",e):s.get("border",e)}`,borderRadius:"12px",color:h[l]?s.get("medium",e):s.get("border",e)},children:o},l))})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[t.jsx(M,{onClick:()=>F(),style:{...i(e).icon,fontSize:"32px",marginBottom:"8px"}}),t.jsx(L,{onClick:()=>Z(),style:{...i(e).icon,fontSize:"32px",marginBottom:"8px"}})]})]})}),X&&t.jsxs("div",{style:{position:"fixed",top:"50vh",left:"7.5vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"85vw",height:"40vw",marginTop:"5px",borderRadius:"24px",border:`1px solid ${s.get("border",e)}`,backgroundColor:s.get("background",e),zIndex:"7000"},children:[t.jsx("p",{style:{...i(e,!1,!1,p).text,padding:"20px",marginLeft:"10%",marginRight:"5%"},children:n===0?`Вы уверены, что хотите удалить упражнение? ${H}`:`Are you sure you want to delete the exercise? ${H}`}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[t.jsx(M,{onClick:()=>$(!1),style:{...i(e).icon,fontSize:"32px",marginBottom:"8px"}}),t.jsx(L,{onClick:()=>se(),style:{...i(e).icon,fontSize:"32px",marginBottom:"8px"}})]})]}),_&&t.jsx("div",{style:i(e).addContainer,children:t.jsxs("div",{style:{...i(e).additionalPanel,height:"75%"},children:[t.jsx("p",{style:i(e,!1,!1,p).text,children:n===0?"Добавь свое упражнение":"Add your exercise"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",backgroundColor:s.get("background",e),height:"85%",width:"100%",alignItems:"center"},children:[t.jsx(B,{maxL:40,w:"80%",h:"10%",value:S,theme:e,onChange:o=>I(o),placeHolder:n===0?"Название упражнения":"Exercise name"}),t.jsx(B,{maxL:300,w:"80%",h:"20%",value:C,theme:e,onChange:o=>k(o),placeHolder:n===0?"Описание упражнения":"Exercise description"}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"80%",justifyContent:"space-around",alignItems:"center",marginTop:"5%"},children:[t.jsx("div",{onClick:()=>{j(!0)},style:{width:"40%",border:u?`2px solid ${s.get("trainingBaseFont",e)}`:`1px solid ${s.get("icons",e)}`,borderRadius:"16px",padding:"4px",fontSize:"16px",color:u?s.get("trainingBaseFont",e):s.get("subText",e)},children:n===0?"Базовое":"Base"}),t.jsx("div",{onClick:()=>{j(!1)},style:{width:"40%",border:u?`1px solid ${s.get("icons",e)}`:`2px solid ${s.get("trainingIsolatedFont",e)}`,borderRadius:"16px",padding:"4px",fontSize:"16px",color:u?s.get("subText",e):s.get("trainingIsolatedFont",e)},children:n===0?"Изолированое":"Isolated"})]}),t.jsxs("div",{style:{...i(e).text,display:"flex",flexDirection:"row",width:"90%",justifyContent:"space-around",alignItems:"center",marginTop:"5%",borderBottom:`1px solid ${s.get("border",e)}`},children:[n===0?"Основная мышца:":"Main muscle:",w.get(f,n,e,!1,"40%")]}),t.jsx("div",{style:i(e,!1,!1,p).text,children:n===0?"Дополнительные мышцы":"Additional muscles"}),t.jsx("div",{style:{display:"grid",alignContent:"center",justifyContent:"center",gridTemplateColumns:"1fr 1fr 1fr",gridAutoRows:"2fr",gap:"2px",height:"33%",width:"90%",marginTop:"10px",borderBottom:`1px solid ${s.get("border",e)}`},children:w.names[n].map((o,l)=>f==l?null:t.jsx("div",{onClick:()=>{D(a=>a.map((r,c)=>c===l?!r:r))},style:{...i(e,!1,!1,p).subtext,width:"90%",border:`1px solid ${h[l]?s.get("medium",e):s.get("border",e)}`,borderRadius:"12px",color:h[l]?s.get("medium",e):s.get("border",e)},children:o},l))})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"60%",justifyContent:"space-between"},children:[t.jsx(M,{onClick:()=>R(!1),style:{...i(e).icon,fontSize:"32px",marginBottom:"8px"}}),t.jsx(L,{onClick:()=>te(),style:{...i(e).icon,fontSize:"32px",marginBottom:"8px"}})]})]})})]})},i=(d,T,e,v)=>({container:{backgroundColor:s.get("background",d),display:"flex",flexDirection:"column",overflowY:"scroll",justifyContent:"start",alignItems:"center",height:"78vh",paddingTop:"5vh",width:"100vw",fontFamily:"Segoe UI"},groupPanel:{display:"flex",flexDirection:"row",width:"98vW",height:"6vh",backgroundColor:T?s.get("trainingGroupSelected",d):s.get("trainingGroup",d),borderTop:`1px solid ${s.get("border",d)}`,alignItems:"center",justifyContent:"left",alignContent:"space-between"},exercisePanel:{display:"flex",flexDirection:"column",width:"90vW",height:"5vh",backgroundColor:e?s.get("trainingGroupSelected",d):s.get("background",d),alignItems:"center",justifyContent:"left"},panel:{display:"flex",flexDirection:"column",width:"100vW",alignItems:"center"},text:{textAlign:"left",fontSize:v===0?"13px":"15px",color:s.get("mainText",d),marginBottom:"12px"},subtext:{textAlign:"left",fontSize:v===0?"11px":"13px",color:s.get("subText",d),marginBottom:"12px"},icon:{fontSize:"20px",color:s.get("icons",d),marginLeft:"20px"},addContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},additionalPanel:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",borderRadius:"24px",border:`1px solid ${s.get("border",d)}`,backgroundColor:s.get("simplePanel",d),boxShadow:`4px 4px 6px ${s.get("shadow",d)}`,width:"100%",height:"100vw"}});function y(d){b.prefs[2]==0,b.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}const P=d=>d&&d.charAt(0).toUpperCase()+d.slice(1);export{je as default};
