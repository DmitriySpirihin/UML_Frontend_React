import{A as c,U as S,p as X,u as Z,t as _,l as ee,f as te,v as ie,w as ne,j as e,b as I,N as se,C as l,m as x,a as E,x as oe,y as ae,z as re,B as le,D as ce,E as de,G as pe,n as xe,H as ue,I as ge,J as fe,K as he,L as be,i as ye,O as me,P as Fe}from"./index-CA0uwWNq.js";import{r as a,R as we}from"./recharts-Bg6K2Pzo.js";import{getCurrentCycleAnalysis as je}from"./TrainingAnaliticsMain-PDavopu7.js";import"./Premium-CtQPb6PP.js";import{s as ve}from"./PaymentService-Cb1w4bn7.js";import"./TrainingAnaliticsTabs-nwhksCXB.js";import"./index-Vp1IFF3y.js";const $e=()=>{const[i,n]=a.useState(c.prefs[1]===0?"dark":"light"),[o,r]=a.useState(c.prefs[0]),[d,m]=a.useState(0),[f,h]=a.useState(0),[u,b]=a.useState(0),[p,j]=a.useState(!1),[k,T]=a.useState(""),[F,W]=a.useState(""),[R,H]=a.useState(""),[D,U]=a.useState(!1),[B,M]=a.useState(!1),[$,P]=a.useState(!1),[O,V]=a.useState(S.hasPremium),[De,L]=a.useState(S.isValidation),[g,v]=a.useState(c.menuCardsStates||{}),z=[{id:"MainCard",icon:null,title:"",subtitle:"",color:"#00ff6600"},{id:"HabitsMain",icon:e.jsx(re,{}),title:o===0?"–ü—Ä–∏–≤—ã—á–∫–∏":"Habits",subtitle:o===0?"–¢—Ä–µ–∫–µ—Ä –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã":"Discipline tracker",color:"#FFD700"},{id:"TrainingMain",icon:e.jsx(le,{}),title:o===0?"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏":"Workout",subtitle:o===0?"–î–Ω–µ–≤–Ω–∏–∫ —Å–∏–ª—ã":"Gym diary",color:"#FF4D4D"},{id:"MentalMain",icon:e.jsx(ce,{}),title:o===0?"–ú–æ–∑–≥":"Brain",subtitle:o===0?"–†–∞–∑–≤–∏—Ç–∏–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞":"Intelligence",color:"#4DA6FF"},{id:"RecoveryMain",icon:e.jsx(de,{}),title:o===0?"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ":"Recovery",subtitle:o===0?"–ú–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏ –æ—Ç–¥—ã—Ö":"Meditation & Rest",color:"#4DFF88"},{id:"SleepMain",icon:e.jsx(pe,{}),title:o===0?"–°–æ–Ω":"Sleep",subtitle:o===0?"–ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞":"Quality analysis",color:"#A64DFF"},{id:"ToDoMain",icon:e.jsx(xe,{}),title:o===0?"–ó–∞–¥–∞—á–∏":"To-Do",subtitle:o===0?"–°–ø–∏—Å–æ–∫ –¥–µ–ª":"Task list",color:"#FFA64D"}];a.useEffect(()=>{c.menuCardsStates&&Object.keys(c.menuCardsStates).length>0&&v(c.menuCardsStates)},[]),a.useEffect(()=>{Object.keys(g).length>0&&(c.menuCardsStates=g,(async()=>{try{await ae(),console.log("Menu states saved successfully")}catch(s){console.error("Failed to save menu states",s)}})())},[g]),a.useEffect(()=>{const t=X.subscribe(V),s=Z.subscribe(L);return()=>{t.unsubscribe(),s.unsubscribe()}},[]),a.useEffect(()=>{const t=_.subscribe(n),s=ee.subscribe(C=>{r(C==="ru"?0:1)}),y=te.subscribe(m);return()=>{t.unsubscribe(),s.unsubscribe(),y.unsubscribe()}},[]),a.useEffect(()=>{const t=ie.subscribe(T),s=ne.subscribe(U);return()=>{t.unsubscribe(),s.unsubscribe()}},[]),a.useEffect(()=>{D&&(M(!1),j(!0))},[D]);const A=t=>{t?b(u+1):h(f+1),f===5&&u===5&&(M(!0),h(0),b(0),S.hasPremium=!0,S.premiumEndDate="2099-01-01",he(!0))},G=t=>{t.length===16&&fe(t)},N=t=>{v(s=>({...s,[t]:{...s[t],pinned:!s[t]?.pinned,hidden:s[t]?.hidden||!1}}))},Y=t=>{v(s=>({...s,[t]:{...s[t],hidden:!0,pinned:!1}}))},J=()=>{v(t=>{const s={...t};return Object.keys(s).forEach(y=>{s[y]={...s[y],hidden:!1}}),s})},K=(()=>{let t=[...z];return t=t.filter(s=>!g[s.id]?.hidden),t.sort((s,y)=>{const C=g[s.id]?.pinned?1:0;return(g[y.id]?.pinned?1:0)-C}),t})(),Q=z.some(t=>g[t.id]?.hidden),q={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.09}}};return e.jsxs(e.Fragment,{children:[p&&e.jsxs("div",{style:{position:"absolute",display:"flex",alignItems:"center",flexDirection:"column",top:"10vh",left:"0",width:"100vw",height:"40vh",backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e4},children:[e.jsx("div",{style:{display:"flex",overflowY:"scroll",borderRadius:"12px",width:"85vw",height:"15vh",fontSize:"12px",fontFamily:"Segoe UI",border:"1px solid #333",color:"white",padding:"10px"},children:k}),e.jsx("textarea",{style:{borderRadius:"12px",width:"85vw",height:"10vh",fontSize:"12px",background:"#111",color:"white",marginTop:"10px"},value:R,onChange:t=>H(t.target.value)}),e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"10px"},children:[e.jsx("input",{style:{borderRadius:"12px",width:"50vw",height:"3vh",background:"#222",color:"white"},type:"text",onChange:t=>W(t.target.value)}),e.jsx("button",{onClick:()=>{F==="TrainingMain"?I("TrainingMain"):se.sendMessage(F,R)},children:"Submit"})]}),e.jsx("button",{onClick:()=>j(!1),style:{marginTop:"10px"},children:"Close"})]}),e.jsx(Re,{isOpen:$,onClose:()=>P(!1),onSend:ve,theme:i,lang:o}),e.jsxs("div",{style:w(i).container,children:[e.jsx("div",{style:{height:"16vh"}}),B&&e.jsx("input",{style:{width:"85vw",height:"2vh",fontSize:"12px",borderRadius:"12px",zIndex:1001,marginBottom:"10px"},type:"password",onChange:t=>G(t.target.value)}),e.jsxs("div",{style:w(i).scrollView,children:[e.jsx("div",{style:{height:"2vh",width:"100%"},onClick:()=>{A(!0)}}),e.jsx(x.div,{variants:q,initial:"hidden",animate:"show",style:w(i).grid,children:e.jsx(E,{mode:"popLayout",children:K.map((t,s)=>e.jsx(Ce,{item:t,theme:i,hasPremium:O,index:s,fSize:d,lang:o,isPinned:g[t.id]?.pinned,onPin:()=>N(t.id),onHide:()=>Y(t.id),setShowReferralModal:P},t.id))})}),Q&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},onClick:J,style:{marginTop:"20px",padding:"10px 20px",display:"flex",alignItems:"center",gap:"8px",background:l.get("simplePanel",i),borderRadius:"20px",cursor:"pointer",fontSize:"12px",color:l.get("subText",i)},children:[e.jsx(oe,{})," ",o===0?"–í–µ—Ä–Ω—É—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã":"Restore hidden sections"]}),e.jsx("div",{style:{height:"10vh",width:"100%"},onClick:()=>{A(!1)}})]})]})]})};function Se({theme:i,lang:n,onClick:o}){const r=i==="dark";return e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileTap:{scale:.96},onClick:o,style:{width:"88%",height:"88%",borderRadius:"16px",background:r?"rgba(0, 229, 255, 0.08)":"#FFFFFF",border:`1px solid ${r?"rgba(0, 229, 255, 0.3)":"rgba(0, 229, 255, 0.5)"}`,margin:"5px",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",position:"relative",overflow:"hidden"},children:[e.jsx(Fe,{size:18,color:"#00E5FF"}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"600",fontSize:"15px",color:r?"#E0F7FA":"#333",letterSpacing:"0.3px"},children:n===0?"AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç":"AI Assistant"})]})}function ke({theme:i,lang:n,onClick:o}){const r=i==="dark";return e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileTap:{scale:.96},onClick:o,style:{width:"88%",height:"88%",borderRadius:"16px",background:r?"rgba(242, 255, 0, 0.08)":"#FFFFFF",border:`1px solid ${r?"rgba(255, 238, 0, 0.3)":"rgba(255, 247, 0, 0.5)"}`,margin:"5px",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",position:"relative",overflow:"hidden"},children:[e.jsx(me,{size:18,color:"#ffd500"}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"600",fontSize:"15px",color:r?"#E0F7FA":"#333",letterSpacing:"0.3px"},children:n===0?"–î—Ä—É–≥ = –ø—Ä–µ–º–∏—É–º":"Friend = premium"})]})}function Ce({item:i,theme:n,index:o,fSize:r,lang:d,isPinned:m,onPin:f,onHide:h,setShowReferralModal:u}){const b=Te(o-1),p=n==="dark",j={position:"relative",width:"100%",height:i.icon?"80px":"50px",display:"flex",alignItems:"center",padding:i.icon?"0 20px":"0px",boxSizing:"border-box",borderRadius:i.icon?"24px":"0px",overflow:"hidden",marginBottom:"12px",backgroundColor:i.icon?p?l.get("simplePanel",n)+"99":"#FFFFFF":"transparent",backdropFilter:i.icon&&p?"blur(40px)":"none",border:i.icon?m?`1px solid ${i.color}`:`1px solid ${p?l.get("border",n)+"30":"#E5E7EB"}`:"none",boxShadow:i.icon?p?"0 8px 20px 0 rgba(0, 0, 0, 0.4)":"0 4px 10px rgba(0, 0, 0, 0.04)":"none"},k={width:"48px",height:"48px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",flexShrink:0,backgroundColor:p?l.get("background",n)+"80":l.get("background",n),color:i.color,border:p?"1px solid rgba(255,255,255,0.05)":"1px solid rgba(0,0,0,0.03)"};return e.jsx(x.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,x:-100,height:0,marginBottom:0},whileTap:{scale:.97},drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(T,{offset:F})=>{F.x<-80&&(h(),window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")),F.x>80&&(f(),window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("medium"))},onClick:()=>{i.icon!==null&&(I(i.id),Ie(null))},style:j,children:i.icon?e.jsxs("div",{style:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[e.jsx("div",{style:k,children:we.cloneElement(i.icon,{size:22})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",flexGrow:1,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx("h4",{style:{...w(n,r).title,color:l.get("mainText",n),margin:0,fontWeight:p?"900":"700"},children:i.title}),m&&e.jsx(be,{size:12,color:i.color,style:{transform:"rotate(45deg)"}})]}),e.jsx("div",{style:{...w(n,r).subtitle,color:l.get("subText",n),opacity:p?.6:.8},children:i.subtitle})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",marginLeft:"8px"},children:[b!==""&&e.jsx("div",{style:{padding:"4px 10px",backgroundColor:p?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",borderRadius:"12px",fontSize:"13px",fontWeight:"700",color:l.get("mainText",n),marginRight:"8px"},children:b}),e.jsx(ye,{size:14,color:l.get("subText",n),style:{opacity:.3}})]})]}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignContent:"center",justifyItems:"center"},children:[e.jsx(ke,{theme:n,lang:d,onClick:()=>u(!0)}),e.jsx(Se,{theme:n,lang:d,onClick:()=>{I("RobotMain")}})]})})}const w=(i,n)=>({container:{backgroundColor:l.get("background",i),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",height:"100vh",width:"100vw",fontFamily:"Segoe UI",overflow:"hidden"},scrollView:{width:"100vw",maxHeight:"90vh",overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center"},grid:{width:"92%",display:"flex",flexDirection:"column",gap:"4px",marginTop:"5px"},title:{fontFamily:"Segoe UI",fontSize:n===0?"19px":"21px",letterSpacing:"0.2px"},subtitle:{fontFamily:"Segoe UI",fontWeight:"500",fontSize:n===0?"12px":"14px",marginTop:"2px"},text:{fontFamily:"Segoe UI",fontSize:n===0?"10px":"12px",color:l.get("subText",i)},mainText:{fontFamily:"Segoe UI",fontSize:n===0?"14px":"16px",color:l.get("mainText",i)}});function Ie(i){c.prefs[2]==0,c.prefs[3]==0&&window.Telegram?.WebApp?.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.impactOccurred("light")}function Te(i){if(i===0)return c.choosenHabits.length>0?c.choosenHabits.length:"";if(i===1){const n=je().currentTonnage;return n>0?(n/1e3).toFixed(1)+(c.prefs[0]===0?"—Ç":"t"):""}return""}const Re=({isOpen:i,onClose:n,onSend:o,theme:r,lang:d})=>{const f=r==="dark"?l.get("simplePanel",r):"#FFFFFF",h=l.get("mainText",r),u=l.get("subText",r);return e.jsx(E,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",zIndex:2e3}}),e.jsxs(x.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:f,borderTopLeftRadius:"32px",borderTopRightRadius:"32px",padding:"24px",zIndex:2001,boxShadow:"0 -10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"5px",borderRadius:"10px",backgroundColor:u,opacity:.3,marginBottom:"20px"}}),e.jsx(x.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",boxShadow:"0 10px 20px rgba(255, 215, 0, 0.3)"},children:e.jsx(ue,{size:40,color:"#FFF"})}),e.jsx("h2",{style:{fontFamily:"Segoe UI",fontSize:"24px",fontWeight:"800",color:h,margin:"0 0 10px 0",textAlign:"center"},children:d===0?"–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞":"Invite a Friend"}),e.jsx("p",{style:{fontFamily:"Segoe UI",fontSize:"15px",fontWeight:"500",color:u,margin:"0 0 30px 0",textAlign:"center",lineHeight:"1.5",maxWidth:"90%"},children:d===0?"–û—Ç–ø—Ä–∞–≤—å —Å—Å—ã–ª–∫—É –¥—Ä—É–≥—É. –ö–æ–≥–¥–∞ –æ–Ω –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—Å—è, –≤—ã –æ–±–∞ –ø–æ–ª—É—á–∏—Ç–µ 1 –º–µ—Å—è—Ü Premium –±–µ—Å–ø–ª–∞—Ç–Ω–æ! –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥—Ä—É–≥ + 1 –º–µ—Å—è—Ü Premium –±–µ—Å–ø–ª–∞—Ç–Ω–æ! üéÅ":"Send a link to a friend. When they join, you both get 1 month of Premium for free! Each new friend + 1 month of Premium for free! üéÅ"}),e.jsxs("div",{style:{width:"100%",display:"flex",gap:"12px",flexDirection:"column"},children:[e.jsxs(x.button,{whileTap:{scale:.96},onClick:()=>{o(),n()},style:{width:"100%",padding:"16px",borderRadius:"16px",border:"none",background:"#007AFF",color:"#FFF",fontSize:"16px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(ge,{size:20}),d===0?"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ":"Send Invitation"]}),e.jsx(x.button,{whileTap:{scale:.96},onClick:n,style:{width:"100%",padding:"14px",borderRadius:"16px",border:"none",background:"transparent",color:u,fontSize:"15px",fontWeight:"600",cursor:"pointer"},children:d===0?"–ü–æ–∑–∂–µ":"Maybe later"})]})]})]})})};export{$e as default};
