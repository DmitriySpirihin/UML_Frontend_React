import{A as d,t as Pe,f as Ge,ac as $e,l as Fe,C as a,j as e,M as he,a2 as be,d as we,ab as pe,m as ee,ad as Me,a as Ne,U as We,q as Le,p as Oe,ae as Ue,g as ve,o as ye,af as Se,a6 as Ve,ag as Ye,s as qe}from"./index-DNaLme5S.js";import{R as xe,r}from"./recharts-C3psbGwv.js";import{I as te,u as Xe,a as Ke,b as ge}from"./Icons-B1ia0j-W.js";import{F as fe}from"./index-D-UjzEWI.js";import{T as _e}from"./index-B0uowZUi.js";import{T as Je,a as Qe}from"./TimerOffTwoTone-CWdxfIfi.js";import{H as Ze}from"./HoverInfoButton-BPcpdnbd.js";import{S as et}from"./Slider-CmNAroxC.js";const ue=new Date().toISOString().split("T")[0],Ie=new Audio("Audio/Click.wav"),tt=new Audio("Audio/Skip.wav"),Ce=new Audio("Audio/IsDone.wav");let st,ot,yt;const S=(t,g=0)=>{const f=t==="light"||t==="speciallight",b=f?"#F2F4F6":a.get("background",t),j=f?"#FFFFFF":a.get("simplePanel",t),y=f?"rgba(0,0,0,0.0)":`1px solid ${a.get("border",t)}`,c=f?"0 20px 40px -10px rgba(0,0,0,0.1), 0 10px 20px -5px rgba(0,0,0,0.04)":"0 30px 60px -12px rgba(0,0,0,0.5)";return{container:{width:"100vw",height:"98vh",marginTop:"26px",display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"center",fontFamily:"Segoe UI",backgroundColor:b,transition:"background-color 0.3s ease"},scrollView:{width:"100%",paddingBottom:"50px",overflowY:"auto",marginTop:"12vh",display:"flex",flexDirection:"column"},cP:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"28px",border:y,backgroundColor:j,boxShadow:c,width:"90%",maxWidth:"380px",padding:"25px",gap:"20px"},confirmContainer:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},selectPanel:{backgroundColor:j,borderRadius:"24px",border:y,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexWrap:"wrap",width:"85vw",maxHeight:"50vh",overflowY:"auto",padding:"20px",gap:"10px",justifyContent:"center",zIndex:6e3,boxShadow:c},mainText:{fontSize:"17px",fontWeight:"600",color:a.get("mainText",t),textAlign:"center",marginBottom:"10px"},subText:{textAlign:"center",fontSize:"14px",color:a.get("subText",t),marginBottom:"5px"},buttonsRow:{width:"100%",display:"flex",flexDirection:"row",gap:"15px",marginTop:"10px"},btnCancel:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:f?"#E5E5EA":"rgba(255,255,255,0.1)",color:f?"#000":"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},btnSave:{flex:1,padding:"14px",borderRadius:"16px",border:"none",cursor:"pointer",backgroundColor:"#007AFF",color:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"600",fontSize:"15px"},icon:{color:a.get("icons",t),fontSize:"24px"}}},je=t=>({Здоровье:["Здоровье","Health"],Health:["Здоровье","Health"],Развитие:["Развитие","Growth"],Growth:["Развитие","Growth"],Продуктивность:["Продуктивность","Productivity"],Productivity:["Продуктивность","Productivity"],"Отношения и отдых":["Отношения и отдых","Relationships & recreation"],"Relationships & recreation":["Отношения и отдых","Relationships & recreation"],"Отказ от вредного":["Отказ от вредного","Bad habits to quit"],"Bad habits to quit":["Отказ от вредного","Bad habits to quit"]})[t]||["Здоровье","Health"],St=()=>{const[t,g]=xe.useState("dark"),[f,b]=xe.useState([]),[j,y]=xe.useState([]),[c,D]=r.useState(d.prefs[0]),[p,F]=r.useState(0),[m,w]=r.useState(d.choosenHabits.length>0),[$,q]=r.useState(0),[C,M]=r.useState(0),[n,u]=r.useState({show:!1,type:-1,hId:0,gId:0,setGoals:null,hInfo:null}),[z,N]=r.useState(""),[k,W]=r.useState(""),[v,E]=r.useState(""),[L,se]=r.useState(""),[oe,X]=r.useState(!1),[R,K]=r.useState("Здоровье"),[ce,_]=r.useState(null),[J,O]=r.useState(""),[Q,I]=r.useState(!1);r.useEffect(()=>{if(n.type===0&&(W(G().find(s=>s.id===n.hId)?.name[c]||""),E(G().find(s=>s.id===n.hId)?.description[c]||""),se(G().find(s=>s.id===n.hId)?.iconName||""),K(G().find(s=>s.id===n.hId)?.category[0]||"Здоровье")),n.type===4){if(n.gId<=0)return;n.setGoals(s=>{const o=[...s];return[o[n.gId-1],o[n.gId]]=[o[n.gId],o[n.gId-1]],d.choosenHabitsGoals[n.hId]=o,o})}else n.type===5&&n.setGoals(s=>{if(n.gId>=s.length-1)return s;const o=[...s];return[o[n.gId],o[n.gId+1]]=[o[n.gId+1],o[n.gId]],d.choosenHabitsGoals[n.hId]=o,o})},[n]),r.useEffect(()=>{const s=Pe.subscribe(g),o=Ge.subscribe(F),l=$e.subscribe(I);return()=>{s.unsubscribe(),o.unsubscribe(),l.unsubscribe()}},[]),r.useEffect(()=>{const s=Fe.subscribe(o=>{D(o==="ru"?0:1)});return()=>s.unsubscribe()},[]),r.useEffect(()=>{b(d.choosenHabits)},[]),r.useEffect(()=>{if(f.length>0){const s=new Set;f.forEach(o=>{const l=G().find(h=>h.id===o);l&&!s.has(l.category[0])&&s.add(l.category[0])}),y(Array.from(s))}},[f]);const de=(s,o,l,h,T)=>{b(H=>{const P=new Set(H);return P.has(s)?H:(d.addHabit(s,o,l,h,T),[...P,s])}),w(d.choosenHabits.length>0)},V=s=>{if(f.includes(s)){d.removeHabit(s),b(H=>H.filter(P=>P!==s));const h=(G().find(H=>H.id===s)?.name||["",""])[c]||(c===0?"Привычка":"Habit"),T=c===0?`Привычка: '${h}' удалена`:`Habit: '${h}' deleted`;pe(T,2e3,!0),w(d.choosenHabits.length>0)}},B=()=>{switch(n.type){case 0:d.CustomHabits||(d.CustomHabits=[]);const s=d.CustomHabits.findIndex(l=>l.id===n.hId),o=je(R);if(s!==-1)d.CustomHabits=d.CustomHabits.map((l,h)=>h===s?{...l,name:[k.trim(),k.trim()],description:[v.trim(),v.trim()],iconName:L,category:o}:l);else{const l=we.find(h=>h.id===n.hId);if(l){const h={...l,name:[k.trim(),k.trim()],description:[v.trim(),v.trim()],iconName:L,category:o,isCustom:!0};d.CustomHabits=[...d.CustomHabits,h]}}b(l=>[...l]),u(l=>({...l,show:!1})),n.hInfo&&n.hInfo({name:[k,k],descr:[v,v],icon:L}),M(l=>l+1);break;case 1:z.length>0?(n.setGoals(l=>[...l,{text:z,isDone:!1}]),d.addHabitGoal(n.hId,{text:z,isDone:!1}),u(l=>({...l,show:!1}))):pe(c===0?"Введите цель":"Enter goal",2e3,!1);break;case 2:z.length>0?(n.setGoals(l=>l.map((h,T)=>T===n.gId?{...h,text:z.trim()}:h)),d.choosenHabitsGoals[n.hId][n.gId].text=z,u(l=>({...l,show:!1}))):pe(c===0?"Введите цель":"Enter goal",2e3,!1);break;case 3:n.setGoals(l=>l.filter((h,T)=>T!==n.gId)),d.choosenHabitsGoals[n.hId].splice(n.gId,1),u(l=>({...l,show:!1}));break}};st=V,ot=de;const Y=t==="light"||t==="speciallight",Z=Y?"#F2F4F6":a.get("background",t);return e.jsxs("div",{style:{...S(t).container,backgroundColor:Z},children:[e.jsx(Ze,{tab:"HabitsMain"}),Q&&e.jsx("div",{style:S(t).confirmContainer,children:e.jsxs("div",{style:S(t).cP,children:[e.jsx("div",{style:S(t,p).mainText,children:J}),e.jsxs("div",{style:S(t).buttonsRow,children:[e.jsxs("button",{style:S(t).btnCancel,onClick:()=>I(!1),children:[e.jsx(he,{size:20,style:{marginRight:5}})," ",c===0?"Нет":"No"]}),e.jsxs("button",{style:{...S(t).btnSave,backgroundColor:"#FF453A"},onClick:()=>{V(ce),I(!1)},children:[e.jsx(be,{size:20,style:{marginRight:5}})," ",c===0?"Да":"Yes"]})]})]})}),!m&&e.jsx("div",{style:{...S(t).panel,justifyContent:"center",alignItems:"center",marginTop:"40%"},children:e.jsx("p",{style:{...S(t).subText,fontSize:p===0?"11px":"13px",margin:"10%",marginTop:"20%",whiteSpace:"pre-line",color:a.get("subText",t)},children:rt(c)})}),m&&e.jsxs("div",{style:S(t).scrollView,children:[nt({theme:t,habitsCards:f,categories:j,setCP:u,setCurrentId:q,fSize:p,setNeedConfirmation:I,setConfirmMessage:O,setHabitToDelete:_}),e.jsx("div",{style:{marginBottom:"150px"}})]},C),n.show&&e.jsx("div",{style:S(t).confirmContainer,children:e.jsxs("div",{style:{...S(t).cP,width:"90%"},children:[e.jsxs("div",{style:S(t).mainText,children:[n.type===1&&(c===0?"Новая цель":"New goal"),n.type===2&&(c===0?"Изменить цель":"Edit goal"),n.type===3&&(c===0?"Удалить цель?":"Delete goal?"),n.type===0&&(c===0?"Настройки привычки":"Edit habit")]}),n.type===1&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:c===0?"Название цели...":"Goal title...",value:z,onChange:s=>N(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",t),outline:`solid 1px ${a.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),n.type===2&&e.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",marginBottom:12},children:e.jsx("input",{type:"text",placeholder:c===0?"Название цели...":"Goal title...",value:z,onChange:s=>N(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",t),outline:`solid 1px ${a.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}})}),n.type===0&&e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("div",{style:{overflowX:"auto",display:"flex",gap:"8px",paddingBottom:"5px",scrollbarWidth:"none"},children:["Здоровье","Развитие","Продуктивность","Отношения и отдых","Отказ от вредного"].map(s=>e.jsx("div",{onClick:()=>K(s),style:{padding:"8px 14px",borderRadius:"12px",whiteSpace:"nowrap",cursor:"pointer",backgroundColor:R===s?a.get("scrollFont",t):Y?"#F2F2F7":"rgba(255,255,255,0.05)",color:R===s?"#FFF":a.get("subText",t),fontSize:"12px",fontWeight:"700",transition:"0.2s all"},children:c===0?s:je(s)[1]},s))}),e.jsx("input",{type:"text",placeholder:c===0?"Название":"Name",value:k,onChange:s=>W(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",t),outline:`solid 1px ${a.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsx("input",{type:"text",placeholder:c===0?"Описание (опц.)":"Description (opt.)",value:v,onChange:s=>E(s.target.value),style:{flex:1,border:"none",background:"transparent",fontSize:"15px",color:a.get("mainText",t),outline:`solid 1px ${a.get("scrollFont",t)}`,borderRadius:"16px",padding:"12px"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:Y?"#F2F2F7":"rgba(255,255,255,0.05)",borderRadius:"14px",cursor:"pointer"},onClick:()=>X(!oe),children:[e.jsx("span",{style:{fontSize:"14px",color:a.get("subText",t)},children:c===0?"Иконка":"Icon"}),e.jsx("div",{style:{color:a.get("habitIcon",t)},children:te.getIcon(L,{size:28})})]})]}),e.jsxs("div",{style:S(t).buttonsRow,children:[e.jsxs("button",{style:S(t).btnCancel,onClick:()=>u(s=>({...s,show:!1})),children:[e.jsx(he,{size:22,style:{marginRight:"6px"}})," ",c===0?"Отмена":"Cancel"]}),e.jsxs("button",{style:{...S(t).btnSave,backgroundColor:n.type===3?"#FF453A":"#007AFF"},onClick:()=>{B()},children:[e.jsx(be,{size:22,style:{marginRight:"6px"}})," ",n.type===3?c===0?"Удалить":"Delete":c===0?"Готово":"Save"]})]})]})}),oe&&e.jsx("div",{style:S(t).confirmContainer,onClick:()=>X(!1),children:e.jsxs("div",{style:{...S(t).selectPanel},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"10px",color:a.get("subText",t),fontSize:"13px",fontWeight:"600"},children:c===0?"ВЫБЕРИТЕ ИКОНКУ":"SELECT ICON"}),Object.entries(te.ic).map(([s])=>e.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:Y?"#F2F2F7":"rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>{se(s),X(!1)},children:te.getIcon(s,{size:30,style:{color:a.get("habitIcon",t)}})},s))]})})]})};function G(){const t=d.CustomHabits||[];return t.concat(we.filter(g=>!t.some(f=>f.id===g.id)))}function nt({theme:t,habitsCards:g,categories:f,setCP:b,setCurrentId:j,fSize:y,setNeedConfirmation:c,setConfirmMessage:D,setHabitToDelete:p}){return f.map(F=>{const m=g.map(w=>G().find($=>$.id===w)).filter(w=>w&&w.category[0]===F);return m.length===0?null:e.jsx(at,{text:m[0].category,theme:t,isNegative:F==="Отказ от вредного",children:m.map(w=>e.jsx(it,{id:w.id,theme:t,setCP:b,setCurrentId:j,fSize:y,setConfirmMessage:D,setNeedConfirmation:c,setHabitToDelete:p},w.id))},F)})}function it({id:t=0,theme:g,setCP:f,setCurrentId:b,fSize:j,setNeedConfirmation:y,setConfirmMessage:c,setHabitToDelete:D}){const[p,F]=r.useState(d.habitsByDate[ue]?.[t]),[m,w]=r.useState(d.prefs[0]),[$,q]=r.useState(We.hasPremium),C=G().find(i=>i.id===t);if(!C)return null;const[M,n]=r.useState({name:C?.name||["",""],descr:C?.description||["",""],icon:C?.iconName||"default"}),u=C.category[0]==="Отказ от вредного",z=Le(t),N=120,k=-N,[W,v]=r.useState(!0),[E,L]=r.useState(!1),[se,oe]=r.useState(!1),[X,R]=r.useState(d.choosenHabitsGoals[t]),[K,ce]=r.useState(0),[_,J]=r.useState(!1),[O,Q]=r.useState(!!u),[I,de]=r.useState(u?864e5:6e4),[V,B]=r.useState(u?Math.round(Date.now()-new Date(d.choosenHabitsLastSkip[t])):6e4),[Y,Z]=r.useState(0),s=u?"#FF3B30":C.color||"#32D74B",o=g==="light"||g==="speciallight";let l=o?"#FFFFFF":a.get("simplePanel",g)+"99",h=o?"#1D1D1F":a.get("mainText",g),T=o?"#8E8E93":a.get("subText",g),H=o?"#FFFFFF":"rgba(70, 70, 70, 0.2)",P=s,ne=o?"transparent":`1px solid ${a.get("border",g)}80`,ke=o?"0 12px 24px -6px rgba(0,0,0,0.08), 0 4px 8px -3px rgba(0,0,0,0.04)":"0 25px 50px -12px rgba(0,0,0,0.5), inset 0 1px 0 0 rgba(255,255,255,0.1)";u&&(l=o?"#FFF5F5":"rgba(255, 59, 48, 0.08)",ne=o?"rgba(255, 59, 48, 0.1)":"1px solid rgba(255, 59, 48, 0.2)",H="rgba(255, 59, 48, 0.15)"),p===1?(l=o?"#E8F5E9":"rgba(20, 60, 30, 0.85)",h=o?"#1E5E25":"#ffffff",T=o?"#2E7D32":"rgba(255,255,255,0.7)",H=o?"#FFFFFF":"rgba(255,255,255,0.2)",P=o?"#2E7D32":"#ffffff",ne="transparent"):p===-1&&(l=o?"#FFEBEE":"rgba(60, 20, 20, 0.85)",h=o?"#B71C1C":"#ffffff",T=o?"#C62828":"rgba(255,255,255,0.7)",H=o?"#FFFFFF":"rgba(255,255,255,0.2)",P=o?"#C62828":"#ffffff",ne="transparent"),r.useEffect(()=>{const i=Oe.subscribe(q);return()=>i.unsubscribe()},[]),r.useEffect(()=>{if(O){let i=0;const x=setInterval(()=>{i+=50;const A=(V+i)/I*100;Z(A),i===1e3&&B(re=>{const U=re+1e3;return i=0,!u&&U>=I?(Ce.play(),clearInterval(x),F(1),B(0),Q(!1),Z(0)):U>=I&&p<1&&F(1),U})},50);return()=>clearInterval(x)}},[V,O,I]),r.useEffect(()=>{const i=Fe.subscribe(x=>w(x==="ru"?0:1));return()=>i.unsubscribe()},[]),r.useEffect(()=>{d.changeStatus(ue,t,p)},[p]);const Te=()=>C.isCustom&&C.iconName?te.getIcon(C.iconName,{size:22}):te.getHabitIcon(C.name?C.name[0]:"default",{size:22}),He=Xe(0),ie=Ke(He,[-1,1],[k,N]),De=(i,x)=>{u?x.offset.x<k&&W&&(ae(!1),ge(ie,0,{type:"tween",duration:.2}),v(!1)):Math.abs(x.offset.x)>N&&W&&((p<1&&x.offset.x>0||p>-1&&x.offset.x<0)&&ae(x.offset.x>0),ge(ie,0,{type:"tween",duration:.2}),v(!1))},ze=()=>{W&&ge(ie,0,{type:"tween",duration:.2}),v(!0)},ae=i=>{let x=0;i?x=1:p===0?x=-1:p===1?(x=u?-1:0,u&&(B(0),d.choosenHabitsLastSkip[t]=Date.now())):p===-1&&(x=-1,u&&(B(0),d.choosenHabitsLastSkip[t]=Date.now())),d.habitsByDate[ue][t]=x,x===1?le(Ce):x===-1&&le(tt),F(x)},me=()=>{b(t),le(Ie);const i=!E;L(i),qe(i?t:null)};r.useEffect(()=>{const i=Ue.subscribe(x=>L(x===t));return()=>i.unsubscribe()},[t]),r.useEffect(()=>{v(!_)},[_]);const Ee=()=>{p<1&&!u&&(Q(!0),B(0))},Ae=()=>{u||(Q(!1),Z(0),B(0))},Re=i=>{D(i),y(!0),c(d.prefs[0]===0?"⚠️ Вы уверены?":"⚠️ Are you sure?")};return e.jsxs(ee.div,{id:t,style:{display:"flex",flexDirection:"column",width:"95%",margin:"5px",overflow:"hidden",position:"relative",borderRadius:"24px",backgroundColor:l,backdropFilter:o?"none":"blur(40px)",border:o?"none":ne,boxShadow:ke,x:ie},onClick:i=>{const x=document.getElementById(t);(x.clientHeight<80||i.nativeEvent.pageY-(x.getBoundingClientRect().top+window.scrollY)<80)&&me()},drag:W?"x":!1,dragConstraints:{left:k,right:p>0||u?0:N},onDrag:De,onDragEnd:ze,whileTap:{scale:.99},animate:{height:E?"auto":"80px"},transition:{type:"spring",stiffness:200,damping:20},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,height:"3px",width:`${Y}%`,backgroundColor:s,borderRadius:"24px 0 0 0"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",minHeight:"80px",width:"100%",padding:"15px 20px",boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:H,color:p===1?"#fff":P,marginRight:"16px",flexShrink:0,alignSelf:"flex-start",marginTop:E?"5px":"0"},children:Te()}),e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"10px",textTransform:"uppercase",fontWeight:"700",letterSpacing:"0.5px",color:h,opacity:.5,marginBottom:"4px"},children:C.category[m]}),e.jsx("span",{style:{fontFamily:"Segoe UI",fontWeight:"700",fontSize:"18px",color:h,whiteSpace:E?"normal":"nowrap",overflow:E?"visible":"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:M.name[m]}),O&&e.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:p===1?o?"#2E7D32":"#FFF":s,marginTop:"4px",opacity:.9},children:lt(V,I,m,u)})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",paddingLeft:"10px",alignSelf:"center"},children:[!u&&e.jsxs(e.Fragment,{children:[!O&&p===0&&e.jsx(Je,{onClick:i=>{i.stopPropagation(),J(!0)},style:{color:a.get("icons",g),opacity:.4,fontSize:"24px",marginRight:"15px"}}),O&&e.jsx(Qe,{onClick:i=>{i.stopPropagation(),Ae()},style:{color:s,fontSize:"24px",marginRight:"15px"}}),e.jsx("div",{onClick:i=>{i.stopPropagation(),ae(!0)},style:{width:"30px",height:"30px",borderRadius:"50%",border:p!==0?"none":`2px solid ${o?"#E5E5EA":"#3A3A3C"}`,backgroundColor:p===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:p===1&&e.jsx(fe,{size:16,color:"#FFF"})})]}),u&&e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(255, 69, 58, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ve,{size:16,color:"#FF453A"})})]})]}),E&&e.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:.1},style:{padding:"0 20px 20px 20px"},children:[e.jsx("div",{style:{height:"1px",width:"100%",backgroundColor:o?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",marginBottom:"15px"}}),M.descr[m]&&e.jsx("div",{style:{color:T,fontSize:"14px",marginBottom:"20px",lineHeight:"1.4"},children:M.descr[m]}),$?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:X?.map((i,x)=>e.jsxs(ee.div,{whileTap:{scale:.98},style:{display:"flex",alignItems:"center",width:"90%",padding:"14px 16px",borderRadius:"16px",backgroundColor:o?"#FFFFFF":"rgba(255,255,255,0.05)",border:o?"1px solid rgba(0,0,0,0.05)":"none",boxShadow:o?"0 2px 8px rgba(0,0,0,0.03)":"none"},children:[e.jsx("div",{style:{fontSize:"14px",flexGrow:1,fontWeight:"500",color:i.isDone?o?"#AEAEB2":"#636366":h,textDecoration:i.isDone?"line-through":"none"},children:i.text}),se&&K===x&&e.jsxs("div",{style:{display:"flex",marginRight:"10px"},children:[e.jsx(ye,{onClick:()=>f(A=>({...A,show:!0,type:2,hId:t,gId:x,setGoals:R})),style:{fontSize:"14px",margin:"0 6px",color:a.get("icons",g),opacity:.7}}),e.jsx(Se,{onClick:()=>f(A=>({...A,show:!0,type:3,hId:t,gId:x,setGoals:R})),style:{fontSize:"14px",margin:"0 6px",color:a.get("icons",g),opacity:.7}})]}),e.jsx("div",{onClick:()=>{oe(A=>!(A&&K===x)),ce(x),b(t)},children:e.jsx(_e,{style:{fontSize:"16px",color:a.get("icons",g),opacity:.4,marginRight:"12px"}})}),e.jsx("div",{onClick:()=>R(A=>{const re=A.map((U,Be)=>Be===x?{...U,isDone:!U.isDone}:U);return d.choosenHabitsGoals[t]=re,re}),style:{width:"24px",height:"24px",borderRadius:"8px",border:i.isDone?"none":`2px solid ${o?"#E5E5EA":"#3A3A3C"}`,backgroundColor:i.isDone?s:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:i.isDone&&e.jsx(fe,{size:12,color:"#FFF"})})]},x))}),e.jsxs("div",{onClick:()=>f({show:!0,type:1,hId:t,gId:0,setGoals:R}),style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",cursor:"pointer",padding:"12px",borderRadius:"16px",border:`2px dashed ${s}66`,backgroundColor:`${s}10`},children:[e.jsx(Ve,{style:{fontSize:"12px",color:s}}),e.jsx("span",{style:{fontSize:"13px",marginLeft:"8px",color:s,fontWeight:"600"},children:m===0?"Добавить цель":"Add goal"})]}),e.jsx("div",{style:{marginTop:"25px",marginBottom:"10px",fontSize:"12px",fontWeight:"bold",color:a.get("subText",g),textTransform:"uppercase",letterSpacing:"0.5px"},children:m===0?"Достижения":"Achievements"}),d.choosenHabitsAchievements[t]?.map((i,x)=>e.jsx(dt,{index:x,milestone:i,habitId:t,isNegative:u,percent:z,theme:g,fSize:j,langIndex:m},x))]}):e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"15px",marginBottom:"15px",fontSize:"12px",fontWeight:"600",color:a.get("subText",g),border:`2px dashed ${a.get("subText",g)}66`,padding:"12px",borderRadius:"16px"},children:m===0?"Микро цели и достижения с премиум":"Micro goals and achievements with premium"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px",gap:"20px"},children:[e.jsx(ye,{onClick:()=>f(i=>({...i,show:!0,type:0,hId:t,gId:0,hInfo:n})),style:{fontSize:"18px",color:a.get("icons",g),opacity:.7}}),e.jsx(Se,{onClick:()=>Re(t),style:{fontSize:"18px",color:a.get("icons",g),opacity:.7}}),e.jsx(Ye,{style:{fontSize:"18px",color:a.get("icons",g),opacity:.7},onClick:()=>{me()}}),!u&&e.jsx("div",{onClick:()=>ae(!0),style:{width:"18px",height:"18px",borderRadius:"50%",border:p!==0?"none":`2px solid ${o?"#E5E5EA":"#3A3A3C"}`,backgroundColor:p===1?"#32D74B":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:p===1&&e.jsx(fe,{size:16,color:"#FFF"})})]})]}),_&&e.jsx("div",{style:{display:"flex",alignItems:"center",position:"absolute",borderRadius:"24px",width:"100%",height:"80px",top:0,zIndex:1001,backgroundColor:o?"#FFF":a.get("background",g)},onClick:i=>i.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",margin:"0 auto"},children:[e.jsx("div",{style:{color:a.get("mainText",g),fontWeight:"bold"},children:ct(I)}),e.jsx(et,{style:{width:"50%",color:s},min:1,max:59,value:I/6e4,valueLabelDisplay:"off",onChange:i=>{de(i.target.value*6e4),i.stopPropagation()}}),e.jsx(he,{onClick:i=>{i.stopPropagation(),J(!1)},style:{cursor:"pointer",color:a.get("icons",g),fontSize:"24px"}}),e.jsx(be,{onClick:i=>{i.stopPropagation(),Ee(),J(!1)},style:{cursor:"pointer",color:s,fontSize:"24px"}})]})})]})}function at({text:t=["Имя","Name"],children:g,theme:f}){const[b,j]=r.useState(!0),y=f==="light"||f==="speciallight",c=d.prefs[0];return e.jsxs("div",{style:{width:"100%",marginBottom:"20px"},children:[e.jsxs("div",{onClick:()=>{j(!b),le(Ie)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 25px",marginBottom:"10px",cursor:"pointer",userSelect:"none"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"800",fontFamily:"Segoe UI",color:y?"#1D1D1F":a.get("mainText",f)},children:t[c]}),e.jsx(ee.div,{animate:{rotate:b?0:-90},transition:{type:"spring",stiffness:300,damping:20},children:e.jsx(Me,{size:14,color:y?"#1D1D1F":"#FFF",style:{opacity:.4}})})]}),e.jsx(Ne,{initial:!1,children:b&&e.jsx(ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:200,damping:25},style:{overflow:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:g})})})]})}function rt(t){return t===0?`Вы еще не добавили ни одной привычки

 Вы можете выбрать из списка или добавить свою привычку...`:"You have not added any habits yet..."}function le(t){d.prefs[2]==0&&t!==null&&(t.paused||(t.pause(),t.currentTime=0),t.volume=.5,t.play()),d.prefs[3]==0&&Telegram.WebApp.HapticFeedback&&Telegram.WebApp.HapticFeedback.impactOccurred("light")}function lt(t,g,f,b){const j=b?t:g-t,y=Math.floor(j/1e3),c=Math.floor(y/86400),D=Math.floor(y%86400/3600),p=Math.floor(y%3600/60),F=y%60;return c>0?c+(f===0?"дн.":"d"):D>0?D.toString().padStart(2,"0")+":"+p.toString().padStart(2,"0"):p.toString().padStart(2,"0")+":"+F.toString().padStart(2,"0")}function ct(t){return Math.floor(t/6e4)+"m"}const dt=({milestone:t,index:g,habitId:f,theme:b,langIndex:j})=>{const y=d.choosenHabits.indexOf(f),c=d.choosenHabitsLastSkip[f],D=d.choosenHabitsStartDates[y],p=c||D,F=1440*60*1e3,m=p?Math.floor((Date.now()-p)/F):0,$=[30,50,100][g]||30,q=m<$,C=$-m,M=j===0?`${C} days left to unlock`:`Осталось ${C} дн. до открытия`;return e.jsx("div",{style:{fontSize:"13px",color:a.get("subText",b),marginLeft:"2px",marginBottom:"6px",display:"flex",alignItems:"center",gap:"6px"},children:q?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",opacity:.6},children:[e.jsx("div",{style:{width:"12px",height:"12px",border:`1px solid ${a.get("subText",b)}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"9px",fontWeight:"bold"},children:"i"}),e.jsx("span",{style:{fontSize:"11px"},children:M})]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{size:12,color:a.get("icons",b),style:{opacity:.8}}),t[j]]})})};export{ot as addHabitFn,yt as currentId,St as default,ct as parsedTimeSimple,st as removeHabitFn};
